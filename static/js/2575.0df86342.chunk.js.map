{"version":3,"sources":["components/admin-settings/backups.js","components/confirm-modal/index.js","../node_modules/@stdlib/math/base/special/round/lib/index.js","../node_modules/@stdlib/math/base/special/round/lib/round.js","../node_modules/react-bootstrap/esm/Table.js"],"names":["BackupsPage","props","createBackup","backup","setState","showDeleteModal","state","selectedBackup","deleteBackup","_id","this","getBackups","admin","backups","t","striped","bordered","hover","map","x","idx","size","round","key","filename","createdAt","aria-label","href","server","target","rel","placement","overlay","id","variant","style","marginRight","className","onClick","askToDeleteSelectedBackupFactory","Fragment","renderBackupList","handleBackupCreation","title","message","color","close","toggleDeleteModal","show","onConfirm","deleteSelectedBackup","Component","withTranslation","ConfirmModal","onHide","as","defaultProps","module","exports","Math","_excluded","Table","_ref","ref","bsPrefix","borderless","responsive","decoratedBsPrefix","classes","table","responsiveClass"],"mappings":"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","file":"static/js/2575.0df86342.chunk.js","sourcesContent":["/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport round from '@stdlib/math/base/special/round';\nimport ConfirmModal from 'components/confirm-modal';\nimport server from 'constants/server';\n\n\n// MAIN //\n\nclass BackupsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tselectedBackup: null,\n\t\t\tshowDeleteModal: false\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.getBackups();\n\t}\n\n\thandleBackupCreation = () => {\n\t\tthis.props.createBackup();\n\t}\n\n\taskToDeleteSelectedBackupFactory = ( backup ) => {\n\t\treturn () => {\n\t\t\tthis.setState({\n\t\t\t\tshowDeleteModal: !this.state.showDeleteModal,\n\t\t\t\tselectedBackup: backup\n\t\t\t});\n\t\t};\n\t}\n\n\tdeleteSelectedBackup= () => {\n\t\tthis.setState({\n\t\t\tshowDeleteModal: false\n\t\t}, async () => {\n\t\t\tawait this.props.deleteBackup( this.state.selectedBackup._id );\n\t\t});\n\t}\n\n\ttoggleDeleteModal = () => {\n\t\tthis.setState({\n\t\t\tshowDeleteModal: !this.state.showDeleteModal\n\t\t});\n\t}\n\n\trenderBackupList() {\n\t\tif ( !this.props.admin.backups ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Table striped bordered hover>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>{t('common:filename')}</th>\n\t\t\t\t\t\t<th>{t('common:size')}</th>\n\t\t\t\t\t\t<th>{t('common:date')}</th>\n\t\t\t\t\t\t<th>{t('common:actions')}</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{this.props.admin.backups.map( ( x, idx ) => {\n\t\t\t\t\tif ( !x ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tconst size = round( x.size / ( 1024 * 1024 ) );\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr key={idx} >\n\t\t\t\t\t\t\t<td>{x.filename}</td>\n\t\t\t\t\t\t\t<td>{`${size} MB`}</td>\n\t\t\t\t\t\t\t<td>{x.createdAt}</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<a aria-label={t('download-backup')} href={`${server}/${x.filename}`} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"download-backup-tooltip\">{t('download-backup')}</Tooltip>}>\n\t\t\t\t\t\t\t\t\t\t<Button aria-label={t('download-backup')} size=\"sm\" variant=\"secondary\" style={{ marginRight: 8 }} >\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-cloud-download-alt\" ></i>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"delete-backup-tooltip\">{t('delete-backup')}</Tooltip>}>\n\t\t\t\t\t\t\t\t\t<Button aria-label={t('delete-backup')} size=\"sm\" variant=\"danger\" onClick={this.askToDeleteSelectedBackupFactory( x )} >\n\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-trash-alt\" ></i>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</tbody>\n\t\t\t</Table>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"admin-settings-outer-container\" >\n\t\t\t\t\t<h1>{t('created-backups')}</h1>\n\t\t\t\t\t{this.renderBackupList()}\n\t\t\t\t\t<Button size=\"lg\" onClick={this.handleBackupCreation} >\n\t\t\t\t\t\t<i className=\"fas fa-cloud-upload-alt\" style={{ marginRight: 12 }}></i>\n\t\t\t\t\t\t{t('create-backup')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t{ this.state.showDeleteModal ? <ConfirmModal\n\t\t\t\t\ttitle={t('delete-backup')}\n\t\t\t\t\tmessage={<div>\n\t\t\t\t\t\t<p>{t('delete-backup-confirm')}</p>\n\t\t\t\t\t\t<span style={{ color: 'red' }}>{this.state.selectedBackup.filename}</span>\n\t\t\t\t\t</div>}\n\t\t\t\t\tclose={this.toggleDeleteModal}\n\t\t\t\t\tshow={this.state.showDeleteModal}\n\t\t\t\t\tonConfirm={this.deleteSelectedBackup}\n\t\t\t\t/> : null }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nBackupsPage.propTypes = {\n\tadmin: PropTypes.object.isRequired,\n\tcreateBackup: PropTypes.func.isRequired,\n\tdeleteBackup: PropTypes.func.isRequired,\n\tgetBackups: PropTypes.func.isRequired\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'admin_settings', 'common' ] )( BackupsPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\n\n\n// MAIN //\n\nconst ConfirmModal = ( props ) => (\n\t<Modal show={props.show} onHide={props.close}>\n\t\t<Modal.Header>\n\t\t\t<Modal.Title as=\"h3\">{props.title}</Modal.Title>\n\t\t</Modal.Header>\n\t\t<Modal.Body>\n\t\t\t{props.message}\n\t\t</Modal.Body>\n\t\t<Modal.Footer>\n\t\t\t<Button onClick={props.close}>{props.t('cancel')}</Button>\n\t\t\t<Button variant=\"danger\" onClick={props.onConfirm}>{props.t('confirm')}</Button>\n\t\t</Modal.Footer>\n\t</Modal>\n);\n\n\n// PROPERTIES //\n\nConfirmModal.propTypes = {\n\tclose: PropTypes.func,\n\tmessage: PropTypes.node,\n\tonConfirm: PropTypes.func,\n\tshow: PropTypes.bool,\n\ttitle: PropTypes.string\n};\n\nConfirmModal.defaultProps = {\n\tclose() {},\n\tmessage: '',\n\tonConfirm() {},\n\tshow: false,\n\ttitle: ''\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'common' ] )( ConfirmModal );\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // TODO: implementation\n\n/**\n* Round a numeric value to the nearest integer.\n*\n* @module @stdlib/math/base/special/round\n*\n* @example\n* var round = require( '@stdlib/math/base/special/round' );\n*\n* var v = round( -4.2 );\n* // returns -4.0\n*\n* v = round( -4.5 );\n* // returns -4.0\n*\n* v = round( -4.6 );\n* // returns -5.0\n*\n* v = round( 9.99999 );\n* // returns 10.0\n*\n* v = round( 9.5 );\n* // returns 10.0\n*\n* v = round( 9.2 );\n* // returns 9.0\n*\n* v = round( 0.0 );\n* // returns 0.0\n*\n* v = round( -0.0 );\n* // returns -0.0\n*\n* v = round( Infinity );\n* // returns Infinity\n*\n* v = round( -Infinity );\n* // returns -Infinity\n*\n* v = round( NaN );\n* // returns NaN\n*/\n// MODULES //\n\nvar round = require('./round.js'); // EXPORTS //\n\n\nmodule.exports = round;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // TODO: implementation\n\n/**\n* Rounds a numeric value to the nearest integer.\n*\n* @param {number} x - input value\n* @returns {number} function value\n*\n* @example\n* var v = round( -4.2 );\n* // returns -4.0\n*\n* @example\n* var v = round( -4.5 );\n* // returns -4.0\n*\n* @example\n* var v = round( -4.6 );\n* // returns -5.0\n*\n* @example\n* var v = round( 9.99999 );\n* // returns 10.0\n*\n* @example\n* var v = round( 9.5 );\n* // returns 10.0\n*\n* @example\n* var v = round( 9.2 );\n* // returns 9.0\n*\n* @example\n* var v = round( 0.0 );\n* // returns 0.0\n*\n* @example\n* var v = round( -0.0 );\n* // returns -0.0\n*\n* @example\n* var v = round( Infinity );\n* // returns Infinity\n*\n* @example\n* var v = round( -Infinity );\n* // returns -Infinity\n*\n* @example\n* var v = round( NaN );\n* // returns NaN\n*/\n\nvar round = Math.round; // eslint-disable-line stdlib/no-builtin-math\n// EXPORTS //\n\nmodule.exports = round;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;"],"sourceRoot":""}