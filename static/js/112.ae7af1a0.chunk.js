(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{1625:function(e,t,i){"use strict";var n=i(9),r=i(23),o=i(483),s=i.n(o),a=i(485),l=i.n(a),c=i(515);function u(e,t,i){var n=(e-t)/(i-t)*100;return Math.round(1e3*n)/1e3}function f(e,t){var i,o=e.min,a=e.now,c=e.max,f=e.label,d=e.srOnly,h=e.striped,_=e.animated,m=e.className,p=e.style,g=e.variant,v=e.bsPrefix,b=Object(r.a)(e,["min","now","max","label","srOnly","striped","animated","className","style","variant","bsPrefix"]);return l.a.createElement("div",Object(n.a)({ref:t},b,{role:"progressbar",className:s()(m,v+"-bar",(i={},i["bg-"+g]=g,i[v+"-bar-animated"]=_,i[v+"-bar-striped"]=_||h,i)),style:Object(n.a)({width:u(a,o,c)+"%"},p),"aria-valuenow":a,"aria-valuemin":o,"aria-valuemax":c}),d?l.a.createElement("span",{className:"sr-only"},f):f)}var d=l.a.forwardRef((function(e,t){var i=e.isChild,o=Object(r.a)(e,["isChild"]);if(o.bsPrefix=Object(c.a)(o.bsPrefix,"progress"),i)return f(o,t);var u=o.min,d=o.now,h=o.max,_=o.label,m=o.srOnly,p=o.striped,g=o.animated,v=o.bsPrefix,b=o.variant,y=o.className,w=o.children,O=Object(r.a)(o,["min","now","max","label","srOnly","striped","animated","bsPrefix","variant","className","children"]);return l.a.createElement("div",Object(n.a)({ref:t},O,{className:s()(y,v)}),w?function(e,t){var i=0;return l.a.Children.map(e,(function(e){return l.a.isValidElement(e)?t(e,i++):e}))}(w,(function(e){return Object(a.cloneElement)(e,{isChild:!0})})):f({min:u,now:d,max:h,label:_,srOnly:m,striped:p,animated:g,bsPrefix:v,variant:b},t))}));d.displayName="ProgressBar",d.defaultProps={min:0,max:100,animated:!1,isChild:!1,srOnly:!1,striped:!1};t.a=d},3885:function(e,t,i){"use strict";i.r(t);var n=i(12),r=i(13),o=i(27),s=i(20),a=i(39),l=i(50),c=i(485),u=i.n(c),f=i(1048),d=i(571),h=i(1625),_=i(3886),m=i.n(_),p=i(3888),g=i.n(p),v=i(541),b=i.n(v),y=i(610),w=i.n(y),O=i(550),I=i.n(O),N=i(504),S=i(526),x=i(521);Object(x.a)("SpreadsheetUpload");var E=function(e){Object(s.a)(i,e);var t=Object(a.a)(i);function i(e){var r;return Object(n.a)(this,i),r=t.call(this,e),Object(l.a)(Object(o.a)(r),"handleFileUpload",(function(){r.setState({uploading:!0},(function(){var e=new FileReader,t=r.fileUpload.files[0];e.addEventListener("load",r.onFileRead,!1),e.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total;r.setState({percentCompleted:t})}}),!1),e.readAsText(t,"utf-8")}))})),Object(l.a)(Object(o.a)(r),"onFileRead",(function(e){var t,i,n=e.target.result,o=g()(n);t=w()(o)?",":o.delimiter;var s=(n=b()(n,"\r","")).indexOf("\n"),a=n.substring(0,s).split(t);r.state.header?(i=a,n=n.substring(s+1)):i=a.map((function(e,t){return"VAR_"+(t+1)})),r.setState({percentCompleted:0,uploading:!1}),m()(n,{delimiter:t,columns:i,cast:!0},(function(e,t){if(e)return r.context.addNotification({title:r.props.t("error-title"),message:"".concat(r.props.t("error-message"),": ").concat(e.message),level:"error",position:"tr"}),r.props.onUpload(e);r.props.onUpload(null,t)}))})),Object(l.a)(Object(o.a)(r),"ignoreDrag",(function(e){e.stopPropagation(),e.preventDefault()})),Object(l.a)(Object(o.a)(r),"onFileDrop",(function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer,i=new FileReader,n=null;if(t.items?"file"===t.items[0].kind&&(n=t.items[0].getAsFile()):n=t.files[0],n){if("text/csv"!==n.type)return r.context.addNotification({title:r.props.t("no-csv"),message:r.props.t("no-csv-message"),level:"error",position:"tr"});i.addEventListener("load",r.onFileRead,!1),i.readAsText(n,"utf-8")}})),r.state={percentCompleted:0,uploading:!1,header:!0},r}return Object(r.a)(i,[{key:"render",value:function(){var e=this,t=I()(100*this.state.percentCompleted);return u.a.createElement(d.a,null,u.a.createElement(d.a.Header,{as:"h2"},this.props.title||this.props.t("title")),u.a.createElement(d.a.Body,null,u.a.createElement("label",{htmlFor:"CSVUpload"},this.props.t("csv-upload-prompt"),":"),u.a.createElement("input",{id:"CSVUpload",type:"file",accept:".csv",onChange:this.handleFileUpload,ref:function(t){e.fileUpload=t},style:{margin:"auto"}}),u.a.createElement("p",null,this.props.t("or")),u.a.createElement("div",{onDrop:this.onFileDrop,onDragOver:this.ignoreDrag,onDragEnd:this.ignoreDrag,style:{minHeight:"150px",width:"250px",border:"1px solid blue",padding:"10px"}},u.a.createElement("span",null,this.props.t("drop-file"))),u.a.createElement(S.a,{legend:this.props.t("first-row-names"),defaultValue:!0,onChange:function(t){e.setState({header:t})}}),this.state.uploading?u.a.createElement(h.a,{now:t,label:"".concat(t,"%")}):null))}}]),i}(c.Component);E.defaultProps={onUpload:function(){},title:null},E.contextType=N.a,t.default=Object(f.a)("SpreadsheetUpload")(E)},3886:function(e,t,i){(function(t,n){var r=i(76),o=i(1233),s=i(711),a=i(184),l=i(1234),c=i(73),u=i(74),f=i(77),d=i(78),h=i(1235).Transform,_=i(3887),m={utf8:t.from([239,187,191]),utf16le:t.from([255,254])},p=function(e){"use strict";f(n,e);var i=d(n);function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(this,n),(e=i.call(this,l(l(l({},{readableObjectMode:!0}),t),{},{encoding:null}))).__originalOptions=t,e.__normalizeOptions(t),e}return u(n,[{key:"__normalizeOptions",value:function(e){var i={};for(var n in e)i[b(n)]=e[n];if(void 0===i.encoding||!0===i.encoding)i.encoding="utf8";else if(null===i.encoding||!1===i.encoding)i.encoding=null;else if("string"!==typeof i.encoding&&null!==i.encoding)throw new v("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,","got ".concat(JSON.stringify(i.encoding))],i);if(void 0===i.bom||null===i.bom||!1===i.bom)i.bom=!1;else if(!0!==i.bom)throw new v("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,","got ".concat(JSON.stringify(i.bom))],i);var r=null;if(void 0===i.cast||null===i.cast||!1===i.cast||""===i.cast)i.cast=void 0;else if("function"===typeof i.cast)r=i.cast,i.cast=!0;else if(!0!==i.cast)throw new v("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,","got ".concat(JSON.stringify(i.cast))],i);if(void 0===i.cast_date||null===i.cast_date||!1===i.cast_date||""===i.cast_date)i.cast_date=!1;else if(!0===i.cast_date)i.cast_date=function(e){var t=Date.parse(e);return isNaN(t)?e:new Date(t)};else if("function"!==typeof i.cast_date)throw new v("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,","got ".concat(JSON.stringify(i.cast_date))],i);var o=null;if(!0===i.columns)o=void 0;else if("function"===typeof i.columns)o=i.columns,i.columns=!0;else if(Array.isArray(i.columns))i.columns=O(i.columns);else{if(void 0!==i.columns&&null!==i.columns&&!1!==i.columns)throw new v("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an object, a function or true,","got ".concat(JSON.stringify(i.columns))],i);i.columns=!1}if(void 0===i.columns_duplicates_to_array||null===i.columns_duplicates_to_array||!1===i.columns_duplicates_to_array)i.columns_duplicates_to_array=!1;else if(!0!==i.columns_duplicates_to_array)throw new v("CSV_INVALID_OPTION_COLUMNS_DUPLICATES_TO_ARRAY",["Invalid option columns_duplicates_to_array:","expect an boolean,","got ".concat(JSON.stringify(i.columns_duplicates_to_array))],i);if(void 0===i.comment||null===i.comment||!1===i.comment||""===i.comment)i.comment=null;else if("string"===typeof i.comment&&(i.comment=t.from(i.comment,i.encoding)),!t.isBuffer(i.comment))throw new v("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,","got ".concat(JSON.stringify(i.comment))],i);var s=JSON.stringify(i.delimiter);if(Array.isArray(i.delimiter)||(i.delimiter=[i.delimiter]),0===i.delimiter.length)throw new v("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,","got ".concat(s)],i);if(i.delimiter=i.delimiter.map((function(e){if(void 0===e||null===e||!1===e)return t.from(",",i.encoding);if("string"===typeof e&&(e=t.from(e,i.encoding)),!t.isBuffer(e)||0===e.length)throw new v("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,","got ".concat(s)],i);return e})),void 0===i.escape||!0===i.escape?i.escape=t.from('"',i.encoding):"string"===typeof i.escape?i.escape=t.from(i.escape,i.encoding):null!==i.escape&&!1!==i.escape||(i.escape=null),null!==i.escape&&!t.isBuffer(i.escape))throw new Error("Invalid Option: escape must be a buffer, a string or a boolean, got ".concat(JSON.stringify(i.escape)));if(void 0===i.from||null===i.from)i.from=1;else{if("string"===typeof i.from&&/\d+/.test(i.from)&&(i.from=parseInt(i.from)),!Number.isInteger(i.from))throw new Error("Invalid Option: from must be an integer, got ".concat(JSON.stringify(i.from)));if(i.from<0)throw new Error("Invalid Option: from must be a positive integer, got ".concat(JSON.stringify(e.from)))}if(void 0===i.from_line||null===i.from_line)i.from_line=1;else{if("string"===typeof i.from_line&&/\d+/.test(i.from_line)&&(i.from_line=parseInt(i.from_line)),!Number.isInteger(i.from_line))throw new Error("Invalid Option: from_line must be an integer, got ".concat(JSON.stringify(e.from_line)));if(i.from_line<=0)throw new Error("Invalid Option: from_line must be a positive integer greater than 0, got ".concat(JSON.stringify(e.from_line)))}if(void 0===i.ignore_last_delimiters||null===i.ignore_last_delimiters)i.ignore_last_delimiters=!1;else if("number"===typeof i.ignore_last_delimiters)i.ignore_last_delimiters=Math.floor(i.ignore_last_delimiters),0===i.ignore_last_delimiters&&(i.ignore_last_delimiters=!1);else if("boolean"!==typeof i.ignore_last_delimiters)throw new v("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,","got ".concat(JSON.stringify(i.ignore_last_delimiters))],i);if(!0===i.ignore_last_delimiters&&!1===i.columns)throw new v("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],i);if(void 0===i.info||null===i.info||!1===i.info)i.info=!1;else if(!0!==i.info)throw new Error("Invalid Option: info must be true, got ".concat(JSON.stringify(i.info)));if(void 0===i.max_record_size||null===i.max_record_size||!1===i.max_record_size)i.max_record_size=0;else if(Number.isInteger(i.max_record_size)&&i.max_record_size>=0);else{if("string"!==typeof i.max_record_size||!/\d+/.test(i.max_record_size))throw new Error("Invalid Option: max_record_size must be a positive integer, got ".concat(JSON.stringify(i.max_record_size)));i.max_record_size=parseInt(i.max_record_size)}if(void 0===i.objname||null===i.objname||!1===i.objname)i.objname=void 0;else if(t.isBuffer(i.objname)){if(0===i.objname.length)throw new Error("Invalid Option: objname must be a non empty buffer");null===i.encoding||(i.objname=i.objname.toString(i.encoding))}else{if("string"!==typeof i.objname)throw new Error("Invalid Option: objname must be a string or a buffer, got ".concat(i.objname));if(0===i.objname.length)throw new Error("Invalid Option: objname must be a non empty string")}if(void 0===i.on_record||null===i.on_record)i.on_record=void 0;else if("function"!==typeof i.on_record)throw new v("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,","got ".concat(JSON.stringify(i.on_record))],i);if(null===i.quote||!1===i.quote||""===i.quote)i.quote=null;else if(void 0===i.quote||!0===i.quote?i.quote=t.from('"',i.encoding):"string"===typeof i.quote&&(i.quote=t.from(i.quote,i.encoding)),!t.isBuffer(i.quote))throw new Error("Invalid Option: quote must be a buffer or a string, got ".concat(JSON.stringify(i.quote)));if(void 0===i.raw||null===i.raw||!1===i.raw)i.raw=!1;else if(!0!==i.raw)throw new Error("Invalid Option: raw must be true, got ".concat(JSON.stringify(i.raw)));if(i.record_delimiter?Array.isArray(i.record_delimiter)||(i.record_delimiter=[i.record_delimiter]):i.record_delimiter=[],i.record_delimiter=i.record_delimiter.map((function(e){return"string"===typeof e&&(e=t.from(e,i.encoding)),e})),"boolean"===typeof i.relax);else{if(void 0!==i.relax&&null!==i.relax)throw new Error("Invalid Option: relax must be a boolean, got ".concat(JSON.stringify(i.relax)));i.relax=!1}if("boolean"===typeof i.relax_column_count);else{if(void 0!==i.relax_column_count&&null!==i.relax_column_count)throw new Error("Invalid Option: relax_column_count must be a boolean, got ".concat(JSON.stringify(i.relax_column_count)));i.relax_column_count=!1}if("boolean"===typeof i.relax_column_count_less);else{if(void 0!==i.relax_column_count_less&&null!==i.relax_column_count_less)throw new Error("Invalid Option: relax_column_count_less must be a boolean, got ".concat(JSON.stringify(i.relax_column_count_less)));i.relax_column_count_less=!1}if("boolean"===typeof i.relax_column_count_more);else{if(void 0!==i.relax_column_count_more&&null!==i.relax_column_count_more)throw new Error("Invalid Option: relax_column_count_more must be a boolean, got ".concat(JSON.stringify(i.relax_column_count_more)));i.relax_column_count_more=!1}if("boolean"===typeof i.skip_empty_lines);else{if(void 0!==i.skip_empty_lines&&null!==i.skip_empty_lines)throw new Error("Invalid Option: skip_empty_lines must be a boolean, got ".concat(JSON.stringify(i.skip_empty_lines)));i.skip_empty_lines=!1}if("boolean"===typeof i.skip_lines_with_empty_values);else{if(void 0!==i.skip_lines_with_empty_values&&null!==i.skip_lines_with_empty_values)throw new Error("Invalid Option: skip_lines_with_empty_values must be a boolean, got ".concat(JSON.stringify(i.skip_lines_with_empty_values)));i.skip_lines_with_empty_values=!1}if("boolean"===typeof i.skip_lines_with_error);else{if(void 0!==i.skip_lines_with_error&&null!==i.skip_lines_with_error)throw new Error("Invalid Option: skip_lines_with_error must be a boolean, got ".concat(JSON.stringify(i.skip_lines_with_error)));i.skip_lines_with_error=!1}if(void 0===i.rtrim||null===i.rtrim||!1===i.rtrim)i.rtrim=!1;else if(!0!==i.rtrim)throw new Error("Invalid Option: rtrim must be a boolean, got ".concat(JSON.stringify(i.rtrim)));if(void 0===i.ltrim||null===i.ltrim||!1===i.ltrim)i.ltrim=!1;else if(!0!==i.ltrim)throw new Error("Invalid Option: ltrim must be a boolean, got ".concat(JSON.stringify(i.ltrim)));if(void 0===i.trim||null===i.trim||!1===i.trim)i.trim=!1;else if(!0!==i.trim)throw new Error("Invalid Option: trim must be a boolean, got ".concat(JSON.stringify(i.trim)));if(!0===i.trim&&!1!==e.ltrim?i.ltrim=!0:!0!==i.ltrim&&(i.ltrim=!1),!0===i.trim&&!1!==e.rtrim?i.rtrim=!0:!0!==i.rtrim&&(i.rtrim=!1),void 0===i.to||null===i.to)i.to=-1;else{if("string"===typeof i.to&&/\d+/.test(i.to)&&(i.to=parseInt(i.to)),!Number.isInteger(i.to))throw new Error("Invalid Option: to must be an integer, got ".concat(JSON.stringify(e.to)));if(i.to<=0)throw new Error("Invalid Option: to must be a positive integer greater than 0, got ".concat(JSON.stringify(e.to)))}if(void 0===i.to_line||null===i.to_line)i.to_line=-1;else{if("string"===typeof i.to_line&&/\d+/.test(i.to_line)&&(i.to_line=parseInt(i.to_line)),!Number.isInteger(i.to_line))throw new Error("Invalid Option: to_line must be an integer, got ".concat(JSON.stringify(e.to_line)));if(i.to_line<=0)throw new Error("Invalid Option: to_line must be a positive integer greater than 0, got ".concat(JSON.stringify(e.to_line)))}this.info={comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},this.options=i,this.state={bomSkipped:!1,castField:r,commenting:!1,error:void 0,enabled:1===i.from_line,escaping:!1,escapeIsQuote:t.isBuffer(i.escape)&&t.isBuffer(i.quote)&&0===t.compare(i.escape,i.quote),expectedRecordLength:null===i.columns?0:i.columns.length,field:new _(20),firstLineToHeaders:o,info:Object.assign({},this.info),needMoreDataSize:Math.max.apply(Math,[null!==i.comment?i.comment.length:0].concat(a(i.delimiter.map((function(e){return e.length}))),[null!==i.quote?i.quote.length:0])),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new _(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:0===i.record_delimiter.length?2:Math.max.apply(Math,a(i.record_delimiter.map((function(e){return e.length})))),trimChars:[t.from(" ",i.encoding)[0],t.from("\t",i.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1}}},{key:"_transform",value:function(e,t,i){if(!0!==this.state.stop){var n=this.__parse(e,!1);void 0!==n&&(this.state.stop=!0),i(n)}}},{key:"_flush",value:function(e){!0!==this.state.stop&&e(this.__parse(void 0,!0))}},{key:"__parse",value:function(e,i){var n,r=this.options,o=r.bom,s=r.comment,a=r.escape,c=r.from_line,u=r.info,f=r.ltrim,d=r.max_record_size,h=r.quote,_=r.raw,p=r.relax,g=r.rtrim,b=r.skip_empty_lines,y=r.to,w=r.to_line,O=this.options.record_delimiter,I=this.state,N=I.bomSkipped,S=I.previousBuf,x=I.rawBuffer,E=I.escapeIsQuote;if(void 0===S){if(void 0===e)return void this.push(null);n=e}else n=void 0!==S&&void 0===e?S:t.concat([S,e]);if(!1===N)if(!1===o)this.state.bomSkipped=!0;else if(n.length<3){if(!1===i)return void(this.state.previousBuf=n)}else{for(var C in m)if(0===m[C].compare(n,0,m[C].length)){n=n.slice(m[C].length),this.__normalizeOptions(l(l({},this.__originalOptions),{},{encoding:C}));break}this.state.bomSkipped=!0}var k,D=n.length;for(k=0;k<D&&!this.__needMoreData(k,D,i);k++){if(!0===this.state.wasRowDelimiter&&(this.info.lines++,!0===u&&0===this.state.record.length&&0===this.state.field.length&&!1===this.state.wasQuoting&&(this.state.info=Object.assign({},this.info)),this.state.wasRowDelimiter=!1),-1!==w&&this.info.lines>w)return this.state.stop=!0,void this.push(null);!1===this.state.quoting&&0===O.length&&this.__autoDiscoverRecordDelimiter(n,k)&&(O=this.options.record_delimiter);var R=n[k];if(!0===_&&x.append(R),13!==R&&10!==R||!1!==this.state.wasRowDelimiter||(this.state.wasRowDelimiter=!0),!0===this.state.escaping)this.state.escaping=!1;else{if(null!==a&&!0===this.state.quoting&&this.__isEscape(n,k,R)&&k+a.length<D){if(!E){this.state.escaping=!0,k+=a.length-1;continue}if(this.__isQuote(n,k+a.length)){this.state.escaping=!0,k+=a.length-1;continue}}if(!1===this.state.commenting&&this.__isQuote(n,k))if(!0===this.state.quoting){var j=n[k+h.length],L=g&&this.__isCharTrimable(j),T=null!==s&&this.__compareBytes(s,n,k+h.length,j),A=this.__isDelimiter(n,k+h.length,j),V=0===O.length?this.__autoDiscoverRecordDelimiter(n,k+h.length):this.__isRecordDelimiter(j,n,k+h.length);if(null!==a&&this.__isEscape(n,k,R)&&this.__isQuote(n,k+a.length))k+=a.length-1;else{if(!j||A||V||T||L){this.state.quoting=!1,this.state.wasQuoting=!0,k+=h.length-1;continue}if(!1===p){var J=this.__error(new v("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",'got "'.concat(String.fromCharCode(j),'"'),"at line ".concat(this.info.lines),"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__context()));if(void 0!==J)return J}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(h),k+=h.length-1}}else{if(0===this.state.field.length){this.state.quoting=!0,k+=h.length-1;continue}if(!1===p){var M=this.__error(new v("INVALID_OPENING_QUOTE",["Invalid Opening Quote:","a quote is found inside a field at line ".concat(this.info.lines)],this.options,this.__context(),{field:this.state.field}));if(void 0!==M)return M}}if(!1===this.state.quoting){var q=this.__isRecordDelimiter(R,n,k);if(0!==q){if(this.state.commenting&&!1===this.state.wasQuoting&&0===this.state.record.length&&0===this.state.field.length)this.info.comment_lines++;else{if(!1===this.state.enabled&&this.info.lines+(!0===this.state.wasRowDelimiter?1:0)>=c){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),k+=q-1;continue}if(!0===b&&!1===this.state.wasQuoting&&0===this.state.record.length&&0===this.state.field.length){this.info.empty_lines++,k+=q-1;continue}var P=this.__onField();if(void 0!==P)return P;var z=this.__onRecord();if(void 0!==z)return z;if(-1!==y&&this.info.records>=y)return this.state.stop=!0,void this.push(null)}this.state.commenting=!1,k+=q-1;continue}if(this.state.commenting)continue;if(0!==(null===s?0:this.__compareBytes(s,n,k,R))){this.state.commenting=!0;continue}var B=this.__isDelimiter(n,k,R);if(0!==B){var F=this.__onField();if(void 0!==F)return F;k+=B-1;continue}}}if(!1===this.state.commenting&&0!==d&&this.state.record_length+this.state.field.length>d){var U=this.__error(new v("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes","of ".concat(d),"at line ".concat(this.info.lines)],this.options,this.__context()));if(void 0!==U)return U}var Q=!1===f||!0===this.state.quoting||0!==this.state.field.length||!this.__isCharTrimable(R),H=!1===g||!1===this.state.wasQuoting;if(!0===Q&&!0===H)this.state.field.append(R);else if(!0===g&&!this.__isCharTrimable(R)){var G=this.__error(new v("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote","at line ".concat(this.info.lines)],this.options,this.__context()));if(void 0!==G)return G}}if(!0===i)if(!0===this.state.quoting){var K=this.__error(new v("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:","the parsing is finished with an opening quote at line ".concat(this.info.lines)],this.options,this.__context()));if(void 0!==K)return K}else if(!0===this.state.wasQuoting||0!==this.state.record.length||0!==this.state.field.length){var Z=this.__onField();if(void 0!==Z)return Z;var X=this.__onRecord();if(void 0!==X)return X}else!0===this.state.wasRowDelimiter?this.info.empty_lines++:!0===this.state.commenting&&this.info.comment_lines++;else this.state.previousBuf=n.slice(k);!0===this.state.wasRowDelimiter&&(this.info.lines++,this.state.wasRowDelimiter=!1)}},{key:"__onRecord",value:function(){var e=this.options,t=e.columns,i=e.columns_duplicates_to_array,n=e.encoding,r=e.info,o=e.from,s=e.relax_column_count,a=e.relax_column_count_less,l=e.relax_column_count_more,c=e.raw,u=e.skip_lines_with_empty_values,f=this.state,d=f.enabled,h=f.record;if(!1===d)return this.__resetRecord();var _=h.length;if(!0===t)return w(h)?void this.__resetRecord():this.__firstLineToColumns(h);if(!1===t&&0===this.info.records&&(this.state.expectedRecordLength=_),_!==this.state.expectedRecordLength){var m=!1===t?new v("CSV_INCONSISTENT_RECORD_LENGTH",["Invalid Record Length:","expect ".concat(this.state.expectedRecordLength,","),"got ".concat(_," on line ").concat(this.info.lines)],this.options,this.__context(),{record:h}):new v("CSV_RECORD_DONT_MATCH_COLUMNS_LENGTH",["Invalid Record Length:","columns length is ".concat(t.length,","),"got ".concat(_," on line ").concat(this.info.lines)],this.options,this.__context(),{record:h});if(!0===s||!0===a&&_<this.state.expectedRecordLength||!0===l&&_>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=m;else{var p=this.__error(m);if(p)return p}}if(!0===u&&w(h))this.__resetRecord();else{if(!0===this.state.recordHasError)return this.__resetRecord(),void(this.state.recordHasError=!1);if(this.info.records++,1===o||this.info.records>=o)if(!1!==t){for(var g={},b=0,y=h.length;b<y;b++)void 0===t[b]||t[b].disabled||(!0===i&&g[t[b].name]?Array.isArray(g[t[b].name])?g[t[b].name]=g[t[b].name].concat(h[b]):g[t[b].name]=[g[t[b].name],h[b]]:g[t[b].name]=h[b]);var O=this.options.objname;if(void 0===O)if(!0===c||!0===r){var I=this.__push(Object.assign({record:g},!0===c?{raw:this.state.rawBuffer.toString(n)}:{},!0===r?{info:this.state.info}:{}));if(I)return I}else{var N=this.__push(g);if(N)return N}else if(!0===c||!0===r){var S=this.__push(Object.assign({record:[g[O],g]},!0===c?{raw:this.state.rawBuffer.toString(n)}:{},!0===r?{info:this.state.info}:{}));if(S)return S}else{var x=this.__push([g[O],g]);if(x)return x}}else if(!0===c||!0===r){var E=this.__push(Object.assign({record:h},!0===c?{raw:this.state.rawBuffer.toString(n)}:{},!0===r?{info:this.state.info}:{}));if(E)return E}else{var C=this.__push(h);if(C)return C}this.__resetRecord()}}},{key:"__firstLineToColumns",value:function(e){var t=this.state.firstLineToHeaders;try{var i=void 0===t?e:t.call(null,e);if(!Array.isArray(i))return this.__error(new v("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,","got ".concat(JSON.stringify(i))],this.options,this.__context(),{headers:i}));var n=O(i);return this.state.expectedRecordLength=n.length,this.options.columns=n,void this.__resetRecord()}catch(r){return r}}},{key:"__resetRecord",value:function(){!0===this.options.raw&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0}},{key:"__onField",value:function(){var e=this.options,t=e.cast,i=e.encoding,n=e.rtrim,r=e.max_record_size,o=this.state,a=o.enabled,l=o.wasQuoting;if(!1===a)return this.__resetField();var c=this.state.field.toString(i);if(!0===n&&!1===l&&(c=c.trimRight()),!0===t){var u=this.__cast(c),f=s(u,2),d=f[0],h=f[1];if(void 0!==d)return d;c=h}this.state.record.push(c),0!==r&&"string"===typeof c&&(this.state.record_length+=c.length),this.__resetField()}},{key:"__resetField",value:function(){this.state.field.reset(),this.state.wasQuoting=!1}},{key:"__push",value:function(e){var t=this.options.on_record;if(void 0!==t){var i=this.__context();try{e=t.call(null,e,i)}catch(n){return n}if(void 0===e||null===e)return}this.push(e)}},{key:"__cast",value:function(e){var t=this.options,i=t.columns,n=t.relax_column_count;if(!0===Array.isArray(i)&&n&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];var r=this.__context();if(null!==this.state.castField)try{return[void 0,this.state.castField.call(null,e,r)]}catch(o){return[o]}return this.__isFloat(e)?[void 0,parseFloat(e)]:!1!==this.options.cast_date?[void 0,this.options.cast_date.call(null,e,r)]:[void 0,e]}},{key:"__isCharTrimable",value:function(e){return 32===e||9===e||13===e||10===e||12===e}},{key:"__isFloat",value:function(e){return e-parseFloat(e)+1>=0}},{key:"__compareBytes",value:function(e,t,i,n){if(e[0]!==n)return 0;for(var r=e.length,o=1;o<r;o++)if(e[o]!==t[i+o])return 0;return r}},{key:"__needMoreData",value:function(e,t,i){if(i)return!1;var n=this.options.quote,r=this.state,o=r.quoting,s=r.needMoreDataSize,a=r.recordDelimiterMaxLength;return t-e-1<Math.max(s,a,o?n.length+a:0)}},{key:"__isDelimiter",value:function(e,t,i){var n=this.options,r=n.delimiter,o=n.ignore_last_delimiters;if(!0===o&&this.state.record.length===this.options.columns.length-1)return 0;if(!1!==o&&"number"===typeof o&&this.state.record.length===o-1)return 0;e:for(var s=0;s<r.length;s++){var a=r[s];if(a[0]===i){for(var l=1;l<a.length;l++)if(a[l]!==e[t+l])continue e;return a.length}}return 0}},{key:"__isRecordDelimiter",value:function(e,t,i){var n=this.options.record_delimiter,r=n.length;e:for(var o=0;o<r;o++){var s=n[o],a=s.length;if(s[0]===e){for(var l=1;l<a;l++)if(s[l]!==t[i+l])continue e;return s.length}}return 0}},{key:"__isEscape",value:function(e,t,i){var n=this.options.escape;if(null===n)return!1;var r=n.length;if(n[0]===i){for(var o=0;o<r;o++)if(n[o]!==e[t+o])return!1;return!0}return!1}},{key:"__isQuote",value:function(e,t){var i=this.options.quote;if(null===i)return!1;for(var n=i.length,r=0;r<n;r++)if(i[r]!==e[t+r])return!1;return!0}},{key:"__autoDiscoverRecordDelimiter",value:function(e,i){var n=this.options.encoding,r=e[i];return 13===r?10===e[i+1]?(this.options.record_delimiter.push(t.from("\r\n",n)),this.state.recordDelimiterMaxLength=2,2):(this.options.record_delimiter.push(t.from("\r",n)),this.state.recordDelimiterMaxLength=1,1):10===r?(this.options.record_delimiter.push(t.from("\n",n)),this.state.recordDelimiterMaxLength=1,1):0}},{key:"__error",value:function(e){var t=this.options.skip_lines_with_error,i="string"===typeof e?new Error(e):e;return t?(this.state.recordHasError=!0,void this.emit("skip",i)):i}},{key:"__context",value:function(){var e=this.options.columns;return{column:!0===Array.isArray(e)?e.length>this.state.record.length?e[this.state.record.length].name:null:this.state.record.length,empty_lines:this.info.empty_lines,error:this.state.error,header:!0===e,index:this.state.record.length,invalid_field_length:this.info.invalid_field_length,quoting:this.state.wasQuoting,lines:this.info.lines,records:this.info.records}}}]),n}(h),g=function(){var e,i,r;for(var o in arguments){var s=arguments[o],a=typeof s;if(void 0!==e||"string"!==typeof s&&!t.isBuffer(s))if(void 0===i&&y(s))i=s;else{if(void 0!==r||"function"!==a)throw new v("CSV_INVALID_ARGUMENT",["Invalid argument:","got ".concat(JSON.stringify(s)," at index ").concat(o)],this.options);r=s}else e=s}var l=new p(i);if(r){var c=void 0===i||void 0===i.objname?[]:{};l.on("readable",(function(){for(var e;null!==(e=this.read());)void 0===i||void 0===i.objname?c.push(e):c[e[0]]=e[1]})),l.on("error",(function(e){r(e,void 0,l.info)})),l.on("end",(function(){r(void 0,c,l.info)}))}return void 0!==e&&("function"===typeof n?n((function(){l.write(e),l.end()})):(l.write(e),l.end())),l},v=function(e){"use strict";f(n,e);var i=d(n);function n(e,o,s){var a;c(this,n),Array.isArray(o)&&(o=o.join(" ")),a=i.call(this,o),void 0!==Error.captureStackTrace&&Error.captureStackTrace(r(a),n),a.code=e;for(var l=arguments.length,u=new Array(l>3?l-3:0),f=3;f<l;f++)u[f-3]=arguments[f];for(var d=0,h=u;d<h.length;d++){var _=h[d];for(var m in _){var p=_[m];a[m]=t.isBuffer(p)?p.toString(s.encoding):null==p?p:JSON.parse(JSON.stringify(p))}}return a}return n}(o(Error));g.Parser=p,g.CsvError=v,e.exports=g;var b=function(e){return e.replace(/([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()}))},y=function(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)},w=function(e){return e.every((function(e){return null==e||e.toString&&""===e.toString().trim()}))},O=function(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i];if(void 0===r||null===r||!1===r)t[i]={disabled:!0};else if("string"===typeof r)t[i]={name:r};else{if(!y(r))throw new v("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,","got ".concat(JSON.stringify(r)," at position ").concat(i)]);if("string"!==typeof r.name)throw new v("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",'property "name" is required at position '.concat(i),"when column is an object literal"]);t[i]=r}}return t}}).call(this,i(101).Buffer,i(704).setImmediate)},3887:function(e,t,i){(function(t){var n=i(73),r=i(74),o=function(){"use strict";function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;n(this,e),this.size=i,this.length=0,this.buf=t.alloc(i)}return r(e,[{key:"prepend",value:function(e){if(t.isBuffer(e)){var i=this.length+e.length;if(i>=this.size&&(this.resize(),i>=this.size))throw Error("INVALID_BUFFER_STATE");var n=this.buf;this.buf=t.alloc(this.size),e.copy(this.buf,0),n.copy(this.buf,e.length),this.length+=e.length}else{var r=this.length++;r===this.size&&this.resize();var o=this.clone();this.buf[0]=e,o.copy(this.buf,1,0,r)}}},{key:"append",value:function(e){var t=this.length++;t===this.size&&this.resize(),this.buf[t]=e}},{key:"clone",value:function(){return t.from(this.buf.slice(0,this.length))}},{key:"resize",value:function(){var e=this.length;this.size=2*this.size;var i=t.alloc(this.size);this.buf.copy(i,0,0,e),this.buf=i}},{key:"toString",value:function(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}},{key:"toJSON",value:function(){return this.toString("utf8")}},{key:"reset",value:function(){this.length=0}}]),e}();e.exports=o}).call(this,i(101).Buffer)},3888:function(e,t,i){(function(t){function i(e,t){var i,n,r=!1,o={},s=0;t.forEach((function(e){o[e]=0}));for(var a=0;a<e.length;a++)'"'===e[a]?r=!r:!r&&e[a]in o&&(n=++o[e[a]])>s&&(s=n,i=e[a]);return i}e.exports=function(e,n){n=n||{},t.isBuffer(e)&&(e+="");var r=n.delimiters||[",",";","\t","|"],o=n.newlines||["\n","\r"],s=i(e.split(/[\n\r]+/g)[0],r),a=i(e,o);return s?{delimiter:s,newline:a}:null}}).call(this,i(101).Buffer)},526:function(e,t,i){"use strict";var n=i(529);t.a=n.a},529:function(e,t,i){"use strict";(function(e){var n=i(16),r=i(12),o=i(13),s=i(27),a=i(20),l=i(39),c=i(50),u=i(485),f=i.n(u),d=i(8),h=i.n(d),_=i(510),m=i.n(_),p=i(177),g=i.n(p),v=i(519),b=i(497),y=i(504),w=(i(530),function(t){Object(a.a)(u,t);var i=Object(l.a)(u);function u(t,n){var o;Object(r.a)(this,u),o=i.call(this,t),Object(c.a)(Object(s.a)(o),"updateValue",(function(t){o.setState({value:t},(function(){o.props.bind&&e.lesson.setState({[o.props.bind]:t})}))})),Object(c.a)(Object(s.a)(o),"handleChange",(function(e){var t=e.target.checked;o.props.onChange(t),o.updateValue(t)})),Object(c.a)(Object(s.a)(o),"handleSpanChange",(function(e){var t=null!==o.props.value?!o.props.value:!o.state.value;o.props.onChange(t),o.updateValue(t)}));var a=n;return o.state={value:t.bind&&a.state?a.state[t.bind]:t.defaultValue,bind:t.bind,defaultValue:t.defaultValue},o}return Object(o.a)(u,[{key:"componentDidUpdate",value:function(){if(this.props.bind){var t=e.lesson.state[this.props.bind];t!==this.state.value&&this.setState({value:t})}}},{key:"render",value:function(){var e=this.state.value;null!==this.props.value&&(e=this.props.value);var t=f.a.createElement("input",{className:"checkbox-input",type:"checkbox",checked:e,value:"checkbox",onChange:this.handleChange,disabled:this.props.disabled,"aria-label":this.props.tooltip});if(!0===this.props.inline)return f.a.createElement(b.a,{tooltip:this.props.tooltip,placement:this.props.tooltipPlacement},f.a.createElement("span",{style:Object(n.a)({marginLeft:"8px"},this.props.style)},t,f.a.createElement("span",{role:"button",tabIndex:0,className:"checkbox-legend",style:{color:this.props.disabled?"darkgray":null},onClick:this.handleSpanChange,onKeyPress:this.handleSpanChange},this.props.legend)));var i=this.props.disabled?g.a:this.handleSpanChange;return f.a.createElement(b.a,{tooltip:this.props.tooltip,placement:this.props.tooltipPlacement},f.a.createElement("div",{className:"input checkbox-input-div",style:this.props.style},t,f.a.createElement("span",{role:"button",tabIndex:0,className:"checkbox-legend",style:{color:this.props.disabled?"darkgray":null},onClick:i,onKeyPress:i},this.props.legend)))}}],[{key:"getDerivedStateFromProps",value:function(t,i){var n={};return t.defaultValue!==i.defaultValue?(n.value=t.defaultValue,n.defaultValue=t.defaultValue):t.bind!==i.bind&&(n.value=e.lesson.state[t.bind],n.bind=t.bind),m()(n)?null:n}}]),u}(v.a));w.defaultProps={bind:"",onChange:function(){},defaultValue:!1,value:null,disabled:!1,inline:!1,legend:"",tooltip:"",tooltipPlacement:"right",style:{}},w.propTypes={bind:h.a.string,defaultValue:h.a.bool,value:h.a.bool,disabled:h.a.bool,inline:h.a.bool,onChange:h.a.func,legend:h.a.oneOfType([h.a.string,h.a.node]),tooltip:h.a.string,tooltipPlacement:h.a.oneOf(["left","top","right","bottom"]),style:h.a.object},w.contextType=y.a,t.a=w}).call(this,i(29))},530:function(e,t,i){}}]);
//# sourceMappingURL=112.ae7af1a0.chunk.js.map