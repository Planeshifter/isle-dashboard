/*! For license information please see 96791.702ee3cf.chunk.js.LICENSE.txt */
(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[96791],{40022:function(e){"use strict";e.exports=JSON.parse('{"i.e.":["i.e."],"I.e.":["I.e."],"I.E.":["I.E."],"e.g.":["e.g."],"E.g.":["E.g."],"E.G.":["E.G."],"et al.":["et al."],"etc.":["etc."],"vs.":["vs."],"A.S.A.P":["A.S.A.P"],"E.T.A.":["E.T.A."],"D.I.Y":["D.I.Y"],"R.S.V.P":["R.S.V.P"],"P.S.":["P.S."],"B.Y.O.B":["B.Y.O.B"],"Ms.":["Ms."],"Mr.":["Mr."],"Dr.":["Dr."],"Prof.":["Prof."],"Mrs.":["Mrs."],"Messrs.":["Messrs."],"Gov.":["Gov."],"Gen.":["Gen."],"Lt.":["Lt."],"Col.":["Col."],"Mt.":["Mt."],"Bros.":["Bros."],"Corp.":["Corp."],"Co.":["Co."],"co.":["co."],"Inc.":["Inc."],"Ltd.":["Ltd."],"Rep.":["Rep."],"Sen.":["Sen."],"Jr.":["Jr."],"Sr.":["Sr."],"Ph.D.":["Ph.D."],"J.D.":["J.D."],"M.D.":["M.D."],"Rev.":["Rev."],"Adm.":["Adm."],"St.":["St."],"a.m.":["a.m."],"p.m.":["p.m."],"b.c.":["b.c."],"B.C.":["B.C."],"a.d.":["a.d."],"A.D.":["A.D."],"b.c.e.":["b.c.e."],"B.C.E.":["B.C.E."],"Jan.":["Jan."],"Feb.":["Feb."],"Mar.":["Mar."],"Apr.":["Apr."],"May.":["May."],"Jun.":["Jun."],"Jul.":["Jul."],"Aug.":["Aug."],"Sep.":["Sep."],"Sept.":["Sept."],"Oct.":["Oct."],"Nov.":["Nov."],"Dec.":["Dec."],"Ala.":["Ala."],"Ariz.":["Ariz."],"Ark.":["Ark."],"Calif.":["Calif."],"Colo.":["Colo."],"Conn.":["Conn."],"Del.":["Del."],"D.C.":["D.C."],"Fla.":["Fla."],"Ga.":["Ga."],"Ill.":["Ill."],"Ind.":["Ind."],"Kans.":["Kans."],"Kan.":["Kan."],"Ky.":["Ky."],"La.":["La."],"Md.":["Md."],"Mass.":["Mass."],"Mich.":["Mich."],"Minn.":["Minn."],"Miss.":["Miss."],"Mo.":["Mo."],"Mont.":["Mont."],"Nebr.":["Nebr."],"Neb.":["Neb."],"Nev.":["Nev."],"N.H.":["N.H."],"N.J.":["N.J."],"N.M.":["N.M."],"N.Y.":["N.Y."],"N.C.":["N.C."],"N.D.":["N.D."],"Okla.":["Okla."],"Ore.":["Ore."],"Pa.":["Pa."],"Tenn.":["Tenn."],"Va.":["Va."],"Wash.":["Wash."],"Wis.":["Wis."]}')},33027:function(e){"use strict";e.exports=JSON.parse('{"\'s":["\'s"],"\'S":["\'S"],"ain\'t":["ai","n\'t"],"aint":["ai","nt"],"Ain\'t":["Ai","n\'t"],"aren\'t":["are","n\'t"],"arent":["are","nt"],"Aren\'t":["Are","n\'t"],"can\'t":["ca","n\'t"],"cant":["ca","nt"],"Can\'t":["Ca","n\'t"],"can\'t\'ve":["ca","n\'t","\'ve"],"\'cause":["\'cause\'"],"cannot":["can","not"],"Cannot":["Can","not"],"could\'ve":["could","\'ve"],"couldve":["could","ve"],"Could\'ve":["Could","\'ve"],"couldn\'t":["could","n\'t"],"couldnt":["could","nt"],"Couldn\'t":["Could","n\'t"],"couldn\'t\'ve":["could","n\'t","\'ve"],"couldntve":["could","nt","ve"],"Couldn\'t\'ve":["Could","n\'t","\'ve"],"didn\'t":["did","n\'t"],"didnt":["did","nt"],"Didn\'t":["Did","n\'t"],"doesn\'t":["does","n\'t"],"doesnt":["does","nt"],"Doesn\'t":["Does","n\'t"],"don\'t":["do","n\'t"],"dont":["do","nt"],"Don\'t":["Do","n\'t"],"hadn\'t":["had","n\'t"],"hadnt":["had","nt"],"Hadn\'t":["Had","n\'t"],"hadn\'t\'ve":["had","n\'t","\'ve"],"hasn\'t":["has","n\'t"],"hasnt":["has","nt"],"haven\'t":["have","n\'t"],"havent":["have","nt"],"he\'d":["he","\'d"],"hed":["he","d"],"he\'d\'ve":["he","\'d","\'ve"],"hedve":["he","d","ve"],"he\'ll":["he","\'ll"],"he\'ll\'ve":["he","\'ll","\'ve"],"he\'s":["he","\'s"],"hes":["he","s"],"how\'d":["how","\'d"],"howd":["how","d"],"how\'d\'y":["how","\'d","\'y"],"how\'ll":["how","\'ll"],"howll":["how","ll"],"how\'s":["how","\'s"],"hows":["how","s"],"I\'d":["I","\'d"],"I\'d\'ve":["I","\'d","\'ve"],"I\'ll":["I","\'ll"],"i\'ll":["i","\'ll"],"I\'ll\'ve":["I","\'ll","\'ve"],"i\'ll\'ve":["i","\'ll","\'ve"],"I\'m":["I","\'m"],"i\'m":["i","\'m"],"Im":["I","m"],"im":["i","m"],"I\'ma":["I","\'ma"],"i\'ma":["i","\'ma"],"I\'ve":["I","\'ve"],"i\'ve":["i","\'ve"],"isn\'t":["is","n\'t"],"isnt":["is","nt"],"Isn\'t":["Is","n\'t"],"It\'d":["It","\'d"],"it\'d":["it","\'d"],"it\'d\'ve":["it","\'d","\'ve"],"it\'ll\'ve":["it","\'ll","\'ve"],"it\'ll":["it","\'ll"],"itll":["it","ll"],"it\'s":["it","\'s"],"let\'s":["let","\'s"],"lets":["let","s"],"ma\'am":["ma\'am"],"mayn\'t":["may","n\'t"],"mightn\'t":["might","n\'t"],"mightn\'t\'ve":["might","n\'t","\'ve"],"might\'ve":["might","\'ve"],"mustn\'t":["must","n\'t"],"mustn\'t\'ve":["must","n\'t","\'ve"],"must\'ve":["must","\'ve"],"needn\'t":["need","n\'t"],"needn\'t\'ve":["need","n\'t","\'ve"],"not\'ve":["not","\'ve"],"o\'clock":["o\'clock"],"oughtn\'t":["ought","n\'t"],"oughtn\'t\'ve":["ought","n\'t","\'ve"],"so\'ve":["so","\'ve"],"so\'s":["so","\'s"],"shan\'t":["sha","n\'t"],"sha\'n\'t":["sha\'","n\'t"],"shan\'t\'ve":["sha","n\'t","\'ve"],"she\'d":["she","\'d"],"she\'d\'ve":["she","\'d","\'ve"],"she\'ll":["she","\'ll"],"she\'ll\'ve":["she","\'ll","\'ve"],"she\'s":["she","\'s"],"should\'ve":["should","\'ve"],"shouldn\'t":["should","n\'t"],"shouldn\'t\'ve":["should","n\'t","\'ve"],"that\'d":["that","\'d"],"that\'d\'ve":["that","\'d","\'ve"],"that\'s":["that","\'s"],"thats":["that","s"],"there\'d":["there","\'d"],"there\'d\'ve":["there","\'d","\'ve"],"there\'s":["there","\'s"],"they\'d":["they","\'d"],"They\'d":["They","\'d"],"they\'d\'ve":["they","\'d","\'ve"],"They\'d\'ve":["They","\'d","\'ve"],"they\'ll":["they","\'ll"],"They\'ll":["They","\'ll"],"they\'ll\'ve":["they","\'ll","\'ve"],"They\'ll\'ve":["They","\'ll","\'ve"],"they\'re":["they","\'re"],"They\'re":["They","\'re"],"they\'ve":["they","\'ve"],"They\'ve":["They","\'ve"],"to\'ve":["to","\'ve"],"wasn\'t":["was","n\'t"],"we\'d":["we","\'d"],"We\'d":["We","\'d"],"we\'d\'ve":["we","\'d","\'ve"],"we\'ll":["we","\'ll"],"We\'ll":["We","\'ll"],"we\'ll\'ve":["we","\'ll","\'ve"],"We\'ll\'ve":["We","\'ll","\'ve"],"we\'re":["we","\'re"],"We\'re":["We","\'re"],"we\'ve":["we","\'ve"],"We\'ve":["We","\'ve"],"weren\'t":["were","n\'t"],"what\'ll":["what","\'ll"],"what\'ll\'ve":["what","\'ll","\'ve"],"what\'re":["what","\'re"],"what\'s":["what","\'s"],"what\'ve":["what","\'ve"],"when\'s":["when","\'s"],"when\'ve":["when","\'ve"],"where\'d":["where","\'d"],"where\'s":["where","\'s"],"where\'ve":["where","\'ve"],"who\'d":["who","\'d"],"who\'ll":["who","\'ll"],"who\'ll\'ve":["who","\'ll\'","\'ve\'"],"who\'re":["who","\'re"],"who\'s":["who","\'s"],"who\'ve":["who","\'ve"],"why\'ve":["why","\'ve"],"why\'ll":["why","\'ll"],"why\'re":["why","\'re"],"why\'s":["why","\'s"],"will\'ve":["will","\'ve"],"won\'t":["wo","n\'t"],"wont":["wo","nt"],"won\'t\'ve":["wo","n\'t","\'ve"],"would\'ve":["would","\'ve"],"wouldn\'t":["would","n\'t"],"wouldn\'t\'ve":["would","n\'t","\'ve"],"y\'all":["y\'","all"],"y\'all\'d":["y\'","all","\'d"],"y\'all\'d\'ve":["y\'","all","\'d","\'ve"],"y\'all\'re":["y\'","all","\'re\'"],"y\'all\'ve":["y\'","all","ve"],"you\'d":["you","\'d"],"You\'d":["You","\'d"],"you\'d\'ve":["you","\'d","\'ve"],"You\'d\'ve":["You","\'d","\'ve"],"you\'ll":["you","\'ll"],"You\'ll":["You","\'ll"],"you\'ll\'ve":["you","\'ll","\'ve"],"You\'ll\'ve":["You","\'ll","\'ve"],"you\'re":["you","\'re"],"You\'re":["You","\'re"],"you\'ve":["you","\'ve"],"You\'ve":["You","\'ve"]}')},11331:function(e){"use strict";e.exports=JSON.parse('{"^_^":["^_^"],"=D":["=D"],";-p":[";-p"],":O":[":O"],":-/":[":-/"],"xD":["xD"],"V_V":["V_V"],";(":[";("],"(:":["(:"],"\\")":["\\")"],":Y":[":Y"],":]":[":]"],":3":[":3"],":(":[":("],":-)":[":-)"],"=3":["=3"],":))":[":))"],":>":[":>"],";p":[";p"],":p":[":p"],"=[[":["=[["],"xDD":["xDD"],"<333":["<333"],"<33":["<33"],":P":[":P"],"o.O":["o.O"],"<3":["<3"],";-)":[";-)"],":)":[":)"],"-_-":["-_-"],":\')":[":\')"],"o_O":["o_O"],";)":[";)"],"=]":["=]"],"(=":["(="],"-__-":["-__-"],":/":[":/"],":0":[":0"],"(^_^)":["(^_^)"],";D":[";D"],"o_o":["o_o"],":((":[":(("],"=)":["=)"]}')},95113:function(e,t,n){"use strict";var s=(0,n(37086).Z)((function(){return Promise.all([n.e(17412),n.e(81686)]).then(n.bind(n,17412))}));t.Z=s},72731:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var s=n(28991),a=n(6610),r=n(5991),o=n(63349),l=n(10379),i=n(60446),c=n(96156),u=n(73284),h=n(83603),d=n.n(h),p=n(67775),m=n.n(p),v=n(38958),f=n.n(v),g=n(43200),y=n(84972),w=n(87651),E=function(e){(0,l.Z)(h,e);var t=(0,i.Z)(h);function h(e,s){var r;(0,a.Z)(this,h),r=t.call(this,e),(0,c.Z)((0,o.Z)(r),"updateValue",(function(e){r.setState({value:e},(function(){r.props.bind&&n.g.lesson.setState((0,c.Z)({},r.props.bind,e))}))})),(0,c.Z)((0,o.Z)(r),"handleChange",(function(e){var t=e.target.checked;r.props.onChange(t),r.updateValue(t)})),(0,c.Z)((0,o.Z)(r),"handleSpanChange",(function(e){var t=null!==r.props.value?!r.props.value:!r.state.value;r.props.onChange(t),r.updateValue(t)}));var l=s;return r.state={value:e.bind&&l.state?l.state[e.bind]:e.defaultValue,bind:e.bind,defaultValue:e.defaultValue},r}return(0,r.Z)(h,[{key:"componentDidUpdate",value:function(){if(this.props.bind){var e=n.g.lesson.state[this.props.bind];e!==this.state.value&&this.setState({value:e})}}},{key:"render",value:function(){var e=this.state.value;null!==this.props.value&&(e=this.props.value);var t=u.createElement("input",{className:"checkbox-input",type:"checkbox",checked:e,value:"checkbox",onChange:this.handleChange,disabled:this.props.disabled,"aria-label":this.props.tooltip});if(!0===this.props.inline)return u.createElement(y.Z,{tooltip:this.props.tooltip,placement:this.props.tooltipPlacement},u.createElement("span",{style:(0,s.Z)({marginLeft:"8px"},this.props.style)},t,u.createElement("span",{role:"button",tabIndex:0,className:"checkbox-legend",style:{color:this.props.disabled?"darkgray":null},onClick:this.handleSpanChange,onKeyPress:this.handleSpanChange},this.props.legend)));var n=this.props.disabled?f():this.handleSpanChange;return u.createElement(y.Z,{tooltip:this.props.tooltip,placement:this.props.tooltipPlacement},u.createElement("div",{className:"input checkbox-input-div",style:this.props.style},t,u.createElement("span",{role:"button",tabIndex:0,className:"checkbox-legend",style:{color:this.props.disabled?"darkgray":null},onClick:n,onKeyPress:n},this.props.legend)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var s={};return e.defaultValue!==t.defaultValue?(s.value=e.defaultValue,s.defaultValue=e.defaultValue):e.bind!==t.bind&&(s.value=n.g.lesson.state[e.bind],s.bind=e.bind),m()(s)?null:s}}]),h}(g.Z);E.defaultProps={bind:"",onChange:function(){},defaultValue:!1,value:null,disabled:!1,inline:!1,legend:"",tooltip:"",tooltipPlacement:"right",style:{}},E.propTypes={bind:d().string,defaultValue:d().bool,value:d().bool,disabled:d().bool,inline:d().bool,onChange:d().func,legend:d().oneOfType([d().string,d().node]),tooltip:d().string,tooltipPlacement:d().oneOf(["left","top","right","bottom"]),style:d().object},E.contextType=w.Z;var b=E},96791:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return wt}});var s=n(28991),a=n(22122),r=n(6610),o=n(5991),l=n(63349),i=n(10379),c=n(60446),u=n(96156),h=n(73284),d=n(10077),p=n.n(d),m=n(25472),v=n(68359),f=n(9617),g=n(9874),y=n(24730),w=n(99136),E=n(12076),b=n.n(E),C=n(66253),x=n.n(C),Z=n(92628),S=n(49659),k=n(84972),I=n(37086),D=(0,I.Z)((function(){return n.e(62493).then(n.bind(n,91595))})),A=n(87651);var N=function(e,t){for(var n=e.members,s=0;s<n.length;s++){if(n[s].email===t)return!0}return!1},P=n(10724),M=n(65695),T=n(72439),z=n(12929),O=n(78083),L=n.n(O),R=n(24833),H=n.n(R),_=n(69247),V=n.n(_),F=n(37263),W=n.n(F),B=n(52015),Y=n(14931),J=n.n(Y),G=n(30165),U=n.n(G),K=n(44558),j=n.n(K),q=n(74049),$=n.n(q),Q=n(66731),X=n.n(Q),ee=n(23814),te=n.n(ee),ne=n(4052),se=n.n(ne),ae=n(78674),re=n.n(ae),oe=n(31402),le=n.n(oe),ie=n(70649),ce=n.n(ie),ue=n(66785),he=n.n(ue),de=n(3840),pe=n(83301),me=n(95113),ve=n(89139),fe=n(9548),ge=n(26646),ye=n(60454),we=n(82032),Ee=n(36435),be=n.n(Ee),Ce=n(97828),xe=n.n(Ce),Ze=n(64699),Se=n.n(Ze),ke=(0,I.Z)((function(){return n.e(96131).then(n.bind(n,30588))}));(0,T.E4)("Video");var Ie=(0,I.Z)((function(){return n.e(12273).then(n.bind(n,84902))}));function De(){return new Worker(n.p+"static/js/worker.7375dcc0.worker.js")}var Ae=n(36946),Ne=n(61629),Pe=n.n(Ne),Me=n(27192),Te=n(40231),ze=n(11979),Oe=(0,Me.default)(Pe()),Le=["few-clusters","some-clusters","many-clusters"],Re=function(e){(0,i.Z)(n,e);var t=(0,c.Z)(n);function n(e){var s;return(0,r.Z)(this,n),s=t.call(this,e),(0,u.Z)((0,l.Z)(s),"handleClusterCountChange",(function(e){var t=parseInt(e.target.value,10);s.state.modelIndex!==t&&(s.setState({modelIndex:t}),s.props.changeClusterCount(t))})),s.state={selectedCluster:null,modelIndex:e.modelIndex},s}return(0,o.Z)(n,[{key:"renderClusterPlot",value:function(){var e=this,t=this.props.clusterCoordinates,n=this.props.clusterSizes[this.state.modelIndex],s=[{x:t.map((function(e){return e[0]})),y:t.map((function(e){return e[1]})),text:t.map((function(t,n){return"".concat(e.props.t("cluster")," ").concat(n+1)})),marker:{size:40,color:ze.D.slice(0,n)},mode:"markers",hoverinfo:"text",type:"scatter"}];return h.createElement("div",{style:{height:.75*window.innerHeight}},h.createElement(Oe,{data:s,layout:{hovermode:"closest"},useResizeHandler:!0,style:{width:"100%",height:"100%",zIndex:1},config:{displayModeBar:!1},onClick:function(t){var n=t.points[t.points.length-1];e.setState({selectedCluster:n.pointIndex},(function(){e.props.onPointClick(e.state.selectedCluster)}))}}))}},{key:"render",value:function(){var e,t=this;return e=(0,Te.isPrimitive)(this.state.selectedCluster)?h.createElement(h.Fragment,null,h.createElement("h4",{style:{padding:10,color:ze.D[this.state.selectedCluster]}},this.props.t("representative-documents")," ",this.state.selectedCluster+1),h.createElement("div",{style:{marginLeft:0,overflowY:"scroll",height:.7*window.innerHeight}},h.createElement(Ae.Z,{className:"cluster-list"},this.props.representativeDocs.map((function(e,n){return h.createElement(Ae.Z.Item,{className:"cluster-list-item",key:"".concat(t.state.selectedCluster,"-").concat(n)},e)}))))):h.createElement("h4",{className:"cluster-directive"},this.props.t("select-cluster-representative")),h.createElement(we.Z,{show:this.props.show,onHide:this.props.onHide,dialogClassName:"modal-100w"},h.createElement(we.Z.Header,{closeButton:!0},h.createElement(we.Z.Title,{as:"h3"},this.props.t("clustering-results")),h.createElement("span",{className:"cluster-modal-select-wrapper"},h.createElement("select",{title:this.props.t("cluster-select"),className:"cluster-select",onChange:this.handleClusterCountChange,onBlur:this.handleClusterCountChange,value:this.state.modelIndex},Le.map((function(e,n){return h.createElement("option",{key:n,value:n},t.props.t(e))}))))),h.createElement(we.Z.Body,{style:{minHeight:.75*window.innerHeight,padding:0}},h.createElement(ge.Z,null,h.createElement(ve.Z,{md:8},e),h.createElement(ve.Z,{md:4,style:{overflowY:"auto",maxWidth:"30%"}},this.props.clusterCoordinates?this.renderClusterPlot():null))),h.createElement(we.Z.Footer,null,h.createElement(f.Z,{onClick:this.props.onHide},this.props.t("close"))))}}]),n}(h.Component),He=p()("isle:response-visualizer:text-clustering"),_e=[3,5,7],Ve=["few-clusters","some-clusters","many-clusters"],Fe=function(e){(0,i.Z)(n,e);var t=(0,c.Z)(n);function n(e){var s;return(0,r.Z)(this,n),s=t.call(this,e),(0,u.Z)((0,l.Z)(s),"clusterDocuments",(function(){s.worker=new De,s.worker.onmessage=function(e){var t=e.data;switch(t.type){case"CLUSTERS":s.props.onClusters(t.value.clusters._buffer);break;case"CLUSTER_COORDINATES":s.setState({clusterCoordinates:t.value.coordinates,modelIndex:t.value.modelIndex});break;case"REPRESENTATIVE_DOCUMENTS":for(var n=t.value,a=[],r=0;r<n.length;r++)a.push(s.props.texts[n[r].idx]);s.setState({representativeDocs:a})}},s.worker.postMessage({type:"ADD_DOCUMENTS",value:s.props.texts}),s.worker.postMessage({type:"ITERATE",value:1}),s.worker.postMessage({type:"GET_CLUSTERS",value:s.state.modelIndex}),s.worker.postMessage({type:"GET_CLUSTER_COORDINATES",value:s.state.modelIndex}),s.setState({isClustering:!0})})),(0,u.Z)((0,l.Z)(s),"handleClusterCountChange",(function(e){var t=parseInt(e.target.value,10);s.state.modelIndex!==t&&(s.changeClusterCount(t),s.setState({modelIndex:t}))})),(0,u.Z)((0,l.Z)(s),"changeClusterCount",(function(e){s.worker&&(s.worker.postMessage({type:"GET_CLUSTERS",value:e}),s.worker.postMessage({type:"GET_CLUSTER_COORDINATES",value:e}))})),(0,u.Z)((0,l.Z)(s),"toggleClusterModal",(function(){s.setState({showClusterModal:!s.state.showClusterModal})})),s.state={isClustering:!1,showClusterModal:!1,modelIndex:0,clusterCoordinates:null,representativeDocs:[]},s}return(0,o.Z)(n,[{key:"componentWillUnmount",value:function(){this.worker&&this.worker.terminate()}},{key:"render",value:function(){var e=this;return h.createElement("div",{className:"cluster-wrapper"},h.createElement("label",null,this.props.t("cluster")," ",this.props.actionLabel),h.createElement("span",{className:"cluster-select-wrapper"},h.createElement("select",{title:this.props.t("select-size"),className:"cluster-select",onChange:this.handleClusterCountChange,onBlur:this.handleClusterCountChange,value:this.state.modelIndex},Ve.map((function(t,n){return h.createElement("option",{key:n,value:n},e.props.t(t))})))),h.createElement(y.Z,null,h.createElement(f.Z,{variant:"secondary",onClick:this.clusterDocuments},this.props.t("start")),h.createElement(f.Z,{variant:"secondary",disabled:!this.state.isClustering,onClick:this.toggleClusterModal},this.props.t("show-clusters")),this.state.showClusterModal?h.createElement(Re,{show:this.state.showClusterModal,onHide:this.toggleClusterModal,clusterSizes:_e,clusterCoordinates:this.state.clusterCoordinates,representativeDocs:this.state.representativeDocs,modelIndex:this.state.modelIndex,changeClusterCount:this.changeClusterCount,onPointClick:function(t){He("Retrieve representative documents..."),e.worker.postMessage({type:"GET_REPRESENTATIVE_DOCUMENTS",value:{cluster:t,modelIndex:e.state.modelIndex}})},t:this.props.t}):null))}}]),n}(h.Component),We=n(72731),Be=n(4827),Ye=n(34699),Je=p()("isle:switch"),Ge=function(e){var t=e.active,n=e.tooltip,s=e.tooltipPos,a=e.className,r=e.style,o=e.onChange,l=e.children,i=(0,h.useState)(0),c=(0,Ye.Z)(i,2),u=c[0],d=c[1],p=h.Children.map(l,(function(e,t){var n={style:{}};return Je("Check whether idx = ".concat(t," is equal to pos = ").concat(u)),n.style.display=t!==u?"none":"inline",h.cloneElement(e,n)})),m=function(){if(!W()(l))return null;var e=u+1;Je("Handle click: New position is "+e),e>=l.length?(d(0),o(0)):(d(e),o(e))},v=t?"switch active":"switch";if(a&&(v+=" "+a),!t)return h.createElement("span",{className:v,style:r},p);var f=h.createElement("span",{role:"button",tabIndex:0,className:v,onClick:m,onKeyPress:m,style:r},p);return""!==n&&t?h.createElement(k.Z,{placement:s,tooltip:n},f):f};Ge.defaultProps={active:!0,tooltip:"Click to cycle through available options.",tooltipPos:"top",className:"",style:{},onChange:function(){}};var Ue=Ge,Ke=(0,I.Z)((function(){return Promise.all([n.e(25246),n.e(94940)]).then(n.bind(n,6202))})),je=n(87797),qe=n(31731),$e=n(59946),Qe=function(e){e.extended;var t=e.onClick,n=e.t,s=(0,h.useState)(""),a=(0,Ye.Z)(s,2),r=a[0],o=a[1],l=(0,h.useState)(!1),i=(0,Ye.Z)(l,2),c=i[0],u=i[1],d=(0,h.useState)(!1),p=(0,Ye.Z)(d,2),m=p[0],v=p[1];(0,h.useEffect)((function(){t(r,c,m)}),[c,m,r,t]);return h.createElement(h.Fragment,null,h.createElement($e.Z,{style:{width:.3*window.innerWidth,padding:"0px",marginBottom:"0px"}},h.createElement(je.Z,{size:"small"},h.createElement(qe.Z,{type:"text",placeholder:n("enter-text"),onChange:function(e){o(e.target.value)},onKeyPress:function(e){13===e.charCode&&t(r,c,m)},value:r}),h.createElement(f.Z,{onClick:function(){t(r,c,m)}},n("search")),h.createElement(f.Z,{style:{float:"left"},size:"small",onClick:function(){o(""),t("")}},n("reset")))),h.createElement($e.Z,{style:{float:"left",margin:"4px"}},h.createElement(We.Z,{tooltip:n("whole-word-tooltip"),tooltipPlacement:"top",size:"small",inline:!0,legend:n("whole-word"),style:{fontSize:"0.9rem"},onChange:function(e){v(e),t(r,c,e)}}),h.createElement(We.Z,{tooltip:n("toggle-sensitivity"),tooltipPlacement:"top",size:"small",inline:!0,legend:n("case-sensitive"),style:{fontSize:"0.9rem"},onChange:function(e){u(e),t(r,e,m)}})))};Qe.defaultProps={extended:!1,onClick:function(){}};var Xe=Qe;var et=function(e){return h.createElement(we.Z,{show:e.show,onHide:e.onHide,dialogClassName:"modal-75w",backdropClassName:"modal-backdrop-second-order",style:{minHeight:"300px",boxShadow:"0 0 10px black",fontSize:"2em",zIndex:2e3}},h.createElement(we.Z.Header,{closeButton:!0},h.createElement(we.Z.Title,{as:"h3"},j()(e.actionLabel),e.showExtended?" ".concat(e.t("from")," ").concat(e.modalContent.name):"",e.t("on"),(t=e.modalContent.absoluteTime,n=new Date(t),"".concat(n.toLocaleDateString(),", ").concat(n.toLocaleTimeString())))),h.createElement(we.Z.Body,{style:{overflowY:"scroll",maxHeight:.8*window.innerHeight}},h.createElement("span",{className:"response-visualizer-action-model-text"},e.modalContent.value)));var t,n},tt=(n(60354),n(92545),(0,I.Z)((function(){return Promise.all([n.e(27746),n.e(26832),n.e(79212)]).then(n.bind(n,26832))}))),nt=function(e){var t,n=null;W()(e.cohorts)&&(n=h.createElement("select",{title:"Cohort",style:{width:"150px",backgroundColor:"ghostwhite",padding:"2px"},onChange:e.onCohortChange,onBlur:e.onCohortChange,value:e.selectedCohort?e.selectedCohort.title:"all"},h.createElement("option",{value:"all"},e.t("all-cohorts")),e.cohorts.map((function(e,t){return h.createElement("option",{key:t,value:e.title},e.title)}))));var s=e.actions.length;return t=s>0?e.actions[s-1].absoluteTime:0,h.createElement(we.Z.Header,{style:{paddingBottom:"5px"},closeButton:!0},h.createElement("h4",{style:{float:"left",margin:"2px 14px 2px 2px"}},e.actionLabel," ",e.t("for")," ",e.componentID),n,h.createElement(tt,{style:{float:"left"},size:"sm",onChange:e.onPeriodChange,origin:t}))},st=p()("isle:response-visualizer"),at=/\r?\n/g,rt=function(e){var t=re()(.5*window.innerWidth/9.2),n=new RegExp("(?![^\\n]{1,".concat(t,"}$)([^\\n]{1,").concat(t,"})\\s"),"g");return e.replace(n,"$1\n")},ot=function(e){var t=e.value,n=e.type,s=e.levels,a=e.rows,r=e.cols;if("factor"===n)if(W()(t)){var o="";t.forEach((function(e,t){e&&(o&&(o+=", "),o+=s[t])})),t=o||"None"}else(0,B.isPrimitive)(t)||(t=s[t]||"None");else if("matches"===n){var l="";if(W()(t))for(var i=0;i<t.length;i++)l+=t[i].a+" - "+t[i].b+"; ";t=l||"None"}else if("matrix"===n){for(var c="",u=0;u<a.length;u++)for(var h=0;h<r.length;h++)t[u][h]&&(c+=a[u]+" - "+r[h]+"; ");t=c||"None"}else if("tensor"===n){for(var d="",p=0;p<a.length;p++)for(var m=0;m<r.length;m++){var v=a[p],f=r[m];d+=(0,B.isPrimitive)(v)&&!J()(v)?v:p,d+="-",d+=(0,B.isPrimitive)(f)&&!J()(f)?f:m,d+=": ",d+=(t?t[p+":"+m]:"NA")+"; "}t=d||"None"}return t},lt=function(e){(0,i.Z)(n,e);var t=(0,c.Z)(n);function n(e){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,l.Z)(a),"searchFilter",(function(e,t,n){var r=a.props.actions;if(V()(e,""))a.setState({filtered:a.props.actions,searchwords:[],clusters:[]});else{var o=[];if(n)for(var l=new RegExp("(?:^|[^\\w])"+e+"(?:$|[^\\w])",t?"":"i"),i=0;i<r.length;i++){var c=r[i],u=ot((0,s.Z)({value:c.value},a.props.data));(a.props.showExtended&&(l.test(u)||l.test(c.email)||l.test(c.name))||l.test(u))&&o.push(c)}else for(var h=0;h<r.length;h++){var d=r[h],p=new RegExp(e,t?"":"i"),m=ot((0,s.Z)({value:d.value},a.props.data));!a.props.showExtended||-1===String(m).search(p)&&-1===String(d.email).search(p)&&-1===String(d.name).search(p)?-1!==String(m).search(p)&&o.push(a.props.actions[h]):o.push(a.props.actions[h])}a.setState({filtered:o,searchwords:[e],clusters:[]})}})),(0,u.Z)((0,l.Z)(a),"itemSizeGetter",(function(e){var t=30,n=a.state.actions[e];if(!n)return 0;var s=(rt(String(n.value)).match(at)||"").length+1;return t+=23*s,st("Element at position ".concat(e," is estimated to have ").concat(s," lines.")),t})),(0,u.Z)((0,l.Z)(a),"showModalFactory",(function(e){return function(){st("Show model for prominently displaying a single answer..."),a.setState({modalContent:e,showModal:!0})}})),(0,u.Z)((0,l.Z)(a),"hideModal",(function(){a.setState({showModal:!1})})),(0,u.Z)((0,l.Z)(a),"getActions",(function(){var e,t=new Set;return"last"===a.state.handleMultipleResponses?((e=a.props.actions.slice()).sort((function(e,t){return t.absoluteTime-e.absoluteTime})),e=e.filter((function(e){return!t.has(e.email)&&(t.add(e.email),!0)}))):"first"===a.state.handleMultipleResponses?((e=a.props.actions.slice()).sort((function(e,t){return e.absoluteTime-t.absoluteTime})),e=e.filter((function(e){return!t.has(e.email)&&(t.add(e.email),!0)}))):e=a.props.actions,e})),(0,u.Z)((0,l.Z)(a),"renderNestedTable",(function(){return null})),(0,u.Z)((0,l.Z)(a),"chatInviteFactory",(function(e,t){var n=a.context;return function(s,a){st("Invite "+t+" to personal chat..."),a?n.inviteToChat({name:e,canLeave:!1},t):n.closeChatForAll(e)}})),(0,u.Z)((0,l.Z)(a),"videoChatInviteFactory",(function(e,t){var n=a.context;return function(s,a){st("Invite "+t+" to video chat..."),a&&n.inviteToVideo(e,t)}})),(0,u.Z)((0,l.Z)(a),"renderListGroupItem",(function(e,t){st("Rendering item at position ".concat(e,"..."));var n,r=a.state,o=r.filtered,l=r.clusters,i=r.searchwords,c=o[e],u=ot((0,s.Z)({value:c.value},a.props.data));n="image"===a.props.data.type?h.createElement(me.Z,{src:u,width:"50%"}):(0,B.isPrimitive)(u)?h.createElement(Se(),{className:"response-visualizer-text",searchWords:i,autoEscape:!0,textToHighlight:rt(String(u))}):u;var d=c.name,p={padding:"0.75rem"};if(l.length>0){var m=ze.D[l[e]%ze.D.length]||"#D3D3D3",v="rgba("+parseInt(m.substring(1,3),16)+","+parseInt(m.substring(3,5),16);v+=","+parseInt(m.substring(5,7),16)+",0.1)",p.background=v,p.border="1px solid "+m}var g=a.context,w=new Date(c.absoluteTime);return h.createElement(ye.Z,{key:t,style:p},a.props.showExtended?h.createElement("span",{style:{textAlign:"left"}},h.createElement("b",{style:{marginBottom:4}},d," (",c.email,") (",w.toLocaleTimeString()+" "+w.toLocaleDateString(),"):"),h.createElement("br",null),n):n,a.props.showExtended&&g.userProgress[c.email]?h.createElement(y.Z,{className:"chat-button-group"},h.createElement(Ie,{for:"".concat(g.user.name,"-").concat(d),subject:a.props.t("video-chat-with",{name:d}),style:{float:"right"},onClick:a.videoChatInviteFactory({name:"".concat(g.user.name,"-").concat(d),subject:a.props.t("video-chat-with",{name:d})},c.email),buttonVariant:"outline-secondary",buttonLabel:h.createElement("i",{className:"fa fa-xs fa-video"}),tooltipPlacement:"bottom",tooltip:a.props.t("video-chat")}),h.createElement(ke,{for:a.props.t("chat-with",{name:d}),onClick:a.chatInviteFactory(a.props.t("chat-with",{name:d}),c.email),buttonVariant:"outline-secondary",buttonLabel:h.createElement("i",{className:"fas fa-comments"}),tooltipPlacement:"bottom",tooltip:a.props.t("text-chat"),style:{float:"right"}})):null,h.createElement(y.Z,{className:"action-display-button-group"},"image"!==a.props.data.type?h.createElement(f.Z,{variant:"outline-secondary",size:"sm",onClick:a.showModalFactory((0,s.Z)((0,s.Z)({},c),{},{value:u})),"aria-label":a.props.t("fullscreen-view")},h.createElement("span",{className:"fa fa-search-plus"})):null,a.props.showExtended?h.createElement(f.Z,{variant:"outline-danger",size:"sm",onClick:a.props.deleteFactory(e),"aria-label":a.props.t("delete")},h.createElement("span",{className:"fa fa-trash"})):null))})),(0,u.Z)((0,l.Z)(a),"renderRangePlot",(function(){for(var e=[],t=[],n=[],s=[],r=a.getActions(),o=0;o<r.length;o++)t.push(JSON.parse(r[o].value)),n.push(.5*(t[o][0]+t[o][1])),e.push(.5*(t[o][1]-t[o][0])),s.push(o);return h.createElement("div",{style:{height:.75*window.innerHeight}},h.createElement(Be.Z,{data:[{y:n,x:s,text:s.map((function(e){return"[".concat(t[e][0],", ").concat(t[e][1],"]")})),error_y:{type:"data",array:e,visible:!0},type:"scatter",mode:"markers",orientation:"h"}],fit:!0,editable:!0,layout:{xaxis:{showticklabels:!1,showline:!1},yaxis:{title:a.props.t("value")}}}))})),a.state={filtered:e.actions.slice(0),searchwords:[],actions:e.actions.slice(0),showModal:!1,modalContent:{},clusters:[],handleMultipleResponses:"first",removeQuestionWords:!0},a}return(0,o.Z)(n,[{key:"renderWordCloud",value:function(){var e=this;st("Rendering word cloud...");var t=this.getActions().map((function(e){return e.value})),n=[];return this.state.removeQuestionWords&&(0,B.isPrimitive)(this.props.data.question)&&(n=L()(this.props.data.question)),h.createElement(h.Fragment,null,h.createElement(Ke,{data:t,height:.65*window.innerHeight,width:.45*window.innerWidth,rotate:0,triggerRender:!0,onClick:function(t){H()(e.state.searchwords,t.text)?e.searchFilter(""):e.searchFilter(t.text)},style:{marginTop:20},stopwords:n}),h.createElement(Fe,{texts:this.state.filtered.map((function(e){return e.value})),actionLabel:this.props.actionLabel||this.props.t("action-label"),onClusters:function(t){st("Received clusters..."),e.setState({clusters:t})},t:this.props.t}),h.createElement(We.Z,{tooltip:this.props.t("remove-question-words-tooltip"),tooltipPlacement:"top",size:"small",inline:!0,legend:this.props.t("remove-question-words"),defaultValue:this.state.removeQuestionWords,onChange:function(t){e.setState({removeQuestionWords:t})},style:{left:"5px",bottom:"85px",position:"absolute"}}))}},{key:"renderBarchart",value:function(){var e=this,t=this.getActions(),n=0,s=this.props.data.levels.map((function(t,s){var a=(0,B.isPrimitive)(t)?t:xe()(t);return a||(a="".concat(e.props.t("choice")," ").concat(s+1)),a.length>n&&(n=a.length),a})),a=le()(250,7.5*n),r=function(e,t){if(!e)return[];for(var n={},s=0;s<e.length;s++){var a=e[s];if(W()(a.value)){for(var r=0;r<a.value.length;r++)if(a.value[r]){var o=t[r];n[o]?n[o]+=1:n[o]=1}}else{var l=(0,B.isPrimitive)(a.value)?a.value:t[a.value];n[l]?n[l]+=1:n[l]=1}}for(var i=he(),c=new Array(t.length),u=0;u<t.length;u++)n[t[u]]>i&&(i=n[t[u]]),c[u]=n[t[u]];return c}(t,s);return s.length>7&&(s=s.filter((function(e,t){return r[t]>0})),r=r.filter((function(e){return e>0}))),h.createElement("div",{style:{height:.75*window.innerHeight}},h.createElement(Be.Z,{data:[{y:s,x:r,type:"bar",orientation:"h"}],fit:!0,editable:!0,layout:{xaxis:{title:this.props.t("count")},yaxis:{title:this.props.t("value"),categoryorder:"array",categoryarray:s},margin:{l:a}}}))}},{key:"renderSankeyDiagram",value:function(){for(var e=this.props.data,t=e.left,n=e.right,s=t.concat(n),a=this.getActions(),r={},o=0;o<a.length;o++){var l=a[o].value;if(W()(l))for(var i=0;i<l.length;i++){var c=l[i],u=c.a,d=c.b;r[u+"-"+d]?r[u+"-"+d]+=1:r[u+"-"+d]=1}}for(var p=X()(r),m=new Array(p.length),v=new Array(p.length),f=new Array(p.length),g=0;g<p.length;g++){var y=p[g].split("-");m[g]=se()(t,y[0]),v[g]=t.length+se()(n,y[1]),f[g]=r[p[g]]}return h.createElement("div",{style:{height:.75*window.innerHeight}},h.createElement(Be.Z,{data:[{type:"sankey",orientation:"h",node:{pad:15,thickness:30,line:{color:"black",width:.5},label:s,color:"blue"},link:{source:m,target:v,value:f}}],fit:!0,editable:!0,layout:{fontSize:10}}))}},{key:"renderHistogram",value:function(){var e=this.getActions().map((function(e){return e.value})),t=te()(e);return t=t.sort((function(e,t){return t[2]-e[2]})),h.createElement("div",null,h.createElement("div",{className:"scrollable-table",style:{height:.3*window.innerHeight}},h.createElement(pe.Z,null,h.createElement("thead",null,h.createElement("tr",null,h.createElement("th",null,this.props.t("value")),h.createElement("th",null,this.props.t("absolute")),h.createElement("th",null,this.props.t("relative")))),h.createElement("tbody",null,t.map((function(e,t){return h.createElement("tr",{key:t},h.createElement("td",null,e[0]),h.createElement("td",null,e[1]),h.createElement("td",null,e[2].toFixed(3)))}))))),h.createElement("div",{style:{height:.4*window.innerHeight}},h.createElement(Be.Z,{data:[{x:e,type:"histogram",name:"histogram"}],fit:!0,editable:!0,layout:{xaxis:{title:this.props.t("value")},yaxis:{title:this.props.t("count")}}})))}},{key:"renderTable",value:function(){for(var e=this.props.data.rows.length,t=this.props.data.cols.length,n=$()({shape:[e,t],dtype:"int32"}),s=this.getActions(),a=0;a<s.length;a++)for(var r=s[a].value,o=0;o<e;o++)for(var l=0;l<t;l++)!0===r[o][l]&&n.set(o,l,Number(n.get(o,l))+1);var i=h.createElement("table",{className:"table table-bordered"},h.createElement("thead",null,h.createElement("th",null),this.props.data.cols.map((function(e,t){return h.createElement("th",{key:t},e)}))),h.createElement("tbody",null,this.props.data.rows.map((function(e,s){var a=new Array(t+1);a[0]=h.createElement("th",null,e);for(var r=0;r<t;r++)a.push(h.createElement("td",null,n.get(s,r)));return h.createElement("tr",{key:s},a)}))));return h.createElement("div",{style:{height:.75*window.innerHeight}},i)}},{key:"renderPlot",value:function(){var e,t=this;if(0===this.props.actions.length)return h.createElement(de.Z,{variant:"warning"},this.props.t("no-data-available"));switch(this.props.data.type){case"image":e=null;break;case"text":default:e=this.renderWordCloud();break;case"factor":e=this.renderBarchart();break;case"number":e=this.renderHistogram();break;case"matrix":e=this.renderTable();break;case"tensor":e=this.renderNestedTable();break;case"matches":e=this.renderSankeyDiagram();break;case"range":e=this.renderRangePlot()}if(!e)return null;var n=j()(U()(this.props.actionLabel));return h.createElement("div",null,e,h.createElement(Ue,{style:{zIndex:2e3},onChange:function(e){var n;switch(e){case 0:n="first";break;case 1:n="all";break;case 2:n="last"}t.setState({handleMultipleResponses:n})}},h.createElement("i",null,h.createElement(z.c,{i18nKey:"include-first",ns:"ResponseVisualizer"},h.createElement("b",null,"Only")," include first ",n," for any student.")),h.createElement("i",null,h.createElement(z.c,{i18nKey:"include-all",ns:"ResponseVisualizer"},"Include ",h.createElement("b",null,"all")," ",n,"s for any student.")),h.createElement("i",null,h.createElement(z.c,{i18nKey:"include-latest",ns:"ResponseVisualizer"},h.createElement("b",null,"Only")," include latest ",n," for any student."))))}},{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement(we.Z,{show:!0,onHide:this.props.toggleActions,dialogClassName:"modal-100w"},h.createElement(nt,{componentID:this.props.componentID,actionLabel:this.props.actionLabel,onPeriodChange:this.props.onPeriodChange,cohorts:this.context.cohorts,selectedCohort:this.props.selectedCohort,onCohortChange:this.props.onCohortChange,actions:this.props.actions,t:this.props.t}),h.createElement(we.Z.Body,{style:{minHeight:.75*window.innerHeight,padding:0}},h.createElement(ge.Z,null,h.createElement(ve.Z,{md:6},this.state.filtered.length>0?h.createElement("div",{style:{marginLeft:0,overflowY:"scroll",height:.75*window.innerHeight}},h.createElement(be(),{initialIndex:0,itemRenderer:this.renderListGroupItem,length:this.state.filtered.length,type:"image"===this.props.data.type?"uniform":"variable",pageSize:50,minSize:10,itemSizeGetter:this.itemSizeGetter})):h.createElement(fe.Z,{body:!0,className:"bg-light"},h.createElement("h2",null,this.props.t("no-matching-data")))),h.createElement(ve.Z,{md:6,style:{overflowY:"auto",maxWidth:"49.2%"}},this.renderPlot()))),h.createElement(we.Z.Footer,null,h.createElement("h4",null,h.createElement(v.Z,{variant:"secondary"},this.props.t("num-actions",{label:x()(this.props.actionLabel),n:this.state.filtered.length}))),h.createElement(Xe,{onClick:this.searchFilter,extended:this.props.showExtended,t:this.props.t}),h.createElement(f.Z,{variant:"secondary",onClick:this.props.toggleExtended},this.props.showExtended?this.props.t("hide-extended"):this.props.t("show-extended")),h.createElement(f.Z,{onClick:this.props.toggleActions},this.props.t("close")))),h.createElement(et,{show:this.state.showModal,onHide:this.hideModal,modalContent:this.state.modalContent,actionLabel:this.props.actionLabel,dataType:this.props.data.type,showExtended:this.state.showExtended,t:this.props.t}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return ce()(e.actions.length,t.actions.length)>=5||e.actions.length===t.actions.length-1?(n.filtered=e.actions.slice(),n.actions=e.actions.slice(),n.clusters=[],n):null}}]),n}(h.Component);lt.defaultProps={actionLabel:null},lt.contextType=A.Z;var it=lt,ct=n(11775),ut=n.n(ct),ht=n(5797),dt=n.n(ht),pt=p()("isle:response-visualizer");var mt=function(e){var t;return e.type===P.f$?(e=ut()(e),pt("Received a feedback action..."),t=dt()(e.value)?e.value:JSON.parse(e.value),e.value="",t.comments&&(e.value+=t.comments+". "),t.noUnderstanding&&(e.value+="I do not understand this. "),t.needsExplanation&&(e.value+="It needs a more detailed explanation. "),t.noLogic&&(e.value+="I can't follow the logic. ")):e.type!==P.P1&&e.type!==P.Xe||dt()(e.value)||(e.value=JSON.parse(e.value)),e},vt=p()("isle:response-visualizer");(0,T.E4)("ResponseVisualizer");var ft=function(e){return e.substr(e.lastIndexOf("_",e.lastIndexOf("_")-1)+1)},gt=function(e,t,n){var s=[];for(var a in e){if(b()(e,a)&&!b()(t,a))e[a]===n&&s.push(a)}return s},yt=function(e){(0,i.Z)(n,e);var t=(0,c.Z)(n);function n(e,s){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,l.Z)(a),"toggleActions",(function(){a.context.log({id:a.props.id+"_response_visualizer",type:P.zJ,value:!a.state.showActions});var e={showActions:!a.state.showActions};e.showActions?a.addSessionActions():e.period=null,a.setState(e)})),(0,u.Z)((0,l.Z)(a),"toggleExtended",(function(){a.setState({showExtended:!a.state.showExtended},(function(){a.context.log({id:a.props.id+"_response_visualizer",type:P.Av,value:a.state.showExtended})}))})),(0,u.Z)((0,l.Z)(a),"onPeriodChange",(function(e){a.setState({period:e},a.addSessionActions)})),(0,u.Z)((0,l.Z)(a),"onCohortChange",(function(e){vt("Change the selected cohort..."),a.context.selectCohort(e.target.value)})),(0,u.Z)((0,l.Z)(a),"pushSessionAction",(function(e){e=mt(e);var t=a.state.actions;if(a.state.period){var n=a.state.period,s=n.from,r=n.to;e.absoluteTime>s&&e.absoluteTime<r&&t.unshift(e)}else t.unshift(e);var o={actions:t,nActions:a.state.nActions+1};a.emailHash[e.email]||(a.emailHash[e.email]=e.type,a.props.success&&e.type===a.props.success?o.nSuccess=a.state.nSuccess+1:a.props.danger&&e.type===a.props.danger?o.nDanger=a.state.nDanger+1:a.props.info&&e.type===a.props.info&&(o.nInfo=a.state.nInfo+1)),a.setState(o)})),(0,u.Z)((0,l.Z)(a),"addSessionActions",(function(){var e=a.context;vt(e.selectedCohort?"Add session actions for cohort "+e.selectedCohort.title:"Add session actions...");var t=e.socketActions,n=[];a.emailHash={};for(var s=0;s<t.length;s++){var r=t[s];if(r.id===a.props.id&&(r.type===a.props.info||r.type===a.props.success||r.type===a.props.danger)){if(r=mt(r),e.selectedCohort&&!N(e.selectedCohort,r.email))continue;if(a.emailHash[r.email]=r.type,a.state.period){var o=a.state.period,l=o.from,i=o.to;r.absoluteTime>l&&r.absoluteTime<i&&n.push(r)}else n.push(r)}}var c={nSuccess:0,nDanger:0,nInfo:0,actions:n};a.state.period||(c.nActions=n.length);for(var u=e.userList,h=0;h<u.length;h++){var d=u[h].email;if(b()(a.emailHash,d)){var p=a.emailHash[d];a.props.success&&p===a.props.success?c.nSuccess+=1:a.props.danger&&p===a.props.danger?c.nDanger+=1:a.props.info&&p===a.props.info&&(c.nInfo+=1)}}a.setState(c,(function(){e.update(M.VC,a.props.id)}))})),(0,u.Z)((0,l.Z)(a),"closeDeleteModal",(function(){a.setState({showDeleteModal:!1,selectedAction:null})})),(0,u.Z)((0,l.Z)(a),"deleteFactory",(function(e){return function(){vt("Delete action at index "+e),a.setState({selectedAction:a.state.actions[e],showDeleteModal:!0})}})),(0,u.Z)((0,l.Z)(a),"deleteSelectedAction",(function(){a.context.removeSessionElementFromDB(a.state.selectedAction.sessiondataID,(function(e){e||a.addSessionActions(),a.closeDeleteModal()}))})),a.state={actions:[],nActions:0,nSuccess:0,nDanger:0,nInfo:0,showActions:!1,showExtended:!1,showDeleteModal:!1,selectedAction:null,period:null},a}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context;this.registerInSession(),this.addSessionActions(),t&&(this.unsubscribe=t.subscribe((function(n,s){if(n===M.Hl||n===M.c_)e.addSessionActions();else if(n===M.Wh&&s.id===e.props.id)if(s.type===M.gz||s.type===M.sS)e.forceUpdate();else if(s.type===e.props.info||s.type===e.props.success||s.type===e.props.danger){if(t.selectedCohort&&!N(t.selectedCohort,s.email))return;e.pushSessionAction(s)}})))}},{key:"componentWillUnmount",value:function(){var e=this;this.unsubscribe&&this.unsubscribe();var t=this.context;delete t.responseVisualizers[this.props.id],t.responseVisualizerIds=t.responseVisualizerIds.filter((function(t){return t!==e.props.id}))}},{key:"registerInSession",value:function(){var e=this.props,t=this.context;if(e.info&&e.id&&!e.noSessionRegistration){vt("Register response visualizer for ".concat(e.id," in session:")),t.responseVisualizers[e.id]={type:e.info,ref:this};var n=t.responseVisualizerIds;n.push(e.id),t.debouncedInitializeProgress(),n.sort((function(e,t){return e=document.getElementById("".concat(e,"_response_visualizer")),t=document.getElementById("".concat(t,"_response_visualizer")),e&&t?e===t?0:2&e.compareDocumentPosition(t)?1:-1:0}))}}},{key:"renderTooltip",value:function(){var e,t=this.context;e=t.selectedCohort?t.activeCohortMembers.length:t.userList.length;var n=gt(t.userFocuses,this.emailHash,this.props.id),s="".concat(this.props.t("interaction-rate-tooltip"),":\n\n"),a=h.createElement("table",{className:"table table-bordered table-condensed"},h.createElement("thead",null,h.createElement("tr",null,h.createElement("th",null,this.props.t("action-type")),h.createElement("th",null,this.props.t("rate")),h.createElement("th",null,this.props.t("color")))),h.createElement("tbody",null,this.props.success?h.createElement("tr",null,h.createElement("td",null,ft(this.props.success)),h.createElement("td",null,this.state.nSuccess," / ",e),h.createElement("td",null,this.props.t("green"))):null,this.props.danger?h.createElement("tr",null,h.createElement("td",null,ft(this.props.danger)),h.createElement("td",null,this.state.nDanger," / ",e),h.createElement("td",null,this.props.t("red"))):null,this.props.info?h.createElement("tr",null,h.createElement("td",null,ft(this.props.info)),h.createElement("td",null,this.state.nInfo," / ",e),h.createElement("td",null,this.props.t("blue"))):null,h.createElement("tr",null,h.createElement("td",null,this.props.t("in-focus")),h.createElement("td",null,n.length," / ",e),h.createElement("td",null,this.props.t("orange")))));return s=h.createElement(g.Z,{title:s,style:{fontSize:12,textAlign:"left",maxWidth:1200}},h.createElement(g.Z.Content,null,a,h.createElement("p",null,this.props.t("users-in-focus")),h.createElement("p",{style:{wordWrap:"break-word"}},n.join(", "))))}},{key:"renderFullscreenModal",value:function(){var e={};return this.props.buttonLabel?e.actionLabel=this.props.buttonLabel:e.actionLabel=this.props.t("actions"),this.state.showActions?h.createElement(it,(0,a.Z)({componentID:this.props.id,actions:this.state.actions,showExtended:this.state.showExtended,deleteFactory:this.deleteFactory,onPeriodChange:this.onPeriodChange,toggleExtended:this.toggleExtended,toggleActions:this.toggleActions,data:this.props.data,selectedCohort:this.context.selectedCohort,onCohortChange:this.onCohortChange,t:this.props.t},e)):null}},{key:"render",value:function(){if(!this.props.id)return h.createElement(Z.Z,{owner:!0},h.createElement("span",{className:"title no-id-message"},this.props.t("no-id")));var e,t=this.context;e=t.selectedCohort?t.activeCohortMembers.length:t.userList.length;var n=gt(t.userFocuses,this.emailHash,this.props.id),a=this.state.nSuccess/e;a*=100;var r=this.state.nDanger/e;r*=100;var o=this.state.nInfo/e;o*=100;var l=n.length/e;l*=100;var i=this.props.buttonLabel||this.props.t("actions");return h.createElement("div",{id:"".concat(this.props.id,"_response_visualizer"),style:{display:this.props.inline?"inline":"inherit"}},h.createElement(Z.Z,{owner:!0},this.renderFullscreenModal(),h.createElement(y.Z,{size:"sm",vertical:!0,style:(0,s.Z)({verticalAlign:"inherit"},this.props.style)},h.createElement(k.Z,{placement:"top",tooltip:this.props.showID?h.createElement("span",null,this.props.t("open-tooltip",{label:x()(i),id:this.props.id})):null},h.createElement(f.Z,{onClick:this.toggleActions,style:(0,s.Z)({},this.props.buttonStyle),variant:this.props.variant,size:"sm",id:"".concat(this.props.id,"_answers_button")},h.createElement("span",{style:{marginRight:"5px",pointerEvents:"none"}},i),h.createElement(v.Z,{variant:"dark",style:{fontSize:"10px",pointerEvents:"none"}},this.state.nActions))),h.createElement(S.Z,{trigger:["hover","focus"],placement:"top",overlay:this.renderTooltip()},h.createElement(w.Z,{style:{width:"100%",marginTop:"3px",height:"0.7rem",boxShadow:"0 0 2px black"}},h.createElement(w.Z,{variant:"info",now:o,max:100,min:0}),h.createElement(w.Z,{variant:"warning",now:l,max:100,min:0}),h.createElement(w.Z,{variant:"success",now:a,max:100,min:0}),h.createElement(w.Z,{variant:"danger",now:r,max:100,min:0}))))),h.createElement(D,{show:this.state.showDeleteModal,onDelete:this.deleteSelectedAction,onClose:this.closeDeleteModal}))}}]),n}(h.Component);yt.defaultProps={buttonLabel:null,buttonStyle:{},data:{type:"text"},showID:!0,success:null,danger:null,info:null,inline:!1,style:{},variant:"secondary",noSessionRegistration:!1},yt.contextType=A.Z;var wt=(0,m.Z)("ResponseVisualizer")(yt)},99136:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var s=n(22122),a=n(19756),r=n(78265),o=n.n(r),l=n(73284),i=n(85937);function c(e,t,n){var s=(e-t)/(n-t)*100;return Math.round(1e3*s)/1e3}function u(e,t){var n,r=e.min,i=e.now,u=e.max,h=e.label,d=e.srOnly,p=e.striped,m=e.animated,v=e.className,f=e.style,g=e.variant,y=e.bsPrefix,w=(0,a.Z)(e,["min","now","max","label","srOnly","striped","animated","className","style","variant","bsPrefix"]);return l.createElement("div",(0,s.Z)({ref:t},w,{role:"progressbar",className:o()(v,y+"-bar",(n={},n["bg-"+g]=g,n[y+"-bar-animated"]=m,n[y+"-bar-striped"]=m||p,n)),style:(0,s.Z)({width:c(i,r,u)+"%"},f),"aria-valuenow":i,"aria-valuemin":r,"aria-valuemax":u}),d?l.createElement("span",{className:"sr-only"},h):h)}var h=l.forwardRef((function(e,t){var n=e.isChild,r=(0,a.Z)(e,["isChild"]);if(r.bsPrefix=(0,i.vE)(r.bsPrefix,"progress"),n)return u(r,t);var c=r.min,h=r.now,d=r.max,p=r.label,m=r.srOnly,v=r.striped,f=r.animated,g=r.bsPrefix,y=r.variant,w=r.className,E=r.children,b=(0,a.Z)(r,["min","now","max","label","srOnly","striped","animated","bsPrefix","variant","className","children"]);return l.createElement("div",(0,s.Z)({ref:t},b,{className:o()(w,g)}),E?function(e,t){var n=0;return l.Children.map(e,(function(e){return l.isValidElement(e)?t(e,n++):e}))}(E,(function(e){return(0,l.cloneElement)(e,{isChild:!0})})):u({min:c,now:h,max:d,label:p,srOnly:m,striped:v,animated:f,bsPrefix:g,variant:y},t))}));h.displayName="ProgressBar",h.defaultProps={min:0,max:100,animated:!1,isChild:!1,srOnly:!1,striped:!1};var d=h},14931:function(e,t,n){"use strict";var s=n(26310),a=n(99942),r=n(65120),o=n(50182);s(a,"isPrimitive",r),s(a,"isObject",o),e.exports=a},99942:function(e,t,n){"use strict";var s=n(65120),a=n(50182);e.exports=function(e){return s(e)||a(e)}},50182:function(e,t,n){"use strict";var s=n(52015).isObject;e.exports=function(e){return s(e)&&""===e.valueOf()}},65120:function(e){"use strict";e.exports=function(e){return""===e}},78083:function(e,t,n){"use strict";var s=n(38297);e.exports=s},38297:function(e,t,n){"use strict";var s=n(48827).isPrimitive,a=n(52015).isPrimitive,r=n(12076),o=n(40022),l=n(11331),i=n(33027),c=/^([,([{*<"\u201c'`\u2018.])/gi,u=/([,.!?%*>:;"'\u201d`)\]}])$/gi;function h(e,t){var n;for(n=0;n<t.length;n++)e.push(t[n]);return e}function d(e){var t,n,s,a=[],r=[];do{l[e]||o[e]||i[e]?n=!0:(t=e.split(c)).length>1?(a.push(t[1]),e=t[2]):(t=e.split(u)).length>1?(e=t[0],r.push(t[1])):n=!0}while(!n);return(s=a).push(e),h(s,r),s}e.exports=function(e,t){var n,o,l,i,c,u;if(!a(e))throw new TypeError("invalid argument. First argument must be a string primitive. Value: `"+e+"`.");if(arguments.length>1&&!s(t))throw new TypeError("invalid argument. Second argument must be a boolean primitive. Value: `"+t+"`.");if(!e)return[];for(o=t?e.split(/(\s+)/):e.split(/\s+/),c={},l=[],u=0;u<o.length;u++)i=o[u],r(c,i)?h(l,c[i]):(h(l,n=d(i)),c[i]=n);return l}},44558:function(e,t,n){"use strict";var s=n(78522);e.exports=s},78522:function(e,t,n){"use strict";var s=n(52015).isPrimitive;e.exports=function(e){if(!s(e))throw new TypeError("invalid argument. First argument must be a string primitive. Value: `"+e+"`.");return""===e?"":e.substring(0,e.length-1)}},66253:function(e,t,n){"use strict";var s=n(20552);e.exports=s},20552:function(e,t,n){"use strict";var s=n(52015).isPrimitive;e.exports=function(e){if(!s(e))throw new TypeError("invalid argument. First argument must be a string primitive. Value: `"+e+"`.");return""===e?"":e.charAt(0).toLowerCase()+e.slice(1)}},23814:function(e,t,n){"use strict";var s=n(43546);e.exports=s},43546:function(e,t,n){"use strict";var s=n(32255),a=n(4052);e.exports=function(e){var t,n,r,o,l,i,c;if(!s(e))throw new TypeError("invalid argument. First argument must be a collection. Value: `"+e+"`.");for(t=0,n=[],o=[],r=e.length,i=0;i<r;i++)l=e[i],t+=1,-1===(c=a(n,l))?(n.push(l),o.push([l,1,0])):o[c][1]+=1;for(r=o.length,i=0;i<r;i++)o[i][2]=o[i][1]/t;return o}},97828:function(e){"use strict";var t=function(e,t){return e+n(t)},n=function e(n){return null===n||"boolean"===typeof n||"undefined"===typeof n?"":"number"===typeof n?n.toString():"string"===typeof n?n:Array.isArray(n)?n.reduce(t,""):function(e){return Object.prototype.hasOwnProperty.call(e,"props")}(n)&&Object.prototype.hasOwnProperty.call(n.props,"children")?e(n.props.children):""};n.default=n,e.exports=n},92545:function(){}}]);
//# sourceMappingURL=96791.702ee3cf.chunk.js.map