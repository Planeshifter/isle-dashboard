/*! For license information please see 82.df26e396.chunk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{1585:function(e,t,a){"use strict";var n=a(514),s=Object(n.a)((function(){return a.e(130).then(a.bind(null,2110))}));t.a=s},1625:function(e,t,a){"use strict";var n=a(9),s=a(23),r=a(483),o=a.n(r),l=a(485),i=a.n(l),c=a(515);function u(e,t,a){var n=(e-t)/(a-t)*100;return Math.round(1e3*n)/1e3}function h(e,t){var a,r=e.min,l=e.now,c=e.max,h=e.label,d=e.srOnly,p=e.striped,m=e.animated,v=e.className,f=e.style,g=e.variant,b=e.bsPrefix,y=Object(s.a)(e,["min","now","max","label","srOnly","striped","animated","className","style","variant","bsPrefix"]);return i.a.createElement("div",Object(n.a)({ref:t},y,{role:"progressbar",className:o()(v,b+"-bar",(a={},a["bg-"+g]=g,a[b+"-bar-animated"]=m,a[b+"-bar-striped"]=m||p,a)),style:Object(n.a)({width:u(l,r,c)+"%"},f),"aria-valuenow":l,"aria-valuemin":r,"aria-valuemax":c}),d?i.a.createElement("span",{className:"sr-only"},h):h)}var d=i.a.forwardRef((function(e,t){var a=e.isChild,r=Object(s.a)(e,["isChild"]);if(r.bsPrefix=Object(c.a)(r.bsPrefix,"progress"),a)return h(r,t);var u=r.min,d=r.now,p=r.max,m=r.label,v=r.srOnly,f=r.striped,g=r.animated,b=r.bsPrefix,y=r.variant,w=r.className,E=r.children,C=Object(s.a)(r,["min","now","max","label","srOnly","striped","animated","bsPrefix","variant","className","children"]);return i.a.createElement("div",Object(n.a)({ref:t},C,{className:o()(w,b)}),E?function(e,t){var a=0;return i.a.Children.map(e,(function(e){return i.a.isValidElement(e)?t(e,a++):e}))}(E,(function(e){return Object(l.cloneElement)(e,{isChild:!0})})):h({min:u,now:d,max:p,label:m,srOnly:v,striped:f,animated:g,bsPrefix:b,variant:y},t))}));d.displayName="ProgressBar",d.defaultProps={min:0,max:100,animated:!1,isChild:!1,srOnly:!1,striped:!1};t.a=d},2100:function(e,t,a){"use strict";var n=a(3899);e.exports=n},2101:function(e,t,a){"use strict";var n=a(3900);e.exports=n},2102:function(e,t,a){"use strict";e.exports=function(e){return""===e}},2103:function(e,t,a){"use strict";var n=a(40).isObject;e.exports=function(e){return n(e)&&""===e.valueOf()}},2104:function(e,t,a){"use strict";var n=a(3906);e.exports=n},3899:function(e,t,a){"use strict";var n=a(40).isPrimitive;e.exports=function(e){if(!n(e))throw new TypeError("invalid argument. First argument must be a string primitive. Value: `"+e+"`.");return""===e?"":e.charAt(0).toLowerCase()+e.slice(1)}},3900:function(e,t,a){"use strict";var n=a(66).isPrimitive,s=a(40).isPrimitive,r=a(17),o=a(3901),l=a(3902),i=a(3903),c=/^([,([{*<"\u201c'`\u2018.])/gi,u=/([,.!?%*>:;"'\u201d`)\]}])$/gi;function h(e,t){var a;for(a=0;a<t.length;a++)e.push(t[a]);return e}function d(e){var t,a,n,s=[],r=[];do{l[e]||o[e]||i[e]?a=!0:(t=e.split(c)).length>1?(s.push(t[1]),e=t[2]):(t=e.split(u)).length>1?(e=t[0],r.push(t[1])):a=!0}while(!a);return(n=s).push(e),h(n,r),n}e.exports=function(e,t){var a,o,l,i,c,u;if(!s(e))throw new TypeError("invalid argument. First argument must be a string primitive. Value: `"+e+"`.");if(arguments.length>1&&!n(t))throw new TypeError("invalid argument. Second argument must be a boolean primitive. Value: `"+t+"`.");if(!e)return[];for(o=t?e.split(/(\s+)/):e.split(/\s+/),c={},l=[],u=0;u<o.length;u++)i=o[u],r(c,i)?h(l,c[i]):(h(l,a=d(i)),c[i]=a);return l}},3901:function(e){e.exports=JSON.parse('{"i.e.":["i.e."],"I.e.":["I.e."],"I.E.":["I.E."],"e.g.":["e.g."],"E.g.":["E.g."],"E.G.":["E.G."],"et al.":["et al."],"etc.":["etc."],"vs.":["vs."],"A.S.A.P":["A.S.A.P"],"E.T.A.":["E.T.A."],"D.I.Y":["D.I.Y"],"R.S.V.P":["R.S.V.P"],"P.S.":["P.S."],"B.Y.O.B":["B.Y.O.B"],"Ms.":["Ms."],"Mr.":["Mr."],"Dr.":["Dr."],"Prof.":["Prof."],"Mrs.":["Mrs."],"Messrs.":["Messrs."],"Gov.":["Gov."],"Gen.":["Gen."],"Lt.":["Lt."],"Col.":["Col."],"Mt.":["Mt."],"Bros.":["Bros."],"Corp.":["Corp."],"Co.":["Co."],"co.":["co."],"Inc.":["Inc."],"Ltd.":["Ltd."],"Rep.":["Rep."],"Sen.":["Sen."],"Jr.":["Jr."],"Sr.":["Sr."],"Ph.D.":["Ph.D."],"J.D.":["J.D."],"M.D.":["M.D."],"Rev.":["Rev."],"Adm.":["Adm."],"St.":["St."],"a.m.":["a.m."],"p.m.":["p.m."],"b.c.":["b.c."],"B.C.":["B.C."],"a.d.":["a.d."],"A.D.":["A.D."],"b.c.e.":["b.c.e."],"B.C.E.":["B.C.E."],"Jan.":["Jan."],"Feb.":["Feb."],"Mar.":["Mar."],"Apr.":["Apr."],"May.":["May."],"Jun.":["Jun."],"Jul.":["Jul."],"Aug.":["Aug."],"Sep.":["Sep."],"Sept.":["Sept."],"Oct.":["Oct."],"Nov.":["Nov."],"Dec.":["Dec."],"Ala.":["Ala."],"Ariz.":["Ariz."],"Ark.":["Ark."],"Calif.":["Calif."],"Colo.":["Colo."],"Conn.":["Conn."],"Del.":["Del."],"D.C.":["D.C."],"Fla.":["Fla."],"Ga.":["Ga."],"Ill.":["Ill."],"Ind.":["Ind."],"Kans.":["Kans."],"Kan.":["Kan."],"Ky.":["Ky."],"La.":["La."],"Md.":["Md."],"Mass.":["Mass."],"Mich.":["Mich."],"Minn.":["Minn."],"Miss.":["Miss."],"Mo.":["Mo."],"Mont.":["Mont."],"Nebr.":["Nebr."],"Neb.":["Neb."],"Nev.":["Nev."],"N.H.":["N.H."],"N.J.":["N.J."],"N.M.":["N.M."],"N.Y.":["N.Y."],"N.C.":["N.C."],"N.D.":["N.D."],"Okla.":["Okla."],"Ore.":["Ore."],"Pa.":["Pa."],"Tenn.":["Tenn."],"Va.":["Va."],"Wash.":["Wash."],"Wis.":["Wis."]}')},3902:function(e){e.exports=JSON.parse('{"^_^":["^_^"],"=D":["=D"],";-p":[";-p"],":O":[":O"],":-/":[":-/"],"xD":["xD"],"V_V":["V_V"],";(":[";("],"(:":["(:"],"\\")":["\\")"],":Y":[":Y"],":]":[":]"],":3":[":3"],":(":[":("],":-)":[":-)"],"=3":["=3"],":))":[":))"],":>":[":>"],";p":[";p"],":p":[":p"],"=[[":["=[["],"xDD":["xDD"],"<333":["<333"],"<33":["<33"],":P":[":P"],"o.O":["o.O"],"<3":["<3"],";-)":[";-)"],":)":[":)"],"-_-":["-_-"],":\')":[":\')"],"o_O":["o_O"],";)":[";)"],"=]":["=]"],"(=":["(="],"-__-":["-__-"],":/":[":/"],":0":[":0"],"(^_^)":["(^_^)"],";D":[";D"],"o_o":["o_o"],":((":[":(("],"=)":["=)"]}')},3903:function(e){e.exports=JSON.parse('{"\'s":["\'s"],"\'S":["\'S"],"ain\'t":["ai","n\'t"],"aint":["ai","nt"],"Ain\'t":["Ai","n\'t"],"aren\'t":["are","n\'t"],"arent":["are","nt"],"Aren\'t":["Are","n\'t"],"can\'t":["ca","n\'t"],"cant":["ca","nt"],"Can\'t":["Ca","n\'t"],"can\'t\'ve":["ca","n\'t","\'ve"],"\'cause":["\'cause\'"],"cannot":["can","not"],"Cannot":["Can","not"],"could\'ve":["could","\'ve"],"couldve":["could","ve"],"Could\'ve":["Could","\'ve"],"couldn\'t":["could","n\'t"],"couldnt":["could","nt"],"Couldn\'t":["Could","n\'t"],"couldn\'t\'ve":["could","n\'t","\'ve"],"couldntve":["could","nt","ve"],"Couldn\'t\'ve":["Could","n\'t","\'ve"],"didn\'t":["did","n\'t"],"didnt":["did","nt"],"Didn\'t":["Did","n\'t"],"doesn\'t":["does","n\'t"],"doesnt":["does","nt"],"Doesn\'t":["Does","n\'t"],"don\'t":["do","n\'t"],"dont":["do","nt"],"Don\'t":["Do","n\'t"],"hadn\'t":["had","n\'t"],"hadnt":["had","nt"],"Hadn\'t":["Had","n\'t"],"hadn\'t\'ve":["had","n\'t","\'ve"],"hasn\'t":["has","n\'t"],"hasnt":["has","nt"],"haven\'t":["have","n\'t"],"havent":["have","nt"],"he\'d":["he","\'d"],"hed":["he","d"],"he\'d\'ve":["he","\'d","\'ve"],"hedve":["he","d","ve"],"he\'ll":["he","\'ll"],"he\'ll\'ve":["he","\'ll","\'ve"],"he\'s":["he","\'s"],"hes":["he","s"],"how\'d":["how","\'d"],"howd":["how","d"],"how\'d\'y":["how","\'d","\'y"],"how\'ll":["how","\'ll"],"howll":["how","ll"],"how\'s":["how","\'s"],"hows":["how","s"],"I\'d":["I","\'d"],"I\'d\'ve":["I","\'d","\'ve"],"I\'ll":["I","\'ll"],"i\'ll":["i","\'ll"],"I\'ll\'ve":["I","\'ll","\'ve"],"i\'ll\'ve":["i","\'ll","\'ve"],"I\'m":["I","\'m"],"i\'m":["i","\'m"],"Im":["I","m"],"im":["i","m"],"I\'ma":["I","\'ma"],"i\'ma":["i","\'ma"],"I\'ve":["I","\'ve"],"i\'ve":["i","\'ve"],"isn\'t":["is","n\'t"],"isnt":["is","nt"],"Isn\'t":["Is","n\'t"],"It\'d":["It","\'d"],"it\'d":["it","\'d"],"it\'d\'ve":["it","\'d","\'ve"],"it\'ll\'ve":["it","\'ll","\'ve"],"it\'ll":["it","\'ll"],"itll":["it","ll"],"it\'s":["it","\'s"],"let\'s":["let","\'s"],"lets":["let","s"],"ma\'am":["ma\'am"],"mayn\'t":["may","n\'t"],"mightn\'t":["might","n\'t"],"mightn\'t\'ve":["might","n\'t","\'ve"],"might\'ve":["might","\'ve"],"mustn\'t":["must","n\'t"],"mustn\'t\'ve":["must","n\'t","\'ve"],"must\'ve":["must","\'ve"],"needn\'t":["need","n\'t"],"needn\'t\'ve":["need","n\'t","\'ve"],"not\'ve":["not","\'ve"],"o\'clock":["o\'clock"],"oughtn\'t":["ought","n\'t"],"oughtn\'t\'ve":["ought","n\'t","\'ve"],"so\'ve":["so","\'ve"],"so\'s":["so","\'s"],"shan\'t":["sha","n\'t"],"sha\'n\'t":["sha\'","n\'t"],"shan\'t\'ve":["sha","n\'t","\'ve"],"she\'d":["she","\'d"],"she\'d\'ve":["she","\'d","\'ve"],"she\'ll":["she","\'ll"],"she\'ll\'ve":["she","\'ll","\'ve"],"she\'s":["she","\'s"],"should\'ve":["should","\'ve"],"shouldn\'t":["should","n\'t"],"shouldn\'t\'ve":["should","n\'t","\'ve"],"that\'d":["that","\'d"],"that\'d\'ve":["that","\'d","\'ve"],"that\'s":["that","\'s"],"thats":["that","s"],"there\'d":["there","\'d"],"there\'d\'ve":["there","\'d","\'ve"],"there\'s":["there","\'s"],"they\'d":["they","\'d"],"They\'d":["They","\'d"],"they\'d\'ve":["they","\'d","\'ve"],"They\'d\'ve":["They","\'d","\'ve"],"they\'ll":["they","\'ll"],"They\'ll":["They","\'ll"],"they\'ll\'ve":["they","\'ll","\'ve"],"They\'ll\'ve":["They","\'ll","\'ve"],"they\'re":["they","\'re"],"They\'re":["They","\'re"],"they\'ve":["they","\'ve"],"They\'ve":["They","\'ve"],"to\'ve":["to","\'ve"],"wasn\'t":["was","n\'t"],"we\'d":["we","\'d"],"We\'d":["We","\'d"],"we\'d\'ve":["we","\'d","\'ve"],"we\'ll":["we","\'ll"],"We\'ll":["We","\'ll"],"we\'ll\'ve":["we","\'ll","\'ve"],"We\'ll\'ve":["We","\'ll","\'ve"],"we\'re":["we","\'re"],"We\'re":["We","\'re"],"we\'ve":["we","\'ve"],"We\'ve":["We","\'ve"],"weren\'t":["were","n\'t"],"what\'ll":["what","\'ll"],"what\'ll\'ve":["what","\'ll","\'ve"],"what\'re":["what","\'re"],"what\'s":["what","\'s"],"what\'ve":["what","\'ve"],"when\'s":["when","\'s"],"when\'ve":["when","\'ve"],"where\'d":["where","\'d"],"where\'s":["where","\'s"],"where\'ve":["where","\'ve"],"who\'d":["who","\'d"],"who\'ll":["who","\'ll"],"who\'ll\'ve":["who","\'ll\'","\'ve\'"],"who\'re":["who","\'re"],"who\'s":["who","\'s"],"who\'ve":["who","\'ve"],"why\'ve":["why","\'ve"],"why\'ll":["why","\'ll"],"why\'re":["why","\'re"],"why\'s":["why","\'s"],"will\'ve":["will","\'ve"],"won\'t":["wo","n\'t"],"wont":["wo","nt"],"won\'t\'ve":["wo","n\'t","\'ve"],"would\'ve":["would","\'ve"],"wouldn\'t":["would","n\'t"],"wouldn\'t\'ve":["would","n\'t","\'ve"],"y\'all":["y\'","all"],"y\'all\'d":["y\'","all","\'d"],"y\'all\'d\'ve":["y\'","all","\'d","\'ve"],"y\'all\'re":["y\'","all","\'re\'"],"y\'all\'ve":["y\'","all","ve"],"you\'d":["you","\'d"],"You\'d":["You","\'d"],"you\'d\'ve":["you","\'d","\'ve"],"You\'d\'ve":["You","\'d","\'ve"],"you\'ll":["you","\'ll"],"You\'ll":["You","\'ll"],"you\'ll\'ve":["you","\'ll","\'ve"],"You\'ll\'ve":["You","\'ll","\'ve"],"you\'re":["you","\'re"],"You\'re":["You","\'re"],"you\'ve":["you","\'ve"],"You\'ve":["You","\'ve"]}')},3904:function(e,t,a){"use strict";var n=a(35),s=a(3905),r=a(2102),o=a(2103);n(s,"isPrimitive",r),n(s,"isObject",o),e.exports=s},3905:function(e,t,a){"use strict";var n=a(2102),s=a(2103);e.exports=function(e){return n(e)||s(e)}},3906:function(e,t,a){"use strict";var n=a(40).isPrimitive;e.exports=function(e){if(!n(e))throw new TypeError("invalid argument. First argument must be a string primitive. Value: `"+e+"`.");return""===e?"":e.substring(0,e.length-1)}},3907:function(e,t,a){"use strict";var n=a(3908);e.exports=n},3908:function(e,t,a){"use strict";var n=a(69),s=a(68);e.exports=function(e){var t,a,r,o,l,i,c;if(!n(e))throw new TypeError("invalid argument. First argument must be a collection. Value: `"+e+"`.");for(t=0,a=[],o=[],r=e.length,i=0;i<r;i++)l=e[i],t+=1,-1===(c=s(a,l))?(a.push(l),o.push([l,1,0])):o[c][1]+=1;for(r=o.length,i=0;i<r;i++)o[i][2]=o[i][1]/t;return o}},3909:function(e,t,a){"use strict";var n=function(e,t){return e+s(t)},s=function e(t){return null===t||"boolean"===typeof t||"undefined"===typeof t?"":"number"===typeof t?t.toString():"string"===typeof t?t:Array.isArray(t)?t.reduce(n,""):function(e){return Object.prototype.hasOwnProperty.call(e,"props")}(t)&&Object.prototype.hasOwnProperty.call(t.props,"children")?e(t.props.children):""};s.default=s,e.exports=s},3910:function(e,t,a){e.exports=function(){return new Worker(a.p+"88647faa0887ceb447da.worker.js")}},4812:function(e,t,a){"use strict";a.r(t);var n=a(16),s=a(9),r=a(12),o=a(13),l=a(27),i=a(20),c=a(39),u=a(50),h=a(485),d=a.n(h),p=a(30),m=a.n(p),v=a(1048),f=a(881),g=a(489),b=a(544),y=a(977),w=a(1625),E=a(17),C=a.n(E),x=a(2100),O=a.n(x),S=a(1057),j=a(972),k=a(497),I=a(514),D=Object(I.a)((function(){return a.e(35).then(a.bind(null,4806))})),A=a(504);var N=function(e,t){for(var a=e.members,n=0;n<a.length;n++){if(a[n].email===t)return!0}return!1},P=a(531),M=a(876),T=a(521),z=a(3960),L=a(2101),R=a.n(L),H=a(97),V=a.n(H),_=a(1721),F=a.n(_),W=a(34),B=a.n(W),Y=a(40),J=a(3904),G=a.n(J),U=a(104),K=a.n(U),q=a(2104),Q=a.n(q),$=a(880),X=a.n($),Z=a(41),ee=a.n(Z),te=a(3907),ae=a.n(te),ne=a(68),se=a.n(ne),re=a(176),oe=a.n(re),le=a(664),ie=a.n(le),ce=a(1153),ue=a.n(ce),he=a(172),de=a.n(he),pe=a(665),me=a(786),ve=a(1585),fe=a(635),ge=a(571),be=a(649),ye=a(1457),we=a(689),Ee=a(1719),Ce=a.n(Ee),xe=a(3909),Oe=a.n(xe),Se=a(1720),je=a.n(Se),ke=Object(I.a)((function(){return a.e(29).then(a.bind(null,4807))}));Object(T.a)("Video");var Ie=Object(I.a)((function(){return a.e(53).then(a.bind(null,4808))})),De=a(3910),Ae=a.n(De),Ne=a(1782),Pe=a(1796),Me=a.n(Pe),Te=a(1247),ze=a.n(Te),Le=a(53),Re=a(1059),He=ze()(Me.a),Ve=["few-clusters","some-clusters","many-clusters"],_e=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),n=t.call(this,e),Object(u.a)(Object(l.a)(n),"handleClusterCountChange",(function(e){var t=parseInt(e.target.value,10);n.state.modelIndex!==t&&(n.setState({modelIndex:t}),n.props.changeClusterCount(t))})),n.state={selectedCluster:null,modelIndex:e.modelIndex},n}return Object(o.a)(a,[{key:"renderClusterPlot",value:function(){var e=this,t=this.props.clusterCoordinates,a=this.props.clusterSizes[this.state.modelIndex],n=[{x:t.map((function(e){return e[0]})),y:t.map((function(e){return e[1]})),text:t.map((function(t,a){return"".concat(e.props.t("cluster")," ").concat(a+1)})),marker:{size:40,color:Re.a.slice(0,a)},mode:"markers",hoverinfo:"text",type:"scatter"}];return d.a.createElement("div",{style:{height:.75*window.innerHeight}},d.a.createElement(He,{data:n,layout:{hovermode:"closest"},useResizeHandler:!0,style:{width:"100%",height:"100%",zIndex:1},config:{displayModeBar:!1},onClick:function(t){var a=t.points[t.points.length-1];e.setState({selectedCluster:a.pointIndex},(function(){e.props.onPointClick(e.state.selectedCluster)}))}}))}},{key:"render",value:function(){var e,t=this;return e=Object(Le.isPrimitive)(this.state.selectedCluster)?d.a.createElement(h.Fragment,null,d.a.createElement("h4",{style:{padding:10,color:Re.a[this.state.selectedCluster]}},this.props.t("representative-documents")," ",this.state.selectedCluster+1),d.a.createElement("div",{style:{marginLeft:0,overflowY:"scroll",height:.7*window.innerHeight}},d.a.createElement(Ne.a,{className:"cluster-list"},this.props.representativeDocs.map((function(e,a){return d.a.createElement(Ne.a.Item,{className:"cluster-list-item",key:"".concat(t.state.selectedCluster,"-").concat(a)},e)}))))):d.a.createElement("h4",{className:"cluster-directive"},this.props.t("select-cluster-representative")),d.a.createElement(we.a,{show:this.props.show,onHide:this.props.onHide,dialogClassName:"modal-100w"},d.a.createElement(we.a.Header,{closeButton:!0},d.a.createElement(we.a.Title,{as:"h3"},this.props.t("clustering-results")),d.a.createElement("span",{className:"cluster-modal-select-wrapper"},d.a.createElement("select",{title:this.props.t("cluster-select"),className:"cluster-select",onChange:this.handleClusterCountChange,onBlur:this.handleClusterCountChange,value:this.state.modelIndex},Ve.map((function(e,a){return d.a.createElement("option",{key:a,value:a},t.props.t(e))}))))),d.a.createElement(we.a.Body,{style:{minHeight:.75*window.innerHeight,padding:0}},d.a.createElement(be.a,null,d.a.createElement(fe.a,{md:8},e),d.a.createElement(fe.a,{md:4,style:{overflowY:"auto",maxWidth:"30%"}},this.props.clusterCoordinates?this.renderClusterPlot():null))),d.a.createElement(we.a.Footer,null,d.a.createElement(g.a,{onClick:this.props.onHide},this.props.t("close"))))}}]),a}(h.Component),Fe=m()("isle:response-visualizer:text-clustering"),We=[3,5,7],Be=["few-clusters","some-clusters","many-clusters"],Ye=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),n=t.call(this,e),Object(u.a)(Object(l.a)(n),"clusterDocuments",(function(){n.worker=new Ae.a,n.worker.onmessage=function(e){var t=e.data;switch(t.type){case"CLUSTERS":n.props.onClusters(t.value.clusters._buffer);break;case"CLUSTER_COORDINATES":n.setState({clusterCoordinates:t.value.coordinates,modelIndex:t.value.modelIndex});break;case"REPRESENTATIVE_DOCUMENTS":for(var a=t.value,s=[],r=0;r<a.length;r++)s.push(n.props.texts[a[r].idx]);n.setState({representativeDocs:s})}},n.worker.postMessage({type:"ADD_DOCUMENTS",value:n.props.texts}),n.worker.postMessage({type:"ITERATE",value:1}),n.worker.postMessage({type:"GET_CLUSTERS",value:n.state.modelIndex}),n.worker.postMessage({type:"GET_CLUSTER_COORDINATES",value:n.state.modelIndex}),n.setState({isClustering:!0})})),Object(u.a)(Object(l.a)(n),"handleClusterCountChange",(function(e){var t=parseInt(e.target.value,10);n.state.modelIndex!==t&&(n.changeClusterCount(t),n.setState({modelIndex:t}))})),Object(u.a)(Object(l.a)(n),"changeClusterCount",(function(e){n.worker&&(n.worker.postMessage({type:"GET_CLUSTERS",value:e}),n.worker.postMessage({type:"GET_CLUSTER_COORDINATES",value:e}))})),Object(u.a)(Object(l.a)(n),"toggleClusterModal",(function(){n.setState({showClusterModal:!n.state.showClusterModal})})),n.state={isClustering:!1,showClusterModal:!1,modelIndex:0,clusterCoordinates:null,representativeDocs:[]},n}return Object(o.a)(a,[{key:"componentWillUnmount",value:function(){this.worker&&this.worker.terminate()}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"cluster-wrapper"},d.a.createElement("label",null,this.props.t("cluster")," ",this.props.actionLabel),d.a.createElement("span",{className:"cluster-select-wrapper"},d.a.createElement("select",{title:this.props.t("select-size"),className:"cluster-select",onChange:this.handleClusterCountChange,onBlur:this.handleClusterCountChange,value:this.state.modelIndex},Be.map((function(t,a){return d.a.createElement("option",{key:a,value:a},e.props.t(t))})))),d.a.createElement(y.a,null,d.a.createElement(g.a,{variant:"secondary",onClick:this.clusterDocuments},this.props.t("start")),d.a.createElement(g.a,{variant:"secondary",disabled:!this.state.isClustering,onClick:this.toggleClusterModal},this.props.t("show-clusters")),this.state.showClusterModal?d.a.createElement(_e,{show:this.state.showClusterModal,onHide:this.toggleClusterModal,clusterSizes:We,clusterCoordinates:this.state.clusterCoordinates,representativeDocs:this.state.representativeDocs,modelIndex:this.state.modelIndex,changeClusterCount:this.changeClusterCount,onPointClick:function(t){Fe("Retrieve representative documents..."),e.worker.postMessage({type:"GET_REPRESENTATIVE_DOCUMENTS",value:{cluster:t,modelIndex:e.state.modelIndex}})},t:this.props.t}):null))}}]),a}(h.Component),Je=a(526),Ge=a(650),Ue=a(98),Ke=m()("isle:switch"),qe=function(e){var t=e.active,a=e.tooltip,n=e.tooltipPos,s=e.className,r=e.style,o=e.onChange,l=e.children,i=Object(h.useState)(0),c=Object(Ue.a)(i,2),u=c[0],p=c[1],m=d.a.Children.map(l,(function(e,t){var a={style:{}};return Ke("Check whether idx = ".concat(t," is equal to pos = ").concat(u)),a.style.display=t!==u?"none":"inline",d.a.cloneElement(e,a)})),v=function(){if(!B()(l))return null;var e=u+1;Ke("Handle click: New position is "+e),e>=l.length?(p(0),o(0)):(p(e),o(e))},f=t?"switch active":"switch";if(s&&(f+=" "+s),!t)return d.a.createElement("span",{className:f,style:r},m);var g=d.a.createElement("span",{role:"button",tabIndex:0,className:f,onClick:v,onKeyPress:v,style:r},m);return""!==a&&t?d.a.createElement(k.a,{placement:n,tooltip:a},g):g};qe.defaultProps={active:!0,tooltip:"Click to cycle through available options.",tooltipPos:"top",className:"",style:{},onChange:function(){}};var Qe=qe,$e=Object(I.a)((function(){return Promise.all([a.e(15),a.e(87)]).then(a.bind(null,4809))})),Xe=a(1456),Ze=a(909),et=a(737),tt=function(e){e.extended;var t=e.onClick,a=e.t,n=Object(h.useState)(""),s=Object(Ue.a)(n,2),r=s[0],o=s[1],l=Object(h.useState)(!1),i=Object(Ue.a)(l,2),c=i[0],u=i[1],p=Object(h.useState)(!1),m=Object(Ue.a)(p,2),v=m[0],f=m[1];Object(h.useEffect)((function(){t(r,c,v)}),[c,v,r,t]);return d.a.createElement(h.Fragment,null,d.a.createElement(et.a,{style:{width:.3*window.innerWidth,padding:"0px",marginBottom:"0px"}},d.a.createElement(Xe.a,{size:"small"},d.a.createElement(Ze.a,{type:"text",placeholder:a("enter-text"),onChange:function(e){o(e.target.value)},onKeyPress:function(e){13===e.charCode&&t(r,c,v)},value:r}),d.a.createElement(g.a,{onClick:function(){t(r,c,v)}},a("search")),d.a.createElement(g.a,{style:{float:"left"},size:"small",onClick:function(){o(""),t("")}},a("reset")))),d.a.createElement(et.a,{style:{float:"left",margin:"4px"}},d.a.createElement(Je.a,{tooltip:a("whole-word-tooltip"),tooltipPlacement:"top",size:"small",inline:!0,legend:a("whole-word"),style:{fontSize:"0.9rem"},onChange:function(e){f(e),t(r,c,e)}}),d.a.createElement(Je.a,{tooltip:a("toggle-sensitivity"),tooltipPlacement:"top",size:"small",inline:!0,legend:a("case-sensitive"),style:{fontSize:"0.9rem"},onChange:function(e){u(e),t(r,e,v)}})))};tt.defaultProps={extended:!1,onClick:function(){}};var at=tt;var nt=function(e){return d.a.createElement(we.a,{show:e.show,onHide:e.onHide,dialogClassName:"modal-75w",backdropClassName:"modal-backdrop-second-order",style:{minHeight:"300px",boxShadow:"0 0 10px black",fontSize:"2em",zIndex:2e3}},d.a.createElement(we.a.Header,{closeButton:!0},d.a.createElement(we.a.Title,{as:"h3"},Q()(e.actionLabel),e.showExtended?" ".concat(e.t("from")," ").concat(e.modalContent.name):"",e.t("on"),(t=e.modalContent.absoluteTime,a=new Date(t),"".concat(a.toLocaleDateString(),", ").concat(a.toLocaleTimeString())))),d.a.createElement(we.a.Body,{style:{overflowY:"scroll",maxHeight:.8*window.innerHeight}},d.a.createElement("span",{className:"response-visualizer-action-model-text"},e.modalContent.value)));var t,a},st=(a(198),a(710),Object(I.a)((function(){return Promise.all([a.e(3),a.e(152)]).then(a.bind(null,4810))}))),rt=function(e){var t,a=null;B()(e.cohorts)&&(a=d.a.createElement("select",{title:"Cohort",style:{width:"150px",backgroundColor:"ghostwhite",padding:"2px"},onChange:e.onCohortChange,onBlur:e.onCohortChange,value:e.selectedCohort?e.selectedCohort.title:"all"},d.a.createElement("option",{value:"all"},e.t("all-cohorts")),e.cohorts.map((function(e,t){return d.a.createElement("option",{key:t,value:e.title},e.title)}))));var n=e.actions.length;return t=n>0?e.actions[n-1].absoluteTime:0,d.a.createElement(we.a.Header,{style:{paddingBottom:"5px"},closeButton:!0},d.a.createElement("h4",{style:{float:"left",margin:"2px 14px 2px 2px"}},e.actionLabel," ",e.t("for")," ",e.componentID),a,d.a.createElement(st,{style:{float:"left"},size:"sm",onChange:e.onPeriodChange,origin:t}))},ot=m()("isle:response-visualizer"),lt=/\r?\n/g,it=function(e){var t=oe()(.5*window.innerWidth/9.2),a=new RegExp("(?![^\\n]{1,".concat(t,"}$)([^\\n]{1,").concat(t,"})\\s"),"g");return e.replace(a,"$1\n")},ct=function(e){var t=e.value,a=e.type,n=e.levels,s=e.rows,r=e.cols;if("factor"===a)if(B()(t)){var o="";t.forEach((function(e,t){e&&(o&&(o+=", "),o+=n[t])})),t=o||"None"}else Object(Y.isPrimitive)(t)||(t=n[t]||"None");else if("matches"===a){var l="";if(B()(t))for(var i=0;i<t.length;i++)l+=t[i].a+" - "+t[i].b+"; ";t=l||"None"}else if("matrix"===a){for(var c="",u=0;u<s.length;u++)for(var h=0;h<r.length;h++)t[u][h]&&(c+=s[u]+" - "+r[h]+"; ");t=c||"None"}else if("tensor"===a){for(var d="",p=0;p<s.length;p++)for(var m=0;m<r.length;m++){var v=s[p],f=r[m];d+=Object(Y.isPrimitive)(v)&&!G()(v)?v:p,d+="-",d+=Object(Y.isPrimitive)(f)&&!G()(f)?f:m,d+=": ",d+=(t?t[p+":"+m]:"NA")+"; "}t=d||"None"}return t},ut=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(r.a)(this,a),s=t.call(this,e),Object(u.a)(Object(l.a)(s),"searchFilter",(function(e,t,a){var r=s.props.actions;if(F()(e,""))s.setState({filtered:s.props.actions,searchwords:[],clusters:[]});else{var o=[];if(a)for(var l=new RegExp("(?:^|[^\\w])"+e+"(?:$|[^\\w])",t?"":"i"),i=0;i<r.length;i++){var c=r[i],u=ct(Object(n.a)({value:c.value},s.props.data));(s.props.showExtended&&(l.test(u)||l.test(c.email)||l.test(c.name))||l.test(u))&&o.push(c)}else for(var h=0;h<r.length;h++){var d=r[h],p=new RegExp(e,t?"":"i"),m=ct(Object(n.a)({value:d.value},s.props.data));!s.props.showExtended||-1===String(m).search(p)&&-1===String(d.email).search(p)&&-1===String(d.name).search(p)?-1!==String(m).search(p)&&o.push(s.props.actions[h]):o.push(s.props.actions[h])}s.setState({filtered:o,searchwords:[e],clusters:[]})}})),Object(u.a)(Object(l.a)(s),"itemSizeGetter",(function(e){var t=30,a=s.state.actions[e];if(!a)return 0;var n=(it(String(a.value)).match(lt)||"").length+1;return t+=23*n,ot("Element at position ".concat(e," is estimated to have ").concat(n," lines.")),t})),Object(u.a)(Object(l.a)(s),"showModalFactory",(function(e){return function(){ot("Show model for prominently displaying a single answer..."),s.setState({modalContent:e,showModal:!0})}})),Object(u.a)(Object(l.a)(s),"hideModal",(function(){s.setState({showModal:!1})})),Object(u.a)(Object(l.a)(s),"getActions",(function(){var e,t=new Set;return"last"===s.state.handleMultipleResponses?((e=s.props.actions.slice()).sort((function(e,t){return t.absoluteTime-e.absoluteTime})),e=e.filter((function(e){return!t.has(e.email)&&(t.add(e.email),!0)}))):"first"===s.state.handleMultipleResponses?((e=s.props.actions.slice()).sort((function(e,t){return e.absoluteTime-t.absoluteTime})),e=e.filter((function(e){return!t.has(e.email)&&(t.add(e.email),!0)}))):e=s.props.actions,e})),Object(u.a)(Object(l.a)(s),"renderNestedTable",(function(){return null})),Object(u.a)(Object(l.a)(s),"chatInviteFactory",(function(e,t){var a=s.context;return function(n,s){ot("Invite "+t+" to personal chat..."),s?a.inviteToChat({name:e,canLeave:!1},t):a.closeChatForAll(e)}})),Object(u.a)(Object(l.a)(s),"videoChatInviteFactory",(function(e,t){var a=s.context;return function(n,s){ot("Invite "+t+" to video chat..."),s&&a.inviteToVideo(e,t)}})),Object(u.a)(Object(l.a)(s),"renderListGroupItem",(function(e,t){ot("Rendering item at position ".concat(e,"..."));var a,r=s.state,o=r.filtered,l=r.clusters,i=r.searchwords,c=o[e],u=ct(Object(n.a)({value:c.value},s.props.data));a="image"===s.props.data.type?d.a.createElement(ve.a,{src:u,width:"50%"}):Object(Y.isPrimitive)(u)?d.a.createElement(je.a,{className:"response-visualizer-text",searchWords:i,autoEscape:!0,textToHighlight:it(String(u))}):u;var h=c.name,p={padding:"0.75rem"};if(l.length>0){var m=Re.a[l[e]%Re.a.length]||"#D3D3D3",v="rgba("+parseInt(m.substring(1,3),16)+","+parseInt(m.substring(3,5),16);v+=","+parseInt(m.substring(5,7),16)+",0.1)",p.background=v,p.border="1px solid "+m}var f=s.context,b=new Date(c.absoluteTime);return d.a.createElement(ye.a,{key:t,style:p},s.props.showExtended?d.a.createElement("span",{style:{textAlign:"left"}},d.a.createElement("b",{style:{marginBottom:4}},h," (",c.email,") (",b.toLocaleTimeString()+" "+b.toLocaleDateString(),"):"),d.a.createElement("br",null),a):a,s.props.showExtended&&f.userProgress[c.email]?d.a.createElement(y.a,{className:"chat-button-group"},d.a.createElement(Ie,{for:"".concat(f.user.name,"-").concat(h),subject:s.props.t("video-chat-with",{name:h}),style:{float:"right"},onClick:s.videoChatInviteFactory({name:"".concat(f.user.name,"-").concat(h),subject:s.props.t("video-chat-with",{name:h})},c.email),buttonVariant:"outline-secondary",buttonLabel:d.a.createElement("i",{className:"fa fa-xs fa-video"}),tooltipPlacement:"bottom",tooltip:s.props.t("video-chat")}),d.a.createElement(ke,{for:s.props.t("chat-with",{name:h}),onClick:s.chatInviteFactory(s.props.t("chat-with",{name:h}),c.email),buttonVariant:"outline-secondary",buttonLabel:d.a.createElement("i",{className:"fas fa-comments"}),tooltipPlacement:"bottom",tooltip:s.props.t("text-chat"),style:{float:"right"}})):null,d.a.createElement(y.a,{className:"action-display-button-group"},"image"!==s.props.data.type?d.a.createElement(g.a,{variant:"outline-secondary",size:"sm",onClick:s.showModalFactory(Object(n.a)(Object(n.a)({},c),{},{value:u})),"aria-label":s.props.t("fullscreen-view")},d.a.createElement("span",{className:"fa fa-search-plus"})):null,s.props.showExtended?d.a.createElement(g.a,{variant:"outline-danger",size:"sm",onClick:s.props.deleteFactory(e),"aria-label":s.props.t("delete")},d.a.createElement("span",{className:"fa fa-trash"})):null))})),Object(u.a)(Object(l.a)(s),"renderRangePlot",(function(){for(var e=[],t=[],a=[],n=[],r=s.getActions(),o=0;o<r.length;o++)t.push(JSON.parse(r[o].value)),a.push(.5*(t[o][0]+t[o][1])),e.push(.5*(t[o][1]-t[o][0])),n.push(o);return d.a.createElement("div",{style:{height:.75*window.innerHeight}},d.a.createElement(Ge.a,{data:[{y:a,x:n,text:n.map((function(e){return"[".concat(t[e][0],", ").concat(t[e][1],"]")})),error_y:{type:"data",array:e,visible:!0},type:"scatter",mode:"markers",orientation:"h"}],fit:!0,editable:!0,layout:{xaxis:{showticklabels:!1,showline:!1},yaxis:{title:s.props.t("value")}}}))})),s.state={filtered:e.actions.slice(0),searchwords:[],actions:e.actions.slice(0),showModal:!1,modalContent:{},clusters:[],handleMultipleResponses:"first",removeQuestionWords:!0},s}return Object(o.a)(a,[{key:"renderWordCloud",value:function(){var e=this;ot("Rendering word cloud...");var t=this.getActions().map((function(e){return e.value})),a=[];return this.state.removeQuestionWords&&Object(Y.isPrimitive)(this.props.data.question)&&(a=R()(this.props.data.question)),d.a.createElement(h.Fragment,null,d.a.createElement($e,{data:t,height:.65*window.innerHeight,width:.45*window.innerWidth,rotate:0,triggerRender:!0,onClick:function(t){V()(e.state.searchwords,t.text)?e.searchFilter(""):e.searchFilter(t.text)},style:{marginTop:20},stopwords:a}),d.a.createElement(Ye,{texts:this.state.filtered.map((function(e){return e.value})),actionLabel:this.props.actionLabel||this.props.t("action-label"),onClusters:function(t){ot("Received clusters..."),e.setState({clusters:t})},t:this.props.t}),d.a.createElement(Je.a,{tooltip:this.props.t("remove-question-words-tooltip"),tooltipPlacement:"top",size:"small",inline:!0,legend:this.props.t("remove-question-words"),defaultValue:this.state.removeQuestionWords,onChange:function(t){e.setState({removeQuestionWords:t})},style:{left:"5px",bottom:"85px",position:"absolute"}}))}},{key:"renderBarchart",value:function(){var e=this,t=this.getActions(),a=0,n=this.props.data.levels.map((function(t,n){var s=Object(Y.isPrimitive)(t)?t:Oe()(t);return s||(s="".concat(e.props.t("choice")," ").concat(n+1)),s.length>a&&(a=s.length),s})),s=ie()(250,7.5*a),r=function(e,t){if(!e)return[];for(var a={},n=0;n<e.length;n++){var s=e[n];if(B()(s.value)){for(var r=0;r<s.value.length;r++)if(s.value[r]){var o=t[r];a[o]?a[o]+=1:a[o]=1}}else{var l=Object(Y.isPrimitive)(s.value)?s.value:t[s.value];a[l]?a[l]+=1:a[l]=1}}for(var i=de.a,c=new Array(t.length),u=0;u<t.length;u++)a[t[u]]>i&&(i=a[t[u]]),c[u]=a[t[u]];return c}(t,n);return n.length>7&&(n=n.filter((function(e,t){return r[t]>0})),r=r.filter((function(e){return e>0}))),d.a.createElement("div",{style:{height:.75*window.innerHeight}},d.a.createElement(Ge.a,{data:[{y:n,x:r,type:"bar",orientation:"h"}],fit:!0,editable:!0,layout:{xaxis:{title:this.props.t("count")},yaxis:{title:this.props.t("value"),categoryorder:"array",categoryarray:n},margin:{l:s}}}))}},{key:"renderSankeyDiagram",value:function(){for(var e=this.props.data,t=e.left,a=e.right,n=t.concat(a),s=this.getActions(),r={},o=0;o<s.length;o++){var l=s[o].value;if(B()(l))for(var i=0;i<l.length;i++){var c=l[i],u=c.a,h=c.b;r[u+"-"+h]?r[u+"-"+h]+=1:r[u+"-"+h]=1}}for(var p=ee()(r),m=new Array(p.length),v=new Array(p.length),f=new Array(p.length),g=0;g<p.length;g++){var b=p[g].split("-");m[g]=se()(t,b[0]),v[g]=t.length+se()(a,b[1]),f[g]=r[p[g]]}return d.a.createElement("div",{style:{height:.75*window.innerHeight}},d.a.createElement(Ge.a,{data:[{type:"sankey",orientation:"h",node:{pad:15,thickness:30,line:{color:"black",width:.5},label:n,color:"blue"},link:{source:m,target:v,value:f}}],fit:!0,editable:!0,layout:{fontSize:10}}))}},{key:"renderHistogram",value:function(){var e=this.getActions().map((function(e){return e.value})),t=ae()(e);return t=t.sort((function(e,t){return t[2]-e[2]})),d.a.createElement("div",null,d.a.createElement("div",{className:"scrollable-table",style:{height:.3*window.innerHeight}},d.a.createElement(me.a,null,d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,this.props.t("value")),d.a.createElement("th",null,this.props.t("absolute")),d.a.createElement("th",null,this.props.t("relative")))),d.a.createElement("tbody",null,t.map((function(e,t){return d.a.createElement("tr",{key:t},d.a.createElement("td",null,e[0]),d.a.createElement("td",null,e[1]),d.a.createElement("td",null,e[2].toFixed(3)))}))))),d.a.createElement("div",{style:{height:.4*window.innerHeight}},d.a.createElement(Ge.a,{data:[{x:e,type:"histogram",name:"histogram"}],fit:!0,editable:!0,layout:{xaxis:{title:this.props.t("value")},yaxis:{title:this.props.t("count")}}})))}},{key:"renderTable",value:function(){for(var e=this.props.data.rows.length,t=this.props.data.cols.length,a=X()({shape:[e,t],dtype:"int32"}),n=this.getActions(),s=0;s<n.length;s++)for(var r=n[s].value,o=0;o<e;o++)for(var l=0;l<t;l++)!0===r[o][l]&&a.set(o,l,Number(a.get(o,l))+1);var i=d.a.createElement("table",{className:"table table-bordered"},d.a.createElement("thead",null,d.a.createElement("th",null),this.props.data.cols.map((function(e,t){return d.a.createElement("th",{key:t},e)}))),d.a.createElement("tbody",null,this.props.data.rows.map((function(e,n){var s=new Array(t+1);s[0]=d.a.createElement("th",null,e);for(var r=0;r<t;r++)s.push(d.a.createElement("td",null,a.get(n,r)));return d.a.createElement("tr",{key:n},s)}))));return d.a.createElement("div",{style:{height:.75*window.innerHeight}},i)}},{key:"renderPlot",value:function(){var e,t=this;if(0===this.props.actions.length)return d.a.createElement(pe.a,{variant:"warning"},this.props.t("no-data-available"));switch(this.props.data.type){case"image":e=null;break;case"text":default:e=this.renderWordCloud();break;case"factor":e=this.renderBarchart();break;case"number":e=this.renderHistogram();break;case"matrix":e=this.renderTable();break;case"tensor":e=this.renderNestedTable();break;case"matches":e=this.renderSankeyDiagram();break;case"range":e=this.renderRangePlot()}if(!e)return null;var a=Q()(K()(this.props.actionLabel));return d.a.createElement("div",null,e,d.a.createElement(Qe,{style:{zIndex:2e3},onChange:function(e){var a;switch(e){case 0:a="first";break;case 1:a="all";break;case 2:a="last"}t.setState({handleMultipleResponses:a})}},d.a.createElement("i",null,d.a.createElement(z.a,{i18nKey:"include-first",ns:"ResponseVisualizer"},d.a.createElement("b",null,"Only")," include first ",a," for any student.")),d.a.createElement("i",null,d.a.createElement(z.a,{i18nKey:"include-all",ns:"ResponseVisualizer"},"Include ",d.a.createElement("b",null,"all")," ",a,"s for any student.")),d.a.createElement("i",null,d.a.createElement(z.a,{i18nKey:"include-latest",ns:"ResponseVisualizer"},d.a.createElement("b",null,"Only")," include latest ",a," for any student."))))}},{key:"render",value:function(){return d.a.createElement(h.Fragment,null,d.a.createElement(we.a,{show:!0,onHide:this.props.toggleActions,dialogClassName:"modal-100w"},d.a.createElement(rt,{componentID:this.props.componentID,actionLabel:this.props.actionLabel,onPeriodChange:this.props.onPeriodChange,cohorts:this.context.cohorts,selectedCohort:this.props.selectedCohort,onCohortChange:this.props.onCohortChange,actions:this.props.actions,t:this.props.t}),d.a.createElement(we.a.Body,{style:{minHeight:.75*window.innerHeight,padding:0}},d.a.createElement(be.a,null,d.a.createElement(fe.a,{md:6},this.state.filtered.length>0?d.a.createElement("div",{style:{marginLeft:0,overflowY:"scroll",height:.75*window.innerHeight}},d.a.createElement(Ce.a,{initialIndex:0,itemRenderer:this.renderListGroupItem,length:this.state.filtered.length,type:"image"===this.props.data.type?"uniform":"variable",pageSize:50,minSize:10,itemSizeGetter:this.itemSizeGetter})):d.a.createElement(ge.a,{body:!0,className:"bg-light"},d.a.createElement("h2",null,this.props.t("no-matching-data")))),d.a.createElement(fe.a,{md:6,style:{overflowY:"auto",maxWidth:"49.2%"}},this.renderPlot()))),d.a.createElement(we.a.Footer,null,d.a.createElement("h4",null,d.a.createElement(f.a,{variant:"secondary"},this.props.t("num-actions",{label:O()(this.props.actionLabel),n:this.state.filtered.length}))),d.a.createElement(at,{onClick:this.searchFilter,extended:this.props.showExtended,t:this.props.t}),d.a.createElement(g.a,{variant:"secondary",onClick:this.props.toggleExtended},this.props.showExtended?this.props.t("hide-extended"):this.props.t("show-extended")),d.a.createElement(g.a,{onClick:this.props.toggleActions},this.props.t("close")))),d.a.createElement(nt,{show:this.state.showModal,onHide:this.hideModal,modalContent:this.state.modalContent,actionLabel:this.props.actionLabel,dataType:this.props.data.type,showExtended:this.state.showExtended,t:this.props.t}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a={};return ue()(e.actions.length,t.actions.length)>=5||e.actions.length===t.actions.length-1?(a.filtered=e.actions.slice(),a.actions=e.actions.slice(),a.clusters=[],a):null}}]),a}(h.Component);ut.defaultProps={actionLabel:null},ut.contextType=A.a;var ht=ut,dt=a(36),pt=a.n(dt),mt=a(111),vt=a.n(mt),ft=m()("isle:response-visualizer");var gt=function(e){var t;return e.type===P.rb?(e=pt()(e),ft("Received a feedback action..."),t=vt()(e.value)?e.value:JSON.parse(e.value),e.value="",t.comments&&(e.value+=t.comments+". "),t.noUnderstanding&&(e.value+="I do not understand this. "),t.needsExplanation&&(e.value+="It needs a more detailed explanation. "),t.noLogic&&(e.value+="I can't follow the logic. ")):e.type!==P.eb&&e.type!==P.db||vt()(e.value)||(e.value=JSON.parse(e.value)),e},bt=m()("isle:response-visualizer");Object(T.a)("ResponseVisualizer");var yt=function(e){return e.substr(e.lastIndexOf("_",e.lastIndexOf("_")-1)+1)},wt=function(e,t,a){var n=[];for(var s in e){if(C()(e,s)&&!C()(t,s))e[s]===a&&n.push(s)}return n},Et=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e,n){var s;return Object(r.a)(this,a),s=t.call(this,e),Object(u.a)(Object(l.a)(s),"toggleActions",(function(){s.context.log({id:s.props.id+"_response_visualizer",type:P.mb,value:!s.state.showActions});var e={showActions:!s.state.showActions};e.showActions?s.addSessionActions():e.period=null,s.setState(e)})),Object(u.a)(Object(l.a)(s),"toggleExtended",(function(){s.setState({showExtended:!s.state.showExtended},(function(){s.context.log({id:s.props.id+"_response_visualizer",type:P.lb,value:s.state.showExtended})}))})),Object(u.a)(Object(l.a)(s),"onPeriodChange",(function(e){s.setState({period:e},s.addSessionActions)})),Object(u.a)(Object(l.a)(s),"onCohortChange",(function(e){bt("Change the selected cohort..."),s.context.selectCohort(e.target.value)})),Object(u.a)(Object(l.a)(s),"pushSessionAction",(function(e){e=gt(e);var t=s.state.actions;if(s.state.period){var a=s.state.period,n=a.from,r=a.to;e.absoluteTime>n&&e.absoluteTime<r&&t.unshift(e)}else t.unshift(e);var o={actions:t,nActions:s.state.nActions+1};s.emailHash[e.email]||(s.emailHash[e.email]=e.type,s.props.success&&e.type===s.props.success?o.nSuccess=s.state.nSuccess+1:s.props.danger&&e.type===s.props.danger?o.nDanger=s.state.nDanger+1:s.props.info&&e.type===s.props.info&&(o.nInfo=s.state.nInfo+1)),s.setState(o)})),Object(u.a)(Object(l.a)(s),"addSessionActions",(function(){var e=s.context;bt(e.selectedCohort?"Add session actions for cohort "+e.selectedCohort.title:"Add session actions...");var t=e.socketActions,a=[];s.emailHash={};for(var n=0;n<t.length;n++){var r=t[n];if(r.id===s.props.id&&(r.type===s.props.info||r.type===s.props.success||r.type===s.props.danger)){if(r=gt(r),e.selectedCohort&&!N(e.selectedCohort,r.email))continue;if(s.emailHash[r.email]=r.type,s.state.period){var o=s.state.period,l=o.from,i=o.to;r.absoluteTime>l&&r.absoluteTime<i&&a.push(r)}else a.push(r)}}var c={nSuccess:0,nDanger:0,nInfo:0,actions:a};s.state.period||(c.nActions=a.length);for(var u=e.userList,h=0;h<u.length;h++){var d=u[h].email;if(C()(s.emailHash,d)){var p=s.emailHash[d];s.props.success&&p===s.props.success?c.nSuccess+=1:s.props.danger&&p===s.props.danger?c.nDanger+=1:s.props.info&&p===s.props.info&&(c.nInfo+=1)}}s.setState(c,(function(){e.update(M.M,s.props.id)}))})),Object(u.a)(Object(l.a)(s),"closeDeleteModal",(function(){s.setState({showDeleteModal:!1,selectedAction:null})})),Object(u.a)(Object(l.a)(s),"deleteFactory",(function(e){return function(){bt("Delete action at index "+e),s.setState({selectedAction:s.state.actions[e],showDeleteModal:!0})}})),Object(u.a)(Object(l.a)(s),"deleteSelectedAction",(function(){s.context.removeSessionElementFromDB(s.state.selectedAction.sessiondataID,(function(e){e||s.addSessionActions(),s.closeDeleteModal()}))})),s.state={actions:[],nActions:0,nSuccess:0,nDanger:0,nInfo:0,showActions:!1,showExtended:!1,showDeleteModal:!1,selectedAction:null,period:null},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.context;this.registerInSession(),this.addSessionActions(),t&&(this.unsubscribe=t.subscribe((function(a,n){if(a===M.B||a===M.C)e.addSessionActions();else if(a===M.n&&n.id===e.props.id)if(n.type===M.h||n.type===M.l)e.forceUpdate();else if(n.type===e.props.info||n.type===e.props.success||n.type===e.props.danger){if(t.selectedCohort&&!N(t.selectedCohort,n.email))return;e.pushSessionAction(n)}})))}},{key:"componentWillUnmount",value:function(){var e=this;this.unsubscribe&&this.unsubscribe();var t=this.context;delete t.responseVisualizers[this.props.id],t.responseVisualizerIds=t.responseVisualizerIds.filter((function(t){return t!==e.props.id}))}},{key:"registerInSession",value:function(){var e=this.props,t=this.context;if(e.info&&e.id&&!e.noSessionRegistration){bt("Register response visualizer for ".concat(e.id," in session:")),t.responseVisualizers[e.id]={type:e.info,ref:this};var a=t.responseVisualizerIds;a.push(e.id),t.debouncedInitializeProgress(),a.sort((function(e,t){return e=document.getElementById("".concat(e,"_response_visualizer")),t=document.getElementById("".concat(t,"_response_visualizer")),e&&t?e===t?0:2&e.compareDocumentPosition(t)?1:-1:0}))}}},{key:"renderTooltip",value:function(){var e,t=this.context;e=t.selectedCohort?t.activeCohortMembers.length:t.userList.length;var a=wt(t.userFocuses,this.emailHash,this.props.id),n="".concat(this.props.t("interaction-rate-tooltip"),":\n\n"),s=d.a.createElement("table",{className:"table table-bordered table-condensed"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,this.props.t("action-type")),d.a.createElement("th",null,this.props.t("rate")),d.a.createElement("th",null,this.props.t("color")))),d.a.createElement("tbody",null,this.props.success?d.a.createElement("tr",null,d.a.createElement("td",null,yt(this.props.success)),d.a.createElement("td",null,this.state.nSuccess," / ",e),d.a.createElement("td",null,this.props.t("green"))):null,this.props.danger?d.a.createElement("tr",null,d.a.createElement("td",null,yt(this.props.danger)),d.a.createElement("td",null,this.state.nDanger," / ",e),d.a.createElement("td",null,this.props.t("red"))):null,this.props.info?d.a.createElement("tr",null,d.a.createElement("td",null,yt(this.props.info)),d.a.createElement("td",null,this.state.nInfo," / ",e),d.a.createElement("td",null,this.props.t("blue"))):null,d.a.createElement("tr",null,d.a.createElement("td",null,this.props.t("in-focus")),d.a.createElement("td",null,a.length," / ",e),d.a.createElement("td",null,this.props.t("orange")))));return n=d.a.createElement(b.a,{title:n,style:{fontSize:12,textAlign:"left",maxWidth:1200}},d.a.createElement(b.a.Content,null,s,d.a.createElement("p",null,this.props.t("users-in-focus")),d.a.createElement("p",{style:{wordWrap:"break-word"}},a.join(", "))))}},{key:"renderFullscreenModal",value:function(){var e={};return this.props.buttonLabel?e.actionLabel=this.props.buttonLabel:e.actionLabel=this.props.t("actions"),this.state.showActions?d.a.createElement(ht,Object(s.a)({componentID:this.props.id,actions:this.state.actions,showExtended:this.state.showExtended,deleteFactory:this.deleteFactory,onPeriodChange:this.onPeriodChange,toggleExtended:this.toggleExtended,toggleActions:this.toggleActions,data:this.props.data,selectedCohort:this.context.selectedCohort,onCohortChange:this.onCohortChange,t:this.props.t},e)):null}},{key:"render",value:function(){if(!this.props.id)return d.a.createElement(S.a,{owner:!0},d.a.createElement("span",{className:"title no-id-message"},this.props.t("no-id")));var e,t=this.context;e=t.selectedCohort?t.activeCohortMembers.length:t.userList.length;var a=wt(t.userFocuses,this.emailHash,this.props.id),s=this.state.nSuccess/e;s*=100;var r=this.state.nDanger/e;r*=100;var o=this.state.nInfo/e;o*=100;var l=a.length/e;l*=100;var i=this.props.buttonLabel||this.props.t("actions");return d.a.createElement("div",{id:"".concat(this.props.id,"_response_visualizer"),style:{display:this.props.inline?"inline":"inherit"}},d.a.createElement(S.a,{owner:!0},this.renderFullscreenModal(),d.a.createElement(y.a,{size:"sm",vertical:!0,style:Object(n.a)({verticalAlign:"inherit"},this.props.style)},d.a.createElement(k.a,{placement:"top",tooltip:this.props.showID?d.a.createElement("span",null,this.props.t("open-tooltip",{label:O()(i),id:this.props.id})):null},d.a.createElement(g.a,{onClick:this.toggleActions,style:Object(n.a)({},this.props.buttonStyle),variant:this.props.variant,size:"sm",id:"".concat(this.props.id,"_answers_button")},d.a.createElement("span",{style:{marginRight:"5px",pointerEvents:"none"}},i),d.a.createElement(f.a,{variant:"dark",style:{fontSize:"10px",pointerEvents:"none"}},this.state.nActions))),d.a.createElement(j.a,{trigger:["hover","focus"],placement:"top",overlay:this.renderTooltip()},d.a.createElement(w.a,{style:{width:"100%",marginTop:"3px",height:"0.7rem",boxShadow:"0 0 2px black"}},d.a.createElement(w.a,{variant:"info",now:o,max:100,min:0}),d.a.createElement(w.a,{variant:"warning",now:l,max:100,min:0}),d.a.createElement(w.a,{variant:"success",now:s,max:100,min:0}),d.a.createElement(w.a,{variant:"danger",now:r,max:100,min:0}))))),d.a.createElement(D,{show:this.state.showDeleteModal,onDelete:this.deleteSelectedAction,onClose:this.closeDeleteModal}))}}]),a}(h.Component);Et.defaultProps={buttonLabel:null,buttonStyle:{},data:{type:"text"},showID:!0,success:null,danger:null,info:null,inline:!1,style:{},variant:"secondary",noSessionRegistration:!1},Et.contextType=A.a;t.default=Object(v.a)("ResponseVisualizer")(Et)},526:function(e,t,a){"use strict";var n=a(529);t.a=n.a},529:function(e,t,a){"use strict";(function(e){var n=a(16),s=a(12),r=a(13),o=a(27),l=a(20),i=a(39),c=a(50),u=a(485),h=a.n(u),d=a(8),p=a.n(d),m=a(510),v=a.n(m),f=a(177),g=a.n(f),b=a(519),y=a(497),w=a(504),E=(a(530),function(t){Object(l.a)(u,t);var a=Object(i.a)(u);function u(t,n){var r;Object(s.a)(this,u),r=a.call(this,t),Object(c.a)(Object(o.a)(r),"updateValue",(function(t){r.setState({value:t},(function(){r.props.bind&&e.lesson.setState({[r.props.bind]:t})}))})),Object(c.a)(Object(o.a)(r),"handleChange",(function(e){var t=e.target.checked;r.props.onChange(t),r.updateValue(t)})),Object(c.a)(Object(o.a)(r),"handleSpanChange",(function(e){var t=null!==r.props.value?!r.props.value:!r.state.value;r.props.onChange(t),r.updateValue(t)}));var l=n;return r.state={value:t.bind&&l.state?l.state[t.bind]:t.defaultValue,bind:t.bind,defaultValue:t.defaultValue},r}return Object(r.a)(u,[{key:"componentDidUpdate",value:function(){if(this.props.bind){var t=e.lesson.state[this.props.bind];t!==this.state.value&&this.setState({value:t})}}},{key:"render",value:function(){var e=this.state.value;null!==this.props.value&&(e=this.props.value);var t=h.a.createElement("input",{className:"checkbox-input",type:"checkbox",checked:e,value:"checkbox",onChange:this.handleChange,disabled:this.props.disabled,"aria-label":this.props.tooltip});if(!0===this.props.inline)return h.a.createElement(y.a,{tooltip:this.props.tooltip,placement:this.props.tooltipPlacement},h.a.createElement("span",{style:Object(n.a)({marginLeft:"8px"},this.props.style)},t,h.a.createElement("span",{role:"button",tabIndex:0,className:"checkbox-legend",style:{color:this.props.disabled?"darkgray":null},onClick:this.handleSpanChange,onKeyPress:this.handleSpanChange},this.props.legend)));var a=this.props.disabled?g.a:this.handleSpanChange;return h.a.createElement(y.a,{tooltip:this.props.tooltip,placement:this.props.tooltipPlacement},h.a.createElement("div",{className:"input checkbox-input-div",style:this.props.style},t,h.a.createElement("span",{role:"button",tabIndex:0,className:"checkbox-legend",style:{color:this.props.disabled?"darkgray":null},onClick:a,onKeyPress:a},this.props.legend)))}}],[{key:"getDerivedStateFromProps",value:function(t,a){var n={};return t.defaultValue!==a.defaultValue?(n.value=t.defaultValue,n.defaultValue=t.defaultValue):t.bind!==a.bind&&(n.value=e.lesson.state[t.bind],n.bind=t.bind),v()(n)?null:n}}]),u}(b.a));E.defaultProps={bind:"",onChange:function(){},defaultValue:!1,value:null,disabled:!1,inline:!1,legend:"",tooltip:"",tooltipPlacement:"right",style:{}},E.propTypes={bind:p.a.string,defaultValue:p.a.bool,value:p.a.bool,disabled:p.a.bool,inline:p.a.bool,onChange:p.a.func,legend:p.a.oneOfType([p.a.string,p.a.node]),tooltip:p.a.string,tooltipPlacement:p.a.oneOf(["left","top","right","bottom"]),style:p.a.object},E.contextType=w.a,t.a=E}).call(this,a(29))},530:function(e,t,a){},710:function(e,t,a){}}]);
//# sourceMappingURL=82.df26e396.chunk.js.map