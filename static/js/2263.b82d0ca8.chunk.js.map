{"version":3,"sources":["actions/badge.js","actions/namespace.js","components/admin/create_categorical_column.js","components/ticket-modal/index.js","components/namespace-data/files_page.js","components/namespace-data/announcements_page.js","components/namespace-data/editable_progress.js","components/namespace-data/progress_page.js","components/namespace-data/cohorts_page.js","components/namespace-data/grades_page.js","../node_modules/react-bootstrap/esm/ToggleButton.js","../node_modules/react-bootstrap/esm/ToggleButtonGroup.js","components/namespace-data/actions_page.js","components/namespace-data/tickets_page.js","components/namespace-data/index.js","actions/announcement.js","containers/visible-namespace-data/index.js","utils/file_saver.js","utils/format_time.js","../node_modules/@stdlib/assert/is-undefined-or-null/lib/index.js","../node_modules/@stdlib/assert/is-undefined-or-null/lib/main.js","../node_modules/@stdlib/constants/float64/max-safe-integer/lib/index.js","../node_modules/@stdlib/math/base/assert/is-infinite/lib/index.js","../node_modules/@stdlib/math/base/assert/is-infinite/lib/main.js","../node_modules/@stdlib/math/base/assert/is-negative-zero/lib/index.js","../node_modules/@stdlib/math/base/assert/is-negative-zero/lib/main.js","../node_modules/@stdlib/math/base/special/abs/lib/index.js","../node_modules/@stdlib/math/base/special/abs/lib/main.js","../node_modules/@stdlib/math/base/special/ceil/lib/index.js","../node_modules/@stdlib/math/base/special/ceil/lib/main.js","../node_modules/@stdlib/math/base/special/clamp/lib/index.js","../node_modules/@stdlib/math/base/special/clamp/lib/main.js","../node_modules/@stdlib/math/base/special/min/lib/index.js","../node_modules/@stdlib/math/base/special/min/lib/min.js","../node_modules/@stdlib/utils/omit/lib/index.js","../node_modules/@stdlib/utils/omit/lib/omit.js","../node_modules/react-bootstrap/esm/Alert.js","../node_modules/react-bootstrap/esm/DropdownButton.js","../node_modules/react-bootstrap/esm/ElementChildren.js","../node_modules/react-bootstrap/esm/ProgressBar.js"],"names":["receivedUserBadges","badges","type","USER_RECEIVED_BADGES","payload","getUserBadges","dispatch","axios","server","res","data","addedBadges","length","i","item","contains","name","addNotification","description","picture","pic","children","i18next","className","src","alt","style","marginTop","level","position","dismissible","autoDismiss","addErrorNotification","getUserBadgesInjector","getAvailableBadges","RETRIEVED_BADGES","getAvailableBadgesInjector","appendCreatedNamespace","namespace","APPEND_CREATED_NAMESPACE","changedNamespace","title","owners","announcements","cohorts","enableTicketing","_id","CHANGED_NAMESPACE","deletedCurrentNamespace","id","DELETED_CURRENT_NAMESPACE","updateStudentProgress","email","lessonID","progress","cohort","UPDATED_STUDENT_PROGRESS","createNamespace","props","successful","Error","message","onNamespace","history","replace","createNamespaceInjector","deleteCurrentNamespace","deleteCurrentNamespaceInjector","updateCurrentNamespace","ns","UPDATED_OWNED_NAMESPACE","getCohorts","namespaceID","updateCurrentNamespaceInjector","getNamespaceActions","namespaceTitle","qs","blob","Blob","saveAs","getNamespaceActionsInjector","adjustProgress","adjustProgressInjector","getAllNamespaces","GET_ALL_NAMESPACES","namespaces","getAllNamespacesInjector","setLessonOrder","lessons","setLessonOrderInjector","Header","Cell","accessor","labels","maxWidth","filterMethod","filter","row","value","pivotId","String","Filter","onChange","handleChange","event","newValue","target","onBlur","width","backgroundColor","map","x","idx","key","TicketModal","setState","response","submitTicketMessage","state","ticketID","ticket","done","openTicket","closeTicket","val","t","createdAt","Date","author","date","toLocaleTimeString","toLocaleDateString","body","str","this","Fragment","Modal","show","onHide","dialogClassName","as","OverlayTrigger","placement","overlay","Tooltip","Button","onClick","float","variant","aria-label","aria-hidden","height","overflowY","whiteSpace","lesson","component","attachments","file","href","filename","marginLeft","rel","marginRight","messages","renderMessage","background","FormGroup","controlId","FormLabel","FormControl","rows","placeholder","handleResponseChange","disabled","block","handleResponseSubmit","toggleCompletion","Component","defaultProps","withTranslation","EXPORT_COLUMNS","debug","logger","prepareExportData","pick","FilesPage","handleFileDeletion","deletionID","ownerFiles","toggleDeleteModal","showDeleteModal","minWidth","lowercase","size","resizable","filterable","sortable","copyToClipboard","url","startsWith","d","parts","trim","split","pop","join","color","roundn","min","max","maxValue","ceil","fileMaxSize","defaultVal","paddingLeft","paddingRight","paddingTop","allowSameValues","minValue","step","formatLabel","currentFiles","dashboardTable","table","getResolvedState","sortedData","JSON","stringify","header","err","output","showExplorer","columns","createColumns","fileInputKey","getFiles","namespaceName","prevProps","files","replacement","updatedAt","push","obsToVar","categorical","quantitative","close","toggleExplorer","ButtonGroup","saveCSV","saveJSON","htmlFor","cursor","Badge","accept","handleUpload","display","ref","r","onButtonClick","onConfirm","handleDelete","AnnouncementsPage","ndx","editItem","announcement","deleteAnnouncement","clear","closeDeleteModal","now","getTime","user","addAnnouncement","editAnnouncement","mode","index","dateString","navigator","language","hour","minute","editMessage","isDisabled","isEmpty","renderMessages","Card","Form","padding","handleInputChange","createMessage","deleteSelectedMessage","isEditing","newProgress","clamp","hasChanged","onSubmit","originalProgress","role","tabIndex","toggleEditing","onKeyPress","handleSubmit","ProgressBar","fontSize","label","nextProps","prevState","filterNumbersFactory","lessonData","isUndefinedOrNull","round","sortFactory","a","b","filterMethodCategories","isArray","ProgressPage","original","fontWeight","formatTime","spentTime","toLocaleString","assembleData","displayedMembers","lessonSortDirection","lessonOrder","createDisplayedMembers","members","cohortMembers","j","concat","lastName","firstName","COLUMNS","v","_lesson","accessorFactory","sortMethod","len","out","Array","member","_original","availableCustomFields","fieldName","customFields","lessonName","slice","sort","localeCompare","DropdownButton","onSelect","reorderColumns","Dropdown","eventKey","renderSortButton","CohortsPage","selectedCohorts","actualMember","cohortOptions","ani","showUser","animation","list","renderMember","totalTime","time","score","closeActualMember","renderMemberLessons","renderMemberBadges","isMulti","options","handleCohortChange","renderCohort","renderActualMember","grades","points","_sumPoints","GradesPage","lessonGrades","maxPoints","metadata","tally","hasOwnProp","margin","_excluded","noop","ToggleButton","_ref","checked","inputRef","_useState","useState","focused","setFocused","handleFocus","useCallback","e","tagName","handleBlur","undefined","active","autoComplete","onFocus","displayName","ToggleButtonGroup","_useUncontrolled","controlledProps","getValues","toggle","child","values","_child$props","childVal","childOnChange","indexOf","inputVal","isActive","n","handleToggle","vertical","ActionsPage","anonymized","lessonActionsPage","actualLesson","hideLessonActions","renderCohorts","showLessonActions","renderExportSection","handleRadioChange","retrieveActions","renderLessons","renderLessonActionsPage","RE_TICKET","TicketsPage","showTicketModal","tickets","minTime","PINF","maxTime","moment","createTextColumn","selectedTicket","toggleTicketModal","createCategoricalColumn","higher","lower","updatePriority","createBooleanColumn","trueLabel","falseLabel","textAlign","popover","Popover","maxHeight","arrowProps","omit","trigger","createDateColumn","startDate","endDate","priority","browser","platform","version","os","family","architecture","getCourseTickets","location","search","match","exec","assembleExplorerData","NamespaceData","activePage","formData","FormData","append","uploadFile","deleteFile","sendTicketMessage","selectedKey","Number","params","subpage","getBadges","handleAnnouncementEdit","handleAnnouncementDeletion","handleAnnouncementCreation","getOwnerFiles","Alert","page","renderPage","Nav","activeKey","handleSelect","editedAnnouncement","EDITED_ANNOUNCEMENT","createdAnnouncement","CREATED_ANNOUNCEMENT","deletedAnnouncement","DELETED_ANNOUNCEMENT","namespaceAxios","addAnnouncementInjector","deleteAnnouncementInjector","editAnnouncementInjector","VisibleNamespaceData","connect","getCourseTicketsInjector","getFilesInjector","getOwnerFilesInjector","addNotificationInjector","deleteFileInjector","sendTicketMessageInjector","closeTicketInjector","openTicketInjector","uploadFileInjector","updatePriorityInjector","withRouter","RE_AUTO_BOM","throwOutside","ex","setImmediate","autoBOM","test","fromCharCode","view","userAgent","saveLink","document","createElementNS","canUseSaveLink","isSafari","HTMLElement","safari","isChromeIOS","setTimeout","proto","FileSaver","prototype","msSaveOrOpenBlob","noAutoBOM","abort","readyState","INIT","WRITING","DONE","error","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","getURL","URL","webkitURL","revoke","revokeObjectURL","remove","objectURL","self","force","dispatchAll","filesaver","eventTypes","listener","call","createObjectURL","node","download","MouseEvent","dispatchEvent","FileReader","reader","onloadend","result","open","readAsDataURL","fsError","saveFactory","window","content","opts","hours","minutes","seconds","floor","module","exports","isInfinite","NINF","isNegativeZero","abs","Math","isnan","NaN","y","m","arguments","objectKeys","isString","isStringArray","obj","keys","ownKeys","TypeError","DivStyledAsH4","AlertHeading","AlertLink","transition","closeLabel","uncontrolledProps","bsPrefix","onClose","prefix","handleClose","Transition","alert","unmountOnExit","in","Link","Heading","propTypes","menuAlign","menuRole","renderMenuOnMount","rootCloseEvent","childBsPrefix","align","renderOnMount","func","_excluded2","_excluded3","getPercentage","percentage","renderProgressBar","_classNames","srOnly","striped","animated","_ref2","isChild","wrapperProps","cloneElement"],"mappings":"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","file":"static/js/2263.b82d0ca8.chunk.js","sourcesContent":["/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport axios from 'axios';\nimport i18next from 'i18next';\nimport contains from '@stdlib/assert/contains';\nimport server from 'constants/server';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { RETRIEVED_BADGES, USER_RECEIVED_BADGES } from 'constants/action_types.js';\n\n\n// FUNCTIONS //\n\nfunction createBadgeNotification({ name, description, picture }) {\n\tconst pic = server + '/badges/' + picture;\n\treturn {\n\t\tchildren: (\n\t\t\t<div>\n\t\t\t\t<h3>{i18next.t('common:received-badge')}{name}</h3>\n\t\t\t\t<div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className=\"received-badge-before\" />\n\t\t\t\t\t\t<img className=\"received-badge\" src={pic} alt=\"Received Badge\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<p style={{ marginTop: 15 }}>{i18next.t('common:received-badge-for')}<b>{description}</b></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t),\n\t\tlevel: 'info',\n\t\tposition: 'tc',\n\t\tdismissible: 'button',\n\t\tautoDismiss: 0\n\t};\n}\n\n\n// FUNCTIONS //\n\nexport function receivedUserBadges( badges ) {\n\treturn {\n\t\ttype: USER_RECEIVED_BADGES,\n\t\tpayload: {\n\t\t\tbadges\n\t\t}\n\t};\n}\n\nexport function retrievedBadges( badges ) {\n\treturn {\n\t\ttype: RETRIEVED_BADGES,\n\t\tpayload: {\n\t\t\tbadges\n\t\t}\n\t};\n}\n\nexport const getUserBadges = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_user_badges' );\n\t\tconst { badges, addedBadges } = res.data;\n\t\tdispatch( receivedUserBadges( badges ) );\n\t\tif ( addedBadges.length > 0 ) {\n\t\t\tfor ( let i = 0; i < badges.length; i++ ) {\n\t\t\t\tconst item = badges[i];\n\t\t\t\tif ( contains( addedBadges, item.name ) ) {\n\t\t\t\t\taddNotification( dispatch, createBadgeNotification( item ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getUserBadgesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getUserBadges( dispatch );\n\t};\n};\n\nexport const getAvailableBadges = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_available_badges' );\n\t\tdispatch( retrievedBadges( res.data ) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getAvailableBadgesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getAvailableBadges( dispatch );\n\t};\n};\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport axios from 'axios';\nimport qs from 'querystring';\nimport i18next from 'i18next';\nimport saveAs from 'utils/file_saver.js';\nimport server from 'constants/server';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { getCohorts } from 'actions/cohort';\nimport { APPEND_CREATED_NAMESPACE, CHANGED_NAMESPACE, DELETED_CURRENT_NAMESPACE, GET_ALL_NAMESPACES, UPDATED_OWNED_NAMESPACE, UPDATED_STUDENT_PROGRESS } from 'constants/action_types.js';\n\n\n// EXPORTS //\n\nexport function appendCreatedNamespace( namespace ) {\n\treturn {\n\t\ttype: APPEND_CREATED_NAMESPACE,\n\t\tpayload: {\n\t\t\tnamespace\n\t\t}\n\t};\n}\n\nexport function changedNamespace({ title, owners, announcements = [], cohorts = [], description, enableTicketing, _id }) {\n\treturn {\n\t\ttype: CHANGED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tannouncements,\n\t\t\tcohorts,\n\t\t\tdescription,\n\t\t\tenableTicketing,\n\t\t\towners,\n\t\t\t_id\n\t\t}\n\t};\n}\n\nexport function deletedCurrentNamespace( id ) {\n\treturn {\n\t\ttype: DELETED_CURRENT_NAMESPACE,\n\t\tpayload: {\n\t\t\tid\n\t\t}\n\t};\n}\n\nexport function updateStudentProgress({ email, lessonID, progress, cohort }) {\n\treturn {\n\t\ttype: UPDATED_STUDENT_PROGRESS,\n\t\tpayload: {\n\t\t\temail, lessonID, progress, cohort\n\t\t}\n\t};\n}\n\nexport function updatedOwnedNamespace({ title, owners, description, enableTicketing, _id }) {\n\treturn {\n\t\ttype: UPDATED_OWNED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\towners,\n\t\t\tenableTicketing,\n\t\t\t_id\n\t\t}\n\t};\n}\n\nexport const createNamespace = async ( dispatch, { title, description, owners, props }) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/create_namespace', { title, description, owners });\n\t\tif ( !res.data.successful ) {\n\t\t\treturn addErrorNotification( dispatch, new Error( res.data.message ));\n\t\t}\n\t\tconst namespace = res.data.namespace;\n\t\tprops.onNamespace( namespace );\n\t\tdispatch( appendCreatedNamespace( namespace ) );\n\t\tprops.history.replace( '/lessons' );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: res.data.successful ? 'success' : 'error'\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const createNamespaceInjector = dispatch => {\n\treturn async ({ title, description, owners, props }) => {\n\t\tawait createNamespace( dispatch, { title, description, owners, props } );\n\t};\n};\n\nexport const deleteCurrentNamespace = async ( dispatch, id, history ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/delete_namespace', { id });\n\t\tif ( history ) {\n\t\t\thistory.replace( '/lessons' );\n\t\t}\n\t\tdispatch( deletedCurrentNamespace( id ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const deleteCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id, history ) => {\n\t\tawait deleteCurrentNamespace( dispatch, id, history );\n\t};\n};\n\nexport const updateCurrentNamespace = async ( dispatch, ns ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/update_namespace', { ns });\n\t\tdispatch( changedNamespace( res.data.namespace ) );\n\t\tdispatch( updatedOwnedNamespace( res.data.namespace ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tgetCohorts( dispatch, {\n\t\t\tnamespaceID: ns._id\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const updateCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id, ns ) => {\n\t\tawait updateCurrentNamespace( dispatch, id, ns );\n\t};\n};\n\nexport const getNamespaceActions = async ( dispatch, { namespaceID, namespaceTitle } ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_namespace_actions?'+qs.stringify({ namespaceID }) );\n\t\tconst blob = new Blob([ res.data ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `actions_${namespaceTitle}.json`;\n\t\tsaveAs( blob, name );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getNamespaceActionsInjector = ( dispatch ) => {\n\treturn async ({ namespaceID, namespaceTitle }) => {\n\t\tawait getNamespaceActions( dispatch, { namespaceID, namespaceTitle });\n\t};\n};\n\nexport const adjustProgress = async ( dispatch, { email, lessonID, namespaceID, progress, cohort }) => {\n\tconst res = await axios.post( server+'/user_adjust_progress', {\n\t\temail, lessonID, namespaceID, progress\n\t});\n\taddNotification( dispatch, {\n\t\ttitle: i18next.t('common:updated'),\n\t\tmessage: res.data.message,\n\t\tlevel: 'success'\n\t});\n\tdispatch( updateStudentProgress({ email, lessonID, progress, cohort }) );\n};\n\nexport const adjustProgressInjector = ( dispatch ) => {\n\treturn async ( { email, lessonID, namespaceID, progress, cohort } ) => {\n\t\tawait adjustProgress( dispatch, { email, lessonID, namespaceID, progress, cohort } );\n\t};\n};\n\nexport const getAllNamespaces = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_all_namespaces' );\n\t\tdispatch({\n\t\t\ttype: GET_ALL_NAMESPACES,\n\t\t\tpayload: {\n\t\t\t\tnamespaces: res.data.namespaces\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getAllNamespacesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getAllNamespaces( dispatch );\n\t};\n};\n\nexport const setLessonOrder = async ( dispatch, { lessons, id }) => {\n\ttry {\n\t\tawait axios.post( server+'/set_lesson_order', {\n\t\t\tlessons, id\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const setLessonOrderInjector = ( dispatch ) => {\n\treturn async ({ lessons, id }) => {\n\t\tawait setLessonOrder( dispatch, { lessons, id } );\n\t};\n};\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\n\n\n// MAIN //\n\nfunction createCategoricalColumn({ Header, Cell, accessor, labels, maxWidth = 150 }) {\n\tlet style;\n\treturn {\n\t\tHeader,\n\t\taccessor,\n\t\tstyle,\n\t\tCell,\n\t\tfilterMethod: ( filter, row ) => {\n\t\t\tif ( filter.value === 'all' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst id = filter.pivotId || filter.id;\n\t\t\tif ( row[ id ] === void 0 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn String( row[ id ] ) === filter.value;\n\t\t},\n\t\tFilter: ({ filter, onChange }) => {\n\t\t\tconst handleChange = ( event ) => {\n\t\t\t\tconst newValue = event.target.value;\n\t\t\t\tonChange( newValue );\n\t\t\t};\n\t\t\tlet value;\n\t\t\tif ( !filter ) {\n\t\t\t\tvalue = 'all';\n\t\t\t} else {\n\t\t\t\tvalue = filter.value;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<select\n\t\t\t\t\tonBlur={handleChange} onChange={handleChange}\n\t\t\t\t\tstyle={{ width: '100%', backgroundColor: 'ghostwhite' }}\n\t\t\t\t\tvalue={value}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"all\">Show All</option>\n\t\t\t\t\t{labels.map( ( x, idx ) => <option value={x} key={idx} >{x}</option> )}\n\t\t\t\t</select>\n\t\t\t);\n\t\t},\n\t\tmaxWidth: maxWidth\n\t};\n}\n\n\n// EXPORTS //\n\nexport default createCategoricalColumn;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Modal from 'react-bootstrap/Modal';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport server from 'constants/server';\nimport './ticket_modal.css';\n\n\n// FUNCTIONS //\n\nconst createTooltip = ( str ) => {\n\treturn <Tooltip id=\"tooltip\">{str}</Tooltip>;\n};\n\n\n// MAIN //\n\nclass TicketModal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tresponse: ''\n\t\t};\n\t}\n\n\thandleResponseChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tresponse: event.target.value\n\t\t});\n\t}\n\n\thandleResponseSubmit = () => {\n\t\tthis.props.submitTicketMessage({\n\t\t\tmessage: this.state.response,\n\t\t\tticketID: this.props.ticket._id\n\t\t});\n\t\tthis.setState({\n\t\t\tresponse: ''\n\t\t});\n\t}\n\n\ttoggleCompletion = () => {\n\t\tif ( this.props.ticket.done ) {\n\t\t\tthis.props.openTicket( this.props.ticket._id );\n\t\t} else {\n\t\t\tthis.props.closeTicket( this.props.ticket._id );\n\t\t}\n\t}\n\n\trenderMessage = ( val, idx ) => {\n\t\tconst t = this.props.t;\n\t\tconst createdAt = new Date( val.createdAt );\n\t\treturn (\n\t\t\t<div className=\"message-container\" key={idx} >\n\t\t\t\t<div className=\"message-data\">\n\t\t\t\t\t<div className=\"message-profile-pic\">\n\t\t\t\t\t\t<img src={`${server}/thumbnail/${val.picture}`} alt=\"User Profile Pic\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"message-author-line\">\n\t\t\t\t\t\t<span className=\"message-author\">{ val.author }</span>\n\t\t\t\t\t\t&nbsp;{t('common:wrote-on', { date: `${createdAt.toLocaleTimeString()} ${createdAt.toLocaleDateString()}` })}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"message-body\">\n\t\t\t\t\t{val.body}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst t = this.props.t;\n\t\tconst { ticket } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Modal show={this.props.show} onHide={this.props.onHide} dialogClassName=\"modal-60w\" >\n\t\t\t\t\t<Modal.Header>\n\t\t\t\t\t\t<Modal.Title as=\"h3\" style={{ width: '100%' }}>\n\t\t\t\t\t\t\t{t('common:title')}: {ticket.title}\n\t\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={createTooltip( t('close-ticket-modal') )}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={this.props.onHide}\n\t\t\t\t\t\t\t\t\tstyle={{ float: 'right' }}\n\t\t\t\t\t\t\t\t\tvariant=\"outline-secondary\"\n\t\t\t\t\t\t\t\t\taria-label={t('close-ticket-modal')}\n\t\t\t\t\t\t\t\t\tclassName=\"modal-close\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">x</span>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t</Modal.Title>\n\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t<Modal.Body style={{ height: '60vh', overflowY: 'auto' }}>\n\t\t\t\t\t\t<span className=\"title\">{t('common:description')}:</span>\n\t\t\t\t\t\t<p style={{ whiteSpace: 'pre-wrap' }}>\n\t\t\t\t\t\t\t{ticket.description}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t{ticket.namespace.title ?\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<span className=\"title\">{`${t('common:course')}: `}</span>\n\t\t\t\t\t\t\t\t<span>{ticket.namespace.title}</span>\n\t\t\t\t\t\t\t\t{' | '}\n\t\t\t\t\t\t\t</Fragment> :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ticket.lesson ?\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<span className=\"title\">{`${t('common:lesson')}: `}</span>\n\t\t\t\t\t\t\t\t<span>{ticket.lesson.title}</span>\n\t\t\t\t\t\t\t\t{' | '}\n\t\t\t\t\t\t\t</Fragment> :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ticket.component ?\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<span className=\"title\">{`${t('common:component')}: `}</span>\n\t\t\t\t\t\t\t\t<span>{ticket.component}</span>\n\t\t\t\t\t\t\t</Fragment> :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ticket.attachments.length > 0 ?\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<span className=\"title\">{`${t('common:attachments')}: `}</span>\n\t\t\t\t\t\t\t\t{ticket.attachments.map( ( file, idx ) => {\n\t\t\t\t\t\t\t\t\treturn ( <a href={`${server}/attachments/${file.filename}`} key={idx} style={{ marginLeft: 6 }} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-link\" style={{ marginRight: 2 }} ></i>\n\t\t\t\t\t\t\t\t\t\t{file.title}\n\t\t\t\t\t\t\t\t\t</a> );\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Fragment> :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<span className=\"title\">{t('common:messages')}:</span>\n\t\t\t\t\t\t{ticket.messages.map( this.renderMessage )}\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t\t<Modal.Footer style={{ background: 'ghostwhite' }} >\n\t\t\t\t\t\t<FormGroup controlId=\"form-text\" style={{ width: 'calc(100% - 200px)' }} >\n\t\t\t\t\t\t\t<FormLabel>{t('enter-response')}</FormLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tname=\"body\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tas=\"textarea\" rows=\"5\"\n\t\t\t\t\t\t\t\tvalue={this.state.response}\n\t\t\t\t\t\t\t\tplaceholder={ticket.done ? t('require-open-ticket') : t('response-comes-here')}\n\t\t\t\t\t\t\t\tonChange={this.handleResponseChange}\n\t\t\t\t\t\t\t\tdisabled={ticket.done}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t<div style={{ float: 'right', width: '180px' }} >\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\tonClick={this.handleResponseSubmit}\n\t\t\t\t\t\t\t\tdisabled={!this.state.response || ticket.done}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('submit-response')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\tonClick={this.toggleCompletion}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ticket.done ? t('common:open-ticket') : t('common:close-ticket')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\tonClick={this.props.onHide}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('common:hide')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Modal.Footer>\n\t\t\t\t</Modal>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nTicketModal.propTypes = {\n\tcloseTicket: PropTypes.func.isRequired,\n\tonHide: PropTypes.func.isRequired,\n\topenTicket: PropTypes.func.isRequired,\n\tshow: PropTypes.bool.isRequired,\n\tsubmitTicketMessage: PropTypes.func.isRequired,\n\tticket: PropTypes.object.isRequired\n};\n\nTicketModal.defaultProps = {};\n\n\n// EXPORTS\n\nexport default withTranslation( [ 'ticket_modal', 'common' ] )( TicketModal );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport stringify from 'csv-stringify';\nimport InputRange from 'react-input-range';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Button from 'react-bootstrap/Button';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Badge from 'react-bootstrap/Badge';\nimport copyToClipboard from 'clipboard-copy';\nimport roundn from '@stdlib/math/base/special/roundn';\nimport ceil from '@stdlib/math/base/special/ceil';\nimport pick from '@stdlib/utils/pick';\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\nimport trim from '@stdlib/string/trim';\nimport DashboardDataExplorer from 'ev/components/data-explorer';\nimport obsToVar from '@isle-project/utils/obs-to-var';\nimport DashboardTable from 'components/dashboard-table';\nimport ConfirmModal from 'components/confirm-modal';\nimport server from 'constants/server';\nimport saveAs from 'utils/file_saver.js';\nimport 'css/input_range.css';\nimport './files_page.css';\n\n\n// VARIABLES //\n\nconst EXPORT_COLUMNS = [ 'name', 'email', 'lesson', 'title', 'filename', 'type', 'createdAt', 'updatedAt' ];\nconst debug = logger( 'isle:files-page' );\n\n\n// FUNCTIONS //\n\nconst prepareExportData = ( data ) => {\n\tfor ( let i = 0; i < data.length; i++ ) {\n\t\tconst row = pick( data[ i ], EXPORT_COLUMNS );\n\t\trow.lesson = row.lesson.title;\n\t\trow.filename = server+'/'+row.filename;\n\t\tdata[ i ] = row;\n\t}\n\treturn data;\n};\n\n\n// MAIN //\n\nclass FilesPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.columns = this.createColumns();\n\t\tthis.state = {\n\t\t\tshowDeleteModal: false,\n\t\t\tdeletionID: null,\n\t\t\tfileMaxSize: 0,\n\t\t\tfileInputKey: 0,\n\t\t\tshowExplorer: false\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tdebug( 'Component did mount...' );\n\t\tthis.props.getFiles({\n\t\t\tnamespaceName: this.props.namespace.title\n\t\t});\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( prevProps.files !== this.props.files ) {\n\t\t\tconst files = this.props.files;\n\t\t\tlet fileMaxSize = 0;\n\t\t\tfor ( let i = 0; i < files.length; i++ ) {\n\t\t\t\tconst size = files[ i ].size;\n\t\t\t\tif ( size && size > fileMaxSize ) {\n\t\t\t\t\tfileMaxSize = size;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tfileMaxSize,\n\t\t\t\tfileInputKey: this.state.fileInputKey + 1\n\t\t\t});\n\t\t}\n\t}\n\n\thandleDelete = () => {\n\t\tthis.props.handleFileDeletion( this.state.deletionID, this.props.ownerFiles );\n\t\tthis.toggleDeleteModal();\n\t}\n\n\ttoggleDeleteModal = () => {\n\t\tthis.setState({\n\t\t\tshowDeleteModal: !this.state.showDeleteModal\n\t\t});\n\t}\n\n\tcreateColumns = () => {\n\t\tconst { t } = this.props;\n\t\treturn [\n\t\t\t{\n\t\t\t\tHeader: t('common:filename'),\n\t\t\t\taccessor: 'title',\n\t\t\t\tminWidth: 250,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('common:open'),\n\t\t\t\taccessor: 'filename',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"external-link-tooltip\">{t('open-file')}</Tooltip>}>\n\t\t\t\t\t\t\t<a href={server+'/'+row.value} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"outline-secondary\">\n\t\t\t\t\t\t\t\t\t<i className=\"fa fa-external-link-alt\"></i>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</OverlayTrigger> );\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 45\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('common:copy'),\n\t\t\t\tid: 'copy-path',\n\t\t\t\taccessor: 'filename',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"copy-clipboard-tooltip\">{t('common:copy-link')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button variant=\"outline-secondary\" size=\"sm\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tcopyToClipboard( server+'/'+row.value );\n\t\t\t\t\t\t\t\t\tthis.props.addNotification({\n\t\t\t\t\t\t\t\t\t\ttitle: 'Copied',\n\t\t\t\t\t\t\t\t\t\tmessage: 'Link copied to clipboard',\n\t\t\t\t\t\t\t\t\t\tlevel: 'success',\n\t\t\t\t\t\t\t\t\t\tposition: 'tl'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i className=\"fa fa-clipboard\"></i>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 45\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('common:lesson'),\n\t\t\t\taccessor: 'lesson',\n\t\t\t\tmaxWidth: 160,\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( !row.row.lesson ) {\n\t\t\t\t\t\treturn <span>{t('no-lesson')}</span>;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"open-lesson-tooltip\">{t('open-lesson-new-tab')}</Tooltip>}>\n\t\t\t\t\t\t\t<div style={{ width: '100%', height: '100%' }} >\n\t\t\t\t\t\t\t\t<a href={row.row.lesson.url} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t\t{row.row.lesson.title}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn row[ filter.id ].title.startsWith( filter.value );\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('first-name'),\n\t\t\t\tid: 'first_name',\n\t\t\t\taccessor: d => {\n\t\t\t\t\tconst parts = trim( d.name ).split( ' ' );\n\t\t\t\t\tif ( parts.length > 1 ) {\n\t\t\t\t\t\tparts.pop();\n\t\t\t\t\t\treturn parts.join( ' ' );\n\t\t\t\t\t}\n\t\t\t\t\treturn parts[ 0 ];\n\t\t\t\t},\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tstyle: { color: 'darkslategrey' },\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('last-name'),\n\t\t\t\tid: 'last_name',\n\t\t\t\taccessor: d => {\n\t\t\t\t\tconst parts = trim( d.name ).split( ' ' );\n\t\t\t\t\tif ( parts.length > 1 ) {\n\t\t\t\t\t\treturn parts[ parts.length - 1 ];\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tstyle: { color: 'darkslategrey' },\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('common:email'),\n\t\t\t\taccessor: 'email',\n\t\t\t\tmaxWidth: 160,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('type'),\n\t\t\t\taccessor: 'type',\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( row[ filter.id ], filter.value );\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('common:size'),\n\t\t\t\taccessor: 'size',\n\t\t\t\tCell: row => row.value ? `${roundn( row.value, -3 )}mb` : 'NA',\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\tconst id = filter.pivotId || filter.id;\n\t\t\t\t\tconst size = row[ id ];\n\t\t\t\t\treturn size >= filter.value.min && size <= filter.value.max;\n\t\t\t\t},\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tconst maxValue = ceil( this.state.fileMaxSize ) || 1;\n\t\t\t\t\tconst defaultVal = {\n\t\t\t\t\t\tmax: maxValue,\n\t\t\t\t\t\tmin: 0\n\t\t\t\t\t};\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tpaddingLeft: '4px',\n\t\t\t\t\t\t\tpaddingRight: '4px',\n\t\t\t\t\t\t\tpaddingTop: '8px'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<InputRange\n\t\t\t\t\t\t\t\tallowSameValues\n\t\t\t\t\t\t\t\tmaxValue={maxValue}\n\t\t\t\t\t\t\t\tminValue={0}\n\t\t\t\t\t\t\t\tstep={0.1}\n\t\t\t\t\t\t\t\tvalue={filter ? filter.value : defaultVal}\n\t\t\t\t\t\t\t\tonChange={( newValue ) => {\n\t\t\t\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tformatLabel={value => roundn( value, -2 )}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('common:date'),\n\t\t\t\taccessor: 'updatedAt',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( row.value && row.value.toLocaleDateString ) {\n\t\t\t\t\t\treturn row.value.toLocaleDateString( 'en-US' );\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tmaxWidth: 120\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: 'Del',\n\t\t\t\taccessor: '_id',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"delete-file-tooltip\">{t('delete-file-tooltip')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-secondary\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tdeletionID: row.value,\n\t\t\t\t\t\t\t\t\tshowDeleteModal: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}} >\n\t\t\t\t\t\t\t\t<div className=\"fa fa-trash-alt\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 45\n\t\t\t}\n\t\t];\n\t}\n\n\tsaveJSON = () => {\n\t\tconst currentFiles = this.dashboardTable.table.getResolvedState().sortedData;\n\t\tlet data = prepareExportData( currentFiles );\n\t\tconst blob = new Blob([ JSON.stringify( data ) ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `files_${this.props.namespace.title}.json`;\n\t\tsaveAs( blob, name );\n\t}\n\n\tsaveCSV = () => {\n\t\tconst currentFiles = this.dashboardTable.table.getResolvedState().sortedData;\n\t\tlet data = prepareExportData( currentFiles );\n\t\tstringify( data, {\n\t\t\theader: true\n\t\t}, ( err, output ) => {\n\t\t\tif ( err ) {\n\t\t\t\treturn this.props.addNotification({\n\t\t\t\t\ttitle: 'Error encountered',\n\t\t\t\t\tmessage: 'Encountered an error while creating CSV: '+err.message,\n\t\t\t\t\tlevel: 'error',\n\t\t\t\t\tposition: 'tl'\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst blob = new Blob([ output ], {\n\t\t\t\ttype: 'text/plain'\n\t\t\t});\n\t\t\tconst name = `files_${this.props.namespace.title}.csv`;\n\t\t\tsaveAs( blob, name );\n\t\t});\n\t}\n\n\ttoggleExplorer = () => {\n\t\tthis.setState({\n\t\t\tshowExplorer: !this.state.showExplorer\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( this.state.showExplorer ) {\n\t\t\tconst files = this.props.files;\n\t\t\tlet data = [];\n\t\t\tfor ( let i = 0; i < files.length; i++ ) {\n\t\t\t\tconst file = files[ i ];\n\t\t\t\tconst replacement = {};\n\t\t\t\treplacement.title = file.title;\n\t\t\t\treplacement.type = file.type;\n\t\t\t\treplacement.lesson = file.lesson ? file.lesson.title : null;\n\t\t\t\treplacement.size = file.size ? file.size : null;\n\t\t\t\treplacement.email = file.email;\n\t\t\t\treplacement.createdAt = file.createdAt;\n\t\t\t\treplacement.updatedAt = file.updatedAt;\n\t\t\t\tdata.push( replacement );\n\t\t\t}\n\t\t\tdata = obsToVar( data );\n\t\t\tconst quantitative = [ 'size' ];\n\t\t\tconst categorical = [ 'title', 'type', 'lesson', 'email', 'createdAt', 'updatedAt' ];\n\t\t\treturn (\n\t\t\t\t<DashboardDataExplorer\n\t\t\t\t\ttitle={t('explorer-files-title')}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tclose={this.toggleExplorer}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn ( <div className=\"namespace-data-page\">\n\t\t\t<div className=\"namespace-data-buttons\">\n\t\t\t\t<ButtonGroup className=\"files-export-button-group\" >\n\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"csvTooltip\" >{t('save-as-csv')}</Tooltip>}>\n\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveCSV} ><i className=\"fas fa-download\"></i> CSV</Button>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"jsonTooltip\">{t('save-as-json')}</Tooltip>}>\n\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveJSON} ><i className=\"fas fa-download\"></i> JSON</Button>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t</ButtonGroup>\n\t\t\t\t{ this.props.ownerFiles ? <FormGroup className=\"file-upload-button\" >\n\t\t\t\t\t<FormLabel htmlFor=\"fileUpload\" style={{ cursor: 'pointer' }}>\n\t\t\t\t\t\t<h3><Badge variant=\"success\">{t('upload-file')}</Badge></h3>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"fileUpload\"\n\t\t\t\t\t\t\tkey={this.state.fileInputKey}\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\taccept=\".pdf,.html,.md,image/*,video/*,audio/*,.json,.csv\"\n\t\t\t\t\t\t\tonChange={this.props.handleUpload}\n\t\t\t\t\t\t\tstyle={{ display: 'none' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FormLabel>\n\t\t\t\t</FormGroup> : null }\n\t\t\t</div>\n\t\t\t<DashboardTable\n\t\t\t\tdata={this.props.files}\n\t\t\t\tcolumns={this.columns}\n\t\t\t\tt={t}\n\t\t\t\tref={(r) => {\n\t\t\t\t\tthis.dashboardTable = r;\n\t\t\t\t}}\n\t\t\t\tonButtonClick={this.toggleExplorer}\n\t\t\t/>\n\t\t\t<ConfirmModal\n\t\t\t\tshow={this.state.showDeleteModal}\n\t\t\t\tclose={this.toggleDeleteModal}\n\t\t\t\tmessage={t('delete-file')}\n\t\t\t\ttitle={`${t('common:delete')}?`}\n\t\t\t\tonConfirm={this.handleDelete}\n\t\t\t/>\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nFilesPage.propTypes = {\n\taddNotification: PropTypes.func.isRequired,\n\tfiles: PropTypes.array.isRequired,\n\tgetFiles: PropTypes.func.isRequired,\n\thandleFileDeletion: PropTypes.func.isRequired,\n\thandleUpload: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\townerFiles: PropTypes.bool\n};\n\nFilesPage.defaultProps = {\n\townerFiles: false\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( FilesPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Card from 'react-bootstrap/Card';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport Form from 'react-bootstrap/Form';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport ConfirmModal from 'components/confirm-modal';\nimport '../profile-page/message-page.css';\nimport './message_admin_page.css';\n\n\n// MAIN //\n\nclass AnnouncementsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\ttitle: '',\n\t\t\tbody: '',\n\t\t\tmode: 'new-announcement',\n\t\t\teditItem: null,\n\t\t\tshowDeleteModal: false\n\t\t};\n\t}\n\n\trenderModals() {\n\t\treturn null;\n\t}\n\n\teditMessage( ndx ) {\n\t\tconst announcement = this.props.namespace.announcements[ ndx ];\n\t\tthis.setState({\n\t\t\tmode: 'edit-announcement',\n\t\t\teditItem: ndx,\n\t\t\ttitle: announcement.title,\n\t\t\tbody: announcement.body\n\t\t});\n\t}\n\n\tdeleteSelectedMessage = () => {\n\t\tconst ndx = this.state.editItem;\n\t\tconst announcement = this.props.namespace.announcements[ ndx ];\n\t\tthis.props.deleteAnnouncement( announcement.createdAt, ndx );\n\t\tthis.clear();\n\t\tthis.closeDeleteModal();\n\t}\n\n\trenderMessages() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{this.props.namespace.announcements.map( ( value, index ) => {\n\t\t\t\t\tconst date = new Date( value.createdAt );\n\t\t\t\t\tconst dateString = date.toLocaleDateString() + '  -  ' + date.toLocaleTimeString( navigator.language, {\n\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\tminute: '2-digit'\n\t\t\t\t\t});\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={index}>\n\t\t\t\t\t\t<div className=\"message-container\">\n\t\t\t\t\t\t\t<div className=\"message-data\">\n\t\t\t\t\t\t\t\t<div className=\"message-profile-pic\">\n\t\t\t\t\t\t\t\t\t<img src={value.picture} alt=\"User Profile Pic\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"message-author-line\">\n\t\t\t\t\t\t\t\t\t<span className=\"message-author\">{ value.author }</span>\n\t\t\t\t\t\t\t\t\t&nbsp;{t('common:wrote-on', { date: dateString })}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"message-title\">\n\t\t\t\t\t\t\t\t{ value.title }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"message-body\">\n\t\t\t\t\t\t\t\t{ value.body }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"message-manip\">\n\t\t\t\t\t\t\t<button onClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\teditItem: index,\n\t\t\t\t\t\t\t\t\tshowDeleteModal: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}} className=\"message-delete\">{t('common:delete')}</button>\n\t\t\t\t\t\t\t<button onClick={() => {\n\t\t\t\t\t\t\t\tthis.editMessage(index);\n\t\t\t\t\t\t\t}} className=\"message-edit\">{t('common:edit')}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcreateMessage = () => {\n\t\tconst now = new Date().getTime();\n\t\tconst message = {\n\t\t\ttitle: this.state.title,\n\t\t\tbody: this.state.body,\n\t\t\tauthor: this.props.user.name,\n\t\t\temail: this.props.user.email,\n\t\t\tpicture: this.props.user.picture\n\t\t};\n\t\tif ( this.state.editItem === null ) {\n\t\t\tmessage.createdAt = now;\n\t\t\tthis.props.addAnnouncement( message );\n\t\t}\n\t\telse {\n\t\t\tconst announcement = this.props.namespace.announcements[ this.state.editItem ];\n\t\t\tmessage.createdAt = announcement.createdAt;\n\t\t\tthis.props.editAnnouncement( message );\n\t\t}\n\t\tthis.clear();\n\t}\n\n\thandleInputChange = ( event ) => {\n\t\tconst target = event.target;\n\t\tconst name = target.name;\n\t\tlet value = target.value;\n\t\tthis.setState({\n\t\t\t[ name ]: value\n\t\t});\n\t}\n\n\tclear = () => {\n\t\tthis.setState({\n\t\t\ttitle: '',\n\t\t\tbody: '',\n\t\t\tmode: 'new-announcement',\n\t\t\teditItem: null\n\t\t});\n\t}\n\n\tcloseDeleteModal = () => {\n\t\tthis.setState({\n\t\t\teditItem: null,\n\t\t\tshowDeleteModal: false\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tconst isDisabled = this.state.title.length < 3 || this.state.body.length < 3;\n\t\tconst isEmpty = this.state.title.length === 0 && this.state.body.length === 0;\n\t\treturn ( <div className=\"namespace-data-page\">\n\t\t\t<div className=\"messages\">\n\t\t\t\t{ this.renderMessages() }\n\t\t\t</div>\n\t\t\t<div className=\"new_message\">\n\t\t\t\t<Card>\n\t\t\t\t\t<Card.Header>\n\t\t\t\t\t\t<Card.Title as=\"h3\">\n\t\t\t\t\t\t\t{t(this.state.mode)}\n\t\t\t\t\t\t</Card.Title>\n\t\t\t\t\t</Card.Header>\n\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t<Form style={{ padding: '20px' }}>\n\t\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"titleTooltip\">{t('announcement-title')}</Tooltip>}>\n\t\t\t\t\t\t\t\t<FormGroup controlId=\"form-title\" >\n\t\t\t\t\t\t\t\t\t<FormLabel>{t('common:title')}</FormLabel>\n\t\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.title}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t\t<FormGroup controlId=\"form-text\" >\n\t\t\t\t\t\t\t\t<FormLabel>{t('announcement-text')}</FormLabel>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\tname=\"body\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tas=\"textarea\" rows=\"10\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.body}\n\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t\t<Button type=\"submit\" disabled={isDisabled} onClick={this.createMessage}>\n\t\t\t\t\t\t\t\t{ this.state.mode === 'new-announcement' ? t('common:create') : t('common:update') }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={this.clear} disabled={isEmpty} variant=\"danger\">{t('common:clear')}</Button>\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</Card.Body>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t\t<ConfirmModal\n\t\t\t\tshow={this.state.showDeleteModal}\n\t\t\t\tclose={this.closeDeleteModal}\n\t\t\t\tmessage={t('delete-announcement')}\n\t\t\t\ttitle={`${t('common:delete')}?`}\n\t\t\t\tonConfirm={this.deleteSelectedMessage}\n\t\t\t/>\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nAnnouncementsPage.propTypes = {\n\taddAnnouncement: PropTypes.func.isRequired,\n\tdeleteAnnouncement: PropTypes.func.isRequired,\n\teditAnnouncement: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nAnnouncementsPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( AnnouncementsPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport clamp from '@stdlib/math/base/special/clamp';\nimport './editable_progress.css';\n\n\n// MAIN //\n\nclass EditableProgress extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisEditing: false,\n\t\t\thasChanged: false,\n\t\t\tnewProgress: props.progress,\n\t\t\toriginalProgress: props.progress\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tif ( nextProps.progress !== prevState.originalProgress ) {\n\t\t\treturn {\n\t\t\t\tnewProgress: nextProps.progress,\n\t\t\t\toriginalProgress: nextProps.progress\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\ttoggleEditing = () => {\n\t\tthis.setState({\n\t\t\tisEditing: !this.state.isEditing,\n\t\t\tnewProgress: this.props.progress\n\t\t});\n\t}\n\n\thandleChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tnewProgress: clamp( event.target.value, 0, 100 ),\n\t\t\thasChanged: true\n\t\t});\n\t}\n\n\thandleSubmit = () => {\n\t\tthis.setState({\n\t\t\tisEditing: false,\n\t\t\thasChanged: false\n\t\t});\n\t\tthis.props.onSubmit( this.state.newProgress );\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\tthis.state.isEditing ?\n\t\t\t<Fragment>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tvalue={this.state.newProgress}\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={100}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\tclassName=\"editable-progress-input\"\n\t\t\t\t/>\n\t\t\t\t<i\n\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\tonClick={this.toggleEditing}\n\t\t\t\t\tonKeyPress={this.toggleEditing}\n\t\t\t\t\tclassName=\"fas fa-window-close editable-progress-close\"\n\t\t\t\t></i>\n\t\t\t\t<span className=\"editable-progress-submit\" style={{ display: this.state.hasChanged ? 'inline' : 'none' }}>\n\t\t\t\t\t<i\n\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\tonClick={this.handleSubmit}\n\t\t\t\t\t\tonKeyPress={this.handleSubmit}\n\t\t\t\t\t\tclassName=\"fas fa-check-square\"\n\t\t\t\t\t></i>\n\t\t\t\t</span>\n\t\t\t</Fragment>: <ProgressBar\n\t\t\t\tstyle={{\n\t\t\t\t\tfontSize: '10px',\n\t\t\t\t\theight: '12px'\n\t\t\t\t}}\n\t\t\t\tnow={this.state.newProgress}\n\t\t\t\tlabel={`${this.state.newProgress}%`}\n\t\t\t\tonClick={this.toggleEditing}\n\t\t\t/>\n\t\t);\n\t}\n}\n\n\n// EXPORTS //\n\nexport default EditableProgress;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport stringify from 'csv-stringify';\nimport InputRange from 'react-input-range';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport round from '@stdlib/math/base/special/round';\nimport min from '@stdlib/math/base/special/min';\nimport isArray from '@stdlib/assert/is-array';\nimport isUndefinedOrNull from '@stdlib/assert/is-undefined-or-null';\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\nimport trim from '@stdlib/string/trim';\nimport DashboardTable from 'components/dashboard-table';\nimport DashboardDataExplorer from 'ev/components/data-explorer';\nimport obsToVar from '@isle-project/utils/obs-to-var';\nimport server from 'constants/server';\nimport saveAs from 'utils/file_saver.js';\nimport EditableProgress from './editable_progress.js';\nimport formatTime from 'utils/format_time.js';\nimport './progress_page.css';\nimport 'css/input_range.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:progress-page' );\n\n\n// FUNCTIONS //\n\nfunction filterNumbersFactory( lessons, idx ) {\n\treturn ( filter, row ) => {\n\t\tconst data = row[ filter.id ];\n\t\tconst lessonData = data[ lessons[ idx ]._id ];\n\t\tif ( isUndefinedOrNull( lessonData ) ) {\n\t\t\treturn filter.value.min === 0;\n\t\t}\n\t\tconst progress = min( round( lessonData.progress*100 ), 100 );\n\t\treturn progress >= filter.value.min && progress <= filter.value.max;\n\t};\n}\n\nfunction sortFactory( lessons, idx ) {\n\treturn ( a, b ) => {\n\t\ta = a[ lessons[ idx ]._id ];\n\t\tb = b[ lessons[ idx ]._id ];\n\t\tif ( !a && !b ) {\n\t\t\treturn 0;\n\t\t}\n\t\tif ( a && !b ) {\n\t\t\treturn 1;\n\t\t}\n\t\tif ( !a && b ) {\n\t\t\treturn -1;\n\t\t}\n\t\tif ( a.progress > b.progress ) {\n\t\t\treturn 1;\n\t\t}\n\t\tif ( a.progress < b.progress ) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 0;\n\t};\n}\n\nfunction filterMethodCategories( filter, row ) {\n\tif ( filter.value === 'all' ) {\n\t\treturn true;\n\t}\n\tconst id = filter.pivotId || filter.id;\n\tif ( row[ id ] === void 0 ) {\n\t\treturn true;\n\t}\n\tif ( isArray( filter.value ) ) {\n\t\treturn contains( filter.value, String( row[ id ] ) );\n\t}\n\treturn String( row[ id ] ) === filter.value;\n}\n\n\n// MAIN //\n\nclass ProgressPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.columns = this.createColumns( props.lessons, props.cohorts );\n\t\tthis.state = {\n\t\t\tdisplayedMembers: [],\n\t\t\tlessonSortDirection: 'ascending',\n\t\t\tlessonOrder: 'createdAt',\n\t\t\tshowExplorer: false\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.createDisplayedMembers();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tthis.props.cohorts !== prevProps.cohorts ||\n\t\t\tthis.props.lessons !== prevProps.lessons\n\t\t) {\n\t\t\tthis.createDisplayedMembers();\n\t\t\tthis.columns = this.createColumns( this.props.lessons, this.props.cohorts );\n\t\t}\n\t}\n\n\tcreateDisplayedMembers() {\n\t\tlet members = [];\n\t\tfor ( let i = 0; i < this.props.cohorts.length; i++ ) {\n\t\t\tconst cohortMembers = this.props.cohorts[ i ].members;\n\t\t\tfor ( let j = 0; j < cohortMembers.length; j++ ) {\n\t\t\t\tcohortMembers[ j ].cohort = this.props.cohorts[ i ].title;\n\t\t\t\tif ( !cohortMembers[ j ].lessonData ) {\n\t\t\t\t\tcohortMembers[ j ].lessonData = {};\n\t\t\t\t}\n\t\t\t}\n\t\t\tmembers = members.concat( this.props.cohorts[ i ].members );\n\t\t}\n\t\tfor ( let i = 0; i < members.length; i++ ) {\n\t\t\tconst d = members[ i ];\n\t\t\tconst parts = trim( d.name ).split( ' ' );\n\t\t\tif ( parts.length > 1 ) {\n\t\t\t\td.lastName = parts.pop();\n\t\t\t\td.firstName = parts.join( ' ' );\n\t\t\t} else {\n\t\t\t\td.firstName = parts[ 0 ];\n\t\t\t\td.lastName = '';\n\t\t\t}\n\t\t}\n\t\tthis.setState({ // eslint-disable-line react/no-did-mount-set-state\n\t\t\tdisplayedMembers: members\n\t\t});\n\t}\n\n\tcreateColumns( lessons, cohorts ) {\n\t\tconst { t } = this.props;\n\t\tconst COLUMNS = [\n\t\t\t{\n\t\t\t\tHeader: 'Pic',\n\t\t\t\taccessor: 'picture',\n\t\t\t\tCell: row => (\n\t\t\t\t\t<img className=\"table-pic\" src={`${server}/thumbnail/${row.original.picture}`} alt=\"Profile Pic\" />\n\t\t\t\t),\n\t\t\t\tmaxWidth: 46,\n\t\t\t\tminWidth: 46,\n\t\t\t\tfilterable: false,\n\t\t\t\tresizable: false,\n\t\t\t\tsortable: false,\n\t\t\t\tstyle: { color: 'darkslategrey' }\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('first-name'),\n\t\t\t\tid: 'first_name',\n\t\t\t\taccessor: 'firstName',\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('last-name'),\n\t\t\t\tid: 'last_name',\n\t\t\t\taccessor: 'lastName',\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('common:email'),\n\t\t\t\taccessor: 'email',\n\t\t\t\tmaxWidth: 200,\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('common:cohort'),\n\t\t\t\taccessor: 'cohort',\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tfilterMethod: filterMethodCategories,\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tconst handleChange = ( event ) => {\n\t\t\t\t\t\tconst newValue = event.target.value;\n\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t};\n\t\t\t\t\tlet value;\n\t\t\t\t\tif ( !filter ) {\n\t\t\t\t\t\tvalue = 'all';\n\t\t\t\t\t} else if ( isArray( filter.value ) ) {\n\t\t\t\t\t\tvalue = filter.value.join( ', ' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = filter.value;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tonBlur={handleChange} onChange={handleChange}\n\t\t\t\t\t\t\tstyle={{ width: '100%', backgroundColor: 'ghostwhite' }}\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"all\">Show All</option>\n\t\t\t\t\t\t\t{cohorts.map( ( v, key ) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\tvalue={`${v.title}`}\n\t\t\t\t\t\t\t\t\t>{v.title}</option>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tCOLUMNS.push({\n\t\t\t\tid: 'lesson_'+i,\n\t\t\t\tHeader: lessons[ i ].title,\n\t\t\t\t_lesson: lessons[ i ],\n\t\t\t\tCell: this.accessorFactory( lessons, i ),\n\t\t\t\taccessor: 'lessonData',\n\t\t\t\tsortMethod: sortFactory( lessons, i ),\n\t\t\t\tfilterMethod: filterNumbersFactory( lessons, i ),\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tconst defaultVal = {\n\t\t\t\t\t\tmax: 100,\n\t\t\t\t\t\tmin: 0\n\t\t\t\t\t};\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tpaddingLeft: '4px',\n\t\t\t\t\t\t\tpaddingRight: '4px',\n\t\t\t\t\t\t\tpaddingTop: '8px'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<InputRange\n\t\t\t\t\t\t\t\tallowSameValues\n\t\t\t\t\t\t\t\tmaxValue={100}\n\t\t\t\t\t\t\t\tminValue={0}\n\t\t\t\t\t\t\t\tvalue={filter ? filter.value : defaultVal}\n\t\t\t\t\t\t\t\tonChange={( newValue ) => {\n\t\t\t\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn COLUMNS;\n\t}\n\n\taccessorFactory = ( lessons, idx ) => {\n\t\tconst { t } = this.props;\n\t\treturn d => {\n\t\t\tlet data = d.original.lessonData;\n\t\t\tconst lessonID = lessons[ idx ]._id;\n\t\t\tdata = data[ lessonID ];\n\t\t\tif ( data ) {\n\t\t\t\tconst progress = min( round( data.progress*100 ), 100 );\n\t\t\t\treturn (\n\t\t\t\t\t<span style={{ fontSize: '12px', fontWeight: 800 }}>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"durationTooltip\" >{t('hours-minutes-seconds')}</Tooltip>}>\n\t\t\t\t\t\t\t<span>{t('duration')}: {formatTime( data.spentTime )}</span>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"startTooltip\" >{t('first-accessed')}</Tooltip>}>\n\t\t\t\t\t\t\t<span> | {new Date( data.createdAt ).toLocaleString()}</span>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"startTooltip\" >{t('last-accessed')}</Tooltip>}>\n\t\t\t\t\t\t\t<span> - {new Date( data.updatedAt ).toLocaleString()}</span>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<EditableProgress\n\t\t\t\t\t\t\tprogress={progress}\n\t\t\t\t\t\t\temail={d.original.email}\n\t\t\t\t\t\t\tlessonID={lessonID}\n\t\t\t\t\t\t\tonSubmit={( newProgress ) => {\n\t\t\t\t\t\t\t\tthis.props.adjustProgress({\n\t\t\t\t\t\t\t\t\temail: d.original.email,\n\t\t\t\t\t\t\t\t\tlessonID: lessonID,\n\t\t\t\t\t\t\t\t\tnamespaceID: this.props.namespace._id,\n\t\t\t\t\t\t\t\t\tcohort: d.original.cohort,\n\t\t\t\t\t\t\t\t\tprogress: newProgress\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn <span></span>;\n\t\t};\n\t}\n\n\tassembleData() {\n\t\tconst displayedMembers = this.dashboardTable.table.getResolvedState().sortedData;\n\t\tconst len = displayedMembers.length;\n\t\tconst out = new Array( len );\n\t\tconst lessons = this.props.lessons;\n\t\tfor ( let i = 0; i < len; i++ ) {\n\t\t\tconst member = displayedMembers[ i ]._original;\n\t\t\tout[ i ] = {\n\t\t\t\tname: member.name,\n\t\t\t\tfirstName: member.firstName,\n\t\t\t\tlastName: member.lastName,\n\t\t\t\temail: member.email,\n\t\t\t\tcohort: member.cohort\n\t\t\t};\n\t\t\tconst availableCustomFields = this.props.user.availableCustomFields;\n\t\t\tfor ( let j = 0; j < availableCustomFields.length; j++ ) {\n\t\t\t\tconst fieldName = availableCustomFields[ j ].name;\n\t\t\t\tif ( member.customFields ) {\n\t\t\t\t\tout[ i ][ fieldName ] = member.customFields[ fieldName ];\n\t\t\t\t} else {\n\t\t\t\t\tout[ i ][ fieldName ] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor ( let j = 0; j < lessons.length; j++ ) {\n\t\t\t\tconst lessonName = lessons[ j ]._id;\n\t\t\t\tlet data = member.lessonData;\n\t\t\t\tif ( data && data[ lessonName ] ) {\n\t\t\t\t\tdata = data[ lessonName ];\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_question_progress' ] = min( round( data.progress*100 ), 100 );\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_time' ] = round( data.spentTime / ( 1000*60 ) );\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_first_accessed' ] = new Date( data.createdAt ).toLocaleString();\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_last_accessed' ] = new Date( data.updatedAt ).toLocaleString();\n\t\t\t\t} else {\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_question_progress' ] = 0;\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_time' ] = 0;\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_first_accessed' ] = '';\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_last_accessed' ] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn out;\n\t}\n\n\tsaveJSON = () => {\n\t\tconst data = this.assembleData();\n\t\tconst blob = new Blob([ JSON.stringify( data ) ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `completion_${this.props.namespace.title}.json`;\n\t\tsaveAs( blob, name );\n\t}\n\n\tsaveCSV = () => {\n\t\tconst data = this.assembleData();\n\t\tstringify( data, {\n\t\t\theader: true\n\t\t}, ( err, output ) => {\n\t\t\tif ( err ) {\n\t\t\t\treturn this.props.addNotification({\n\t\t\t\t\ttitle: 'Error encountered',\n\t\t\t\t\tmessage: 'Encountered an error while creating CSV: '+err.message,\n\t\t\t\t\tlevel: 'error',\n\t\t\t\t\tposition: 'tl'\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst blob = new Blob([ output ], {\n\t\t\t\ttype: 'text/plain'\n\t\t\t});\n\t\t\tconst name = `completion_${this.props.namespace.title}.csv`;\n\t\t\tsaveAs( blob, name );\n\t\t});\n\t}\n\n\ttoggleExplorer = () => {\n\t\tthis.setState({\n\t\t\tshowExplorer: !this.state.showExplorer\n\t\t});\n\t}\n\n\treorderColumns( lessonOrder, lessonSortDirection ) {\n\t\tdebug( 'Sort columns by '+lessonOrder+' in '+lessonSortDirection+' order' );\n\t\tif ( lessonSortDirection === 'ascending' ) {\n\t\t\treturn this.columns.slice().sort( ( a, b ) => {\n\t\t\t\tif ( !a._lesson || !b._lesson ) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif ( lessonOrder === 'title' ) {\n\t\t\t\t\treturn a._lesson.title.localeCompare( b._lesson.title );\n\t\t\t\t}\n\t\t\t\treturn a._lesson[ lessonOrder ] > b._lesson[ lessonOrder ] ? 1 : -1;\n\t\t\t});\n\t\t}\n\t\treturn this.columns.slice().sort( ( a, b ) => {\n\t\t\tif ( !a._lesson || !b._lesson ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif ( lessonOrder === 'title' ) {\n\t\t\t\treturn b._lesson.title.localeCompare( a._lesson.title );\n\t\t\t}\n\t\t\treturn a._lesson[ lessonOrder ] < b._lesson[ lessonOrder ] ? 1 : -1;\n\t\t});\n\t}\n\n\trenderSortButton() {\n\t\tconst { t } = this.props;\n\t\tlet title;\n\t\tswitch ( this.state.lessonOrder ) {\n\t\t\tcase 'title':\n\t\t\t\ttitle = t('common:sort-alphabetically');\n\t\t\t\tbreak;\n\t\t\tcase 'createdAt':\n\t\t\t\ttitle = t('common:sort-create-date');\n\t\t\t\tbreak;\n\t\t\tcase 'updatedAt':\n\t\t\t\ttitle = t('common:sort-update-date');\n\t\t\t\tbreak;\n\t\t}\n\t\treturn (\n\t\t\t<ButtonGroup className=\"sort-button-group\" >\n\t\t\t\t<DropdownButton size=\"sm\" variant=\"secondary\" onSelect={( newValue ) => {\n\t\t\t\t\tthis.columns = this.reorderColumns( newValue, this.state.lessonSortDirection );\n\t\t\t\t\tthis.setState({ lessonOrder: newValue });\n\t\t\t\t}} id=\"dropdown\" title={<small>{title}</small>} >\n\t\t\t\t\t<Dropdown.Item eventKey=\"title\" >\n\t\t\t\t\t\t<small>{t('common:sort-alphabetically')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"createdAt\" >\n\t\t\t\t\t\t<small>{t('common:sort-create-date')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"updatedAt\" >\n\t\t\t\t\t\t<small>{t('common:sort-update-date')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t</DropdownButton>\n\t\t\t\t<Button size=\"sm\" variant=\"secondary\" style={{ marginLeft: 2 }} onClick={() => {\n\t\t\t\t\tif ( this.state.lessonSortDirection === 'ascending' ) {\n\t\t\t\t\t\tthis.columns = this.reorderColumns( this.state.lessonOrder, 'descending' );\n\t\t\t\t\t\tthis.setState({ lessonSortDirection: 'descending' });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.columns = this.reorderColumns( this.state.lessonOrder, 'ascending' );\n\t\t\t\t\t\tthis.setState({ lessonSortDirection: 'ascending' });\n\t\t\t\t\t}\n\t\t\t\t}} aria-label={this.state.lessonSortDirection === 'ascending' ?\n\t\t\t\tt('common:sort-descending') : t('common:sort-ascending')} >\n\t\t\t\t\t{ this.state.lessonSortDirection === 'ascending' ?\n\t\t\t\t\t\t<i className=\"fas fa-arrow-right\" /> :\n\t\t\t\t\t\t<i className=\"fas fa-arrow-left\" />\n\t\t\t\t\t}\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( this.state.showExplorer ) {\n\t\t\tlet data = this.assembleData();\n\t\t\tdata = obsToVar( data );\n\t\t\tconst quantitative = [];\n\t\t\tconst categorical = [ 'name', 'email', 'cohort' ];\n\t\t\tfor ( let i = 0; i < this.props.lessons.length; i++ ) {\n\t\t\t\tconst title = this.props.lessons[ i ].title;\n\t\t\t\tquantitative.push( `${title}_question_progress` );\n\t\t\t\tquantitative.push( `${title}_time` );\n\t\t\t\tcategorical.push( `${title}_first_accessed` );\n\t\t\t\tcategorical.push( `${title}_last_accessed` );\n\t\t\t}\n\t\t\tconst availableCustomFields = this.props.user.availableCustomFields;\n\t\t\tfor ( let i = 0; i < availableCustomFields.length; i++ ) {\n\t\t\t\tcategorical.push( availableCustomFields[ i ].name );\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<DashboardDataExplorer\n\t\t\t\t\ttitle={t('explorer-progress-title')}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tclose={this.toggleExplorer}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"namespace-data-buttons\" >\n\t\t\t\t\t{this.renderSortButton()}\n\t\t\t\t\t<ButtonGroup className=\"progress-button-group\" >\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"csvTooltip\" >{t('save-as-csv')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveCSV} ><i className=\"fas fa-download\"></i> CSV</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"jsonTooltip\">{t('save-as-json')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveJSON} ><i className=\"fas fa-download\"></i> JSON</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"namespace-data-page\">\n\t\t\t\t\t<DashboardTable\n\t\t\t\t\t\tclassName=\"progress-table\"\n\t\t\t\t\t\tdata={this.state.displayedMembers}\n\t\t\t\t\t\tcolumns={this.columns}\n\t\t\t\t\t\tt={t}\n\t\t\t\t\t\tref={(r) => {\n\t\t\t\t\t\t\tthis.dashboardTable = r;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonButtonClick={this.toggleExplorer}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nProgressPage.propTypes = {\n\taddNotification: PropTypes.func.isRequired,\n\tadjustProgress: PropTypes.func.isRequired,\n\tcohorts: PropTypes.array.isRequired,\n\tlessons: PropTypes.array.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nProgressPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( ProgressPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Select from 'react-select';\nimport round from '@stdlib/math/base/special/round';\nimport min from '@stdlib/math/base/special/min';\nimport contains from '@stdlib/assert/contains';\nimport server from 'constants/server';\nimport formatTime from 'utils/format_time.js';\nimport './cohorts.css';\n\n\n// MAIN //\n\nclass CohortsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst cohortOptions = props.cohorts.map( cohort => {\n\t\t\treturn { label: cohort.title, value: cohort.title, data: cohort };\n\t\t});\n\n\t\tlet displayedMembers = [];\n\t\tfor ( let i = 0; i < props.cohorts.length; i++ ) {\n\t\t\tdisplayedMembers = displayedMembers.concat( props.cohorts[i].members);\n\t\t}\n\n\t\tthis.state = {\n\t\t\tcohortOptions: cohortOptions,\n\t\t\tselectedCohorts: cohortOptions,\n\t\t\tdisplayedMembers: displayedMembers,\n\t\t\tactualMember: null\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.cohorts !== prevProps.cohorts ) {\n\t\t\tconst cohortOptions = this.props.cohorts.map( cohort => {\n\t\t\t\treturn { label: cohort.title, value: cohort.title, data: cohort };\n\t\t\t});\n\t\t\tlet displayedMembers = [];\n\t\t\tfor ( let i = 0; i < this.props.cohorts.length; i++ ) {\n\t\t\t\tdisplayedMembers = displayedMembers.concat( this.props.cohorts[i].members);\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tcohortOptions: cohortOptions,\n\t\t\t\tselectedCohorts: cohortOptions,\n\t\t\t\tdisplayedMembers: displayedMembers,\n\t\t\t\tactualMember: null\n\t\t\t});\n\t\t}\n\t}\n\n\thandleCohortChange = ( cohorts ) => {\n\t\tlet members = [];\n\t\tif ( cohorts ) {\n\t\t\tfor ( let i = 0; i < cohorts.length; i++ ) {\n\t\t\t\tmembers = members.concat( cohorts[ i ].data.members );\n\t\t\t}\n\t\t}\n\t\tthis.setState({\n\t\t\tselectedCohorts: cohorts,\n\t\t\tdisplayedMembers: members\n\t\t});\n\t}\n\n\tshowUser = (member) => {\n\t\tthis.setState({\n\t\t\tactualMember: member\n\t\t});\n\t}\n\n\trenderMember( member, key ) {\n\t\tlet phase = 0.3 + key*0.05;\n\t\tlet ani = 'scale-up ' + phase + 's';\n\t\treturn (\n\t\t\t<Fragment key={key}>\n\t\t\t\t<div className=\"cohort-member\" role=\"button\"\n\t\t\t\t\tonClick={() => this.showUser( member )}\n\t\t\t\t\tonKeyPress={() => this.showUser( member )}\n\t\t\t\t\tstyle={{ animation: ani }} tabIndex={0}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"cohort-member-name\">{member.name}</div>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={server + '/thumbnail/'+member.picture}\n\t\t\t\t\t\t\talt=\"Member Profile Pic\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"cohort-member-email\">\n\t\t\t\t\t\t\t<a href={'mailto:' + member.email}>{member.email}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderCohort() {\n\t\tconst members = this.state.displayedMembers;\n\t\tconst list = [];\n\t\tfor ( let i = 0; i < members.length; i++ ) {\n\t\t\tlist.push( this.renderMember( members[ i ], i ) );\n\t\t}\n\t\treturn list;\n\t}\n\n\trenderMemberLessons( member ) {\n\t\tconst lessons = this.props.lessons;\n\t\tconst list = [];\n\t\tlet progress = 0;\n\t\tlet spentTime = 0;\n\t\tlet totalTime = 0;\n\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tlet id = lessons[i]._id;\n\t\t\tif ( member.lessonData && member.lessonData[ id ] ) {\n\t\t\t\tconst data = member.lessonData[ id ];\n\t\t\t\tprogress = min( round( data.progress * 100 ), 100 );\n\t\t\t\tspentTime = formatTime( data.spentTime );\n\t\t\t\ttotalTime += data.spentTime;\n\t\t\t} else {\n\t\t\t\tprogress = 0;\n\t\t\t\tspentTime = formatTime( 0 );\n\t\t\t}\n\t\t\tlist.push(\n\t\t\t\t<div key={i} >\n\t\t\t\t\t<div className=\"cohort-actual-member-lesson-title\">{lessons[i].title}</div>\n\t\t\t\t\t<ProgressBar className=\"cohort-actual-member-lesson-progress\" style={{ float: 'left', fontSize: '10px', height: '12px'\n\t\t\t\t\t}} now={progress} label={`${progress}%`} />\n\t\t\t\t\t<span className=\"cohort-actual-member-lesson-time\">{spentTime}</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\ttotalTime = formatTime( totalTime );\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<hr />\n\t\t\t\t<div className=\"cohort-actual-member-lesson-header\">COURSE INFO</div>\n\t\t\t\t<div className=\"cohort-actual-member-lesson-total\">COURSE TOTAL TIME: {totalTime}</div>\n\t\t\t\t<div className=\"lessons-area\">\n\t\t\t\t\t{list}\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\tcloseActualMember = () => {\n\t\tthis.setState({\n\t\t\tactualMember: null\n\t\t});\n\t}\n\n\trenderMemberBadges(member) {\n\t\tconst badges = this.props.badges;\n\t\tconst time = formatTime( member.spentTime );\n\t\tconst list = [];\n\t\tfor ( let i = 0; i < badges.length; i++ ) {\n\t\t\tif ( contains(member.badges, badges[i].name ) ) {\n\t\t\t\tlist.push(\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<OverlayTrigger\n\t\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\t\toverlay={<Tooltip id=\"isleTime\">{badges[i].description}</Tooltip>}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"cohort-user-badge\" >\n\t\t\t\t\t\t\t\t<img src={server + '/badges/' + badges[i].picture} alt=\"User Badge\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t</Fragment>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tconst isleTime = 'the time the user spent with ISLE';\n\t\tconst scoreComment = 'user score';\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div>General User Info</div>\n\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"isleTime\">{ isleTime }</Tooltip>}>\n\t\t\t\t\t<span className=\"user-info-time\">ISLE TIME: {time}</span>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"isleTime\">{ scoreComment }</Tooltip>}>\n\t\t\t\t\t<span className=\"user-info-score\">SCORE: {member.score}</span>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<div></div>\n\t\t\t\t<div className=\"user-info-badges\">\n\t\t\t\t\t<div className=\"user-info-separator\">Badges</div>\n\t\t\t\t\t{list}\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderActualMember() {\n\t\tconst member = this.state.actualMember;\n\t\tlet date = null;\n\t\tif ( member.createdAt ) {\n\t\t\tdate = new Date( member.createdAt ).toLocaleDateString();\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"cohort-actual-member\">\n\t\t\t\t<button onClick={this.closeActualMember} className=\"cohort-actual-member-exit empty-button\" >&#10005;</button>\n\t\t\t\t<img className=\"cohort-actual-member-portrait\" src={server + '/avatar/'+member.picture} alt=\"User Profile Pic\" />\n\t\t\t\t<div className=\"cohort-actual-member-portrait-shadow\" />\n\t\t\t\t{date ? <div className=\"cohort-actual-member-registered\">registered since {date}</div> : null}\n\t\t\t\t<div className=\"cohort-actual-member-name\">\n\t\t\t\t\t<h3>{member.name}</h3>\n\t\t\t\t\t<div>{member.email}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cohort-actual-member-info\">\n\t\t\t\t\t{ this.renderMemberLessons(member)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cohort-actual-member-badges\">\n\t\t\t\t\t{ this.renderMemberBadges(member) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"namespace-data-page\">\n\t\t\t\t<div style={{ width: '100%', height: '40px' }}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={this.state.selectedCohorts}\n\t\t\t\t\t\tisMulti\n\t\t\t\t\t\tname=\"cohorts\"\n\t\t\t\t\t\taria-label=\"Select cohorts\"\n\t\t\t\t\t\tplaceholder=\"Select cohorts to display\"\n\t\t\t\t\t\toptions={this.state.cohortOptions}\n\t\t\t\t\t\tonChange={this.handleCohortChange}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cohort-page\">\n\t\t\t\t\t{this.renderCohort()}\n\t\t\t\t</div>\n\t\t\t\t{this.state.actualMember ? this.renderActualMember() : null}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nCohortsPage.propTypes = {\n\tbadges: PropTypes.array.isRequired,\n\tcohorts: PropTypes.array.isRequired,\n\tlessons: PropTypes.array.isRequired\n};\n\nCohortsPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default CohortsPage;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport stringify from 'csv-stringify';\nimport { withTranslation } from 'react-i18next';\nimport InputRange from 'react-input-range';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Card from 'react-bootstrap/Card';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport isArray from '@stdlib/assert/is-array';\nimport isUndefinedOrNull from '@stdlib/assert/is-undefined-or-null';\nimport hasOwnProp from '@stdlib/assert/has-own-property';\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\nimport trim from '@stdlib/string/trim';\nimport DashboardTable from 'components/dashboard-table';\nimport DashboardDataExplorer from 'ev/components/data-explorer';\nimport obsToVar from '@isle-project/utils/obs-to-var';\nimport server from 'constants/server';\nimport saveAs from 'utils/file_saver.js';\nimport './progress_page.css';\nimport 'css/input_range.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:progress-page' );\n\n\n// FUNCTIONS //\n\nfunction filterNumbersFactory( lessons, idx ) {\n\treturn ( filter, row ) => {\n\t\tconst data = row[ filter.id ];\n\t\tconst grades = data[ lessons[ idx ]._id ];\n\t\tif ( isUndefinedOrNull( grades ) ) {\n\t\t\treturn filter.value.min === 0;\n\t\t}\n\t\tconst points = grades._sumPoints;\n\t\treturn points >= filter.value.min && points <= filter.value.max;\n\t};\n}\n\nfunction filterMethodCategories( filter, row ) {\n\tif ( filter.value === 'all' ) {\n\t\treturn true;\n\t}\n\tconst id = filter.pivotId || filter.id;\n\tif ( row[ id ] === void 0 ) {\n\t\treturn true;\n\t}\n\tif ( isArray( filter.value ) ) {\n\t\treturn contains( filter.value, String( row[ id ] ) );\n\t}\n\treturn String( row[ id ] ) === filter.value;\n}\n\nfunction sortFactory( lessons, idx ) {\n\treturn ( a, b ) => {\n\t\ta = a[ lessons[ idx ]._id ];\n\t\tb = b[ lessons[ idx ]._id ];\n\t\tif ( !a && !b ) {\n\t\t\treturn 0;\n\t\t}\n\t\tif ( a && !b ) {\n\t\t\treturn 1;\n\t\t}\n\t\tif ( !a && b ) {\n\t\t\treturn -1;\n\t\t}\n\t\tif ( a._sumPoints > b._sumPoints ) {\n\t\t\treturn 1;\n\t\t}\n\t\tif ( a._sumPoints < b._sumPoints ) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 0;\n\t};\n}\n\n\n// MAIN //\n\nclass GradesPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.columns = this.createColumns( props.lessons, props.cohorts );\n\t\tthis.state = {\n\t\t\tdisplayedMembers: [],\n\t\t\tlessonSortDirection: 'ascending',\n\t\t\tlessonOrder: 'createdAt',\n\t\t\tshowExplorer: false\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.createDisplayedMembers();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tthis.props.cohorts !== prevProps.cohorts ||\n\t\t\tthis.props.lessons !== prevProps.lessons\n\t\t) {\n\t\t\tthis.createDisplayedMembers();\n\t\t\tthis.columns = this.createColumns( this.props.lessons, this.props.cohorts );\n\t\t}\n\t}\n\n\tcreateDisplayedMembers() {\n\t\tlet members = [];\n\t\tfor ( let i = 0; i < this.props.cohorts.length; i++ ) {\n\t\t\tconst cohortMembers = this.props.cohorts[ i ].members;\n\t\t\tfor ( let j = 0; j < cohortMembers.length; j++ ) {\n\t\t\t\tcohortMembers[ j ].cohort = this.props.cohorts[ i ].title;\n\t\t\t\tif ( !cohortMembers[ j ].lessonGrades ) {\n\t\t\t\t\tcohortMembers[ j ].lessonGrades = {};\n\t\t\t\t}\n\t\t\t}\n\t\t\tmembers = members.concat( this.props.cohorts[ i ].members );\n\t\t}\n\t\tfor ( let i = 0; i < members.length; i++ ) {\n\t\t\tconst d = members[ i ];\n\t\t\tconst parts = trim( d.name ).split( ' ' );\n\t\t\tif ( parts.length > 1 ) {\n\t\t\t\td.lastName = parts.pop();\n\t\t\t\td.firstName = parts.join( ' ' );\n\t\t\t} else {\n\t\t\t\td.firstName = parts[ 0 ];\n\t\t\t\td.lastName = '';\n\t\t\t}\n\t\t}\n\t\tthis.setState({ // eslint-disable-line react/no-did-mount-set-state\n\t\t\tdisplayedMembers: members\n\t\t});\n\t}\n\n\tcreateColumns( lessons, cohorts ) {\n\t\tconst { t } = this.props;\n\t\tconst COLUMNS = [\n\t\t\t{\n\t\t\t\tHeader: 'Pic',\n\t\t\t\taccessor: 'picture',\n\t\t\t\tCell: row => (\n\t\t\t\t\t<img className=\"table-pic\" src={`${server}/thumbnail/${row.original.picture}`} alt=\"Profile Pic\" />\n\t\t\t\t),\n\t\t\t\tmaxWidth: 46,\n\t\t\t\tminWidth: 46,\n\t\t\t\tfilterable: false,\n\t\t\t\tresizable: false,\n\t\t\t\tsortable: false,\n\t\t\t\tstyle: { color: 'darkslategrey' }\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('first-name'),\n\t\t\t\tid: 'first_name',\n\t\t\t\taccessor: 'firstName',\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('last-name'),\n\t\t\t\tid: 'last_name',\n\t\t\t\taccessor: 'lastName',\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('common:email'),\n\t\t\t\taccessor: 'email',\n\t\t\t\tmaxWidth: 200,\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('common:cohort'),\n\t\t\t\taccessor: 'cohort',\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tfilterMethod: filterMethodCategories,\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tconst handleChange = ( event ) => {\n\t\t\t\t\t\tconst newValue = event.target.value;\n\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t};\n\t\t\t\t\tlet value;\n\t\t\t\t\tif ( !filter ) {\n\t\t\t\t\t\tvalue = 'all';\n\t\t\t\t\t} else if ( isArray( filter.value ) ) {\n\t\t\t\t\t\tvalue = filter.value.join( ', ' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = filter.value;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tonBlur={handleChange} onChange={handleChange}\n\t\t\t\t\t\t\tstyle={{ width: '100%', backgroundColor: 'ghostwhite' }}\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"all\">Show All</option>\n\t\t\t\t\t\t\t{cohorts.map( ( v, key ) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\tvalue={`${v.title}`}\n\t\t\t\t\t\t\t\t\t>{v.title}</option>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tCOLUMNS.push({\n\t\t\t\tid: 'lesson_'+i,\n\t\t\t\tHeader: lessons[ i ].title,\n\t\t\t\t_lesson: lessons[ i ],\n\t\t\t\tCell: this.accessorFactory( lessons, i ),\n\t\t\t\tsortMethod: sortFactory( lessons, i ),\n\t\t\t\tfilterMethod: filterNumbersFactory( lessons, i ),\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tlet maxPoints = 0;\n\t\t\t\t\tif ( lessons[ i ].metadata && lessons[ i ].metadata.grades ) {\n\t\t\t\t\t\tmaxPoints = lessons[ i ].metadata.grades.maxPoints;\n\t\t\t\t\t}\n\t\t\t\t\tconst defaultVal = {\n\t\t\t\t\t\tmax: maxPoints,\n\t\t\t\t\t\tmin: 0\n\t\t\t\t\t};\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tpaddingLeft: '4px',\n\t\t\t\t\t\t\tpaddingRight: '4px',\n\t\t\t\t\t\t\tpaddingTop: '8px'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<InputRange\n\t\t\t\t\t\t\t\tallowSameValues\n\t\t\t\t\t\t\t\tmaxValue={maxPoints}\n\t\t\t\t\t\t\t\tminValue={0}\n\t\t\t\t\t\t\t\tvalue={filter ? filter.value : defaultVal}\n\t\t\t\t\t\t\t\tonChange={( newValue ) => {\n\t\t\t\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\taccessor: 'lessonGrades'\n\t\t\t});\n\t\t}\n\t\treturn COLUMNS;\n\t}\n\n\taccessorFactory = ( lessons, idx ) => {\n\t\treturn d => {\n\t\t\tlet data = d.original.lessonGrades || {};\n\t\t\tconst lesson = lessons[ idx ];\n\t\t\tconst lessonID = lesson._id;\n\t\t\tlet maxPoints = '';\n\t\t\tif ( lesson.metadata && lesson.metadata.grades ) {\n\t\t\t\tmaxPoints += ` / ${lessons[ idx ].metadata.grades.maxPoints}`;\n\t\t\t}\n\t\t\tdata = data[ lessonID ];\n\t\t\tif ( data ) {\n\t\t\t\tlet tally = [];\n\t\t\t\tfor ( let key in data ) {\n\t\t\t\t\tif ( hasOwnProp( data, key ) && key !== '_sumPoints' ) {\n\t\t\t\t\t\ttally.push( <p style={{ margin: 0 }} key={key}>{key}: <b style={{ float: 'right', marginLeft: 12 }}>{data[ key ]}</b></p> );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn ( <OverlayTrigger placement=\"top\" overlay={<Card className=\"tickets-description-overlay\" body id=\"description-tooltip\">\n\t\t\t\t\t{tally}\n\t\t\t\t</Card>}>\n\t\t\t\t\t<p>{data._sumPoints}{maxPoints}</p>\n\t\t\t\t</OverlayTrigger> );\n\t\t\t}\n\t\t\treturn <span></span>;\n\t\t};\n\t}\n\n\treorderColumns( lessonOrder, lessonSortDirection ) {\n\t\tdebug( 'Sort columns by '+lessonOrder+' in '+lessonSortDirection+' order' );\n\t\tif ( lessonSortDirection === 'ascending' ) {\n\t\t\treturn this.columns.slice().sort( ( a, b ) => {\n\t\t\t\tif ( !a._lesson || !b._lesson ) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif ( lessonOrder === 'title' ) {\n\t\t\t\t\treturn a._lesson.title.localeCompare( b._lesson.title );\n\t\t\t\t}\n\t\t\t\treturn a._lesson[ lessonOrder ] > b._lesson[ lessonOrder ] ? 1 : -1;\n\t\t\t});\n\t\t}\n\t\treturn this.columns.slice().sort( ( a, b ) => {\n\t\t\tif ( !a._lesson || !b._lesson ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif ( lessonOrder === 'title' ) {\n\t\t\t\treturn b._lesson.title.localeCompare( a._lesson.title );\n\t\t\t}\n\t\t\treturn a._lesson[ lessonOrder ] < b._lesson[ lessonOrder ] ? 1 : -1;\n\t\t});\n\t}\n\n\tassembleData() {\n\t\tconst displayedMembers = this.dashboardTable.table.getResolvedState().sortedData;\n\t\tconst len = displayedMembers.length;\n\t\tconst out = new Array( len );\n\t\tconst lessons = this.props.lessons;\n\t\tfor ( let i = 0; i < len; i++ ) {\n\t\t\tconst member = displayedMembers[ i ]._original;\n\t\t\tout[ i ] = {\n\t\t\t\tname: member.name,\n\t\t\t\tfirstName: member.firstName,\n\t\t\t\tlastName: member.lastName,\n\t\t\t\temail: member.email,\n\t\t\t\tcohort: member.cohort\n\t\t\t};\n\t\t\tconst availableCustomFields = this.props.user.availableCustomFields;\n\t\t\tfor ( let j = 0; j < availableCustomFields.length; j++ ) {\n\t\t\t\tconst fieldName = availableCustomFields[ j ].name;\n\t\t\t\tif ( member.customFields ) {\n\t\t\t\t\tout[ i ][ fieldName ] = member.customFields[ fieldName ];\n\t\t\t\t} else {\n\t\t\t\t\tout[ i ][ fieldName ] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor ( let j = 0; j < lessons.length; j++ ) {\n\t\t\t\tconst lessonName = lessons[ j ]._id;\n\t\t\t\tlet data = member.lessonGrades;\n\t\t\t\tif ( data && data[ lessonName ] ) {\n\t\t\t\t\tdata = data[ lessonName ];\n\t\t\t\t\tout[ i ][ lessons[ j ].title ] = data._sumPoints;\n\t\t\t\t} else {\n\t\t\t\t\tout[ i ][ lessons[ j ].title ] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn out;\n\t}\n\n\tsaveJSON = () => {\n\t\tconst data = this.assembleData();\n\t\tconst blob = new Blob([ JSON.stringify( data ) ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `grades_${this.props.namespace.title}.json`;\n\t\tsaveAs( blob, name );\n\t}\n\n\tsaveCSV = () => {\n\t\tconst data = this.assembleData();\n\t\tstringify( data, {\n\t\t\theader: true\n\t\t}, ( err, output ) => {\n\t\t\tif ( err ) {\n\t\t\t\treturn this.props.addNotification({\n\t\t\t\t\ttitle: 'Error encountered',\n\t\t\t\t\tmessage: 'Encountered an error while creating CSV: '+err.message,\n\t\t\t\t\tlevel: 'error',\n\t\t\t\t\tposition: 'tl'\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst blob = new Blob([ output ], {\n\t\t\t\ttype: 'text/plain'\n\t\t\t});\n\t\t\tconst name = `grades_${this.props.namespace.title}.csv`;\n\t\t\tsaveAs( blob, name );\n\t\t});\n\t}\n\n\ttoggleExplorer = () => {\n\t\tthis.setState({\n\t\t\tshowExplorer: !this.state.showExplorer\n\t\t});\n\t}\n\n\trenderSortButton() {\n\t\tconst { t } = this.props;\n\t\tlet title;\n\t\tswitch ( this.state.lessonOrder ) {\n\t\t\tcase 'title':\n\t\t\t\ttitle = t('common:sort-alphabetically');\n\t\t\t\tbreak;\n\t\t\tcase 'createdAt':\n\t\t\t\ttitle = t('common:sort-create-date');\n\t\t\t\tbreak;\n\t\t\tcase 'updatedAt':\n\t\t\t\ttitle = t('common:sort-update-date');\n\t\t\t\tbreak;\n\t\t}\n\t\treturn (\n\t\t\t<ButtonGroup className=\"sort-button-group\" >\n\t\t\t\t<DropdownButton size=\"sm\" variant=\"secondary\" onSelect={( newValue ) => {\n\t\t\t\t\tthis.columns = this.reorderColumns( newValue, this.state.lessonSortDirection );\n\t\t\t\t\tthis.setState({ lessonOrder: newValue });\n\t\t\t\t}} id=\"dropdown\" title={<small>{title}</small>} >\n\t\t\t\t\t<Dropdown.Item eventKey=\"title\" >\n\t\t\t\t\t\t<small>{t('common:sort-alphabetically')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"createdAt\" >\n\t\t\t\t\t\t<small>{t('common:sort-create-date')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"updatedAt\" >\n\t\t\t\t\t\t<small>{t('common:sort-update-date')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t</DropdownButton>\n\t\t\t\t<Button size=\"sm\" variant=\"secondary\" style={{ marginLeft: 2 }} onClick={() => {\n\t\t\t\t\tif ( this.state.lessonSortDirection === 'ascending' ) {\n\t\t\t\t\t\tthis.columns = this.reorderColumns( this.state.lessonOrder, 'descending' );\n\t\t\t\t\t\tthis.setState({ lessonSortDirection: 'descending' });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.columns = this.reorderColumns( this.state.lessonOrder, 'ascending' );\n\t\t\t\t\t\tthis.setState({ lessonSortDirection: 'ascending' });\n\t\t\t\t\t}\n\t\t\t\t}} aria-label={this.state.lessonSortDirection === 'ascending' ?\n\t\t\t\tt('common:sort-descending') : t('common:sort-ascending')} >\n\t\t\t\t\t{ this.state.lessonSortDirection === 'ascending' ?\n\t\t\t\t\t\t<i className=\"fas fa-arrow-right\" /> :\n\t\t\t\t\t\t<i className=\"fas fa-arrow-left\" />\n\t\t\t\t\t}\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( this.state.showExplorer ) {\n\t\t\tlet data = this.assembleData();\n\t\t\tdata = obsToVar( data );\n\t\t\tconst quantitative = [];\n\t\t\tconst categorical = [ 'name', 'email', 'cohort' ];\n\t\t\tfor ( let i = 0; i < this.props.lessons.length; i++ ) {\n\t\t\t\tquantitative.push( this.props.lessons[ i ].title );\n\t\t\t}\n\t\t\tconst availableCustomFields = this.props.user.availableCustomFields;\n\t\t\tfor ( let i = 0; i < availableCustomFields.length; i++ ) {\n\t\t\t\tcategorical.push( availableCustomFields[ i ].name );\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<DashboardDataExplorer\n\t\t\t\t\ttitle={t('explorer-grades-title')}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tclose={this.toggleExplorer}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"namespace-data-buttons\" >\n\t\t\t\t\t{this.renderSortButton()}\n\t\t\t\t\t<ButtonGroup className=\"progress-button-group\" >\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"csvTooltip\" >{t('save-as-csv')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveCSV} ><i className=\"fas fa-download\"></i> CSV</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"jsonTooltip\">{t('save-as-json')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveJSON} ><i className=\"fas fa-download\"></i> JSON</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"namespace-data-page\">\n\t\t\t\t\t<DashboardTable\n\t\t\t\t\t\tclassName=\"grades-table\"\n\t\t\t\t\t\tdata={this.state.displayedMembers}\n\t\t\t\t\t\tcolumns={this.columns}\n\t\t\t\t\t\tt={t}\n\t\t\t\t\t\tref={(r) => {\n\t\t\t\t\t\t\tthis.dashboardTable = r;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonButtonClick={this.toggleExplorer}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nGradesPage.propTypes = {\n\taddNotification: PropTypes.func.isRequired,\n\tcohorts: PropTypes.array.isRequired,\n\tlessons: PropTypes.array.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nGradesPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( GradesPage );\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"children\", \"name\", \"className\", \"checked\", \"type\", \"onChange\", \"value\", \"disabled\", \"inputRef\"];\nimport classNames from 'classnames';\nimport React, { useCallback, useState } from 'react';\nimport Button from './Button';\n\nvar noop = function noop() {\n  return undefined;\n};\n\nvar ToggleButton = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      name = _ref.name,\n      className = _ref.className,\n      checked = _ref.checked,\n      type = _ref.type,\n      onChange = _ref.onChange,\n      value = _ref.value,\n      disabled = _ref.disabled,\n      inputRef = _ref.inputRef,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useState = useState(false),\n      focused = _useState[0],\n      setFocused = _useState[1];\n\n  var handleFocus = useCallback(function (e) {\n    if (e.target.tagName === 'INPUT') setFocused(true);\n  }, []);\n  var handleBlur = useCallback(function (e) {\n    if (e.target.tagName === 'INPUT') setFocused(false);\n  }, []);\n  return /*#__PURE__*/React.createElement(Button, _extends({}, props, {\n    ref: ref,\n    className: classNames(className, focused && 'focus', disabled && 'disabled'),\n    type: undefined,\n    active: !!checked,\n    as: \"label\"\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    name: name,\n    type: type,\n    value: value,\n    ref: inputRef,\n    autoComplete: \"off\",\n    checked: !!checked,\n    disabled: !!disabled,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onChange: onChange || noop\n  }), children);\n});\nToggleButton.displayName = 'ToggleButton';\nexport default ToggleButton;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"children\", \"type\", \"name\", \"value\", \"onChange\"];\nimport React from 'react';\nimport invariant from 'invariant';\nimport { useUncontrolled } from 'uncontrollable';\nimport chainFunction from './createChainedFunction';\nimport { map } from './ElementChildren';\nimport ButtonGroup from './ButtonGroup';\nimport ToggleButton from './ToggleButton';\nvar defaultProps = {\n  type: 'radio',\n  vertical: false\n};\nvar ToggleButtonGroup = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useUncontrolled = useUncontrolled(props, {\n    value: 'onChange'\n  }),\n      children = _useUncontrolled.children,\n      type = _useUncontrolled.type,\n      name = _useUncontrolled.name,\n      value = _useUncontrolled.value,\n      onChange = _useUncontrolled.onChange,\n      controlledProps = _objectWithoutPropertiesLoose(_useUncontrolled, _excluded);\n\n  var getValues = function getValues() {\n    return value == null ? [] : [].concat(value);\n  };\n\n  var handleToggle = function handleToggle(inputVal, event) {\n    if (!onChange) {\n      return;\n    }\n\n    var values = getValues();\n    var isActive = values.indexOf(inputVal) !== -1;\n\n    if (type === 'radio') {\n      if (!isActive && onChange) onChange(inputVal, event);\n      return;\n    }\n\n    if (isActive) {\n      onChange(values.filter(function (n) {\n        return n !== inputVal;\n      }), event);\n    } else {\n      onChange([].concat(values, [inputVal]), event);\n    }\n  };\n\n  !(type !== 'radio' || !!name) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'A `name` is required to group the toggle buttons when the `type` ' + 'is set to \"radio\"') : invariant(false) : void 0;\n  return /*#__PURE__*/React.createElement(ButtonGroup, _extends({}, controlledProps, {\n    ref: ref,\n    toggle: true\n  }), map(children, function (child) {\n    var values = getValues();\n    var _child$props = child.props,\n        childVal = _child$props.value,\n        childOnChange = _child$props.onChange;\n\n    var handler = function handler(e) {\n      return handleToggle(childVal, e);\n    };\n\n    return /*#__PURE__*/React.cloneElement(child, {\n      type: type,\n      name: child.name || name,\n      checked: values.indexOf(childVal) !== -1,\n      onChange: chainFunction(childOnChange, handler)\n    });\n  }));\n});\nToggleButtonGroup.defaultProps = defaultProps;\nToggleButtonGroup.Button = ToggleButton;\nexport default ToggleButtonGroup;","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'react-bootstrap/Button';\nimport ToggleButtonGroup from 'react-bootstrap/ToggleButtonGroup';\nimport ToggleButton from 'react-bootstrap/ToggleButton';\nimport logger from 'debug';\nimport Select from 'react-select';\nimport './actions_page.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle-dashboard:namespace-data:actions-page' );\n\n\n// MAIN //\n\nclass ActionsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst cohortOptions = props.cohorts.map( cohort => {\n\t\t\treturn { label: cohort.title, value: cohort };\n\t\t});\n\n\t\tlet displayedMembers = [];\n\t\tfor ( let i = 0; i < props.cohorts.length; i++ ) {\n\t\t\tdisplayedMembers = displayedMembers.concat( props.cohorts[i].members);\n\t\t}\n\n\t\tthis.state = {\n\t\t\tcohortOptions: cohortOptions,\n\t\t\tselectedCohorts: cohortOptions,\n\t\t\tdisplayedMembers: displayedMembers,\n\t\t\tlessonActionsPage: false,\n\t\t\tactualLesson: null,\n\t\t\tanonymized: true\n\t\t};\n\t}\n\n\tretrieveActions = () => {\n\t\tthis.props.getNamespaceActions({\n\t\t\tnamespaceID: this.props.namespace._id,\n\t\t\tnamespaceTitle: this.props.namespace.title\n\t\t});\n\t}\n\n\thandleRadioChange = ( val ) => {\n\t\tthis.setState({\n\t\t\tanonymized: !this.state.anonymized\n\t\t});\n\t}\n\n\thandleCohortChange = ( cohorts ) => {\n\t\tlet members = [];\n\t\tfor ( let i = 0; i < cohorts.length; i++ ) {\n\t\t\tmembers = members.concat( cohorts[ i ].value.members );\n\t\t}\n\t\tthis.setState({\n\t\t\tselectedCohorts: cohorts,\n\t\t\tdisplayedMembers: members\n\t\t}, () => {\n\t\t\tdebug( 'New number of displayed members: '+this.state.displayedMembers.length );\n\t\t});\n\t}\n\n\trenderCohorts() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"actions-page-cohorts\">\n\t\t\t\t\t<div style={{ width: '400px', height: '40px' }}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={this.state.selectedCohorts}\n\t\t\t\t\t\t\tisMulti\n\t\t\t\t\t\t\tname=\"cohorts\"\n\t\t\t\t\t\t\toptions={this.state.cohortOptions}\n\t\t\t\t\t\t\tonChange={this.handleCohortChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderLessonActionsPage() {\n\t\treturn (\n\t\t\t<div className=\"actions-page-lesson-action-page\">\n\t\t\t\t<div className=\"lesson-action-page-resize\">\t&#x1f5d6;</div>\n\t\t\t\t<button onClick={this.hideLessonActions} className=\"lesson-action-page-exit empty-button\">&#10005;</button>\n\t\t\t\t<div className=\"lesson-action-page-title\">{ this.state.actualLesson.title}</div>\n\t\t\t\t<div className=\"lesson-action-page-filter\">\n\t\t\t\t\t{this.renderCohorts() }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\n\thideLessonActions = () => {\n\t\tthis.setState({\n\t\t\tlessonActionsPage: false\n\t\t});\n\t}\n\n\tshowLessonActions = (lesson) => {\n\t\tthis.setState({\n\t\t\tlessonActionsPage: true,\n\t\t\tactualLesson: lesson\n\t\t});\n\t}\n\n\trenderLessons() {\n\t\tconst lessons = this.props.namespace.lessons;\n\t\tconst list = [];\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tlist.push(\n\t\t\t\t<button key={i} onClick={()=> this.showLessonActions( lessons[i] )} className=\"actions-page-lesson\">\n\t\t\t\t\t<div className=\"actions-page-lesson-title\">{lessons[i].title}</div>\n\t\t\t\t</button>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"actions-page\">\n\t\t\t\t<div className=\"actions-page-export\">\n\t\t\t\t{ this.renderExportSection() }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"actions-page-lessons\">\n\t\t\t\t\t{ list }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderExportSection() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"actions-page-export-title\">Export Actions</div>\n\t\t\t\t<ToggleButtonGroup\n\t\t\t\t\tname=\"options\"\n\t\t\t\t\tonChange={this.handleRadioChange}\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tvalue={this.state.anonymized}\n\t\t\t\t>\n\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"light\"\n\t\t\t\t\t\tvalue={false}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\t\t\tcolor: this.state.anonymized ? '#A9A9A9' : 'black'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>Original</ToggleButton>\n\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"light\"\n\t\t\t\t\t\tvalue={true}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\t\t\tcolor: this.state.anonymized ? 'black' : '#A9A9A9'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>Anonymized</ToggleButton>\n\t\t\t\t</ToggleButtonGroup>\n\t\t\t\t<Button onClick={this.retrieveActions}>\n\t\t\t\t\tSave all namespace actions\n\t\t\t\t</Button>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn ( <div className=\"namespace-data-page\">\n\t\t\t{ this.renderLessons() }\n\t\t\t{ this.state.lessonActionsPage ? this.renderLessonActionsPage() : null }\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nActionsPage.propTypes = {\n\tcohorts: PropTypes.array.isRequired,\n\tgetNamespaceActions: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired\n};\n\nActionsPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default ActionsPage;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport moment from 'moment';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport PINF from '@stdlib/constants/float64/pinf';\nimport omit from '@stdlib/utils/omit';\nimport Popover from 'react-bootstrap/Popover';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport Badge from 'react-bootstrap/Badge';\nimport DashboardDataExplorer from 'ev/components/data-explorer';\nimport obsToVar from '@isle-project/utils/obs-to-var';\nimport DashboardTable from 'components/dashboard-table';\nimport createCategoricalColumn from 'components/admin/create_categorical_column.js';\nimport createBooleanColumn from 'components/admin/create_boolean_column.js';\nimport createTextColumn from 'components/admin/create_text_column.js';\nimport createDateColumn from 'components/admin/create_date_column.js';\nimport TicketModal from 'components/ticket-modal';\nimport server from 'constants/server';\nimport 'css/input_range.css';\nimport './tickets_page.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:files-page' );\nconst RE_TICKET = /ticket=([^&]*)/;\n\n\n// MAIN //\n\nclass TicketsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tshowTicketModal: false,\n\t\t\tselectedTicket: null,\n\t\t\tshowExplorer: false\n\t\t};\n\t\tthis.columns = this.createColumns();\n\t}\n\n\tasync componentDidMount() {\n\t\tdebug( 'Component did mount...' );\n\t\tawait this.props.getCourseTickets( this.props.namespace._id );\n\n\t\tif ( this.props.history.location.search ) {\n\t\t\tconst match = RE_TICKET.exec( this.props.history.location.search );\n\t\t\tif ( match && match[ 1 ] ) {\n\t\t\t\tconst tickets = this.props.tickets;\n\t\t\t\tfor ( let i = 0; i < tickets.length; i++ ) {\n\t\t\t\t\tconst ticket = tickets[ i ];\n\t\t\t\t\tif ( ticket._id === match[ 1 ] ) {\n\t\t\t\t\t\t// eslint-disable-next-line react/no-did-mount-set-state\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tselectedTicket: ticket,\n\t\t\t\t\t\t\tshowTicketModal: true\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\ttoggleTicketModal = () => {\n\t\tthis.setState({\n\t\t\tshowTicketModal: !this.state.showTicketModal\n\t\t});\n\t}\n\n\tcreateColumns = () => {\n\t\tconst { t } = this.props;\n\t\tconst tickets = this.props.tickets || [];\n\t\tlet minTime = PINF;\n\t\tlet maxTime = 0;\n\t\tfor ( let i = 0; i < tickets.length; i++ ) {\n\t\t\tif ( tickets[ i ].createdAt > maxTime ) {\n\t\t\t\tmaxTime = tickets[ i ].createdAt;\n\t\t\t}\n\t\t\tif ( tickets[ i ].updatedAt > maxTime ) {\n\t\t\t\tmaxTime = tickets[ i ].updatedAt;\n\t\t\t}\n\t\t\tif ( tickets[ i ].createdAt < minTime ) {\n\t\t\t\tminTime = tickets[ i ].createdAt;\n\t\t\t}\n\t\t\tif ( tickets[ i ].updatedAt < minTime ) {\n\t\t\t\tminTime = tickets[ i ].updatedAt;\n\t\t\t}\n\t\t}\n\t\tmaxTime = moment( maxTime );\n\t\tminTime = moment( minTime );\n\t\treturn [\n\t\t\t{\n\t\t\t\tHeader: 'Pic',\n\t\t\t\taccessor: 'user.picture',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn <img className=\"table-pic\" src={`${server}/thumbnail/${row.value}`} alt=\"Profile Pic\" />;\n\t\t\t\t},\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tmaxWidth: 46,\n\t\t\t\tminWidth: 46,\n\t\t\t\tfilterable: false,\n\t\t\t\tresizable: false,\n\t\t\t\tsortable: false\n\t\t\t},\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:name'),\n\t\t\t\taccessor: 'user.name',\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' }\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:email'),\n\t\t\t\taccessor: 'user.email',\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' }\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:title'),\n\t\t\t\taccessor: 'title',\n\t\t\t\tminWidth: 200\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: t('common:description'),\n\t\t\t\taccessor: 'description',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn ( <OverlayTrigger placement=\"top\" overlay={<Card className=\"tickets-description-overlay\" body id=\"description-tooltip\">\n\t\t\t\t\t\t{row.value}\n\t\t\t\t\t</Card>}>\n\t\t\t\t\t\t<p className=\"tickets-description\" >{row.value}</p>\n\t\t\t\t\t</OverlayTrigger> );\n\t\t\t\t},\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tminWidth: 300\n\t\t\t},\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:component'),\n\t\t\t\taccessor: 'component'\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: 'Reply',\n\t\t\t\taccessor: '_id',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"open-ticket-tooltip\">{t('common:open-ticket-tooltip')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-secondary\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tselectedTicket: row.original\n\t\t\t\t\t\t\t\t\t}, this.toggleTicketModal );\n\t\t\t\t\t\t\t\t}} >\n\t\t\t\t\t\t\t\t<i className=\"fas fa-reply\"></i>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 45\n\t\t\t},\n\t\t\tcreateCategoricalColumn({\n\t\t\t\tHeader: t('common:priority'),\n\t\t\t\taccessor: 'priority',\n\t\t\t\tlabels: [ 'Low', 'Middle', 'High' ],\n\t\t\t\tmaxWidth: 200,\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( !row.value ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tlet variant;\n\t\t\t\t\tlet higher;\n\t\t\t\t\tlet lower;\n\t\t\t\t\tswitch ( row.value ) {\n\t\t\t\t\t\tcase 'Low':\n\t\t\t\t\t\t\tvariant = 'secondary';\n\t\t\t\t\t\t\thigher = 'Middle';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Middle':\n\t\t\t\t\t\t\tvariant = 'warning';\n\t\t\t\t\t\t\thigher = 'High';\n\t\t\t\t\t\t\tlower = 'Low';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'High':\n\t\t\t\t\t\t\tvariant = 'danger';\n\t\t\t\t\t\t\tlower = 'Middle';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\treturn ( <div>\n\t\t\t\t\t\t<Badge variant={variant} style={{ marginRight: 6, fontSize: '1em' }} >\n\t\t\t\t\t\t\t{row.value}\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-secondary\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.props.updatePriority( row.original._id, higher );\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisabled={!higher}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"fas fa-arrow-up\"></i>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-secondary\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.props.updatePriority( row.original._id, lower );\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisabled={!lower}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"fas fa-arrow-down\"></i>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div> );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:lesson'),\n\t\t\t\taccessor: 'lesson.title',\n\t\t\t\tmaxWidth: 140,\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( !row.value ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tconst url = `${server}/${this.props.namespace.title}/${row.value}`;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"open-lesson-tooltip\">{t('namespace_data:open-lesson-new-tab')}</Tooltip>}>\n\t\t\t\t\t\t\t<Badge variant=\"light\" style={{ fontSize: '1em' }} >\n\t\t\t\t\t\t\t\t<a href={url} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t\t{row.value}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateBooleanColumn({\n\t\t\t\tHeader: t('common:done'),\n\t\t\t\taccessor: 'done',\n\t\t\t\ttrueLabel: t('common:done'),\n\t\t\t\tfalseLabel: t('common:not-done')\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: t( 'common:platform' ),\n\t\t\t\taccessor: 'platform',\n\t\t\t\tstyle: { marginTop: '2px', color: 'darkslategrey', fontSize: 24, textAlign: 'center', cursor: 'pointer' },\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( row.value ) {\n\t\t\t\t\t\tconst popover = <Popover\n\t\t\t\t\t\t\tid=\"popover-data\"\n\t\t\t\t\t\t\tstyle={{ maxWidth: 500, maxHeight: '80vh', overflowY: 'auto' }}\n\t\t\t\t\t\t\tarrowProps={{ display: 'none' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Popover.Title as=\"h3\">{row.row._original.title}</Popover.Title>\n\t\t\t\t\t\t\t<Popover.Content style={{ backgroundColor: 'lightblue' }} >\n\t\t\t\t\t\t\t\t<pre>\n\t\t\t\t\t\t\t\t\t{JSON.stringify( omit( row.value, [ 'description' ] ), null, 2 )}\n\t\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t\t</Popover.Content>\n\t\t\t\t\t\t</Popover>;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<OverlayTrigger trigger=\"click\" placement=\"left\" overlay={popover}>\n\t\t\t\t\t\t\t\t<i className=\"data-icon fas fa-tablet-alt\"></i>\n\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false\n\t\t\t},\n\t\t\tcreateDateColumn({\n\t\t\t\tHeader: t('created-at'),\n\t\t\t\taccessor: 'createdAt',\n\t\t\t\tstartDate: minTime,\n\t\t\t\tendDate: maxTime\n\t\t\t})\n\t\t];\n\t}\n\n\ttoggleExplorer = () => {\n\t\tthis.setState({\n\t\t\tshowExplorer: !this.state.showExplorer\n\t\t});\n\t}\n\n\tassembleExplorerData = () => {\n\t\tlet tickets = this.props.tickets;\n\t\tlet data = [];\n\t\tfor ( let i = 0; i < tickets.length; i++ ) {\n\t\t\tconst ticket = tickets[ i ];\n\t\t\tconst replacement = {};\n\t\t\treplacement.component = ticket.component;\n\t\t\treplacement.title = ticket.title;\n\t\t\treplacement.description = ticket.description;\n\t\t\treplacement.lesson = ticket.lesson ? ticket.lesson.title : null;\n\t\t\treplacement.messages = ticket.messages.length;\n\t\t\treplacement.attachments = ticket.attachments.length;\n\t\t\treplacement.user = ticket.user.email;\n\t\t\treplacement.done = ticket.done;\n\t\t\treplacement.priority = ticket.priority;\n\t\t\treplacement.browser = `${ticket.platform.name} ${ticket.platform.version}`;\n\t\t\tconst os = ticket.platform.os;\n\t\t\treplacement.os = `${os.family} ${os.version ? os.version : ''} ${os.architecture}bit`;\n\t\t\treplacement.createdAt = ticket.createdAt;\n\t\t\treplacement.updatedAt = ticket.updatedAt;\n\t\t\tdata.push( replacement );\n\t\t}\n\t\tdata = obsToVar( data );\n\t\treturn data;\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( this.state.showExplorer ) {\n\t\t\treturn (\n\t\t\t\t<DashboardDataExplorer\n\t\t\t\t\ttitle={t('explorer-tickets-title')}\n\t\t\t\t\tdata={this.assembleExplorerData()}\n\t\t\t\t\tcategorical={[ 'component', 'lesson', 'done', 'createdAt', 'updatedAt', 'priority', 'browser', 'os' ]}\n\t\t\t\t\tquantitative={[ 'messages', 'attachments' ]}\n\t\t\t\t\tclose={this.toggleExplorer}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn ( <div className=\"namespace-data-page\">\n\t\t\t<DashboardTable\n\t\t\t\tdata={this.props.tickets}\n\t\t\t\tcolumns={this.columns}\n\t\t\t\tt={t}\n\t\t\t\tonButtonClick={this.toggleExplorer}\n\t\t\t/>\n\t\t\t{ this.state.showTicketModal ? <TicketModal\n\t\t\t\tshow={this.state.showTicketModal}\n\t\t\t\tonHide={this.toggleTicketModal}\n\t\t\t\tticket={this.state.selectedTicket}\n\t\t\t\tsubmitTicketMessage={this.props.submitTicketMessage}\n\t\t\t\topenTicket={this.props.openTicket}\n\t\t\t\tcloseTicket={this.props.closeTicket}\n\t\t\t/> : null }\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nTicketsPage.propTypes = {\n\tcloseTicket: PropTypes.func.isRequired,\n\tgetCourseTickets: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\topenTicket: PropTypes.func.isRequired,\n\tsubmitTicketMessage: PropTypes.func.isRequired,\n\ttickets: PropTypes.array,\n\tupdatePriority: PropTypes.func.isRequired\n};\n\nTicketsPage.defaultProps = {\n\ttickets: []\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( TicketsPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport Alert from 'react-bootstrap/Alert';\nimport Nav from 'react-bootstrap/Nav';\nimport FilesPage from './files_page.js';\nimport AnnouncementsPage from './announcements_page.js';\nimport ProgressPage from './progress_page.js';\nimport CohortsPage from './cohorts_page.js';\nimport GradesPage from './grades_page.js';\nimport ActionsPage from './actions_page.js';\nimport TicketsPage from './tickets_page.js';\nimport './namespace_data.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle-dashboard:namespace-data' );\n\n\n// MAIN //\n\nclass NamespaceData extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst subpage = props.match.params.subpage;\n\t\tlet activePage;\n\t\tswitch ( subpage ) {\n\t\t\tdefault:\n\t\t\tcase 'announcements':\n\t\t\t\tactivePage = 1;\n\t\t\t\tbreak;\n\t\t\tcase 'progress':\n\t\t\t\tactivePage = 2;\n\t\t\t\tbreak;\n\t\t\tcase 'grades':\n\t\t\t\tactivePage = 3;\n\t\t\t\tbreak;\n\t\t\tcase 'cohorts':\n\t\t\t\tactivePage = 4;\n\t\t\t\tbreak;\n\t\t\tcase 'owner-files':\n\t\t\t\tactivePage = 5;\n\t\t\t\tbreak;\n\t\t\tcase 'student-files':\n\t\t\t\tactivePage = 6;\n\t\t\t\tbreak;\n\t\t\tcase 'tickets':\n\t\t\t\tactivePage = 7;\n\t\t\t\tbreak;\n\t\t\tcase 'actions':\n\t\t\t\tactivePage = 8;\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.state = {\n\t\t\tactivePage\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.getBadges();\n\t}\n\n\thandleUpload = ( event ) => {\n\t\tdebug( 'Uploading file...' );\n\t\tconst file = event.target.files[ 0 ];\n\t\tconst formData = new FormData();\n\t\tformData.append( 'file', file, file.name );\n\t\tformData.append( 'namespaceName', this.props.namespace.title );\n\t\tformData.append( 'owner', 'true' );\n\t\tthis.props.uploadFile({\n\t\t\tformData: formData,\n\t\t\tuser: this.props.user\n\t\t});\n\t}\n\n\thandleAnnouncementDeletion = (createdAt, index) => {\n\t\tthis.props.deleteAnnouncement( {\n\t\t\tnamespaceName: this.props.namespace.title,\n\t\t\tindex,\n\t\t\tcreatedAt\n\t\t});\n\t}\n\n\thandleAnnouncementEdit = ( announcement ) => {\n\t\tthis.props.editAnnouncement({\n\t\t\tnamespaceName: this.props.namespace.title,\n\t\t\tannouncement\n\t\t});\n\t}\n\n\thandleAnnouncementCreation = ( announcement ) => {\n\t\tthis.props.addAnnouncement({\n\t\t\tnamespaceName: this.props.namespace.title,\n\t\t\tannouncement\n\t\t});\n\t}\n\n\thandleFileDeletion = ( _id, ownerFiles ) => {\n\t\tthis.props.deleteFile( _id, this.props.namespace.title, ownerFiles );\n\t}\n\n\tsubmitTicketMessage = ({ message, ticketID }) => {\n\t\tthis.props.sendTicketMessage({ message, ticketID, user: this.props.user });\n\t}\n\n\thandleSelect = ( selectedKey ) => {\n\t\tselectedKey = Number( selectedKey );\n\t\tconst title = this.props.namespace.title;\n\t\tswitch ( selectedKey ) {\n\t\t\tcase 1:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/announcements` );\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/progress` );\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/grades` );\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/cohorts` );\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/owner-files` );\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/student-files` );\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/tickets` );\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/actions` );\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.setState({\n\t\t\tactivePage: selectedKey\n\t\t});\n\t}\n\n\trenderPage() {\n\t\tswitch ( this.state.activePage ) {\n\t\t\tcase 1:\n\t\t\t\treturn <AnnouncementsPage namespace={this.props.namespace} editAnnouncement={this.handleAnnouncementEdit} deleteAnnouncement={this.handleAnnouncementDeletion} addAnnouncement={this.handleAnnouncementCreation} user={this.props.user} />;\n\t\t\tcase 2:\n\t\t\t\treturn <ProgressPage adjustProgress={this.props.adjustProgress} addNotification={this.props.addNotification} namespace={this.props.namespace} cohorts={this.props.namespace.cohorts} lessons={this.props.namespace.lessons} user={this.props.user} />;\n\t\t\tcase 3:\n\t\t\t\treturn <GradesPage addNotification={this.props.addNotification} namespace={this.props.namespace} cohorts={this.props.namespace.cohorts} lessons={this.props.namespace.lessons} user={this.props.user} />;\n\t\t\tcase 4:\n\t\t\t\treturn <CohortsPage badges={this.props.badges} cohorts={this.props.namespace.cohorts} lessons={this.props.namespace.lessons} />;\n\t\t\tcase 5:\n\t\t\t\treturn <FilesPage ownerFiles files={this.props.namespace.ownerFiles} namespace={this.props.namespace} handleUpload={this.handleUpload} handleFileDeletion={this.handleFileDeletion} addNotification={this.props.addNotification} getFiles={this.props.getOwnerFiles} />;\n\t\t\tcase 6:\n\t\t\t\treturn <FilesPage files={this.props.namespace.files} namespace={this.props.namespace} handleUpload={this.handleUpload} handleFileDeletion={this.handleFileDeletion} addNotification={this.props.addNotification} getFiles={this.props.getFiles} />;\n\t\t\tcase 7:\n\t\t\t\treturn <TicketsPage tickets={this.props.namespace.tickets} namespace={this.props.namespace} getCourseTickets={this.props.getCourseTickets} submitTicketMessage={this.submitTicketMessage} openTicket={this.props.openTicket} closeTicket={this.props.closeTicket} updatePriority={this.props.updatePriority} history={this.props.history} />;\n\t\t\tcase 8:\n\t\t\t\treturn <ActionsPage namespace={this.props.namespace} getNamespaceActions={this.props.getNamespaceActions} user={this.props.user} cohorts={this.props.namespace.cohorts} />;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( !this.props.namespace._id ) {\n\t\t\treturn ( <div className=\"namespace-data-div\">\n\t\t\t\t<Alert variant=\"danger\">{t('common:no-course-selected')}</Alert>\n\t\t\t</div> );\n\t\t}\n\t\tconst page = this.renderPage();\n\t\treturn (\n\t\t\t<div className=\"namespace-data-div\">\n\t\t\t\t<div className=\"namespace-data-navbar\">\n\t\t\t\t\t<Nav variant=\"pills\" className=\"namespace-data-navbar-pills\" activeKey={this.state.activePage} onSelect={this.handleSelect}>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"1\" title=\"Announcements\" >{t('common:announcements')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"2\" title=\"Progress\" >{t('common:progress')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"3\" title=\"Grades\" >{t('grades')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"4\" title=\"Cohorts\" >{t('common:cohorts')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"5\" title=\"Owner Files\" >{t('owner-files')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"6\" title=\"Student Files\" >{t('student-files')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"7\" title=\"Tickets\" disabled={!this.props.namespace.enableTicketing} >{t('common:tickets')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"8\" title=\"Actions\" disabled >{t('common:actions')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t</Nav>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"namespace-data-page-container\" style={{ overflowY: 'auto' }}>\n\t\t\t\t\t{page}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nNamespaceData.propTypes = {\n\taddAnnouncement: PropTypes.func.isRequired,\n\taddNotification: PropTypes.func.isRequired,\n\tadjustProgress: PropTypes.func.isRequired,\n\tbadges: PropTypes.array,\n\tcloseTicket: PropTypes.func.isRequired,\n\tdeleteAnnouncement: PropTypes.func.isRequired,\n\tdeleteFile: PropTypes.func.isRequired,\n\teditAnnouncement: PropTypes.func.isRequired,\n\tgetBadges: PropTypes.func.isRequired,\n\tgetCourseTickets: PropTypes.func.isRequired,\n\tgetFiles: PropTypes.func.isRequired,\n\tgetNamespaceActions: PropTypes.func.isRequired,\n\tgetOwnerFiles: PropTypes.func.isRequired,\n\tmatch: PropTypes.object.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\topenTicket: PropTypes.func.isRequired,\n\tsendTicketMessage: PropTypes.func.isRequired,\n\tupdatePriority: PropTypes.func.isRequired,\n\tuploadFile: PropTypes.func.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nNamespaceData.defaultProps = {\n\tbadges: null\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( NamespaceData );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport server from 'constants/server';\nimport { CREATED_ANNOUNCEMENT, EDITED_ANNOUNCEMENT, DELETED_ANNOUNCEMENT } from 'constants/action_types.js';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { namespaceAxios } from 'helpers/axios.js';\n\n\n// EXPORTS //\n\nexport function editedAnnouncement( announcement, namespaceName ) {\n\treturn {\n\t\ttype: EDITED_ANNOUNCEMENT,\n\t\tpayload: {\n\t\t\tannouncement,\n\t\t\tnamespaceName\n\t\t}\n\t};\n}\n\nexport function createdAnnouncement( announcement, namespaceName ) {\n\treturn {\n\t\ttype: CREATED_ANNOUNCEMENT,\n\t\tpayload: {\n\t\t\tannouncement,\n\t\t\tnamespaceName\n\t\t}\n\t};\n}\n\nexport function deletedAnnouncement( index, namespaceName ) {\n\treturn {\n\t\ttype: DELETED_ANNOUNCEMENT,\n\t\tpayload: {\n\t\t\tindex,\n\t\t\tnamespaceName\n\t\t}\n\t};\n}\n\nexport const addAnnouncement = async ( dispatch, { namespaceName, announcement }) => {\n\ttry {\n\t\tconst res = await namespaceAxios.post( server+'/new_announcement', {\n\t\t\tnamespaceName,\n\t\t\tannouncement\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch( createdAnnouncement( announcement, namespaceName ) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const addAnnouncementInjector = dispatch => {\n\treturn async ( { namespaceName, announcement } ) => {\n\t\tawait addAnnouncement( dispatch, { namespaceName, announcement } );\n\t};\n};\n\nexport const deleteAnnouncement = async ( dispatch, { namespaceName, createdAt, index }) => {\n\ttry {\n\t\tconst res = await namespaceAxios.post( server+'/delete_announcement', {\n\t\t\tnamespaceName,\n\t\t\tcreatedAt\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch( deletedAnnouncement( index, namespaceName ) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const deleteAnnouncementInjector = dispatch => {\n\treturn async ( { namespaceName, createdAt, index } ) => {\n\t\tawait deleteAnnouncement( dispatch, { namespaceName, createdAt, index } );\n\t};\n};\n\nexport const editAnnouncement = async ( dispatch, { namespaceName, announcement }) => {\n\ttry {\n\t\tconst res = await namespaceAxios.post( server+'/edit_announcement', {\n\t\t\tnamespaceName,\n\t\t\tannouncement\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch( editedAnnouncement( announcement, namespaceName ) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const editAnnouncementInjector = dispatch => {\n\treturn async ( { namespaceName, announcement } ) => {\n\t\tawait editAnnouncement( dispatch, { namespaceName, announcement } );\n\t};\n};\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport NamespaceData from 'components/namespace-data';\nimport { addAnnouncementInjector, deleteAnnouncementInjector, editAnnouncementInjector } from 'actions/announcement';\nimport { getAvailableBadgesInjector } from 'actions/badge';\nimport { deleteFileInjector, getFilesInjector, getOwnerFilesInjector, uploadFileInjector } from 'actions/file';\nimport { addNotificationInjector } from 'actions/notification';\nimport { getNamespaceActionsInjector, adjustProgressInjector } from 'actions/namespace';\nimport { getCourseTicketsInjector, sendTicketMessageInjector,\n\tcloseTicketInjector, openTicketInjector, updatePriorityInjector } from 'actions/ticket';\n\n\n// FUNCTIONS //\n\nfunction mapStateToProps( state ) {\n\treturn {\n\t\tbadges: state.badges,\n\t\tuser: state.user,\n\t\tnamespace: state.namespace\n\t};\n}\n\nfunction mapDispatchToProps( dispatch ) {\n\treturn {\n\t\tadjustProgress: adjustProgressInjector( dispatch ),\n\t\tgetBadges: getAvailableBadgesInjector( dispatch ),\n\t\tgetCourseTickets: getCourseTicketsInjector( dispatch ),\n\t\tgetFiles: getFilesInjector( dispatch ),\n\t\tgetOwnerFiles: getOwnerFilesInjector( dispatch ),\n\t\tgetNamespaceActions: getNamespaceActionsInjector( dispatch ),\n\t\taddNotification: addNotificationInjector( dispatch ),\n\t\tdeleteFile: deleteFileInjector( dispatch ),\n\t\tdeleteAnnouncement: deleteAnnouncementInjector( dispatch ),\n\t\teditAnnouncement: editAnnouncementInjector( dispatch ),\n\t\taddAnnouncement: addAnnouncementInjector( dispatch ),\n\t\tsendTicketMessage: sendTicketMessageInjector( dispatch ),\n\t\tcloseTicket: closeTicketInjector( dispatch ),\n\t\topenTicket: openTicketInjector( dispatch ),\n\t\tuploadFile: uploadFileInjector( dispatch ),\n\t\tupdatePriority: updatePriorityInjector( dispatch )\n\t};\n}\n\n\n// MAIN //\n\nconst VisibleNamespaceData = connect( mapStateToProps, mapDispatchToProps )( NamespaceData );\n\n\n// EXPORTS //\n\nexport default withRouter( VisibleNamespaceData );\n","/*\n* Adapted from:\n*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n* 1.3.8\n* 2018-03-22 14:03:47\n*\n* By Eli Grey, https://eligrey.com\n* License: MIT\n*   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n*\n* @source http://purl.eligrey.com/github/FileSaver.js/blob/master/src/FileSaver.js\n*/\n\n// VARIABLES //\n\nconst RE_AUTO_BOM = /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i;\nconst ARBITRARY_REVOKE_TIMEOUT = 1000 * 40; // Time in ms\n\n\n// FUNCTIONS //\n\nfunction click(node) {\n\tconst event = new MouseEvent( 'click' );\n\tnode.dispatchEvent( event );\n}\n\nfunction throwOutside( ex ) {\n\tsetImmediate(function throwEx() {\n\t\tthrow ex;\n\t}, 0 );\n}\n\nfunction autoBOM( blob ) {\n\t// Prepend BOM for UTF-8 XML and text/* types (including HTML). Note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\tif ( RE_AUTO_BOM.test( blob.type ) ) {\n\t\treturn new Blob([ String.fromCharCode( 0xFEFF ), blob ], {\n\t\t\ttype: blob.type\n\t\t});\n\t}\n\treturn blob;\n}\n\nfunction dispatch( filesaver, eventTypes, event ) {\n\teventTypes = [].concat( eventTypes );\n\tlet i = eventTypes.length;\n\twhile ( i-- ) {\n\t\tlet listener = filesaver[ 'on' + eventTypes[i] ];\n\t\tif ( typeof listener === 'function' ) {\n\t\t\ttry {\n\t\t\t\tlistener.call( filesaver, event || filesaver );\n\t\t\t} catch ( ex ) {\n\t\t\t\tthrowOutside( ex );\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n// MAIN //\n\nfunction saveFactory( view ) {\n\tif (\n\t\ttypeof view === 'undefined' ||\n\t\ttypeof navigator !== 'undefined' &&\n\t\t/MSIE [1-9]\\./.test( navigator.userAgent )\n\t) {\n\t\treturn;\n\t}\n\tconst doc = view.document;\n\n\t// Only get URL when necessary in case Blob.js hasn't overridden it yet:\n\tfunction getURL() {\n\t\treturn view.URL || view.webkitURL || view;\n\t}\n\tfunction revoke( file ) {\n\t\tfunction revoker() {\n\t\t\tif ( typeof file === 'string' ) { // File is an object URL...\n\t\t\t\tgetURL().revokeObjectURL(file);\n\t\t\t} else { // File is a File...\n\t\t\t\tfile.remove();\n\t\t\t}\n\t\t}\n\t\tsetTimeout( revoker, ARBITRARY_REVOKE_TIMEOUT );\n\t}\n\n\tconst saveLink = doc.createElementNS( 'http://www.w3.org/1999/xhtml', 'a' );\n\tconst canUseSaveLink = 'download' in saveLink;\n\tconst isSafari = /constructor/i.test( view.HTMLElement ) || view.safari;\n\tconst isChromeIOS =/CriOS\\/[\\d]+/.test( navigator.userAgent );\n\tconst setImmediate = view.setImmediate || view.setTimeout;\n\tconst forceSavableType = 'application/octet-stream';\n\n\tfunction FileSaver(blob, name, noAutoBOM ) {\n\t\tif ( !noAutoBOM ) {\n\t\t\tblob = autoBOM(blob);\n\t\t}\n\t\t// First try a.download, then web filesystem, then object URLs\n\t\tconst self = this;\n\t\tconst type = blob.type;\n\t\tconst force = type === forceSavableType;\n\t\tlet objectURL;\n\t\tfunction dispatchAll() {\n\t\t\tdispatch( self, 'writestart progress write writeend'.split(' ') );\n\t\t}\n\t\t// On any filesystem errors, revert to saving with object URLs:\n\t\tfunction fsError() {\n\t\t\tif ((isChromeIOS || (force && isSafari)) && view.FileReader) {\n\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\tconst reader = new FileReader();\n\t\t\t\treader.onloadend = function onLoadEnd() {\n\t\t\t\t\tlet url = isChromeIOS ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\tconst popup = view.open(url, '_blank');\n\t\t\t\t\tif ( !popup ) {\n\t\t\t\t\t\tview.location.href = url;\n\t\t\t\t\t}\n\t\t\t\t\turl = void 0; // Release reference before dispatching...\n\t\t\t\t\tself.readyState = self.DONE;\n\t\t\t\t\tdispatchAll();\n\t\t\t\t};\n\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\tself.readyState = self.INIT;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Don't create more object URLs than needed:\n\t\t\tif ( !objectURL ) {\n\t\t\t\tobjectURL = getURL().createObjectURL( blob );\n\t\t\t}\n\t\t\tif ( force ) {\n\t\t\t\tview.location.href = objectURL;\n\t\t\t} else {\n\t\t\t\tconst opened = view.open( objectURL, '_blank' );\n\t\t\t\tif ( !opened ) {\n\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\tview.location.href = objectURL;\n\t\t\t\t}\n\t\t\t}\n\t\t\tself.readyState = self.DONE;\n\t\t\tdispatchAll();\n\t\t\trevoke( objectURL );\n\t\t}\n\t\tself.readyState = self.INIT;\n\n\t\tif ( canUseSaveLink ) {\n\t\t\tobjectURL = getURL().createObjectURL(blob);\n\t\t\tsetImmediate(function save() {\n\t\t\t\tsaveLink.href = objectURL;\n\t\t\t\tsaveLink.download = name;\n\t\t\t\tclick( saveLink );\n\t\t\t\tdispatchAll();\n\t\t\t\trevoke( objectURL );\n\t\t\t\tself.readyState = self.DONE;\n\t\t\t}, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tfsError();\n\t}\n\tconst proto = FileSaver.prototype;\n\tfunction saveAs( blob, name, noAutoBOM ) {\n\t\treturn new FileSaver( blob, name || blob.name || 'download', noAutoBOM );\n\t}\n\n\t// IE 10+ (native saveAs)\n\tif ( typeof navigator !== 'undefined' && navigator.msSaveOrOpenBlob ) {\n\t\treturn function saveAs( blob, name, noAutoBOM ) {\n\t\t\tname = name || blob.name || 'download';\n\t\t\tif ( !noAutoBOM ) {\n\t\t\t\tblob = autoBOM( blob );\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tproto.abort = function abort() {};\n\tproto.readyState = proto.INIT = 0;\n\tproto.WRITING = 1;\n\tproto.DONE = 2;\n\n\tproto.error = null;\n\tproto.onwritestart = null;\n\tproto.onprogress = null;\n\tproto.onwrite = null;\n\tproto.onabort = null;\n\tproto.onerror = null;\n\tproto.onwriteend = null;\n\n\treturn saveAs;\n}\n\nconst saveAs = saveFactory(\n\ttypeof self !== 'undefined' && self ||\n\ttypeof window !== 'undefined' && window ||\n\tthis.content\n);\n\n\n// EXPORTS //\n\nexport default saveAs;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport floor from '@stdlib/math/base/special/floor';\n\n\n// MAIN //\n\nconst formatTime = ( time, opts = { hours: true, minutes: true, seconds: true }) => {\n\ttime = time / 1000;\n\tconst hours = floor( time / ( 60*60 ) );\n\ttime = time % ( 60*60 );\n\tlet minutes = floor( time / 60 );\n\tif ( minutes < 10 ) {\n\t\tminutes = '0'+minutes;\n\t}\n\ttime = time % 60;\n\tlet seconds = floor( time );\n\tif ( seconds < 10 ) {\n\t\tseconds = '0'+seconds;\n\t}\n\tlet out = '';\n\tif ( opts.hours ) {\n\t\tout += hours;\n\t}\n\tif ( opts.minutes ) {\n\t\tif ( out ) {\n\t\t\tout += ':';\n\t\t}\n\t\tout += minutes;\n\t}\n\tif ( opts.seconds ) {\n\t\tif ( out ) {\n\t\t\tout += ':';\n\t\t}\n\t\tout += seconds;\n\t}\n\treturn out;\n};\n\n\n// EXPORTS //\n\nexport default formatTime;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Test if a value is `undefined` or `null`.\n*\n* @module @stdlib/assert/is-undefined-or-null\n*\n* @example\n* var isUndefinedOrNull = require( '@stdlib/assert/is-undefined-or-null' );\n*\n* var bool = isUndefinedOrNull( void 0 );\n* // returns true\n*\n* bool = isUndefinedOrNull( null );\n* // returns true\n*\n* bool = isUndefinedOrNull( false );\n* // returns false\n*/\n// MODULES //\n\nvar isUndefinedOrNull = require('./main.js'); // EXPORTS //\n\n\nmodule.exports = isUndefinedOrNull;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Tests if a value is `undefined` or `null`.\n*\n* ## Notes\n*\n* -   In older browsers, `undefined` is a global which can be overridden. `void`, however, is an operator which **cannot** be overridden. Consequently, better to use `void` to check for `undefined`. See [Stack Overflow][1].\n*\n* [1]: http://stackoverflow.com/a/19369078/2225624\n*\n* @param {*} value - value to test\n* @returns {boolean} boolean indicating whether value is undefined\n*\n* @example\n* var bool = isUndefinedOrNull( undefined );\n* // returns true\n*\n* bool = isUndefinedOrNull( null );\n* // returns true\n*\n* bool = isUndefinedOrNull( false );\n* // returns false\n*/\n\nfunction isUndefinedOrNull(value) {\n  return value === void 0 || value === null;\n} // EXPORTS //\n\n\nmodule.exports = isUndefinedOrNull;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Maximum safe double-precision floating-point integer.\n*\n* @module @stdlib/constants/float64/max-safe-integer\n* @type {number}\n*\n* @example\n* var FLOAT64_MAX_SAFE_INTEGER = require( '@stdlib/constants/float64/max-safe-integer' );\n* // returns 9007199254740991\n*/\n// MAIN //\n\n/**\n* Maximum safe double-precision floating-point integer.\n*\n* ## Notes\n*\n* The integer has the value\n*\n* ```tex\n* 2^{53} - 1\n* ```\n*\n* @constant\n* @type {number}\n* @default 9007199254740991\n* @see [Safe Integers]{@link http://www.2ality.com/2013/10/safe-integers.html}\n* @see [IEEE 754]{@link https://en.wikipedia.org/wiki/IEEE_754-1985}\n*/\n\nvar FLOAT64_MAX_SAFE_INTEGER = 9007199254740991; // EXPORTS //\n\nmodule.exports = FLOAT64_MAX_SAFE_INTEGER;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Test if a double-precision floating-point numeric value is infinite.\n*\n* @module @stdlib/math/base/assert/is-infinite\n*\n* @example\n* var isInfinite = require( '@stdlib/math/base/assert/is-infinite' );\n*\n* var bool = isInfinite( Infinity );\n* // returns true\n*\n* bool = isInfinite( -Infinity );\n* // returns true\n*\n* bool = isInfinite( 5.0 );\n* // returns false\n*\n* bool = isInfinite( NaN );\n* // returns false\n*/\n// MODULES //\n\nvar isInfinite = require('./main.js'); // EXPORTS //\n\n\nmodule.exports = isInfinite;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar PINF = require('@stdlib/constants/float64/pinf');\n\nvar NINF = require('@stdlib/constants/float64/ninf'); // MAIN //\n\n/**\n* Tests if a double-precision floating-point numeric value is infinite.\n*\n* @param {number} x - value to test\n* @returns {boolean} boolean indicating whether the value is infinite\n*\n* @example\n* var bool = isInfinite( Infinity );\n* // returns true\n*\n* @example\n* var bool = isInfinite( -Infinity );\n* // returns true\n*\n* @example\n* var bool = isInfinite( 5.0 );\n* // returns false\n*\n* @example\n* var bool = isInfinite( NaN );\n* // returns false\n*/\n\n\nfunction isInfinite(x) {\n  return x === PINF || x === NINF;\n} // EXPORTS //\n\n\nmodule.exports = isInfinite;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Test if a double-precision floating-point numeric value is negative zero.\n*\n* @module @stdlib/math/base/assert/is-negative-zero\n*\n* @example\n* var isNegativeZero = require( '@stdlib/math/base/assert/is-negative-zero' );\n*\n* var bool = isNegativeZero( -0.0 );\n* // returns true\n*\n* bool = isNegativeZero( 0.0 );\n* // returns false\n*/\n// MODULES //\n\nvar isNegativeZero = require('./main.js'); // EXPORTS //\n\n\nmodule.exports = isNegativeZero;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar NINF = require('@stdlib/constants/float64/ninf'); // MAIN //\n\n/**\n* Tests if a double-precision floating-point numeric value is negative zero.\n*\n* @param {number} x - value to test\n* @returns {boolean} boolean indicating whether the value is negative zero\n*\n* @example\n* var bool = isNegativeZero( -0.0 );\n* // returns true\n*\n* @example\n* var bool = isNegativeZero( 0.0 );\n* // returns false\n*/\n\n\nfunction isNegativeZero(x) {\n  return x === 0.0 && 1.0 / x === NINF;\n} // EXPORTS //\n\n\nmodule.exports = isNegativeZero;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Compute an absolute value of a double-precision floating-point number.\n*\n* @module @stdlib/math/base/special/abs\n*\n* @example\n* var abs = require( '@stdlib/math/base/special/abs' );\n*\n* var v = abs( -1.0 );\n* // returns 1.0\n*\n* v = abs( 2.0 );\n* // returns 2.0\n*\n* v = abs( 0.0 );\n* // returns 0.0\n*\n* v = abs( -0.0 );\n* // returns 0.0\n*\n* v = abs( NaN );\n* // returns NaN\n*/\n// MODULES //\n\nvar abs = require('./main.js'); // EXPORTS //\n\n\nmodule.exports = abs;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2021 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MAIN //\n\n/**\n* Computes the absolute value of a double-precision floating-point number `x`.\n*\n* @param {number} x - input value\n* @returns {number} absolute value\n*\n* @example\n* var v = abs( -1.0 );\n* // returns 1.0\n*\n* @example\n* var v = abs( 2.0 );\n* // returns 2.0\n*\n* @example\n* var v = abs( 0.0 );\n* // returns 0.0\n*\n* @example\n* var v = abs( -0.0 );\n* // returns 0.0\n*\n* @example\n* var v = abs( NaN );\n* // returns NaN\n*/\n\nfunction abs(x) {\n  return Math.abs(x); // eslint-disable-line stdlib/no-builtin-math\n} // EXPORTS //\n\n\nmodule.exports = abs;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Round a double-precision floating-point number toward positive infinity.\n*\n* @module @stdlib/math/base/special/ceil\n*\n* @example\n* var ceil = require( '@stdlib/math/base/special/ceil' );\n*\n* var v = ceil( -4.2 );\n* // returns -4.0\n*\n* v = ceil( 9.99999 );\n* // returns 10.0\n*\n* v = ceil( 0.0 );\n* // returns 0.0\n*\n* v = ceil( NaN );\n* // returns NaN\n*/\n// MODULES //\n\nvar ceil = require('./main.js'); // EXPORTS //\n\n\nmodule.exports = ceil;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // TODO: implementation (?)\n\n/**\n* Rounds a double-precision floating-point number toward positive infinity.\n*\n* @param {number} x - input value\n* @returns {number} rounded value\n*\n* @example\n* var v = ceil( -4.2 );\n* // returns -4.0\n*\n* @example\n* var v = ceil( 9.99999 );\n* // returns 10.0\n*\n* @example\n* var v = ceil( 0.0 );\n* // returns 0.0\n*\n* @example\n* var v = ceil( NaN );\n* // returns NaN\n*/\n\nvar ceil = Math.ceil; // eslint-disable-line stdlib/no-builtin-math\n// EXPORTS //\n\nmodule.exports = ceil;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Restrict a double-precision floating-point number to a specified range.\n*\n* @module @stdlib/math/base/special/clamp\n*\n* @example\n* var clamp = require( '@stdlib/math/base/special/clamp' );\n*\n* var v = clamp( 3.14, 0.0, 5.0 );\n* // returns 3.14\n*\n* v = clamp( -3.14, 0.0, 5.0 );\n* // returns 0.0\n*\n* v = clamp( 10.0, 0.0, 5.0 );\n* // returns 5.0\n*\n* v = clamp( -0.0, 0.0, 5.0 );\n* // returns 0.0\n*\n* v = clamp( 0.0, -0.0, 5.0 );\n* // returns 0.0\n*\n* v = clamp( NaN, 0.0, 5.0 );\n* // returns NaN\n*\n* v = clamp( 0.0, NaN, 5.0 );\n* // returns NaN\n*\n* v = clamp( 3.14, 0.0, NaN );\n* // returns NaN\n*/\n// MODULES //\n\nvar clamp = require('./main.js'); // EXPORTS //\n\n\nmodule.exports = clamp;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar isnan = require('./../../../../base/assert/is-nan');\n\nvar isNegativeZero = require('./../../../../base/assert/is-negative-zero'); // MAIN //\n\n/**\n* Restricts a double-precision floating-point number to a specified range.\n*\n* @param {number} v - input value\n* @param {number} min - minimum value\n* @param {number} max - maximum value\n* @returns {number} value restricted to a specified range\n*\n* @example\n* var v = clamp( 3.14, 0.0, 5.0 );\n* // returns 3.14\n*\n* v = clamp( -3.14, 0.0, 5.0 );\n* // returns 0.0\n*\n* v = clamp( 10.0, 0.0, 5.0 );\n* // returns 5.0\n*\n* v = clamp( -0.0, 0.0, 5.0 );\n* // returns 0.0\n*\n* v = clamp( 0.0, -0.0, 5.0 );\n* // returns 0.0\n*\n* v = clamp( NaN, 0.0, 5.0 );\n* // returns NaN\n*\n* v = clamp( 0.0, NaN, 5.0 );\n* // returns NaN\n*\n* v = clamp( 3.14, 0.0, NaN );\n* // returns NaN\n*/\n\n\nfunction clamp(v, min, max) {\n  if (isnan(v) || isnan(min) || isnan(max)) {\n    return NaN;\n  } // Simple cases...\n\n\n  if (v < min) {\n    return min;\n  }\n\n  if (v > max) {\n    return max;\n  } // Special cases for handling +-0.0...\n\n\n  if (min === 0.0 && isNegativeZero(v)) {\n    return min; // +-0.0\n  }\n\n  if (v === 0.0 && isNegativeZero(max)) {\n    return max; // -0.0\n  } // Case: min <= v <= max\n\n\n  return v;\n} // EXPORTS //\n\n\nmodule.exports = clamp;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Return the minimum value.\n*\n* @module @stdlib/math/base/special/min\n*\n* @example\n* var min = require( '@stdlib/math/base/special/min' );\n*\n* var v = min( 3.14, 4.2 );\n* // returns 3.14\n*\n* v = min( 5.9, 3.14, 4.2 );\n* // returns 3.14\n*\n* v = min( 3.14, NaN );\n* // returns NaN\n*\n* v = min( +0.0, -0.0 );\n* // returns -0.0\n*/\n// MODULES //\n\nvar min = require('./min.js'); // EXPORTS //\n\n\nmodule.exports = min;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar isNegativeZero = require('./../../../../base/assert/is-negative-zero');\n\nvar isnan = require('./../../../../base/assert/is-nan');\n\nvar NINF = require('@stdlib/constants/float64/ninf');\n\nvar PINF = require('@stdlib/constants/float64/pinf'); // MAIN //\n\n/**\n* Returns the minimum value.\n*\n* @param {number} [x] - first number\n* @param {number} [y] - second number\n* @param {...number} [args] - numbers\n* @returns {number} minimum value\n*\n* @example\n* var v = min( 3.14, 4.2 );\n* // returns 3.14\n*\n* @example\n* var v = min( 5.9, 3.14, 4.2 );\n* // returns 3.14\n*\n* @example\n* var v = min( 3.14, NaN );\n* // returns NaN\n*\n* @example\n* var v = min( +0.0, -0.0 );\n* // returns -0.0\n*/\n\n\nfunction min(x, y) {\n  var len;\n  var m;\n  var v;\n  var i;\n  len = arguments.length;\n\n  if (len === 2) {\n    if (isnan(x) || isnan(y)) {\n      return NaN;\n    }\n\n    if (x === NINF || y === NINF) {\n      return NINF;\n    }\n\n    if (x === y && x === 0.0) {\n      if (isNegativeZero(x)) {\n        return x;\n      }\n\n      return y;\n    }\n\n    if (x < y) {\n      return x;\n    }\n\n    return y;\n  }\n\n  m = PINF;\n\n  for (i = 0; i < len; i++) {\n    v = arguments[i];\n\n    if (isnan(v) || v === NINF) {\n      return v;\n    }\n\n    if (v < m) {\n      m = v;\n    } else if (v === m && v === 0.0 && isNegativeZero(v)) {\n      m = v;\n    }\n  }\n\n  return m;\n} // EXPORTS //\n\n\nmodule.exports = min;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Return a partial object copy excluding specified keys.\n*\n* @module @stdlib/utils/omit\n*\n* @example\n* var omit = require( '@stdlib/utils/omit' );\n*\n* var obj1 = {\n*     'a': 1,\n*     'b': 2\n* };\n*\n* var obj2 = omit( obj1, 'b' );\n* // returns { 'a': 1 }\n*/\n// MODULES //\n\nvar omit = require('./omit.js'); // EXPORTS //\n\n\nmodule.exports = omit;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar objectKeys = require('./../../keys');\n\nvar isString = require('@stdlib/assert/is-string').isPrimitive;\n\nvar isStringArray = require('@stdlib/assert/is-string-array').primitives;\n\nvar indexOf = require('./../../index-of'); // MAIN //\n\n/**\n* Returns a partial object copy excluding specified keys.\n*\n* @param {Object} obj - source object\n* @param {(string|StringArray)} keys - keys to exclude\n* @throws {TypeError} first argument must be an object\n* @throws {TypeError} second argument must be either a string or an array of strings\n* @returns {Object} new object\n*\n* @example\n* var obj1 = {\n*     'a': 1,\n*     'b': 2\n* };\n*\n* var obj2 = omit( obj1, 'b' );\n* // returns { 'a': 1 }\n*/\n\n\nfunction omit(obj, keys) {\n  var ownKeys;\n  var out;\n  var key;\n  var i;\n\n  if (typeof obj !== 'object' || obj === null) {\n    throw new TypeError('invalid argument. First argument must be an object. Value: `' + obj + '`.');\n  }\n\n  ownKeys = objectKeys(obj);\n  out = {};\n\n  if (isString(keys)) {\n    for (i = 0; i < ownKeys.length; i++) {\n      key = ownKeys[i];\n\n      if (key !== keys) {\n        out[key] = obj[key];\n      }\n    }\n\n    return out;\n  }\n\n  if (isStringArray(keys)) {\n    for (i = 0; i < ownKeys.length; i++) {\n      key = ownKeys[i];\n\n      if (indexOf(keys, key) === -1) {\n        out[key] = obj[key];\n      }\n    }\n\n    return out;\n  }\n\n  throw new TypeError('invalid argument. Second argument must be either a string primitive or an array of string primitives. Value: `' + keys + '`.');\n} // EXPORTS //\n\n\nmodule.exports = omit;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"show\", \"closeLabel\", \"className\", \"children\", \"variant\", \"onClose\", \"dismissible\", \"transition\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport Fade from './Fade';\nimport CloseButton from './CloseButton';\nimport divWithClassName from './divWithClassName';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport SafeAnchor from './SafeAnchor';\nvar DivStyledAsH4 = divWithClassName('h4');\nDivStyledAsH4.displayName = 'DivStyledAsH4';\nvar AlertHeading = createWithBsPrefix('alert-heading', {\n  Component: DivStyledAsH4\n});\nvar AlertLink = createWithBsPrefix('alert-link', {\n  Component: SafeAnchor\n});\nvar defaultProps = {\n  show: true,\n  transition: Fade,\n  closeLabel: 'Close alert'\n};\nvar Alert = /*#__PURE__*/React.forwardRef(function (uncontrolledProps, ref) {\n  var _useUncontrolled = useUncontrolled(uncontrolledProps, {\n    show: 'onClose'\n  }),\n      bsPrefix = _useUncontrolled.bsPrefix,\n      show = _useUncontrolled.show,\n      closeLabel = _useUncontrolled.closeLabel,\n      className = _useUncontrolled.className,\n      children = _useUncontrolled.children,\n      variant = _useUncontrolled.variant,\n      onClose = _useUncontrolled.onClose,\n      dismissible = _useUncontrolled.dismissible,\n      transition = _useUncontrolled.transition,\n      props = _objectWithoutPropertiesLoose(_useUncontrolled, _excluded);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'alert');\n  var handleClose = useEventCallback(function (e) {\n    if (onClose) {\n      onClose(false, e);\n    }\n  });\n  var Transition = transition === true ? Fade : transition;\n  var alert = /*#__PURE__*/React.createElement(\"div\", _extends({\n    role: \"alert\"\n  }, !Transition ? props : undefined, {\n    ref: ref,\n    className: classNames(className, prefix, variant && prefix + \"-\" + variant, dismissible && prefix + \"-dismissible\")\n  }), dismissible && /*#__PURE__*/React.createElement(CloseButton, {\n    onClick: handleClose,\n    label: closeLabel\n  }), children);\n  if (!Transition) return show ? alert : null;\n  return /*#__PURE__*/React.createElement(Transition, _extends({\n    unmountOnExit: true\n  }, props, {\n    ref: undefined,\n    in: show\n  }), alert);\n});\nAlert.displayName = 'Alert';\nAlert.defaultProps = defaultProps;\nAlert.Link = AlertLink;\nAlert.Heading = AlertHeading;\nexport default Alert;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"title\", \"children\", \"bsPrefix\", \"rootCloseEvent\", \"variant\", \"size\", \"menuAlign\", \"menuRole\", \"renderMenuOnMount\", \"disabled\", \"href\", \"id\"];\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Dropdown from './Dropdown';\nimport DropdownToggle from './DropdownToggle';\nimport DropdownMenu, { alignPropType } from './DropdownMenu';\nvar propTypes = {\n  /**\n   * An html id attribute for the Toggle button, necessary for assistive technologies, such as screen readers.\n   * @type {string|number}\n   * @required\n   */\n  id: PropTypes.any,\n\n  /** An `href` passed to the Toggle component */\n  href: PropTypes.string,\n\n  /** An `onClick` handler passed to the Toggle component */\n  onClick: PropTypes.func,\n\n  /** The content of the non-toggle Button.  */\n  title: PropTypes.node.isRequired,\n\n  /** Disables both Buttons  */\n  disabled: PropTypes.bool,\n\n  /**\n   * Aligns the dropdown menu responsively.\n   *\n   * _see [DropdownMenu](#dropdown-menu-props) for more details_\n   *\n   * @type {\"left\"|\"right\"|{ sm: \"left\"|\"right\" }|{ md: \"left\"|\"right\" }|{ lg: \"left\"|\"right\" }|{ xl: \"left\"|\"right\"} }\n   */\n  menuAlign: alignPropType,\n\n  /** An ARIA accessible role applied to the Menu component. When set to 'menu', The dropdown */\n  menuRole: PropTypes.string,\n\n  /** Whether to render the dropdown menu in the DOM before the first time it is shown */\n  renderMenuOnMount: PropTypes.bool,\n\n  /**\n   *  Which event when fired outside the component will cause it to be closed.\n   *\n   * _see [DropdownMenu](#dropdown-menu-props) for more details_\n   */\n  rootCloseEvent: PropTypes.string,\n\n  /** @ignore */\n  bsPrefix: PropTypes.string,\n\n  /** @ignore */\n  variant: PropTypes.string,\n\n  /** @ignore */\n  size: PropTypes.string\n};\n/**\n * A convenience component for simple or general use dropdowns. Renders a `Button` toggle and all `children`\n * are passed directly to the default `Dropdown.Menu`. This component accepts all of\n * [`Dropdown`'s props](#dropdown-props).\n *\n * _All unknown props are passed through to the `Dropdown` component._ Only\n * the Button `variant`, `size` and `bsPrefix` props are passed to the toggle,\n * along with menu-related props are passed to the `Dropdown.Menu`\n */\n\nvar DropdownButton = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var title = _ref.title,\n      children = _ref.children,\n      bsPrefix = _ref.bsPrefix,\n      rootCloseEvent = _ref.rootCloseEvent,\n      variant = _ref.variant,\n      size = _ref.size,\n      menuAlign = _ref.menuAlign,\n      menuRole = _ref.menuRole,\n      renderMenuOnMount = _ref.renderMenuOnMount,\n      disabled = _ref.disabled,\n      href = _ref.href,\n      id = _ref.id,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(Dropdown, _extends({\n    ref: ref\n  }, props), /*#__PURE__*/React.createElement(DropdownToggle, {\n    id: id,\n    href: href,\n    size: size,\n    variant: variant,\n    disabled: disabled,\n    childBsPrefix: bsPrefix\n  }, title), /*#__PURE__*/React.createElement(DropdownMenu, {\n    align: menuAlign,\n    role: menuRole,\n    renderOnMount: renderMenuOnMount,\n    rootCloseEvent: rootCloseEvent\n  }, children));\n});\nDropdownButton.displayName = 'DropdownButton';\nDropdownButton.propTypes = propTypes;\nexport default DropdownButton;","import React from 'react';\n/**\n * Iterates through children that are typically specified as `props.children`,\n * but only maps over children that are \"valid elements\".\n *\n * The mapFunction provided index will be normalised to the components mapped,\n * so an invalid component would not increase the index.\n *\n */\n\nfunction map(children, func) {\n  var index = 0;\n  return React.Children.map(children, function (child) {\n    return /*#__PURE__*/React.isValidElement(child) ? func(child, index++) : child;\n  });\n}\n/**\n * Iterates through children that are \"valid elements\".\n *\n * The provided forEachFunc(child, index) will be called for each\n * leaf child with the index reflecting the position relative to \"valid components\".\n */\n\n\nfunction forEach(children, func) {\n  var index = 0;\n  React.Children.forEach(children, function (child) {\n    if ( /*#__PURE__*/React.isValidElement(child)) func(child, index++);\n  });\n}\n\nexport { map, forEach };","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"min\", \"now\", \"max\", \"label\", \"srOnly\", \"striped\", \"animated\", \"className\", \"style\", \"variant\", \"bsPrefix\"],\n    _excluded2 = [\"isChild\"],\n    _excluded3 = [\"min\", \"now\", \"max\", \"label\", \"srOnly\", \"striped\", \"animated\", \"bsPrefix\", \"variant\", \"className\", \"children\"];\nimport classNames from 'classnames';\nimport React, { cloneElement } from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { map } from './ElementChildren';\nvar ROUND_PRECISION = 1000;\n/**\n * Validate that children, if any, are instances of `<ProgressBar>`.\n */\n\nfunction onlyProgressBar(props, propName, componentName) {\n  var children = props[propName];\n\n  if (!children) {\n    return null;\n  }\n\n  var error = null;\n  React.Children.forEach(children, function (child) {\n    if (error) {\n      return;\n    }\n    /**\n     * Compare types in a way that works with libraries that patch and proxy\n     * components like react-hot-loader.\n     *\n     * see https://github.com/gaearon/react-hot-loader#checking-element-types\n     */\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n\n\n    var element = /*#__PURE__*/React.createElement(ProgressBar, null);\n    if (child.type === element.type) return;\n    var childType = child.type;\n    var childIdentifier = /*#__PURE__*/React.isValidElement(child) ? childType.displayName || childType.name || childType : child;\n    error = new Error(\"Children of \" + componentName + \" can contain only ProgressBar \" + (\"components. Found \" + childIdentifier + \".\"));\n  });\n  return error;\n}\n\nvar defaultProps = {\n  min: 0,\n  max: 100,\n  animated: false,\n  isChild: false,\n  srOnly: false,\n  striped: false\n};\n\nfunction getPercentage(now, min, max) {\n  var percentage = (now - min) / (max - min) * 100;\n  return Math.round(percentage * ROUND_PRECISION) / ROUND_PRECISION;\n}\n\nfunction renderProgressBar(_ref, ref) {\n  var _classNames;\n\n  var min = _ref.min,\n      now = _ref.now,\n      max = _ref.max,\n      label = _ref.label,\n      srOnly = _ref.srOnly,\n      striped = _ref.striped,\n      animated = _ref.animated,\n      className = _ref.className,\n      style = _ref.style,\n      variant = _ref.variant,\n      bsPrefix = _ref.bsPrefix,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref\n  }, props, {\n    role: \"progressbar\",\n    className: classNames(className, bsPrefix + \"-bar\", (_classNames = {}, _classNames[\"bg-\" + variant] = variant, _classNames[bsPrefix + \"-bar-animated\"] = animated, _classNames[bsPrefix + \"-bar-striped\"] = animated || striped, _classNames)),\n    style: _extends({\n      width: getPercentage(now, min, max) + \"%\"\n    }, style),\n    \"aria-valuenow\": now,\n    \"aria-valuemin\": min,\n    \"aria-valuemax\": max\n  }), srOnly ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sr-only\"\n  }, label) : label);\n}\n\nvar ProgressBar = /*#__PURE__*/React.forwardRef(function (_ref2, ref) {\n  var isChild = _ref2.isChild,\n      props = _objectWithoutPropertiesLoose(_ref2, _excluded2);\n\n  props.bsPrefix = useBootstrapPrefix(props.bsPrefix, 'progress');\n\n  if (isChild) {\n    return renderProgressBar(props, ref);\n  }\n\n  var min = props.min,\n      now = props.now,\n      max = props.max,\n      label = props.label,\n      srOnly = props.srOnly,\n      striped = props.striped,\n      animated = props.animated,\n      bsPrefix = props.bsPrefix,\n      variant = props.variant,\n      className = props.className,\n      children = props.children,\n      wrapperProps = _objectWithoutPropertiesLoose(props, _excluded3);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref\n  }, wrapperProps, {\n    className: classNames(className, bsPrefix)\n  }), children ? map(children, function (child) {\n    return /*#__PURE__*/cloneElement(child, {\n      isChild: true\n    });\n  }) : renderProgressBar({\n    min: min,\n    now: now,\n    max: max,\n    label: label,\n    srOnly: srOnly,\n    striped: striped,\n    animated: animated,\n    bsPrefix: bsPrefix,\n    variant: variant\n  }, ref));\n});\nProgressBar.displayName = 'ProgressBar';\nProgressBar.defaultProps = defaultProps;\nexport default ProgressBar;"],"sourceRoot":""}