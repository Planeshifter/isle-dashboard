{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/readOnlyError.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/html-to-image/es/util.js","../node_modules/html-to-image/es/clonePseudoElements.js","../node_modules/html-to-image/es/cloneNode.js","../node_modules/html-to-image/es/getBlobFromURL.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/html-to-image/es/embedResources.js","../node_modules/html-to-image/es/embedImages.js","../node_modules/html-to-image/es/embedWebFonts.js","../node_modules/html-to-image/es/createSvgDataURL.js","../node_modules/html-to-image/es/applyStyleWithOptions.js","../node_modules/html-to-image/es/index.js","../node_modules/@isle-project/components/models/decision-tree/fullscreen_button.js","../node_modules/@isle-project/components/models/decision-tree/tree_plot.js","../node_modules/@isle-project/components/models/decision-tree/split.js","../node_modules/@isle-project/components/models/decision-tree/tree.js"],"names":["_readOnlyError","name","TypeError","_arrayLikeToArray","arr","len","length","i","arr2","Array","_unsupportedIterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","from","test","counter","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","WOFF","JPEG","mimes","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","uuid","concat","Math","random","pow","getMimeType","url","ext","match","exec","getExtension","toLowerCase","delay","ms","args","setTimeout","isDataUrl","search","toDataURL","content","mimeType","getDataURLContent","dataURL","split","toArray","arrayLike","l","push","px","node","styleProperty","val","window","getComputedStyle","getPropertyValue","parseFloat","replace","getNodeWidth","leftBorder","rightBorder","scrollWidth","getNodeHeight","topBorder","bottomBorder","scrollHeight","getPixelRatio","ratio","FINAL_PROCESS","process","env","devicePixelRatio","parseInt","isNaN","createImage","image","Image","onload","onerror","crossOrigin","src","clonePseudoElements","nativeNode","clonedNode","forEach","pseudo","clonePseudoElement","style","className","err","styleElement","document","createElement","appendChild","selector","cssText","formatCssText","map","priority","getPropertyPriority","join","formatCssProperties","createTextNode","getPseudoElementStyle","cloneSingleNode","this","mark","_callee","wrap","_context","prev","HTMLCanvasElement","abrupt","cloneNode","stop","cloneChildren","filter","_callee2","children","_context2","childNodes","reduce","child","clonedChild","decorate","_callee3","_context3","Element","cloneCssStyle","cloneInputValue","source","target","setProperty","HTMLTextAreaElement","innerHTML","HTMLInputElement","setAttribute","isRoot","_callee4","_context4","cache","getBlobFromURL","options","href","cacheBust","Date","getTime","promise","fetch","response","res","rej","blob","contentType","headers","get","_ref","reader","FileReader","onloadend","readAsDataURL","_ref2","catch","req","XMLHttpRequest","onreadystatechange","readyState","status","encoder","getResponseHeader","Error","ontimeout","responseType","timeout","open","send","reason","placeholder","imagePlaceholder","parts","msg","message","console","error","_slicedToArray","isArray","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","unsupportedIterableToArray","URL_REGEX","URL_WITH_FORMAT_REGEX","FONT_SRC_REGEX","shouldEmbed","string","embedResources","cssString","baseUrl","str","preferredFontFormat","filteredCssString","_ref3","format","parseURLs","urls","ret","resourceURL","baseURL","resolvedURL","location","protocol","doc","implementation","createHTMLDocument","base","a","head","body","resolveUrl","data","RegExp","urlToRegex","raw","quotation","embedImages","embedBackground","embedImageNode","embedChildren","background","HTMLImageElement","deferreds","all","cssFetchPromiseStore","parseWebFontRules","ownerDocument","styleSheets","getCssRules","getWebFontRules","embedWebFonts","fontEmbedCss","getWebFontCss","styleNode","sytleContent","firstChild","insertBefore","rules","rule","parentStyleSheet","cssStrings","promises","sheet","cssRules","item","index","type","CSSRule","IMPORT_RULE","importIndex","fetchCSS","embedFonts","parseCSS","insertRule","startsWith","log","inline","find","FONT_FACE_RULE","css","importRegex","keyframesRegex","unified","lastIndex","text","_callee5","_context5","resolved","regexUrlFind","fontLoadedPromises","URL","addEventListener","createSvgDataURL","width","height","xmlns","createElementNS","foreignObject","setAttributeNS","XMLSerializer","serializeToString","encodeURIComponent","html","svgToDataURL","applyStyleWithOptions","backgroundColor","manual","keys","key","getImageSize","domNode","arguments","toSvg","_getImageSize","toCanvas","canvas","context","getContext","pixelRatio","_getImageSize2","canvasWidth","canvasHeight","fillStyle","fillRect","drawImage","FullscreenButton","setState","fullscreen","state","t","props","id","placement","tooltip","Button","variant","size","onClick","toggleFullscreen","position","top","right","Modal","show","onHide","dialogClassName","Header","closeButton","Title","as","Body","innerHeight","fontSize","overflow","tree","Footer","Component","withTranslation","RE_NUMBER","treeToHtml","category","isNumber","Number","isInteger","toFixed","attribute","predicateName","pivot","notMatchedCount","notMatch","matchedCount","TreePlot","plotValue","plotKey","treeWrapper","scrollLeft","clientWidth","quality","toJpeg","randomstring","ref","div","draggable","onDragStart","ev","dataTransfer","setData","float","indices","attr","predicate","values","idx","countUniqueValues","mostFrequentValue","mostFrequentCount","gini","out","hasOwnProp","p","entropy","ln","variance","delta","mean","M2","N","x","mu","predicates","b","ClassificationTreeConstructor","opts","nobs","importances","j","predictors","root","buildClassificationTree","incrspace","minItemsCount","minBucket","round","scoreThreshold","maxTreeDepth","quantitative","criterion","predict","nTry","initialScore","alreadyChecked","bestSplit","gain","sample","attrPredPivot","contains","currSplit","matchEntropy","notMatchEntropy","newScore","currGain","matchSubTree","notMatchSubTree","buildRegressionTree","predictRandomForest","forest","prediction","max","ClassificationTree","RegressionTree","RandomForestClassifier","trees","trainingSets","nTrees","buildRandomForestClassifier","Plot"],"mappings":"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","file":"static/js/25.a5203a24.chunk.js","sourcesContent":["export default function _readOnlyError(name) {\n  throw new TypeError(\"\\\"\" + name + \"\\\" is read-only\");\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import _regeneratorRuntime from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar WOFF = 'application/font-woff';\nvar JPEG = 'image/jpeg';\nvar mimes = {\n  woff: WOFF,\n  woff2: WOFF,\n  ttf: 'application/font-truetype',\n  eot: 'application/vnd.ms-fontobject',\n  png: 'image/png',\n  jpg: JPEG,\n  jpeg: JPEG,\n  gif: 'image/gif',\n  tiff: 'image/tiff',\n  svg: 'image/svg+xml'\n};\nexport var uuid = function uuid() {\n  // generate uuid for className of pseudo elements.\n  // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n  var counter = 0; // ref: http://stackoverflow.com/a/6248722/2519373\n\n  var random = function random() {\n    return \"0000\".concat((Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n  };\n\n  return function () {\n    counter += 1;\n    return \"u\".concat(random()).concat(counter);\n  };\n}();\nexport function getExtension(url) {\n  var match = /\\.([^./]*?)$/g.exec(url);\n  return match ? match[1] : '';\n}\nexport function getMimeType(url) {\n  var ext = getExtension(url).toLowerCase();\n  return mimes[ext] || '';\n}\nexport function delay(ms) {\n  return function (args) {\n    return new Promise(function (resolve) {\n      setTimeout(function () {\n        resolve(args);\n      }, ms);\n    });\n  };\n}\nexport function isDataUrl(url) {\n  return url.search(/^(data:)/) !== -1;\n}\nexport function toDataURL(content, mimeType) {\n  return \"data:\".concat(mimeType, \";base64,\").concat(content);\n}\nexport function getDataURLContent(dataURL) {\n  return dataURL.split(/,/)[1];\n}\n\nfunction toBlob(canvas) {\n  return new Promise(function (resolve) {\n    var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n    var len = binaryString.length;\n    var binaryArray = new Uint8Array(len);\n\n    for (var i = 0; i < len; i += 1) {\n      binaryArray[i] = binaryString.charCodeAt(i);\n    }\n\n    resolve(new Blob([binaryArray], {\n      type: 'image/png'\n    }));\n  });\n}\n\nexport function canvasToBlob(canvas) {\n  if (canvas.toBlob) {\n    return new Promise(function (resolve) {\n      return canvas.toBlob(resolve);\n    });\n  }\n\n  return toBlob(canvas);\n}\nexport function toArray(arrayLike) {\n  var result = [];\n\n  for (var i = 0, l = arrayLike.length; i < l; i += 1) {\n    result.push(arrayLike[i]);\n  }\n\n  return result;\n}\n\nfunction px(node, styleProperty) {\n  var val = window.getComputedStyle(node).getPropertyValue(styleProperty);\n  return parseFloat(val.replace('px', ''));\n}\n\nexport function getNodeWidth(node) {\n  var leftBorder = px(node, 'border-left-width');\n  var rightBorder = px(node, 'border-right-width');\n  return node.scrollWidth + leftBorder + rightBorder;\n}\nexport function getNodeHeight(node) {\n  var topBorder = px(node, 'border-top-width');\n  var bottomBorder = px(node, 'border-bottom-width');\n  return node.scrollHeight + topBorder + bottomBorder;\n}\nexport function getPixelRatio() {\n  var ratio;\n  var FINAL_PROCESS;\n\n  try {\n    FINAL_PROCESS = process;\n  } catch (e) {}\n\n  var val = FINAL_PROCESS && FINAL_PROCESS.env ? FINAL_PROCESS.env.devicePixelRatio : null;\n\n  if (val) {\n    ratio = parseInt(val, 10);\n\n    if (isNaN(ratio)) {\n      ratio = 1;\n    }\n  }\n\n  return ratio || window.devicePixelRatio || 1;\n}\nexport function createImage(url) {\n  return new Promise(function (resolve, reject) {\n    var image = new Image();\n\n    image.onload = function () {\n      return resolve(image);\n    };\n\n    image.onerror = reject;\n    image.crossOrigin = 'anonymous';\n    image.src = url;\n  });\n}\nexport function svgToDataURL(svg) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", Promise.resolve().then(function () {\n              return new XMLSerializer().serializeToString(svg);\n            }).then(encodeURIComponent).then(function (html) {\n              return \"data:image/svg+xml;charset=utf-8,\".concat(html);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\nexport function getBlobFromImageURL(url) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", createImage(url).then(function (image) {\n              var width = image.width,\n                  height = image.height;\n              var canvas = document.createElement('canvas');\n              var context = canvas.getContext('2d');\n              var ratio = getPixelRatio();\n              canvas.width = width * ratio;\n              canvas.height = height * ratio;\n              canvas.style.width = \"\".concat(width);\n              canvas.style.height = \"\".concat(height);\n              context.scale(ratio, ratio);\n              context.drawImage(image, 0, 0);\n              var dataURL = canvas.toDataURL(getMimeType(url));\n              return getDataURLContent(dataURL);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}","import { uuid, toArray } from './util';\nexport function clonePseudoElements(nativeNode, clonedNode) {\n  var pseudos = [':before', ':after'];\n  pseudos.forEach(function (pseudo) {\n    return Pseudo.clonePseudoElement(nativeNode, clonedNode, pseudo);\n  });\n}\nvar Pseudo;\n\n(function (Pseudo) {\n  function clonePseudoElement(nativeNode, clonedNode, pseudo) {\n    var style = window.getComputedStyle(nativeNode, pseudo);\n    var content = style.getPropertyValue('content');\n\n    if (content === '' || content === 'none') {\n      return;\n    }\n\n    var className = uuid(); // fix: Cannot assign to read only property 'className' of object '#<…\n\n    try {\n      clonedNode.className = \"\".concat(clonedNode.className, \" \").concat(className);\n    } catch (err) {\n      return;\n    }\n\n    var styleElement = document.createElement('style');\n    styleElement.appendChild(getPseudoElementStyle(className, pseudo, style));\n    clonedNode.appendChild(styleElement);\n  }\n\n  Pseudo.clonePseudoElement = clonePseudoElement;\n\n  function getPseudoElementStyle(className, pseudo, style) {\n    var selector = \".\".concat(className, \":\").concat(pseudo);\n    var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n    return document.createTextNode(\"\".concat(selector, \"{\").concat(cssText, \"}\"));\n  }\n\n  function formatCssText(style) {\n    var content = style.getPropertyValue('content');\n    return \"\".concat(style.cssText, \" content: \").concat(content, \";\");\n  }\n\n  function formatCssProperties(style) {\n    return toArray(style).map(function (name) {\n      var value = style.getPropertyValue(name);\n      var priority = style.getPropertyPriority(name);\n      return \"\".concat(name, \": \").concat(value).concat(priority ? ' !important' : '', \";\");\n    }).join(' ');\n  }\n})(Pseudo || (Pseudo = {}));","import _regeneratorRuntime from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { clonePseudoElements } from './clonePseudoElements';\nimport { createImage, toArray } from './util';\n\nfunction cloneSingleNode(node) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var dataURL;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(node instanceof HTMLCanvasElement)) {\n              _context.next = 5;\n              break;\n            }\n\n            dataURL = node.toDataURL();\n\n            if (!(dataURL === 'data:,')) {\n              _context.next = 4;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.resolve(node.cloneNode(false)));\n\n          case 4:\n            return _context.abrupt(\"return\", createImage(dataURL));\n\n          case 5:\n            return _context.abrupt(\"return\", Promise.resolve(node.cloneNode(false)));\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\n\nfunction cloneChildren(nativeNode, clonedNode, filter) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var children;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            children = toArray(nativeNode.childNodes);\n\n            if (!(children.length === 0)) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", Promise.resolve(clonedNode));\n\n          case 3:\n            return _context2.abrupt(\"return\", children.reduce(function (done, child) {\n              return done.then(function () {\n                return cloneNode(child, filter);\n              }).then(function (clonedChild) {\n                if (clonedChild) {\n                  clonedNode.appendChild(clonedChild);\n                }\n              });\n            }, Promise.resolve()).then(function () {\n              return clonedNode;\n            }));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\n\nfunction decorate(nativeNode, clonedNode) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (clonedNode instanceof Element) {\n              _context3.next = 2;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", clonedNode);\n\n          case 2:\n            return _context3.abrupt(\"return\", Promise.resolve().then(function () {\n              return cloneCssStyle(nativeNode, clonedNode);\n            }).then(function () {\n              return clonePseudoElements(nativeNode, clonedNode);\n            }).then(function () {\n              return cloneInputValue(nativeNode, clonedNode);\n            }).then(function () {\n              return clonedNode;\n            }));\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}\n\nfunction cloneCssStyle(nativeNode, clonedNode) {\n  var source = window.getComputedStyle(nativeNode);\n  var target = clonedNode.style;\n\n  if (source.cssText) {\n    target.cssText = source.cssText;\n  } else {\n    toArray(source).forEach(function (name) {\n      target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name));\n    });\n  }\n}\n\nfunction cloneInputValue(nativeNode, clonedNode) {\n  if (nativeNode instanceof HTMLTextAreaElement) {\n    clonedNode.innerHTML = nativeNode.value;\n  }\n\n  if (nativeNode instanceof HTMLInputElement) {\n    clonedNode.setAttribute('value', nativeNode.value);\n  }\n}\n\nexport function cloneNode(nativeNode, filter, isRoot) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (!(!isRoot && filter && !filter(nativeNode))) {\n              _context4.next = 2;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", Promise.resolve(null));\n\n          case 2:\n            return _context4.abrupt(\"return\", Promise.resolve(nativeNode).then(cloneSingleNode).then(function (clonedNode) {\n              return cloneChildren(nativeNode, clonedNode, filter);\n            }).then(function (clonedNode) {\n              return decorate(nativeNode, clonedNode);\n            }));\n\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n}","/* tslint:disable:max-line-length */\nimport { getDataURLContent } from './util'; // KNOWN ISSUE\n// -----------\n// Can not handle redirect-url, such as when access 'http://something.com/avatar.png'\n// will redirect to 'http://something.com/65fc2ffcc8aea7ba65a1d1feda173540'\n\nvar TIMEOUT = 30000;\nvar cache = {};\n\nfunction isFont(filename) {\n  return /ttf|otf|eot|woff2?/i.test(filename);\n}\n\nexport function getBlobFromURL(url, options) {\n  var href = url.replace(/\\?.*/, '');\n\n  if (isFont(href)) {\n    href = href.replace(/.*\\//, '');\n  }\n\n  if (cache[href]) {\n    return cache[href];\n  } // cache bypass so we dont have CORS issues with cached images\n  // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n\n\n  if (options.cacheBust) {\n    // tslint:disable-next-line\n    url += (/\\?/.test(url) ? '&' : '?') + new Date().getTime();\n  }\n\n  var failed = function failed(reason) {\n    var placeholder = '';\n\n    if (options.imagePlaceholder) {\n      var parts = options.imagePlaceholder.split(/,/);\n\n      if (parts && parts[1]) {\n        placeholder = parts[1];\n      }\n    }\n\n    var msg = \"Failed to fetch resource: \".concat(url);\n\n    if (reason) {\n      msg = typeof reason === 'string' ? reason : reason.message;\n    }\n\n    if (msg) {\n      console.error(msg);\n    }\n\n    return placeholder;\n  };\n\n  var deferred = window.fetch ? window.fetch(url).then(function (response) {\n    return new Promise(function (res, rej) {\n      response.blob().then(function (blob) {\n        res({\n          blob: blob,\n          contentType: response.headers.get('Content-Type')\n        });\n      });\n    });\n  }).then(function (_ref) {\n    var blob = _ref.blob,\n        contentType = _ref.contentType;\n    return new Promise(function (resolve, reject) {\n      var reader = new FileReader();\n\n      reader.onloadend = function () {\n        return resolve({\n          contentType: contentType,\n          blob: reader.result\n        });\n      };\n\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  }).then(function (_ref2) {\n    var blob = _ref2.blob,\n        contentType = _ref2.contentType;\n    return {\n      contentType: contentType,\n      blob: getDataURLContent(blob)\n    };\n  }).catch(function () {\n    return new Promise(function (resolve, reject) {\n      return reject();\n    });\n  }) : new Promise(function (resolve, reject) {\n    var req = new XMLHttpRequest();\n\n    var timeout = function timeout() {\n      reject(new Error(\"Timeout of \".concat(TIMEOUT, \"ms occured while fetching resource: \").concat(url)));\n    };\n\n    var done = function done() {\n      if (req.readyState !== 4) {\n        return;\n      }\n\n      if (req.status !== 200) {\n        reject(new Error(\"Failed to fetch resource: \".concat(url, \", status: \").concat(req.status)));\n        return;\n      }\n\n      var encoder = new FileReader();\n\n      encoder.onloadend = function () {\n        resolve({\n          blob: getDataURLContent(encoder.result),\n          contentType: req.getResponseHeader('Content-Type') || ''\n        });\n      };\n\n      encoder.readAsDataURL(req.response);\n    };\n\n    req.onreadystatechange = done;\n    req.ontimeout = timeout;\n    req.responseType = 'blob';\n    req.timeout = TIMEOUT;\n    req.open('GET', url, true);\n    req.send();\n  });\n  var promise = deferred.catch(failed);\n  cache[href] = promise;\n  return promise;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _slicedToArray from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { getBlobFromURL } from './getBlobFromURL';\nimport { isDataUrl, toDataURL, getMimeType } from './util';\nvar URL_REGEX = /url\\((['\"]?)([^'\"]+?)\\1\\)/g;\nvar URL_WITH_FORMAT_REGEX = /url\\([^)]+\\)\\s*format\\(([\"'])([^\"']+)\\1\\)/g;\nvar FONT_SRC_REGEX = /src:\\s*(?:url\\([^)]+\\)\\s*format\\([^)]+\\)[,;]\\s*)+/g;\nexport function shouldEmbed(string) {\n  return string.search(URL_REGEX) !== -1;\n}\nexport function embedResources(cssString, baseUrl, options) {\n  if (!shouldEmbed(cssString)) {\n    return Promise.resolve(cssString);\n  }\n\n  var filteredCssString = filterPreferredFontFormat(cssString, options);\n  return Promise.resolve(filteredCssString).then(parseURLs).then(function (urls) {\n    return urls.reduce(function (done, url) {\n      return done.then(function (ret) {\n        return embed(ret, url, baseUrl, options);\n      });\n    }, Promise.resolve(filteredCssString));\n  });\n}\nexport function filterPreferredFontFormat(str, _ref) {\n  var preferredFontFormat = _ref.preferredFontFormat;\n  return !preferredFontFormat ? str : str.replace(FONT_SRC_REGEX, function (match) {\n    while (true) {\n      var _ref2 = URL_WITH_FORMAT_REGEX.exec(match) || [],\n          _ref3 = _slicedToArray(_ref2, 3),\n          src = _ref3[0],\n          format = _ref3[2];\n\n      if (!format) {\n        return '';\n      }\n\n      if (format === preferredFontFormat) {\n        return \"src: \".concat(src, \";\");\n      }\n    }\n  });\n}\nexport function parseURLs(str) {\n  var result = [];\n  str.replace(URL_REGEX, function (raw, quotation, url) {\n    result.push(url);\n    return raw;\n  });\n  return result.filter(function (url) {\n    return !isDataUrl(url);\n  });\n}\nexport function embed(cssString, resourceURL, baseURL, options, get) {\n  var resolvedURL = baseURL ? resolveUrl(resourceURL, baseURL) : resourceURL;\n  return Promise.resolve(resolvedURL).then(function (url) {\n    return get ? get(url) : getBlobFromURL(url, options);\n  }).then(function (data) {\n    if (typeof data === 'string') {\n      return toDataURL(data, getMimeType(resourceURL));\n    }\n\n    return toDataURL(data.blob, getMimeType(resourceURL) || data.contentType);\n  }).then(function (dataURL) {\n    return cssString.replace(urlToRegex(resourceURL), \"$1\".concat(dataURL, \"$3\"));\n  }).then(function (content) {\n    return content;\n  }, function () {\n    return resolvedURL;\n  });\n}\n\nfunction resolveUrl(url, baseUrl) {\n  // url is absolute already\n  if (url.match(/^[a-z]+:\\/\\//i)) {\n    return url;\n  } // url is absolute already, without protocol\n\n\n  if (url.match(/^\\/\\//)) {\n    return window.location.protocol + url;\n  } // dataURI, mailto:, tel:, etc.\n\n\n  if (url.match(/^[a-z]+:/i)) {\n    return url;\n  }\n\n  var doc = document.implementation.createHTMLDocument();\n  var base = doc.createElement('base');\n  var a = doc.createElement('a');\n  doc.head.appendChild(base);\n  doc.body.appendChild(a);\n\n  if (baseUrl) {\n    base.href = baseUrl;\n  }\n\n  a.href = url;\n  return a.href;\n}\n\nfunction urlToRegex(url) {\n  return new RegExp(\"(url\\\\(['\\\"]?)(\".concat(escape(url), \")(['\\\"]?\\\\))\"), 'g');\n}\n\nfunction escape(url) {\n  return url.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n}","import _regeneratorRuntime from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { getBlobFromURL } from './getBlobFromURL';\nimport { embedResources } from './embedResources';\nimport { toArray, isDataUrl, toDataURL, getMimeType } from './util';\nexport function embedImages(clonedNode, options) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (clonedNode instanceof Element) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.resolve(clonedNode));\n\n          case 2:\n            return _context.abrupt(\"return\", Promise.resolve(clonedNode).then(function (node) {\n              return embedBackground(node, options);\n            }).then(function (node) {\n              return embedImageNode(node, options);\n            }).then(function (node) {\n              return embedChildren(node, options);\n            }));\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\n\nfunction embedBackground(clonedNode, options) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var background;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            background = clonedNode.style.getPropertyValue('background');\n\n            if (background) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", Promise.resolve(clonedNode));\n\n          case 3:\n            return _context2.abrupt(\"return\", Promise.resolve(background).then(function (cssString) {\n              return embedResources(cssString, null, options);\n            }).then(function (cssString) {\n              clonedNode.style.setProperty('background', cssString, clonedNode.style.getPropertyPriority('background'));\n              return clonedNode;\n            }));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\n\nfunction embedImageNode(clonedNode, options) {\n  if (!(clonedNode instanceof HTMLImageElement) || isDataUrl(clonedNode.src)) {\n    return Promise.resolve(clonedNode);\n  }\n\n  return Promise.resolve(clonedNode.src).then(function (url) {\n    return getBlobFromURL(url, options);\n  }).then(function (data) {\n    return toDataURL(data.blob, getMimeType(clonedNode.src) || data.contentType);\n  }).then(function (dataURL) {\n    return new Promise(function (resolve, reject) {\n      clonedNode.onload = resolve;\n      clonedNode.onerror = reject;\n      clonedNode.src = dataURL;\n    });\n  }).then(function () {\n    return clonedNode;\n  }, function () {\n    return clonedNode;\n  });\n}\n\nfunction embedChildren(clonedNode, options) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var children, deferreds;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            children = toArray(clonedNode.childNodes);\n            deferreds = children.map(function (child) {\n              return embedImages(child, options);\n            });\n            return _context3.abrupt(\"return\", Promise.all(deferreds).then(function () {\n              return clonedNode;\n            }));\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}","import _regeneratorRuntime from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { toArray } from './util';\nimport { shouldEmbed, embedResources } from './embedResources';\nvar cssFetchPromiseStore = {};\nexport function parseWebFontRules(clonedNode) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n              if (!clonedNode.ownerDocument) {\n                reject(new Error('Provided element is not within a Document'));\n              }\n\n              resolve(toArray(clonedNode.ownerDocument.styleSheets));\n            }).then(function (styleSheets) {\n              return getCssRules(styleSheets);\n            }).then(getWebFontRules));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\nexport function embedWebFonts(clonedNode, options) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", (options.fontEmbedCss != null ? Promise.resolve(options.fontEmbedCss) : getWebFontCss(clonedNode, options)).then(function (cssString) {\n              var styleNode = document.createElement('style');\n              var sytleContent = document.createTextNode(cssString);\n              styleNode.appendChild(sytleContent);\n\n              if (clonedNode.firstChild) {\n                clonedNode.insertBefore(styleNode, clonedNode.firstChild);\n              } else {\n                clonedNode.appendChild(styleNode);\n              }\n\n              return clonedNode;\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\nexport function getWebFontCss(node, options) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", parseWebFontRules(node).then(function (rules) {\n              return Promise.all(rules.map(function (rule) {\n                var baseUrl = rule.parentStyleSheet ? rule.parentStyleSheet.href : null;\n                return embedResources(rule.cssText, baseUrl, options);\n              }));\n            }).then(function (cssStrings) {\n              return cssStrings.join('\\n');\n            }));\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}\nexport function getCssRules(styleSheets) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    var ret, promises;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            ret = [];\n            promises = []; // First loop inlines imports\n\n            styleSheets.forEach(function (sheet) {\n              if ('cssRules' in sheet) {\n                try {\n                  toArray(sheet.cssRules).forEach(function (item, index) {\n                    if (item.type === CSSRule.IMPORT_RULE) {\n                      var importIndex = index + 1;\n                      promises.push(fetchCSS(item.href, sheet).then(embedFonts).then(function (cssText) {\n                        var parsed = parseCSS(cssText);\n                        parsed.forEach(function (rule) {\n                          try {\n                            sheet.insertRule(rule, rule.startsWith('@import') ? importIndex = importIndex + 1 : sheet.cssRules.length);\n                          } catch (error) {\n                            console.log('Error inserting rule from remote css', {\n                              rule: rule,\n                              error: error\n                            });\n                          }\n                        });\n                      }).catch(function (e) {\n                        console.log('Error loading remote css', e.toString());\n                      }));\n                    }\n                  });\n                } catch (e) {\n                  var inline = styleSheets.find(function (a) {\n                    return a.href === null;\n                  }) || document.styleSheets[0];\n\n                  if (sheet.href != null) {\n                    promises.push(fetchCSS(sheet.href, inline).then(embedFonts).then(function (cssText) {\n                      var parsed = parseCSS(cssText);\n                      parsed.forEach(function (rule) {\n                        inline.insertRule(rule, sheet.cssRules.length);\n                      });\n                    }).catch(function (e) {\n                      console.log('Error loading remote stylesheet', e.toString());\n                    }));\n                  }\n\n                  console.log('Error inlining remote css file', e.toString());\n                }\n              }\n            });\n            return _context4.abrupt(\"return\", Promise.all(promises).then(function () {\n              // Second loop parses rules\n              styleSheets.forEach(function (sheet) {\n                if ('cssRules' in sheet) {\n                  try {\n                    toArray(sheet.cssRules).forEach(function (item) {\n                      ret.push(item);\n                    });\n                  } catch (e) {\n                    console.log(\"Error while reading CSS rules from \".concat(sheet.href), e.toString());\n                  }\n                }\n              });\n              return ret;\n            }));\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n}\n\nfunction getWebFontRules(cssRules) {\n  return cssRules.filter(function (rule) {\n    return rule.type === CSSRule.FONT_FACE_RULE;\n  }).filter(function (rule) {\n    return shouldEmbed(rule.style.getPropertyValue('src'));\n  });\n}\n\nfunction parseCSS(source) {\n  if (source === undefined) {\n    return [];\n  }\n\n  var cssText = source;\n  var css = [];\n  var cssKeyframeRegex = '((@.*?keyframes [\\\\s\\\\S]*?){([\\\\s\\\\S]*?}\\\\s*?)})';\n  var combinedCSSRegex = '((\\\\s*?(?:\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)?\\\\s*?@media[\\\\s\\\\S]' + '*?){([\\\\s\\\\S]*?)}\\\\s*?})|(([\\\\s\\\\S]*?){([\\\\s\\\\S]*?)})'; // to match css & media queries together\n\n  var cssCommentsRegex = /(\\/\\*[\\s\\S]*?\\*\\/)/gi;\n  var importRegex = /@import[\\s\\S]*?url\\([^)]*\\)[\\s\\S]*?;/gi; // strip out comments\n\n  cssText = cssText.replace(cssCommentsRegex, '');\n  var keyframesRegex = new RegExp(cssKeyframeRegex, 'gi');\n  var arr;\n\n  while (true) {\n    arr = keyframesRegex.exec(cssText);\n\n    if (arr === null) {\n      break;\n    }\n\n    css.push(arr[0]);\n  }\n\n  cssText = cssText.replace(keyframesRegex, ''); // unified regex\n\n  var unified = new RegExp(combinedCSSRegex, 'gi');\n\n  while (true) {\n    arr = importRegex.exec(cssText);\n\n    if (arr === null) {\n      arr = unified.exec(cssText);\n\n      if (arr === null) {\n        break;\n      } else {\n        importRegex.lastIndex = unified.lastIndex;\n      }\n    } else {\n      unified.lastIndex = importRegex.lastIndex;\n    }\n\n    css.push(arr[0]);\n  }\n\n  return css;\n}\n\nfunction fetchCSS(url, sheet) {\n  if (cssFetchPromiseStore[url]) {\n    return cssFetchPromiseStore[url];\n  }\n\n  var promise = fetch(url).then(function (res) {\n    return {\n      url: url,\n      cssText: res.text()\n    };\n  }, function (e) {\n    console.log('ERROR FETCHING CSS: ', e.toString());\n  });\n  cssFetchPromiseStore[url] = promise;\n  return promise;\n}\n\nfunction embedFonts(data) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            return _context5.abrupt(\"return\", data.cssText.then(function (resolved) {\n              var cssText = resolved;\n              var regexUrlFind = /url\\([\"']?([^\"')]+)[\"']?\\)/g;\n              var fontLocations = cssText.match(/url\\([^)]+\\)/g) || [];\n              var fontLoadedPromises = fontLocations.map(function (location) {\n                var url = location.replace(regexUrlFind, '$1');\n\n                if (!url.startsWith('https://')) {\n                  var source = data.url;\n                  url = new URL(url, source).href;\n                }\n\n                return new Promise(function (resolve, reject) {\n                  fetch(url).then(function (res) {\n                    return res.blob();\n                  }).then(function (blob) {\n                    var reader = new FileReader();\n                    reader.addEventListener('load', function (res) {\n                      // Side Effect\n                      cssText = cssText.replace(location, \"url(\".concat(reader.result, \")\"));\n                      resolve([location, reader.result]);\n                    });\n                    reader.readAsDataURL(blob);\n                  }).catch(reject);\n                });\n              });\n              return Promise.all(fontLoadedPromises).then(function () {\n                return cssText;\n              });\n            }));\n\n          case 1:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n}","import { svgToDataURL } from './util';\nexport function createSvgDataURL(clonedNode, width, height) {\n  var xmlns = 'http://www.w3.org/2000/svg';\n  var svg = document.createElementNS(xmlns, 'svg');\n  var foreignObject = document.createElementNS(xmlns, 'foreignObject');\n  svg.setAttributeNS('', 'width', \"\".concat(width));\n  svg.setAttributeNS('', 'height', \"\".concat(height));\n  foreignObject.setAttributeNS('', 'width', '100%');\n  foreignObject.setAttributeNS('', 'height', '100%');\n  foreignObject.setAttributeNS('', 'x', '0');\n  foreignObject.setAttributeNS('', 'y', '0');\n  foreignObject.setAttributeNS('', 'externalResourcesRequired', 'true');\n  svg.appendChild(foreignObject);\n  foreignObject.appendChild(clonedNode);\n  return svgToDataURL(svg);\n}","export function applyStyleWithOptions(clonedNode, options) {\n  var style = clonedNode.style;\n\n  if (options.backgroundColor) {\n    style.backgroundColor = options.backgroundColor;\n  }\n\n  if (options.width) {\n    style.width = \"\".concat(options.width, \"px\");\n  }\n\n  if (options.height) {\n    style.height = \"\".concat(options.height, \"px\");\n  }\n\n  var manual = options.style;\n\n  if (manual != null) {\n    Object.keys(manual).forEach(function (key) {\n      // @ts-expect-error\n      style[key] = manual[key];\n    });\n  }\n\n  return clonedNode;\n}","import _regeneratorRuntime from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { cloneNode } from './cloneNode';\nimport { embedImages } from './embedImages';\nimport { embedWebFonts, getWebFontCss } from './embedWebFonts';\nimport { createSvgDataURL } from './createSvgDataURL';\nimport { applyStyleWithOptions } from './applyStyleWithOptions';\nimport { delay, createImage, canvasToBlob, getNodeWidth, getNodeHeight, getPixelRatio } from './util';\n\nfunction getImageSize(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var width = options.width || getNodeWidth(domNode);\n  var height = options.height || getNodeHeight(domNode);\n  return {\n    width: width,\n    height: height\n  };\n}\n\nexport function toSvg(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _getImageSize, width, height;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _getImageSize = getImageSize(domNode, options), width = _getImageSize.width, height = _getImageSize.height;\n            return _context.abrupt(\"return\", cloneNode(domNode, options.filter, true).then(function (clonedNode) {\n              return embedWebFonts(clonedNode, options);\n            }).then(function (clonedNode) {\n              return embedImages(clonedNode, options);\n            }).then(function (clonedNode) {\n              return applyStyleWithOptions(clonedNode, options);\n            }).then(function (clonedNode) {\n              return createSvgDataURL(clonedNode, width, height);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\nexport var toSvgDataURL = toSvg;\nexport function toCanvas(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", toSvg(domNode, options).then(createImage).then(delay(100)).then(function (image) {\n              var canvas = document.createElement('canvas');\n              var context = canvas.getContext('2d');\n              var ratio = options.pixelRatio || getPixelRatio();\n\n              var _getImageSize2 = getImageSize(domNode, options),\n                  width = _getImageSize2.width,\n                  height = _getImageSize2.height;\n\n              var canvasWidth = options.canvasWidth || width;\n              var canvasHeight = options.canvasHeight || height;\n              canvas.width = canvasWidth * ratio;\n              canvas.height = canvasHeight * ratio;\n              canvas.style.width = \"\".concat(canvasWidth);\n              canvas.style.height = \"\".concat(canvasHeight);\n\n              if (options.backgroundColor) {\n                context.fillStyle = options.backgroundColor;\n                context.fillRect(0, 0, canvas.width, canvas.height);\n              }\n\n              context.drawImage(image, 0, 0, canvas.width, canvas.height);\n              return canvas;\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\nexport function toPixelData(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var _getImageSize3, width, height;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _getImageSize3 = getImageSize(domNode, options), width = _getImageSize3.width, height = _getImageSize3.height;\n            return _context3.abrupt(\"return\", toCanvas(domNode, options).then(function (canvas) {\n              var ctx = canvas.getContext('2d');\n              return ctx.getImageData(0, 0, width, height).data;\n            }));\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}\nexport function toPng(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            return _context4.abrupt(\"return\", toCanvas(domNode, options).then(function (canvas) {\n              return canvas.toDataURL();\n            }));\n\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n}\nexport function toJpeg(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            return _context5.abrupt(\"return\", toCanvas(domNode, options).then(function (canvas) {\n              return canvas.toDataURL('image/jpeg', options.quality || 1);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n}\nexport function toBlob(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            return _context6.abrupt(\"return\", toCanvas(domNode, options).then(canvasToBlob));\n\n          case 1:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n}\nexport function getWebFontEmbedCss(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            return _context7.abrupt(\"return\", getWebFontCss(domNode, options));\n\n          case 1:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n}","// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Tooltip from '@isle-project/components/tooltip';\n\n\n// MAIN //\n\nclass FullscreenButton extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tfullscreen: false\n\t\t};\n\t}\n\n\ttoggleFullscreen = () => {\n\t\tthis.setState({\n\t\t\tfullscreen: !this.state.fullscreen\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Tooltip\n\t\t\t\t\tid=\"fullscreen_tooltip\"\n\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\ttooltip={t('toggle-fullscreen')}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"outline-danger\"\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tonClick={this.toggleFullscreen}\n\t\t\t\t\t\tstyle={{ position: 'absolute', top: '10px', right: '32px' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"fa fa-window-maximize\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Modal\n\t\t\t\t\tshow={this.state.fullscreen}\n\t\t\t\t\tonHide={this.toggleFullscreen}\n\t\t\t\t\tdialogClassName=\"modal-100w\"\n\t\t\t\t>\n\t\t\t\t\t<Modal.Header closeButton>\n\t\t\t\t\t\t<Modal.Title as=\"h1\">\n\t\t\t\t\t\t\t{t('decision-tree')}\n\t\t\t\t\t\t</Modal.Title>\n\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t<Modal.Body\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\theight: 0.75 * window.innerHeight,\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\tfontSize: 32,\n\t\t\t\t\t\t\toverflow: 'scroll'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"decision-tree decision-tree-fullscreen\">\n\t\t\t\t\t\t\t{this.props.tree}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t\t<Modal.Footer>\n\t\t\t\t\t\t<Button onClick={this.toggleFullscreen}>{t('close')}</Button>\n\t\t\t\t\t</Modal.Footer>\n\t\t\t\t</Modal>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nFullscreenButton.propTypes = {\n\ttree: PropTypes.node.isRequired\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( 'StatisticalModels' )( FullscreenButton );\n","// MODULES //\n\nimport React, { Component } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { toJpeg } from 'html-to-image';\nimport { isPrimitive as isNumber } from '@stdlib/assert/is-number';\nimport isInteger from '@stdlib/assert/is-integer';\nimport randomstring from '@isle-project/utils/randomstring/alphanumeric';\nimport FullscreenButton from './fullscreen_button';\nimport './tree.css';\n\n\n// VARIABLES //\n\nconst RE_NUMBER = /^[+-]?[\\d.]+e?[+-]?\\d*$/;\n\n\n// FUNCTIONS //\n\nfunction treeToHtml( tree, t ) {\n\tif ( !tree ) {\n\t\treturn null;\n\t}\n\tif ( tree.category ) {\n\t\tlet value = tree.category;\n\t\tif ( isNumber( value ) || RE_NUMBER.test( value ) ) {\n\t\t\tvalue = Number( value );\n\t\t\tif ( !isInteger( value ) ) {\n\t\t\t\tvalue = value.toFixed( 6 );\n\t\t\t}\n\t\t}\n\t\treturn (\n\t\t\t<ul>\n\t\t\t\t<li >\n\t\t\t\t\t<span className=\"decision-tree-leaf\" >{t('predict')}: {value} </span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t);\n\t}\n\treturn (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\t<span><b> {tree.attribute} {tree.predicateName} {tree.pivot} ?</b></span>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span>{t('no')} ( {tree.notMatchedCount} {t('obs')}) </span>\n\t\t\t\t\t\t{treeToHtml( tree.notMatch, t )}\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span>{t('yes')} ( {tree.matchedCount} {t('obs')}) </span>\n\t\t\t\t\t\t{treeToHtml( tree.match, t )}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t</ul>\n\t);\n}\n\n\n// MAIN //\n\nclass TreePlot extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.setState({\n\t\t\tplotValue: null,\n\t\t\tplotKey: null,\n\t\t\tfullscreen: false\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.treeWrapper.scrollLeft = 0.4 * this.tree.clientWidth;\n\t\ttoJpeg( this.tree, {\n\t\t\tbackgroundColor: 'white',\n\t\t\tstyle: {\n\t\t\t\tfontSize: 22\n\t\t\t}\n\t\t}).then( ( data ) => {\n\t\t\tconst value = `<img src=\"${data}\" style=\"display: block; margin: 0 auto; max-width: 100%; max-height: 100%\" />`;\n\t\t\tthis.setState({\n\t\t\t\tplotKey: `<!--IMAGE_LOG:${randomstring( 6 )}_${randomstring( 6 )}-->`,\n\t\t\t\tplotValue: value\n\t\t\t});\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tconst tree = treeToHtml( this.props.tree );\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"decision-tree-wrapper\"\n\t\t\t\tref={( div ) => {\n\t\t\t\t\tthis.treeWrapper = div;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"decision-tree-draggable-bar\"\n\t\t\t\t\tdraggable=\"true\"\n\t\t\t\t\tonDragStart={( ev ) => {\n\t\t\t\t\t\tev.dataTransfer.setData( 'text/html', this.state.plotValue );\n\t\t\t\t\t\tev.dataTransfer.setData( 'text/plain', this.state.plotKey );\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ float: 'left' }}\n\t\t\t\t>{t('drag-plot')}</div>\n\t\t\t\t<FullscreenButton\n\t\t\t\t\tvariant=\"outline-danger\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tthis.setState({ fullscreen: !this.state.fullscreen });\n\t\t\t\t\t}}\n\t\t\t\t\ttree={tree}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"fa fa-times\" />\n\t\t\t\t</FullscreenButton>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"decision-tree\"\n\t\t\t\t\tref={( div ) => {\n\t\t\t\t\t\tthis.tree = div;\n\t\t\t\t\t}}\n\t\t\t\t>{tree}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// EXPORTS //\n\nexport default withTranslation( 'StatisticalModels' )( TreePlot );\n","// MAIN //\n\n/**\n* Splitting observations using specific predicate and pivot.\n*/\nfunction split( data, indices, attr, predicate, pivot ) {\n\tconst match = [];\n\tconst notMatch = [];\n\tconst values = data[ attr ];\n\n\tfor ( let i = indices.length - 1; i >= 0; i-- ) {\n\t\tconst idx = indices[ i ];\n\t\tconst attrValue = values[ idx ];\n\t\tif ( predicate( attrValue, pivot ) ) {\n\t\t\tmatch.push( idx );\n\t\t} else {\n\t\t\tnotMatch.push( idx );\n\t\t}\n\t}\n\treturn {\n\t\tmatch: match,\n\t\tnotMatch: notMatch\n\t};\n}\n\n\n// EXPORTS //\n\nexport default split;\n","\n/**\n* Contains MIT-licensed code:\n*\n* The MIT License (MIT)\n*\n* Copyright (c) 2013 Yurii Lahodiuk\n*\n* Permission is hereby granted, free of charge, to any person obtaining a copy of\n* this software and associated documentation files (the \"Software\"), to deal in\n* the Software without restriction, including without limitation the rights to\n* use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n* the Software, and to permit persons to whom the Software is furnished to do so,\n* subject to the following conditions:\n*\n* The above copyright notice and this permission notice shall be included in all\n* copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n* FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n* COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n* IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n* CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// MODULES //\n\nimport sample from '@stdlib/random/sample';\nimport contains from '@stdlib/assert/contains';\nimport hasOwnProp from '@stdlib/assert/has-own-property';\nimport ln from '@stdlib/math/base/special/ln';\nimport round from '@stdlib/math/base/special/round';\nimport incrspace from '@stdlib/math/utils/incrspace';\nimport Plot from './tree_plot.js';\nimport split from './split.js';\n\n\n// FUNCTIONS //\n\n/**\n* Calculating how many elements have the same\n* values\n*\n* @param values - array of values\n*/\nfunction countUniqueValues( values, indices ) {\n\tconst counter = {};\n\n\t// Detect different values of attribute:\n\tfor ( let i = indices.length - 1; i >= 0; i--) {\n\t\tconst idx = indices[ i ];\n\t\tcounter[ values[ idx ] ] = 0;\n\t}\n\n\t// Count number of occurrences of each of value:\n\tfor ( let i = indices.length - 1; i >= 0; i--) {\n\t\tconst idx = indices[ i ];\n\t\tcounter[ values[ idx ] ] += 1;\n\t}\n\treturn counter;\n}\n\n/**\n* Finding value which is most frequent in an array.\n*\n* @param values - array of values\n*/\nfunction mostFrequentValue( values, indices ) {\n\t// Counting number of occurrences:\n\tconst counter = countUniqueValues( values, indices );\n\n\tlet mostFrequentCount = 0;\n\tlet mostFrequentValue;\n\tfor ( let value in counter ) {\n\t\tif ( counter[ value ] > mostFrequentCount ) {\n\t\t\tmostFrequentCount = counter[ value ];\n\t\t\tmostFrequentValue = value;\n\t\t}\n\t}\n\treturn mostFrequentValue;\n}\n\nfunction gini( values, indices ) {\n\tconst counter = countUniqueValues( values, indices );\n\tlet out = 0;\n\tfor ( let i in counter ) {\n\t\tif ( hasOwnProp( counter, i ) ) {\n\t\t\tconst p = counter[i] / indices.length;\n\t\t\tout += p * (1-p);\n\t\t}\n\t}\n\treturn out;\n}\n\n/**\n* Calculating entropy of a variable.\n*\n* @param values - array of values\n*/\nfunction entropy( values, indices ) {\n\t// Count number of occurrences of each value:\n\tconst counter = countUniqueValues( values, indices );\n\tlet entropy = 0;\n\tfor ( let i in counter ) {\n\t\tif ( hasOwnProp( counter, i ) ) {\n\t\t\tconst p = counter[i] / indices.length;\n\t\t\tentropy += -p * ln(p);\n\t\t}\n\t}\n\treturn entropy;\n}\n\n/**\n* Calculates the variance of a variable.\n*\n* @param values - array of values\n*/\nfunction variance( values, indices ) {\n\tconst len = indices.length;\n\tlet delta = 0;\n\tlet mean = 0;\n\tlet M2 = 0;\n\tlet N = 0;\n\n\tif ( !len ) {\n\t\treturn null;\n\t}\n\tif ( len < 2 ) {\n\t\treturn 0;\n\t}\n\tfor ( let i = 0; i < len; i++ ) {\n\t\tconst idx = indices[ i ];\n\t\tconst x = values[ idx ];\n\t\tN += 1;\n\t\tdelta = x - mean;\n\t\tmean += delta / N;\n\t\tM2 += delta * ( x - mean );\n\t}\n\treturn M2 / ( N - 1 );\n}\n\n/**\n* Calculates the mean of a variable.\n*\n* @param values - array of values\n*/\nfunction mean( values, indices ) {\n\tconst len = indices.length;\n\tif ( !len ) {\n\t\treturn null;\n\t}\n\tlet mu = 0;\n\tfor ( let i = 0; i < len; i++ ) {\n\t\tconst idx = indices[ i ];\n\t\tconst delta = values[ idx ] - mu;\n\t\tmu += delta / (i+1);\n\t}\n\treturn mu;\n}\n\n// VARIABLES //\n\nconst predicates = {\n\t'==': ( a, b ) => a == b, // eslint-disable-line eqeqeq\n\t'>=': ( a, b ) => a >= b\n};\n\n\n// MAIN //\n\n/**\n* Creates an instance of a decision tree for classification problems.\n*\n* @constructor\n* @param opts - contains training set and some configuration parameters\n*/\nfunction ClassificationTreeConstructor( opts ) {\n\tconst nobs = opts.data[ opts.response ].length;\n\n\tthis.importances = {};\n\tfor ( let j = 0; j < opts.predictors.length; j++ ) {\n\t\tthis.importances[ opts.predictors[ j ] ] = 0;\n\t}\n\tthis.root = buildClassificationTree({\n\t\tdata: opts.data,\n\t\tresponse: opts.response,\n\t\tpredictors: opts.predictors,\n\t\tindices: opts.indices ? opts.indices : incrspace( 0, nobs, 1 ),\n\t\tminItemsCount: opts.minItemsCount || 50,\n\t\tminBucket: opts.minBucket || ( round( ( opts.minItemsCount || 50 ) / 3 )),\n\t\tscoreThreshold: opts.scoreThreshold || 0.01,\n\t\tmaxTreeDepth: opts.maxTreeDepth || 20,\n\t\tquantitative: opts.quantitative,\n\t\tcriterion: opts.criterion === 'gini' ? gini : entropy\n\t}, this.importances );\n\n\tthis.predict = ( data, idx ) => {\n\t\tif ( idx === void 0 ) {\n\t\t\tconst nobs = data[ opts.predictors[ 0 ] ].length;\n\t\t\tconst out = new Array( nobs );\n\t\t\tfor ( let i = 0; i < nobs; i++ ) {\n\t\t\t\tout[ i ] = predict( this.root, data, i );\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t\treturn predict( this.root, data, idx );\n\t};\n}\n\n/**\n * Creates an instance of DecisionTree\n *\n * @constructor\n * @param builder - contains training set and\n *                  some configuration parameters\n */\nfunction RegressionTreeConstructor( opts ) {\n\tconst nobs = opts.data[ opts.response ].length;\n\n\tthis.root = buildRegressionTree({\n\t\tdata: opts.data,\n\t\tresponse: opts.response,\n\t\tpredictors: opts.predictors,\n\t\tindices: opts.indices ? opts.indices : incrspace( 0, nobs, 1 ),\n\t\tminItemsCount: opts.minItemsCount || 50,\n\t\tminBucket: opts.minBucket || ( round( ( opts.minItemsCount || 50 ) / 3 )),\n\t\tscoreThreshold: opts.scoreThreshold || 0.01,\n\t\tmaxTreeDepth: opts.maxTreeDepth || 20,\n\t\tquantitative: opts.quantitative\n\t});\n\n\tthis.predict = ( data, idx ) => {\n\t\tif ( idx === void 0 ) {\n\t\t\tconst nobs = data[ opts.predictors[ 0 ] ].length;\n\t\t\tconst out = new Array( nobs );\n\t\t\tfor ( let i = 0; i < nobs; i++ ) {\n\t\t\t\tout[ i ] = Number( predict( this.root, data, i ) );\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t\treturn Number( predict( this.root, data, idx ) );\n\t};\n}\n\n/**\n* Creates an instance of RandomForest with specific number of trees.\n*\n* @constructor\n* @param opts - contains configuration parameters for building decision trees\n*/\nfunction RandomForestClassifierConstructor( opts ) {\n\tthis.trees = buildRandomForestClassifier( opts );\n\tthis.importances = {};\n\tfor ( let i = 0; i < opts.predictors.length; i++ ) {\n\t\tconst attr = opts.predictors[ i ];\n\t\tthis.importances[ attr ] = 0;\n\t\tfor ( let j = 0; j < this.trees.length; j++ ) {\n\t\t\tthis.importances[ attr ] += this.trees[ j ].importances[ attr ];\n\t\t}\n\t\tthis.importances[ attr ] /= this.trees.length;\n\t}\n\tthis.predict = ( data, idx ) => {\n\t\tif ( idx === void 0 ) {\n\t\t\tconst nobs = data[ opts.predictors[ 0 ] ].length;\n\t\t\tconst out = new Array( nobs );\n\t\t\tfor ( let i = 0; i < nobs; i++ ) {\n\t\t\t\tout[ i ] = predictRandomForest( this.trees, data, i );\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t\treturn predictRandomForest( this.trees, data, idx );\n\t};\n}\n\n/**\n* Function for building classification decision tree.\n*/\nfunction buildClassificationTree( opts, importances ) {\n\tconst {\n\t\tdata, predictors, indices, response,\n\t\tminItemsCount, scoreThreshold, maxTreeDepth,\n\t\tquantitative, criterion, minBucket, nTry\n\t} = opts;\n\tconst nobs = indices.length;\n\tif ( ( maxTreeDepth === 0 ) || ( nobs <= minItemsCount ) ) {\n\t\t// Restriction by maximal depth of tree or size of training set is to small so we have to terminate process of building tree...\n\t\treturn {\n\t\t\tcategory: mostFrequentValue( data[ response ], indices )\n\t\t};\n\t}\n\tconst initialScore = criterion( data[ response ], indices );\n\n\t// Used as hash-set for avoiding the checking of split by rules with the same 'attribute-predicate-pivot' more than once\n\tconst alreadyChecked = {};\n\n\tlet bestSplit = {\n\t\tgain: 0\n\t};\n\tif ( nTry ) {\n\t\tpredictors = sample( predictors, { size: nTry });\n\t}\n\tfor ( let i = nobs - 1; i >= 0; i-- ) {\n\t\tconst idx = indices[ i ];\n\t\tfor ( let j = 0; j < predictors.length; j++ ) {\n\t\t\tconst attr = predictors[ j ];\n\n\t\t\t// Let the value of current attribute be the pivot:\n\t\t\tconst pivot = data[ attr ][ idx ];\n\n\t\t\t// Pick the predicate depending on the type of the attribute value...\n\t\t\tlet predicateName;\n\t\t\tif ( contains( quantitative, attr ) ) {\n\t\t\t\tpredicateName = '>=';\n\t\t\t} else {\n\t\t\t\t// No sense to compare non-numeric attributes so we will check only equality of such attributes...\n\t\t\t\tpredicateName = '==';\n\t\t\t}\n\n\t\t\tconst attrPredPivot = attr + predicateName + pivot;\n\t\t\tif ( alreadyChecked[attrPredPivot] ) {\n\t\t\t\t// Skip such pairs of 'attribute-predicate-pivot' which have been already checked...\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\talreadyChecked[ attrPredPivot ] = true;\n\t\t\tconst predicate = predicates[ predicateName ];\n\n\t\t\t// Splitting training set by given 'attribute-predicate-value':\n\t\t\tconst currSplit = split( data, indices, attr, predicate, pivot );\n\n\t\t\t// Recursively calculating for subsets:\n\t\t\tconst matchEntropy = criterion( data[ response ], currSplit.match );\n\t\t\tconst notMatchEntropy = criterion( data[ response ], currSplit.notMatch );\n\n\t\t\t// Calculating gain:\n\t\t\tlet newScore = 0;\n\t\t\tnewScore += matchEntropy * currSplit.match.length;\n\t\t\tnewScore += notMatchEntropy * currSplit.notMatch.length;\n\t\t\tnewScore /= nobs;\n\t\t\tconst currGain = initialScore - newScore;\n\t\t\tif (\n\t\t\t\tcurrGain > bestSplit.gain &&\n\t\t\t\tcurrSplit.match.length > minBucket &&\n\t\t\t\tcurrSplit.notMatch.length > minBucket\n\t\t\t) {\n\t\t\t\t// Remember pairs 'attribute-predicate-value' which provide gain...\n\t\t\t\tbestSplit = currSplit;\n\t\t\t\tbestSplit.predicateName = predicateName;\n\t\t\t\tbestSplit.predicate = predicate;\n\t\t\t\tbestSplit.attribute = attr;\n\t\t\t\tbestSplit.pivot = pivot;\n\t\t\t\tbestSplit.gain = currGain;\n\t\t\t}\n\t\t}\n\t}\n\tif ( !bestSplit.gain || ( bestSplit.gain / initialScore ) < scoreThreshold ) {\n\t\treturn { category: mostFrequentValue( data[ response ], indices ) };\n\t}\n\t// Building sub-trees:\n\topts.maxTreeDepth = maxTreeDepth - 1;\n\n\timportances[ bestSplit.attribute ] += bestSplit.gain;\n\n\topts.indices = bestSplit.match;\n\tconst matchSubTree = buildClassificationTree( opts, importances );\n\n\topts.indices = bestSplit.notMatch;\n\tconst notMatchSubTree = buildClassificationTree( opts, importances );\n\n\treturn {\n\t\tattribute: bestSplit.attribute,\n\t\tpredicate: bestSplit.predicate,\n\t\tpredicateName: bestSplit.predicateName,\n\t\tpivot: bestSplit.pivot,\n\t\tmatch: matchSubTree,\n\t\tnotMatch: notMatchSubTree,\n\t\tmatchedCount: bestSplit.match.length,\n\t\tnotMatchedCount: bestSplit.notMatch.length\n\t};\n}\n\n/**\n* Function for building classification decision tree.\n*/\nfunction buildRegressionTree( opts ) {\n\tconst {\n\t\tdata, predictors, indices, response,\n\t\tminItemsCount, scoreThreshold, maxTreeDepth,\n\t\tquantitative, minBucket, nTry\n\t} = opts;\n\n\tconst nobs = indices.length;\n\tif ((maxTreeDepth === 0) || ( nobs <= minItemsCount)) {\n\t\t// restriction by maximal depth of tree\n\t\t// or size of training set is to small\n\t\t// so we have to terminate process of building tree\n\t\treturn {\n\t\t\tcategory: mean( data[ response ], indices )\n\t\t};\n\t}\n\n\tconst initialScore = variance( data[ response ], indices );\n\n\t// used as hash-set for avoiding the checking of split by rules\n\t// with the same 'attribute-predicate-pivot' more than once\n\tconst alreadyChecked = {};\n\n\t// this variable expected to contain rule, which splits training set\n\t// into subsets with smaller values of entropy (produces informational gain)\n\tlet bestSplit = {\n\t\tgain: 0\n\t};\n\n\tif ( nTry ) {\n\t\tpredictors = sample( predictors, { size: nTry });\n\t}\n\tfor ( let i = nobs - 1; i >= 0; i-- ) {\n\t\tconst idx = indices[ i ];\n\n\t\t// iterating over all attributes of item\n\t\tfor ( let j = 0; j < predictors.length; j++ ) {\n\t\t\tconst attr = predictors[ j ];\n\n\t\t\t// let the value of current attribute be the pivot\n\t\t\tconst pivot = data[ attr ][ idx ];\n\n\t\t\t// Pick the predicate depending on the type of the attribute value:\n\t\t\tlet predicateName;\n\t\t\tif ( contains( quantitative, attr ) ) {\n\t\t\t\tpredicateName = '>=';\n\t\t\t} else {\n\t\t\t\t// There is no sense to compare non-numeric attributes so we will check only equality of such attributes...\n\t\t\t\tpredicateName = '==';\n\t\t\t}\n\n\t\t\tconst attrPredPivot = attr + predicateName + pivot;\n\t\t\tif ( alreadyChecked[attrPredPivot] ) {\n\t\t\t\t// skip such pairs of 'attribute-predicate-pivot',\n\t\t\t\t// which been already checked\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\talreadyChecked[ attrPredPivot ] = true;\n\n\t\t\tconst predicate = predicates[ predicateName ];\n\n\t\t\t// splitting training set by given 'attribute-predicate-value'\n\t\t\tconst currSplit = split( data, indices, attr, predicate, pivot );\n\n\t\t\t// calculating for subsets:\n\t\t\tconst matchEntropy = variance( data[ response ], currSplit.match );\n\t\t\tconst notMatchEntropy = variance( data[ response ], currSplit.notMatch );\n\n\t\t\t// calculating informational gain\n\t\t\tlet newScore = 0;\n\t\t\tnewScore += matchEntropy * currSplit.match.length;\n\t\t\tnewScore += notMatchEntropy * currSplit.notMatch.length;\n\t\t\tnewScore /= nobs;\n\t\t\tconst currGain = initialScore - newScore;\n\t\t\tif (\n\t\t\t\tcurrGain > bestSplit.gain &&\n\t\t\t\tcurrSplit.match.length > minBucket &&\n\t\t\t\tcurrSplit.notMatch.length > minBucket\n\t\t\t) {\n\t\t\t\tbestSplit = currSplit;\n\t\t\t\tbestSplit.predicateName = predicateName;\n\t\t\t\tbestSplit.predicate = predicate;\n\t\t\t\tbestSplit.attribute = attr;\n\t\t\t\tbestSplit.pivot = pivot;\n\t\t\t\tbestSplit.gain = currGain;\n\t\t\t}\n\t\t}\n\t}\n\tif ( !bestSplit.gain || ( bestSplit.gain / initialScore ) < scoreThreshold ) {\n\t\treturn { category: mean( data[ response ], indices ) };\n\t}\n\n\t// Building sub-trees:\n\topts.maxTreeDepth = maxTreeDepth - 1;\n\n\topts.indices = bestSplit.match;\n\tconst matchSubTree = buildRegressionTree( opts );\n\n\topts.indices = bestSplit.notMatch;\n\tconst notMatchSubTree = buildRegressionTree( opts );\n\n\treturn {\n\t\tattribute: bestSplit.attribute,\n\t\tpredicate: bestSplit.predicate,\n\t\tpredicateName: bestSplit.predicateName,\n\t\tpivot: bestSplit.pivot,\n\t\tmatch: matchSubTree,\n\t\tnotMatch: notMatchSubTree,\n\t\tmatchedCount: bestSplit.match.length,\n\t\tnotMatchedCount: bestSplit.notMatch.length\n\t};\n}\n\n/**\n* Returns the predicted value for the i-th observation using the decision tree.\n*/\nfunction predict( tree, data, i ) {\n\t// Traversing tree from the root to leaf:\n\twhile ( true ) {\n\t\tif ( tree.category ) {\n\t\t\t// Only leafs contains predicted category...\n\t\t\treturn tree.category;\n\t\t}\n\t\tconst attr = tree.attribute;\n\t\tconst value = data[ attr ][ i ];\n\t\tconst predicate = tree.predicate;\n\t\tconst pivot = tree.pivot;\n\n\t\t// Move to one of the sub-trees:\n\t\tif ( predicate( value, pivot ) ) {\n\t\t\ttree = tree.match;\n\t\t} else {\n\t\t\ttree = tree.notMatch;\n\t\t}\n\t}\n}\n\n/**\n* Building array of decision trees.\n*/\nfunction buildRandomForestClassifier( opts ) {\n\t// Creating training sets for each tree:\n\tconst trainingSets = [];\n\tconst nobs = opts.data[ opts.response ].length;\n\tconst indices = incrspace( 0, nobs, 1 );\n\tfor ( let t = 0; t < opts.nTrees; t++ ) {\n\t\ttrainingSets[ t ] = sample( indices );\n\t}\n\tconst forest = [];\n\tfor ( let t = 0; t < opts.nTrees; t++ ) {\n\t\topts.indices = trainingSets[ t ];\n\t\tconst tree = new ClassificationTreeConstructor( opts );\n\t\tforest.push( tree );\n\t}\n\treturn forest;\n}\n\n/**\n* Returns the majority vote prediction for the chosen item.\n*/\nfunction predictRandomForest( forest, data, idx ) {\n\tconst result = {};\n\tfor ( let i = 0; i < forest.length; i++ ) {\n\t\tconst tree = forest[ i ];\n\t\tconst prediction = tree.predict( data, idx );\n\t\tresult[ prediction ] = result[ prediction ] ? result[ prediction ] + 1 : 1;\n\t}\n\tlet max = -1;\n\tlet out;\n\tfor ( let key in result ) {\n\t\tif ( hasOwnProp( result, key ) ) {\n\t\t\tif ( result[ key ] > max ) {\n\t\t\t\tmax = result[ key ];\n\t\t\t\tout = key;\n\t\t\t}\n\t\t}\n\t}\n\treturn out;\n}\n\n\n// EXPORTS //\n\nexport const ClassificationTree = ClassificationTreeConstructor;\nexport const RegressionTree = RegressionTreeConstructor;\nexport const RandomForestClassifier = RandomForestClassifierConstructor;\nexport const TreePlot = Plot;\n"],"sourceRoot":""}