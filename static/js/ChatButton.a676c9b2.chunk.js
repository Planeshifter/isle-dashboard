(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[96131],{30588:function(t,e,s){"use strict";s.r(e);var o=s(6610),n=s(5991),i=s(63349),a=s(10379),p=s(60446),r=s(96156),l=s(73284),h=s(10077),c=s.n(h),u=s(25472),m=s(68359),f=s(9617),d=s(84972),b=s(92628),v=s(87651),Z=s(65695),k=s(72439),y=c()("isle:chat-button");(0,k.E4)("ChatButton");var C=function(t){(0,a.Z)(s,t);var e=(0,p.Z)(s);function s(t){var n;return(0,o.Z)(this,s),n=e.call(this,t),(0,r.Z)((0,i.Z)(n),"hideAnimation",(function(){n.setState({showAnimation:!1})})),(0,r.Z)((0,i.Z)(n),"handleClick",(function(t){y("Handle click to join chat...");var e=!n.state.opened;n.props.onClick(t,e),n.setState({opened:e},(function(){var t=n.context;e?(y("Should join chat for component with id '".concat(n.props.for,"'...")),t.joinChat({name:n.props.for,anonymousSubmissions:n.props.anonymousSubmissions})):(y("Should leave chat for component with id '".concat(n.props.for,"'...")),t.leaveChat(n.props.for))}))})),n.state={opened:!1,nMessages:0,nMembers:0},n}return(0,n.Z)(s,[{key:"componentDidMount",value:function(){var t=this,e=this.context;this.unsubscribe=e.subscribe((function(s,o){if(s!==Z.JV&&s!==Z.PY||!o||o.name!==t.props.for){if(s===Z.em&&o.name===t.props.for){var n={nMessages:o.nMessages,nMembers:o.nMembers};o.nMessages>t.state.nMessages&&(n.showAnimation=!0),t.setState(n),setTimeout(t.hideAnimation,4e3)}else if(o===t.props.for){e.getChat(t.props.for)&&s!==Z.TY?s===Z._Z&&t.setState({opened:!1}):t.setState({opened:!1}),t.forceUpdate()}}else t.setState({opened:!0})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var t,e,s=this.state.nMessages;t=this.props.buttonLabel?this.props.buttonLabel:this.state.opened?this.props.t("leave-chat"):this.props.t("join-chat"),e=this.props.buttonVariant?this.props.buttonVariant:this.state.nMembers>0?"success":"secondary";var o,n=l.createElement(f.Z,{className:this.props.className,variant:e,size:this.props.size,onClick:this.handleClick,style:this.props.style,"aria-label":this.props.t("toggle-chat")},l.createElement("span",{style:{pointerEvents:"none"}},t),s?l.createElement(m.Z,{variant:"dark",style:{marginLeft:"5px",fontSize:"10px",pointerEvents:"none",animation:this.state.showAnimation?"ping 0.7s 3":"none"}},s):null);return o=this.props.tooltip?this.props.tooltip:this.state.opened?this.props.t("leave-chat-id",{id:this.props.for}):this.props.t("join-chat-id",{id:this.props.for}),this.props.showTooltip&&(n=l.createElement(d.Z,{tooltip:o,placement:this.props.tooltipPlacement},n)),l.createElement(b.Z,{user:!0},n)}}]),s}(l.Component);C.defaultProps={anonymousSubmissions:!1,buttonLabel:null,showTooltip:!0,tooltip:null,size:"sm",buttonVariant:null,tooltipPlacement:"top",onClick:function(){},className:"",style:{}},C.contextType=v.Z,e.default=(0,u.Z)("ChatButton")(C)}}]);
//# sourceMappingURL=ChatButton.a676c9b2.chunk.js.map