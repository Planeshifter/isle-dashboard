{"version":3,"sources":["../node_modules/react-avatar-editor/dist/index.js","components/profile-page/profile_pic_modal.js"],"names":["module","exports","e","t","o","default","n","i","r","length","enumerable","configurable","writable","Object","defineProperty","key","s","value","u","assign","arguments","prototype","hasOwnProperty","call","apply","this","a","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","y","forEach","getOwnPropertyDescriptors","defineProperties","h","setPrototypeOf","getPrototypeOf","__proto__","c","l","indexOf","propertyIsEnumerable","d","ReferenceError","p","Reflect","construct","sham","Proxy","Date","toString","constructor","m","Array","isArray","Symbol","iterator","next","done","return","g","TypeError","f","slice","name","from","test","v","Promise","Image","onload","onerror","match","crossOrigin","src","b","w","window","navigator","msMaxTouchPoints","M","File","O","touch","react","down","mouseDown","drag","move","mouseMove","up","mouseUp","native","desktop","I","P","devicePixelRatio","C","x","create","Component","my","mx","image","getInitialSize","width","height","resource","backgroundColor","props","setState","onImageReady","onLoadSuccess","canvas","getContext","clearRect","event","preventDefault","state","onMouseUp","targetTouches","pageX","clientX","pageY","clientY","rotate","scale","getCroppingRect","Math","PI","cos","sin","getXScale","getYScale","onPositionChange","onMouseMove","disableHiDPIScaling","loadImage","paint","document","get","addEventListener","removeEventListener","passive","handleMouseMove","handleMouseUp","clearImage","paintImage","border","position","onImageChange","disableCanvasRotation","getBorders","isVertical","createElement","translate","fillStyle","fillRect","drawImage","getDimensions","min","disableBoundaryChecks","max","loadingImage","FileReader","target","result","readAsDataURL","then","handleImageReady","catch","onLoadFailure","calculatePosition","save","globalCompositeOperation","restore","color","join","borderRadius","beginPath","rect","arc","lineTo","fill","style","cursor","touchAction","handleMouseDown","ref","setCanvas","number","oneOfType","string","concat","instanceOf","arrayOf","shape","oneOf","func","bool","ProfilePicModal","ext","editor","getImageScaledToCanvas","toBlob","img","avatarData","FormData","thumbnailData","newWidth","newHeight","tmpCanvas","getResizedCanvas","thumbnail","id","user","filename","zoom","thumbnailName","append","uploadProfilePic","file","files","path","extname","actualFile","Number","className","Group","as","Row","controlId","Label","column","sm","step","type","defaultValue","onChange","changeZoom","degrees","picture","substr","lastIndexOf","prevProps","onHide","show","dialogClassName","Header","closeButton","Title","Body","paddingBottom","marginBottom","htmlFor","variant","display","handleFileSelection","accept","paddingLeft","renderAvatarEditor","block","onClick","rotateFactory","float","Footer","handleUpload"],"mappings":"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","file":"static/js/169.73074c56.chunk.js","sourcesContent":["!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t(require(\"prop-types\"), require(\"react\")) : \"function\" == typeof define && define.amd ? define([\"prop-types\", \"react\"], t) : (e = \"undefined\" != typeof globalThis ? globalThis : e || self).AvatarEditor = t(e.PropTypes, e.React);\n}(this, function (e, t) {\n  \"use strict\";\n\n  function o(e) {\n    return e && \"object\" == typeof e && \"default\" in e ? e : {\n      default: e\n    };\n  }\n\n  var n = o(e),\n      i = o(t);\n\n  function r(e, t) {\n    for (var o = 0; o < t.length; o++) {\n      var n = t[o];\n      n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);\n    }\n  }\n\n  function s(e, t, o) {\n    return t in e ? Object.defineProperty(e, t, {\n      value: o,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }) : e[t] = o, e;\n  }\n\n  function u() {\n    return (u = Object.assign || function (e) {\n      for (var t = 1; t < arguments.length; t++) {\n        var o = arguments[t];\n\n        for (var n in o) {\n          Object.prototype.hasOwnProperty.call(o, n) && (e[n] = o[n]);\n        }\n      }\n\n      return e;\n    }).apply(this, arguments);\n  }\n\n  function a(t, e) {\n    var o,\n        n = Object.keys(t);\n    return Object.getOwnPropertySymbols && (o = Object.getOwnPropertySymbols(t), e && (o = o.filter(function (e) {\n      return Object.getOwnPropertyDescriptor(t, e).enumerable;\n    })), n.push.apply(n, o)), n;\n  }\n\n  function y(t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var o = null != arguments[e] ? arguments[e] : {};\n      e % 2 ? a(Object(o), !0).forEach(function (e) {\n        s(t, e, o[e]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(o)) : a(Object(o)).forEach(function (e) {\n        Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(o, e));\n      });\n    }\n\n    return t;\n  }\n\n  function h(e) {\n    return (h = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {\n      return e.__proto__ || Object.getPrototypeOf(e);\n    })(e);\n  }\n\n  function c(e, t) {\n    return (c = Object.setPrototypeOf || function (e, t) {\n      return e.__proto__ = t, e;\n    })(e, t);\n  }\n\n  function l(e, t) {\n    if (null == e) return {};\n\n    var o,\n        n = function (e, t) {\n      if (null == e) return {};\n\n      for (var o, n = {}, a = Object.keys(e), r = 0; r < a.length; r++) {\n        o = a[r], 0 <= t.indexOf(o) || (n[o] = e[o]);\n      }\n\n      return n;\n    }(e, t);\n\n    if (Object.getOwnPropertySymbols) for (var a = Object.getOwnPropertySymbols(e), r = 0; r < a.length; r++) {\n      o = a[r], 0 <= t.indexOf(o) || Object.prototype.propertyIsEnumerable.call(e, o) && (n[o] = e[o]);\n    }\n    return n;\n  }\n\n  function d(e) {\n    if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    return e;\n  }\n\n  function p(r) {\n    var i = function () {\n      if (\"undefined\" == typeof Reflect || !Reflect.construct) return !1;\n      if (Reflect.construct.sham) return !1;\n      if (\"function\" == typeof Proxy) return !0;\n\n      try {\n        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;\n      } catch (e) {\n        return !1;\n      }\n    }();\n\n    return function () {\n      var e,\n          t,\n          o,\n          n,\n          a = h(r);\n      return t = i ? (e = h(this).constructor, Reflect.construct(a, arguments, e)) : a.apply(this, arguments), o = this, !(n = t) || \"object\" != typeof n && \"function\" != typeof n ? d(o) : n;\n    };\n  }\n\n  function m(e, t) {\n    return function (e) {\n      if (Array.isArray(e)) return e;\n    }(e) || function (e, t) {\n      if (\"undefined\" == typeof Symbol || !(Symbol.iterator in Object(e))) return;\n      var o = [],\n          n = !0,\n          a = !1,\n          r = void 0;\n\n      try {\n        for (var i, s = e[Symbol.iterator](); !(n = (i = s.next()).done) && (o.push(i.value), !t || o.length !== t); n = !0) {\n          ;\n        }\n      } catch (e) {\n        a = !0, r = e;\n      } finally {\n        try {\n          n || null == s.return || s.return();\n        } finally {\n          if (a) throw r;\n        }\n      }\n\n      return o;\n    }(e, t) || g(e, t) || function () {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }();\n  }\n\n  function g(e, t) {\n    if (e) {\n      if (\"string\" == typeof e) return f(e, t);\n      var o = Object.prototype.toString.call(e).slice(8, -1);\n      return \"Object\" === o && e.constructor && (o = e.constructor.name), \"Map\" === o || \"Set\" === o ? Array.from(e) : \"Arguments\" === o || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o) ? f(e, t) : void 0;\n    }\n  }\n\n  function f(e, t) {\n    (null == t || t > e.length) && (t = e.length);\n\n    for (var o = 0, n = new Array(t); o < t; o++) {\n      n[o] = e[o];\n    }\n\n    return n;\n  }\n\n  function v(a, r) {\n    return new Promise(function (e, t) {\n      var o,\n          n = new Image();\n      n.onload = function () {\n        return e(n);\n      }, n.onerror = t, !1 == (null !== (o = a) && !!o.match(/^\\s*data:([a-z]+\\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\\-._~:@/?%\\s]*\\s*$/i)) && r && (n.crossOrigin = r), n.src = a;\n    });\n  }\n\n  var b,\n      w = !(\"undefined\" == typeof window || \"undefined\" == typeof navigator || !(\"ontouchstart\" in window || 0 < navigator.msMaxTouchPoints)),\n      M = \"undefined\" != typeof File,\n      O = {\n    touch: {\n      react: {\n        down: \"onTouchStart\",\n        mouseDown: \"onMouseDown\",\n        drag: \"onTouchMove\",\n        move: \"onTouchMove\",\n        mouseMove: \"onMouseMove\",\n        up: \"onTouchEnd\",\n        mouseUp: \"onMouseUp\"\n      },\n      native: {\n        down: \"touchstart\",\n        mouseDown: \"mousedown\",\n        drag: \"touchmove\",\n        move: \"touchmove\",\n        mouseMove: \"mousemove\",\n        up: \"touchend\",\n        mouseUp: \"mouseup\"\n      }\n    },\n    desktop: {\n      react: {\n        down: \"onMouseDown\",\n        drag: \"onDragOver\",\n        move: \"onMouseMove\",\n        up: \"onMouseUp\"\n      },\n      native: {\n        down: \"mousedown\",\n        drag: \"dragStart\",\n        move: \"mousemove\",\n        up: \"mouseup\"\n      }\n    }\n  },\n      I = w ? O.touch : O.desktop,\n      P = \"undefined\" != typeof window && window.devicePixelRatio ? window.devicePixelRatio : 1,\n      C = {\n    x: .5,\n    y: .5\n  },\n      x = function () {\n    !function (e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function\");\n      e.prototype = Object.create(t && t.prototype, {\n        constructor: {\n          value: e,\n          writable: !0,\n          configurable: !0\n        }\n      }), t && c(e, t);\n    }(a, i[\"default\"].Component);\n    var e,\n        t,\n        o,\n        n = p(a);\n\n    function a(e) {\n      var v;\n      return function (e, t) {\n        if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n      }(this, a), s(d(v = n.call(this, e)), \"state\", {\n        drag: !1,\n        my: null,\n        mx: null,\n        image: C\n      }), s(d(v), \"handleImageReady\", function (e) {\n        var t = v.getInitialSize(e.width, e.height);\n        t.resource = e, t.x = .5, t.y = .5, t.backgroundColor = v.props.backgroundColor, v.setState({\n          drag: !1,\n          image: t\n        }, v.props.onImageReady), v.props.onLoadSuccess(t);\n      }), s(d(v), \"clearImage\", function () {\n        v.canvas.getContext(\"2d\").clearRect(0, 0, v.canvas.width, v.canvas.height), v.setState({\n          image: C\n        });\n      }), s(d(v), \"handleMouseDown\", function (e) {\n        (e = e || window.event).preventDefault(), v.setState({\n          drag: !0,\n          mx: null,\n          my: null\n        });\n      }), s(d(v), \"handleMouseUp\", function () {\n        v.state.drag && (v.setState({\n          drag: !1\n        }), v.props.onMouseUp());\n      }), s(d(v), \"handleMouseMove\", function (e) {\n        var t, o, n, a, r, i, s, u, h, c, l, d, p, g, f, m;\n        e = e || window.event, !1 !== v.state.drag && (e.preventDefault(), n = {\n          mx: t = e.targetTouches ? e.targetTouches[0].pageX : e.clientX,\n          my: o = e.targetTouches ? e.targetTouches[0].pageY : e.clientY\n        }, m = v.props.rotate, m = (m %= 360) < 0 ? m + 360 : m, v.state.mx && v.state.my && (a = v.state.mx - t, r = v.state.my - o, i = v.state.image.width * v.props.scale, s = v.state.image.height * v.props.scale, h = (u = v.getCroppingRect()).x, c = u.y, h *= i, c *= s, l = function l(e) {\n          return e * (Math.PI / 180);\n        }, d = Math.cos(l(m)), g = c + -a * (p = Math.sin(l(m))) + r * d, f = {\n          x: (h + a * d + r * p) / i + 1 / v.props.scale * v.getXScale() / 2,\n          y: g / s + 1 / v.props.scale * v.getYScale() / 2\n        }, v.props.onPositionChange(f), n.image = y(y({}, v.state.image), f)), v.setState(n), v.props.onMouseMove(e));\n      }), s(d(v), \"setCanvas\", function (e) {\n        v.canvas = e;\n      }), v.canvas = null, v;\n    }\n\n    return e = a, (t = [{\n      key: \"componentDidMount\",\n      value: function value() {\n        this.props.disableHiDPIScaling && (P = 1);\n        var e,\n            t,\n            o = this.canvas.getContext(\"2d\");\n        this.props.image && this.loadImage(this.props.image), this.paint(o), document && (e = !!function () {\n          var t = !1;\n\n          try {\n            var e = Object.defineProperty({}, \"passive\", {\n              get: function get() {\n                t = !0;\n              }\n            });\n            window.addEventListener(\"test\", e, e), window.removeEventListener(\"test\", e, e);\n          } catch (e) {\n            t = !1;\n          }\n\n          return t;\n        }() && {\n          passive: !1\n        }, t = I.native, document.addEventListener(t.move, this.handleMouseMove, e), document.addEventListener(t.up, this.handleMouseUp, e), w && (document.addEventListener(t.mouseMove, this.handleMouseMove, e), document.addEventListener(t.mouseUp, this.handleMouseUp, e)));\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function value(e, t) {\n        this.props.image && this.props.image !== e.image || this.props.width !== e.width || this.props.height !== e.height || this.props.backgroundColor !== e.backgroundColor ? this.loadImage(this.props.image) : this.props.image || t.image === C || this.clearImage();\n        var o = this.canvas.getContext(\"2d\");\n        o.clearRect(0, 0, this.canvas.width, this.canvas.height), this.paint(o), this.paintImage(o, this.state.image, this.props.border), e.image === this.props.image && e.width === this.props.width && e.height === this.props.height && e.position === this.props.position && e.scale === this.props.scale && e.rotate === this.props.rotate && t.my === this.state.my && t.mx === this.state.mx && t.image.x === this.state.image.x && t.image.y === this.state.image.y && t.backgroundColor === this.state.backgroundColor || this.props.onImageChange();\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function value() {\n        var e;\n        document && (e = I.native, document.removeEventListener(e.move, this.handleMouseMove, !1), document.removeEventListener(e.up, this.handleMouseUp, !1), w && (document.removeEventListener(e.mouseMove, this.handleMouseMove, !1), document.removeEventListener(e.mouseUp, this.handleMouseUp, !1)));\n      }\n    }, {\n      key: \"isVertical\",\n      value: function value() {\n        return !this.props.disableCanvasRotation && this.props.rotate % 180 != 0;\n      }\n    }, {\n      key: \"getBorders\",\n      value: function value(e) {\n        var t = 0 < arguments.length && void 0 !== e ? e : this.props.border;\n        return Array.isArray(t) ? t : [t, t];\n      }\n    }, {\n      key: \"getDimensions\",\n      value: function value() {\n        var e = this.props,\n            t = e.width,\n            o = e.height,\n            n = e.rotate,\n            a = e.border,\n            r = {},\n            i = m(this.getBorders(a), 2),\n            s = i[0],\n            u = i[1],\n            h = t,\n            c = o;\n        return this.isVertical() ? (r.width = c, r.height = h) : (r.width = h, r.height = c), r.width += 2 * s, r.height += 2 * u, {\n          canvas: r,\n          rotate: n,\n          width: t,\n          height: o,\n          border: a\n        };\n      }\n    }, {\n      key: \"getImage\",\n      value: function value() {\n        var e = this.getCroppingRect(),\n            t = this.state.image;\n        e.x *= t.resource.width, e.y *= t.resource.height, e.width *= t.resource.width, e.height *= t.resource.height;\n        var o = document.createElement(\"canvas\");\n        this.isVertical() ? (o.width = e.height, o.height = e.width) : (o.width = e.width, o.height = e.height);\n        var n = o.getContext(\"2d\");\n        return n.translate(o.width / 2, o.height / 2), n.rotate(this.props.rotate * Math.PI / 180), n.translate(-o.width / 2, -o.height / 2), this.isVertical() && n.translate((o.width - o.height) / 2, (o.height - o.width) / 2), t.backgroundColor && (n.fillStyle = t.backgroundColor, n.fillRect(-e.x, -e.y, t.resource.width, t.resource.height)), n.drawImage(t.resource, -e.x, -e.y), o;\n      }\n    }, {\n      key: \"getImageScaledToCanvas\",\n      value: function value() {\n        var e = this.getDimensions(),\n            t = e.width,\n            o = e.height,\n            n = document.createElement(\"canvas\");\n        return this.isVertical() ? (n.width = o, n.height = t) : (n.width = t, n.height = o), this.paintImage(n.getContext(\"2d\"), this.state.image, 0, 1), n;\n      }\n    }, {\n      key: \"getXScale\",\n      value: function value() {\n        var e = this.props.width / this.props.height,\n            t = this.state.image.width / this.state.image.height;\n        return Math.min(1, e / t);\n      }\n    }, {\n      key: \"getYScale\",\n      value: function value() {\n        var e = this.props.height / this.props.width,\n            t = this.state.image.height / this.state.image.width;\n        return Math.min(1, e / t);\n      }\n    }, {\n      key: \"getCroppingRect\",\n      value: function value() {\n        var e = this.props.position || {\n          x: this.state.image.x,\n          y: this.state.image.y\n        },\n            t = 1 / this.props.scale * this.getXScale(),\n            o = 1 / this.props.scale * this.getYScale(),\n            n = {\n          x: e.x - t / 2,\n          y: e.y - o / 2,\n          width: t,\n          height: o\n        },\n            a = 0,\n            r = 1 - n.width,\n            i = 0,\n            s = 1 - n.height;\n        return (this.props.disableBoundaryChecks || 1 < t || 1 < o) && (a = -n.width, i = -n.height, s = r = 1), y(y({}, n), {}, {\n          x: Math.max(a, Math.min(n.x, r)),\n          y: Math.max(i, Math.min(n.y, s))\n        });\n      }\n    }, {\n      key: \"loadImage\",\n      value: function value(e) {\n        var t;\n        M && e instanceof File ? this.loadingImage = (t = e, new Promise(function (o, n) {\n          var e = new FileReader();\n          e.onload = function (e) {\n            try {\n              var t = v(e.target.result);\n              o(t);\n            } catch (e) {\n              n(e);\n            }\n          }, e.readAsDataURL(t);\n        }).then(this.handleImageReady).catch(this.props.onLoadFailure)) : \"string\" == typeof e && (this.loadingImage = v(e, this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure));\n      }\n    }, {\n      key: \"getInitialSize\",\n      value: function value(e, t) {\n        var o,\n            n,\n            a = this.getDimensions();\n        return t / e < a.height / a.width ? n = e * ((o = this.getDimensions().height) / t) : o = t * ((n = this.getDimensions().width) / e), {\n          height: o,\n          width: n\n        };\n      }\n    }, {\n      key: \"paintImage\",\n      value: function value(e, t, o, n) {\n        var a,\n            r = 3 < arguments.length && void 0 !== n ? n : P;\n        t.resource && (a = this.calculatePosition(t, o), e.save(), e.translate(e.canvas.width / 2, e.canvas.height / 2), e.rotate(this.props.rotate * Math.PI / 180), e.translate(-e.canvas.width / 2, -e.canvas.height / 2), this.isVertical() && e.translate((e.canvas.width - e.canvas.height) / 2, (e.canvas.height - e.canvas.width) / 2), e.scale(r, r), e.globalCompositeOperation = \"destination-over\", e.drawImage(t.resource, a.x, a.y, a.width, a.height), t.backgroundColor && (e.fillStyle = t.backgroundColor, e.fillRect(a.x, a.y, a.width, a.height)), e.restore());\n      }\n    }, {\n      key: \"calculatePosition\",\n      value: function value(e, t) {\n        e = e || this.state.image;\n        var o = m(this.getBorders(t), 2),\n            n = o[0],\n            a = o[1],\n            r = this.getCroppingRect(),\n            i = e.width * this.props.scale,\n            s = e.height * this.props.scale,\n            u = -r.x * i,\n            h = -r.y * s;\n        return this.isVertical() ? (u += a, h += n) : (u += n, h += a), {\n          x: u,\n          y: h,\n          height: s,\n          width: i\n        };\n      }\n    }, {\n      key: \"paint\",\n      value: function value(e) {\n        e.save(), e.scale(P, P), e.translate(0, 0), e.fillStyle = \"rgba(\" + this.props.color.slice(0, 4).join(\",\") + \")\";\n        var t,\n            o,\n            n,\n            a,\n            r,\n            i,\n            s,\n            u,\n            h = this.props.borderRadius,\n            c = this.getDimensions(),\n            l = m(this.getBorders(c.border), 2),\n            d = l[0],\n            p = l[1],\n            g = c.canvas.height,\n            f = c.canvas.width,\n            h = Math.max(h, 0);\n        h = Math.min(h, f / 2 - d, g / 2 - p), e.beginPath(), t = e, a = f - 2 * (o = d), r = g - 2 * (n = p), 0 === (i = h) ? t.rect(o, n, a, r) : (s = a - i, u = r - i, t.translate(o, n), t.arc(i, i, i, Math.PI, 1.5 * Math.PI), t.lineTo(s, 0), t.arc(s, i, i, 1.5 * Math.PI, 2 * Math.PI), t.lineTo(a, u), t.arc(s, u, i, 2 * Math.PI, .5 * Math.PI), t.lineTo(i, r), t.arc(i, u, i, .5 * Math.PI, Math.PI), t.translate(-o, -n)), e.rect(f, 0, -f, g), e.fill(\"evenodd\"), e.restore();\n      }\n    }, {\n      key: \"render\",\n      value: function value() {\n        var e = this.props,\n            t = (e.scale, e.rotate, e.image, e.border, e.borderRadius, e.width, e.height, e.position, e.color, e.backgroundColor, e.style),\n            o = (e.crossOrigin, e.onLoadFailure, e.onLoadSuccess, e.onImageReady, e.onImageChange, e.onMouseUp, e.onMouseMove, e.onPositionChange, e.disableBoundaryChecks, e.disableHiDPIScaling, e.disableCanvasRotation, l(e, [\"scale\", \"rotate\", \"image\", \"border\", \"borderRadius\", \"width\", \"height\", \"position\", \"color\", \"backgroundColor\", \"style\", \"crossOrigin\", \"onLoadFailure\", \"onLoadSuccess\", \"onImageReady\", \"onImageChange\", \"onMouseUp\", \"onMouseMove\", \"onPositionChange\", \"disableBoundaryChecks\", \"disableHiDPIScaling\", \"disableCanvasRotation\"])),\n            n = this.getDimensions(),\n            a = {\n          width: n.canvas.width,\n          height: n.canvas.height,\n          cursor: this.state.drag ? \"grabbing\" : \"grab\",\n          touchAction: \"none\"\n        },\n            r = {\n          width: n.canvas.width * P,\n          height: n.canvas.height * P,\n          style: y(y({}, a), t)\n        };\n        return r[I.react.down] = this.handleMouseDown, w && (r[I.react.mouseDown] = this.handleMouseDown), i.default.createElement(\"canvas\", u({\n          ref: this.setCanvas\n        }, r, o));\n      }\n    }]) && r(e.prototype, t), o && r(e, o), a;\n  }();\n\n  return s(x, \"propTypes\", {\n    scale: n.default.number,\n    rotate: n.default.number,\n    image: n.default.oneOfType([n.default.string].concat(function (e) {\n      if (Array.isArray(e)) return f(e);\n    }(b = M ? [n.default.instanceOf(File)] : []) || function (e) {\n      if (\"undefined\" != typeof Symbol && Symbol.iterator in Object(e)) return Array.from(e);\n    }(b) || g(b) || function () {\n      throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }())),\n    border: n.default.oneOfType([n.default.number, n.default.arrayOf(n.default.number)]),\n    borderRadius: n.default.number,\n    width: n.default.number,\n    height: n.default.number,\n    position: n.default.shape({\n      x: n.default.number,\n      y: n.default.number\n    }),\n    color: n.default.arrayOf(n.default.number),\n    backgroundColor: n.default.string,\n    crossOrigin: n.default.oneOf([\"\", \"anonymous\", \"use-credentials\"]),\n    onLoadFailure: n.default.func,\n    onLoadSuccess: n.default.func,\n    onImageReady: n.default.func,\n    onImageChange: n.default.func,\n    onMouseUp: n.default.func,\n    onMouseMove: n.default.func,\n    onPositionChange: n.default.func,\n    disableBoundaryChecks: n.default.bool,\n    disableHiDPIScaling: n.default.bool,\n    disableCanvasRotation: n.default.bool\n  }), s(x, \"defaultProps\", {\n    scale: 1,\n    rotate: 0,\n    border: 25,\n    borderRadius: 0,\n    width: 200,\n    height: 200,\n    color: [0, 0, 0, .5],\n    onLoadFailure: function onLoadFailure() {},\n    onLoadSuccess: function onLoadSuccess() {},\n    onImageReady: function onImageReady() {},\n    onImageChange: function onImageChange() {},\n    onMouseUp: function onMouseUp() {},\n    onMouseMove: function onMouseMove() {},\n    onPositionChange: function onPositionChange() {},\n    disableBoundaryChecks: !1,\n    disableHiDPIScaling: !1,\n    disableCanvasRotation: !0\n  }), x;\n});","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport path from 'path';\nimport Badge from 'react-bootstrap/Badge';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Form from 'react-bootstrap/Form';\nimport FormControl from 'react-bootstrap/FormControl';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport AvatarEditor from 'react-avatar-editor';\n\n\n// FUNCTIONS //\n\nfunction getResizedCanvas( canvas, newWidth, newHeight ) {\n\tconst tmpCanvas = document.createElement( 'canvas' );\n\ttmpCanvas.width = newWidth;\n\ttmpCanvas.height = newHeight;\n\tconst ctx = tmpCanvas.getContext( '2d' );\n\tctx.drawImage( canvas, 0, 0, canvas.width, canvas.height, 0, 0, newWidth, newHeight );\n\treturn tmpCanvas;\n}\n\n\n// MAIN //\n\nclass ProfilePicModal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tlet ext;\n\t\tif ( props.user.picture ) {\n\t\t\text = props.user.picture.substr( props.user.picture.lastIndexOf( '.' ) );\n\t\t} else {\n\t\t\text = null;\n\t\t}\n\t\tthis.state = {\n\t\t\tactualFile: props.user.picture,\n\t\t\tzoom: 1.2,\n\t\t\text,\n\t\t\trotate: 0\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.user.picture !== prevProps.user.picture ) {\n\t\t\tthis.setState({\n\t\t\t\tactualFile: this.props.user.picture,\n\t\t\t\trotate: 0,\n\t\t\t\tzoom: 1.2\n\t\t\t});\n\t\t}\n\t}\n\n\thandleUpload = () => {\n\t\tif ( this.editor ) {\n\t\t\tconst canvas = this.editor.getImageScaledToCanvas();\n\t\t\tcanvas.toBlob( img => {\n\t\t\t\tconst avatarData = new FormData();\n\t\t\t\tconst thumbnailData = new FormData();\n\t\t\t\tconst tn = getResizedCanvas( canvas, 80, 80 );\n\t\t\t\ttn.toBlob( thumbnail => {\n\t\t\t\t\tconst id = this.props.user.id;\n\t\t\t\t\tconst filename = `${id}_${this.state.zoom}_${this.state.rotate}${this.state.ext}`;\n\t\t\t\t\tconst thumbnailName = filename;\n\t\t\t\t\tavatarData.append( 'avatar', img, filename );\n\t\t\t\t\tthumbnailData.append( 'thumbnail', thumbnail, thumbnailName );\n\t\t\t\t\tthis.props.uploadProfilePic({\n\t\t\t\t\t\tavatarData: avatarData,\n\t\t\t\t\t\tthumbnailData: thumbnailData\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\thandleFileSelection = (e) => {\n\t\tconst file = e.target.files[ 0 ];\n\t\tif ( file ) {\n\t\t\tconst ext = path.extname( file.name );\n\t\t\tthis.setState({\n\t\t\t\tactualFile: file,\n\t\t\t\text: ext\n\t\t\t});\n\t\t}\n\t}\n\n\tchangeZoom = (e) => {\n\t\tthis.setState({\n\t\t\tzoom: Number( e.target.value )\n\t\t});\n\t}\n\n\trenderAvatarEditor = () => {\n\t\tconst t = this.props.t;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<AvatarEditor\n\t\t\t\t\tclassName=\"avatarEditor\"\n\t\t\t\t\tref={(editor) => {\n\t\t\t\t\t\tthis.editor = editor;\n\t\t\t\t\t}}\n\t\t\t\t\timage={this.state.actualFile}\n\t\t\t\t\twidth={200}\n\t\t\t\t\theight={200}\n\t\t\t\t\tborder={[80, 50]}\n\t\t\t\t\tcrossOrigin='anonymous'\n\t\t\t\t\tcolor={[110, 98, 98, 0.29]} // RGBA\n\t\t\t\t\tscale={this.state.zoom}\n\t\t\t\t\trotate={this.state.rotate}\n\t\t\t\t/>\n\t\t\t\t<Form.Group as={Row} controlId=\"form-zoom\">\n\t\t\t\t\t<Form.Label column sm=\"2\">{t('zoom')}</Form.Label>\n\t\t\t\t\t<Col sm=\"10\">\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tstep={0.05}\n\t\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\t\tdefaultValue={1} min={0.5} max={3}\n\t\t\t\t\t\t\tonChange={this.changeZoom}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Form.Group>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trotateFactory = ( degrees ) => {\n\t\treturn () => {\n\t\t\tthis.setState({\n\t\t\t\trotate: this.state.rotate + degrees\n\t\t\t});\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\tonHide={this.props.onHide}\n\t\t\t\tshow={this.props.show}\n\t\t\t\tdialogClassName=\"profile-pic-modal\"\n\t\t\t>\n\t\t\t\t<Modal.Header closeButton >\n\t\t\t\t\t<Modal.Title as=\"h3\">{t('profile-picture')}</Modal.Title>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body style={{ paddingBottom: 0 }}>\n\t\t\t\t\t<Form.Group style={{ marginBottom: 0 }}>\n\t\t\t\t\t\t<Form.Label htmlFor=\"imageUpload\" style={{ cursor: 'pointer' }}>\n\t\t\t\t\t\t\t<h3><Badge variant=\"success\">{t('select-file')}</Badge></h3>\n\t\t\t\t\t\t</Form.Label>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tid=\"imageUpload\"\n\t\t\t\t\t\t\tstyle={{ display: 'none' }}\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\tonChange={this.handleFileSelection}\n\t\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span style={{ paddingLeft: 10 }}>\n\t\t\t\t\t\t\t{t('click-to-upload')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Form.Group>\n\t\t\t\t\t{ this.renderAvatarEditor() }\n\t\t\t\t\t<Form.Group as={Row} controlId=\"form-rotate\">\n\t\t\t\t\t\t<Form.Label column sm=\"2\">{t('rotate')}</Form.Label>\n\t\t\t\t\t\t<Col sm=\"5\">\n\t\t\t\t\t\t\t<Button block variant=\"secondary\" onClick={this.rotateFactory( -90 )}>\n\t\t\t\t\t\t\t\t{t('left')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col sm=\"5\">\n\t\t\t\t\t\t\t<Button block variant=\"secondary\" style={{ float: 'right' }} onClick={this.rotateFactory( 90 )}>\n\t\t\t\t\t\t\t\t{t('right')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Form.Group>\n\t\t\t\t</Modal.Body>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button onClick={this.handleUpload}>\n\t\t\t\t\t\t{t('save-and-close')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nProfilePicModal.propTypes = {\n\tonHide: PropTypes.func.isRequired,\n\tshow: PropTypes.bool.isRequired,\n\tt: PropTypes.func.isRequired,\n\tuploadProfilePic: PropTypes.func.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\n\n// EXPORTS //\n\nexport default ProfilePicModal;\n"],"sourceRoot":""}