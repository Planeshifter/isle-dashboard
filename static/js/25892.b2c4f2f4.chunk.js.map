{"version":3,"sources":["actions/namespace.js","constants/colors.js","ev/components/lesson-creator/index.js","ev/containers/lesson-creator/index.js","components/lessons-page/details_modal.js","components/lessons-page/delete_modal.js","components/lessons-page/upload.svg","components/lessons-page/lesson.js","components/lessons-page/enrolled_lesson.js","components/lessons-page/no_course_banner.js","components/lessons-page/no_lesson_banner.js","components/lessons-page/index.js","containers/visible-lessons-page/index.js","utils/file_saver.js","utils/format_time.js","utils/is_owner.js","utils/sort_lessons.js","components/lessons-page/architecture.jpeg"],"names":["appendCreatedNamespace","namespace","type","APPEND_CREATED_NAMESPACE","payload","changedNamespace","title","owners","announcements","cohorts","description","enableTicketing","_id","CHANGED_NAMESPACE","deletedCurrentNamespace","id","DELETED_CURRENT_NAMESPACE","updateStudentProgress","email","lessonID","progress","cohort","UPDATED_STUDENT_PROGRESS","createNamespace","dispatch","props","axios","server","res","data","successful","addErrorNotification","Error","message","onNamespace","history","replace","addNotification","level","createNamespaceInjector","deleteCurrentNamespace","deleteCurrentNamespaceInjector","updateCurrentNamespace","ns","UPDATED_OWNED_NAMESPACE","getCohorts","namespaceID","updateCurrentNamespaceInjector","getNamespaceActions","namespaceTitle","qs","blob","Blob","name","saveAs","getNamespaceActionsInjector","adjustProgress","i18next","adjustProgressInjector","getAllNamespaces","GET_ALL_NAMESPACES","namespaces","getAllNamespacesInjector","setLessonOrder","lessons","setLessonOrderInjector","asyncComponent","connect","state","admin","user","copyLesson","copyLessonInjector","LessonCreator","debug","logger","preventPropagation","event","stopPropagation","DetailsModal","lockLesson","lockUntil","target","value","setState","length","disabled","checked","template","evt","preventDefault","details","newTitle","newDescription","update","Date","prevProps","newState","this","isEmptyObject","t","Modal","show","onHide","close","Form","action","SERVER","method","onSubmit","onKeyDown","as","FormGroup","FormLabel","FormControl","onChange","handleInputChange","defaultValue","label","handleLockChange","minDate","handleTimeChange","clearIcon","administrator","handleTemplateChange","Button","onClick","variant","Component","defaultProps","delete","IS_IOS","includes","navigator","platform","userAgent","document","addDefaultSrc","src","background","Lesson","query","lessonName","namespaceName","active","deactivateLesson","activateLesson","public","hideLessonInGallery","showLessonInGallery","deleteLesson","closeDeleteModal","updateLesson","getTime","closeDetailsModal","showDeleteModal","showDetailsModal","isleFile","getIsleFile","copyToClipboard","then","catch","err","url","img","window","location","open","focus","updated","updatedAt","toLocaleDateString","date","createdAt","className","OverlayTrigger","placement","overlay","Tooltip","alt","style","stroke","fill","upload","activeStyle","toLocaleString","Badge","opacity","toggleLessonState","publicStyle","ButtonToolbar","ButtonGroup","marginRight","size","aria-label","onFocus","onMouseEnter","copyIsleFileToClipboard","float","renderActivateButton","toggleLessonVisibility","renderButtonToolbarDate","Fragment","Card","padding","filter","COLORS","colorIndex","onMouseOver","showPreviewImage","ref","div","width","height","onError","cursor","role","tabIndex","copyNameToClipboard","onKeyPress","link","openLesson","copyLinkToClipboard","renderButtonToolbar","renderModals","withTranslation","EnrolledLesson","metadata","hideProgressBar","lessonData","min","round","ProgressBar","now","duration","spentTime","position","top","renderProgress","formatTime","appendix","writeAccess","Jumbotron","ResponsiveReactGridLayout","WidthProvider","Responsive","searchLessons","phrase","filteredLessons","isArray","i","contains","lowercase","push","createLayout","elemH","layouts","map","e","lg","x","y","floor","w","h","md","sm","xs","xxs","tiny","pluck","LessonsPage","idx","bool","code","repositionLessons","getTemplateLessons","showLessonCreator","course","getLessons","isOwner","search","unfilteredLessons","activeElement","nextProps","nextState","direction","slice","lesson","left","tmp","pos","right","sortLessons","forceUpdate","key","input","handlePositionChangeFactory","templateButton","toggleCreator","onCreate","handleCreate","breakpoints","cols","containerPadding","isResizable","isBounded","isDraggable","rowHeight","renderLessons","prevState","addNotificationInjector","showLessonInGalleryInjector","hideLessonInGalleryInjector","activateLessonInjector","deactivateLessonInjector","updateLessonInjector","deleteLessonInjector","getLessonsInjector","getTemplateLessonsInjector","getIsleFileInjector","RE_AUTO_BOM","throwOutside","ex","setImmediate","autoBOM","test","String","fromCharCode","view","saveLink","createElementNS","canUseSaveLink","isSafari","HTMLElement","safari","isChromeIOS","setTimeout","proto","FileSaver","prototype","msSaveOrOpenBlob","noAutoBOM","abort","readyState","INIT","WRITING","DONE","error","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","getURL","URL","webkitURL","revoke","file","revokeObjectURL","remove","objectURL","self","force","dispatchAll","filesaver","eventTypes","concat","listener","call","split","createObjectURL","node","href","download","MouseEvent","dispatchEvent","FileReader","reader","onloadend","result","readAsDataURL","fsError","saveFactory","content","time","opts","hours","minutes","seconds","out","owner","isObject","OPTS","numeric","sort","a","b","localeCompare"],"mappings":"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","file":"static/js/25892.b2c4f2f4.chunk.js","sourcesContent":["/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport axios from 'axios';\nimport qs from 'querystring';\nimport i18next from 'i18next';\nimport saveAs from 'utils/file_saver.js';\nimport server from 'constants/server';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { getCohorts } from 'actions/cohort';\nimport { APPEND_CREATED_NAMESPACE, CHANGED_NAMESPACE, DELETED_CURRENT_NAMESPACE, GET_ALL_NAMESPACES, UPDATED_OWNED_NAMESPACE, UPDATED_STUDENT_PROGRESS } from 'constants/action_types.js';\n\n\n// EXPORTS //\n\nexport function appendCreatedNamespace( namespace ) {\n\treturn {\n\t\ttype: APPEND_CREATED_NAMESPACE,\n\t\tpayload: {\n\t\t\tnamespace\n\t\t}\n\t};\n}\n\nexport function changedNamespace({ title, owners, announcements = [], cohorts = [], description, enableTicketing, _id }) {\n\treturn {\n\t\ttype: CHANGED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tannouncements,\n\t\t\tcohorts,\n\t\t\tdescription,\n\t\t\tenableTicketing,\n\t\t\towners,\n\t\t\t_id\n\t\t}\n\t};\n}\n\nexport function deletedCurrentNamespace( id ) {\n\treturn {\n\t\ttype: DELETED_CURRENT_NAMESPACE,\n\t\tpayload: {\n\t\t\tid\n\t\t}\n\t};\n}\n\nexport function updateStudentProgress({ email, lessonID, progress, cohort }) {\n\treturn {\n\t\ttype: UPDATED_STUDENT_PROGRESS,\n\t\tpayload: {\n\t\t\temail, lessonID, progress, cohort\n\t\t}\n\t};\n}\n\nexport function updatedOwnedNamespace({ title, owners, description, enableTicketing, _id }) {\n\treturn {\n\t\ttype: UPDATED_OWNED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\towners,\n\t\t\tenableTicketing,\n\t\t\t_id\n\t\t}\n\t};\n}\n\nexport const createNamespace = async ( dispatch, { title, description, owners, props }) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/create_namespace', { title, description, owners });\n\t\tif ( !res.data.successful ) {\n\t\t\treturn addErrorNotification( dispatch, new Error( res.data.message ));\n\t\t}\n\t\tconst namespace = res.data.namespace;\n\t\tprops.onNamespace( namespace );\n\t\tdispatch( appendCreatedNamespace( namespace ) );\n\t\tprops.history.replace( '/lessons' );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: res.data.successful ? 'success' : 'error'\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const createNamespaceInjector = dispatch => {\n\treturn async ({ title, description, owners, props }) => {\n\t\tawait createNamespace( dispatch, { title, description, owners, props } );\n\t};\n};\n\nexport const deleteCurrentNamespace = async ( dispatch, id, history ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/delete_namespace', { id });\n\t\tif ( history ) {\n\t\t\thistory.replace( '/lessons' );\n\t\t}\n\t\tdispatch( deletedCurrentNamespace( id ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const deleteCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id, history ) => {\n\t\tawait deleteCurrentNamespace( dispatch, id, history );\n\t};\n};\n\nexport const updateCurrentNamespace = async ( dispatch, ns ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/update_namespace', { ns });\n\t\tdispatch( changedNamespace( res.data.namespace ) );\n\t\tdispatch( updatedOwnedNamespace( res.data.namespace ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tgetCohorts( dispatch, {\n\t\t\tnamespaceID: ns._id\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const updateCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id, ns ) => {\n\t\tawait updateCurrentNamespace( dispatch, id, ns );\n\t};\n};\n\nexport const getNamespaceActions = async ( dispatch, { namespaceID, namespaceTitle } ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_namespace_actions?'+qs.stringify({ namespaceID }) );\n\t\tconst blob = new Blob([ res.data ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `actions_${namespaceTitle}.json`;\n\t\tsaveAs( blob, name );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getNamespaceActionsInjector = ( dispatch ) => {\n\treturn async ({ namespaceID, namespaceTitle }) => {\n\t\tawait getNamespaceActions( dispatch, { namespaceID, namespaceTitle });\n\t};\n};\n\nexport const adjustProgress = async ( dispatch, { email, lessonID, namespaceID, progress, cohort }) => {\n\tconst res = await axios.post( server+'/user_adjust_progress', {\n\t\temail, lessonID, namespaceID, progress\n\t});\n\taddNotification( dispatch, {\n\t\ttitle: i18next.t('common:updated'),\n\t\tmessage: res.data.message,\n\t\tlevel: 'success'\n\t});\n\tdispatch( updateStudentProgress({ email, lessonID, progress, cohort }) );\n};\n\nexport const adjustProgressInjector = ( dispatch ) => {\n\treturn async ( { email, lessonID, namespaceID, progress, cohort } ) => {\n\t\tawait adjustProgress( dispatch, { email, lessonID, namespaceID, progress, cohort } );\n\t};\n};\n\nexport const getAllNamespaces = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_all_namespaces' );\n\t\tdispatch({\n\t\t\ttype: GET_ALL_NAMESPACES,\n\t\t\tpayload: {\n\t\t\t\tnamespaces: res.data.namespaces\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getAllNamespacesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getAllNamespaces( dispatch );\n\t};\n};\n\nexport const setLessonOrder = async ( dispatch, { lessons, id }) => {\n\ttry {\n\t\tawait axios.post( server+'/set_lesson_order', {\n\t\t\tlessons, id\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const setLessonOrderInjector = ( dispatch ) => {\n\treturn async ({ lessons, id }) => {\n\t\tawait setLessonOrder( dispatch, { lessons, id } );\n\t};\n};\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MAIN //\n\nconst COLORS = [\n\t'#1f77b4',\n\t'#ff7f0e',\n\t'#2ca02c',\n\t'#d62728',\n\t'#9467bd',\n\t'#8c564b',\n\t'#c49c94',\n\t'#e377c2',\n\t'#17becf',\n\t'#aec7e8',\n\t'#ffbb78',\n\t'#ff9896',\n\t'#98df8a',\n\t'#7f7f7f',\n\t'#c5b0d5',\n\t'#f7b6d2',\n\t'#bcbd22',\n\t'#c7c7c7',\n\t'#dbdb8d',\n\t'#9edae5'\n];\n\n\n// EXPORTS //\n\nexport default COLORS;\n","// MODULES //\n\nimport asyncComponent from 'components/async';\n\n\n// MAIN //\n\nconst LessonCreator = asyncComponent( () => import( './main.js' ) );\n\n\n// EXPORTS //\n\nexport default LessonCreator;\n","// MODULES //\n\nimport { connect } from 'react-redux';\nimport LessonCreator from 'ev/components/lesson-creator';\nimport { copyLessonInjector } from 'actions/lesson';\n\n\n// FUNCTIONS //\n\nfunction mapStateToProps( state ) {\n\treturn {\n\t\tadmin: state.admin,\n\t\tuser: state.user\n\t};\n}\n\nfunction mapDispatchToProps( dispatch ) {\n\treturn {\n\t\tcopyLesson: copyLessonInjector( dispatch )\n\t};\n}\n\n\n// MAIN //\n\nconst VisibleLessonCreator = connect( mapStateToProps, mapDispatchToProps )( LessonCreator );\n\n\n// EXPORTS //\n\nexport default VisibleLessonCreator;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport Button from 'react-bootstrap/Button';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport Form from 'react-bootstrap/Form';\nimport Modal from 'react-bootstrap/Modal';\nimport DateTimePicker from 'react-datetime-picker';\nimport isEmptyObject from '@stdlib/assert/is-empty-object';\nimport SERVER from 'constants/server';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle-dashboard' );\n\n\n// FUNCTIONS //\n\nfunction preventPropagation( event ) {\n\tevent.stopPropagation();\n}\n\n\n// MAIN //\n\nclass DetailsModal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tlet lockLesson;\n\t\tlet lockUntil;\n\t\tif ( props.lockUntil ) {\n\t\t\tlockLesson = true;\n\t\t\tlockUntil = props.lockUntil;\n\t\t} else {\n\t\t\tlockLesson = false;\n\t\t\tlockUntil = new Date();\n\t\t}\n\t\tthis.state = {\n\t\t\ttitle: props.title,\n\t\t\tdescription: props.description,\n\t\t\tdisabled: false,\n\t\t\ttemplate: props.template,\n\t\t\tlockLesson,\n\t\t\tlockUntil\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst newState = {};\n\t\tif ( prevProps.title !== this.props.title ) {\n\t\t\tnewState.title = this.props.title;\n\t\t}\n\t\tif ( prevProps.description !== this.props.description ) {\n\t\t\tnewState.description = this.props.description;\n\t\t}\n\t\tif ( prevProps.template !== this.props.template ) {\n\t\t\tnewState.template = this.props.template;\n\t\t}\n\t\tif ( prevProps.lockUntil !== this.props.lockUntil ) {\n\t\t\tif ( this.props.lockUntil ) {\n\t\t\t\tnewState.lockLesson = true;\n\t\t\t\tnewState.lockUntil = this.props.lockUntil;\n\t\t\t} else {\n\t\t\t\tnewState.lockLesson = false;\n\t\t\t\tnewState.lockUntil = new Date();\n\t\t\t}\n\t\t}\n\t\tif ( !isEmptyObject( newState ) ) {\n\t\t\tthis.setState( newState );\n\t\t}\n\t}\n\n\thandleInputChange = ( event ) => {\n\t\tconst target = event.target;\n\t\tconst value = target.value;\n\t\tconst name = target.name;\n\t\tdebug( `Input field ${name} changed to ${value}` );\n\t\tthis.setState({\n\t\t\t[ name ]: value\n\t\t}, () => {\n\t\t\tif ( this.state.title.length >= 3 && this.state.description.length > 0 ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tdisabled: false\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\tdisabled: true\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\thandleLockChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tlockLesson: event.target.checked\n\t\t});\n\t}\n\n\thandleTimeChange = ( value ) => {\n\t\tthis.setState({\n\t\t\tlockUntil: value\n\t\t});\n\t}\n\n\thandleTemplateChange = ( event ) => {\n\t\tthis.setState({\n\t\t\ttemplate: event.target.checked\n\t\t});\n\t}\n\n\tonSubmit = ( evt ) => {\n\t\tevt.preventDefault();\n\t\tconst details = {\n\t\t\tnewTitle: this.state.title,\n\t\t\tnewDescription: this.state.description\n\t\t};\n\t\tif ( this.state.lockLesson ) {\n\t\t\tdetails.lockUntil = this.state.lockUntil;\n\t\t}\n\t\tif ( this.state.template === false || this.state.template === true ) {\n\t\t\tdetails.template = this.state.template;\n\t\t}\n\t\tthis.props.update( details );\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Modal show={this.props.show} onHide={this.props.close}>\n\t\t\t\t<Form action={SERVER} method=\"get\" onSubmit={this.onSubmit} onKeyDown={preventPropagation} >\n\t\t\t\t\t<Modal.Header>\n\t\t\t\t\t\t<Modal.Title as=\"h3\">{t('lesson-details')}</Modal.Title>\n\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t<Modal.Body>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<FormLabel>{t('common:title')}</FormLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\ttype=\"title\"\n\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\tdefaultValue={this.state.title}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<FormLabel>{t('common:description')}</FormLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\ttype=\"description\"\n\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\tdefaultValue={this.state.description}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<Form.Check\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tlabel={t('common:lock-until')}\n\t\t\t\t\t\t\t\tchecked={this.state.lockLesson}\n\t\t\t\t\t\t\t\tonChange={this.handleLockChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{this.state.lockLesson ? <DateTimePicker\n\t\t\t\t\t\t\t\t\tminDate={new Date()}\n\t\t\t\t\t\t\t\t\tonChange={this.handleTimeChange}\n\t\t\t\t\t\t\t\t\tvalue={this.state.lockUntil}\n\t\t\t\t\t\t\t\t\tclearIcon={null}\n\t\t\t\t\t\t\t\t/> : null }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t{ this.props.user.administrator ? <FormGroup>\n\t\t\t\t\t\t\t<Form.Check\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tlabel={t('provide-as-template')}\n\t\t\t\t\t\t\t\tchecked={this.state.template}\n\t\t\t\t\t\t\t\tonChange={this.handleTemplateChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup> : null}\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t\t<Modal.Footer>\n\t\t\t\t\t\t<Button onClick={this.props.close}>{t('common:cancel')}</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"success\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tdisabled={this.state.disabled}\n\t\t\t\t\t\t>{t('common:save')}</Button>\n\t\t\t\t\t</Modal.Footer>\n\t\t\t\t</Form>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nDetailsModal.propTypes = {\n\tclose: PropTypes.func.isRequired,\n\tdescription: PropTypes.string.isRequired,\n\tlockUntil: PropTypes.instanceOf( Date ),\n\tshow: PropTypes.bool.isRequired,\n\ttemplate: PropTypes.bool,\n\ttitle: PropTypes.string.isRequired,\n\tupdate: PropTypes.func.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nDetailsModal.defaultProps = {\n\tlockUntil: null,\n\ttemplate: null\n};\n\n\n// EXPORTS //\n\nexport default DetailsModal;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\n\n\n// MAIN //\n\nconst DeleteModal = ( props ) => (\n\t<Modal show={props.show} onHide={props.close}>\n\t\t<Modal.Header>\n\t\t\t<Modal.Title>{props.t('common:delete')}?</Modal.Title>\n\t\t</Modal.Header>\n\t\t<Modal.Body>\n\t\t\t{props.t('delete-modal-body', { name: props.title })}\n\t\t</Modal.Body>\n\t\t<Modal.Footer>\n\t\t\t<Button onClick={props.close}>{props.t('common:cancel')}</Button>\n\t\t\t<Button variant=\"danger\" onClick={props.delete} >{props.t('common:delete')}</Button>\n\t\t</Modal.Footer>\n\t</Modal>\n);\n\n\n// PROPERTIES //\n\nDeleteModal.propTypes = {\n\tclose: PropTypes.func.isRequired,\n\tdelete: PropTypes.func.isRequired,\n\tshow: PropTypes.bool.isRequired,\n\tt: PropTypes.func.isRequired,\n\ttitle: PropTypes.string.isRequired\n};\n\n\n// EXPORTS //\n\nexport default DeleteModal;\n","export default __webpack_public_path__ + \"static/media/upload.4da50dc4.svg\";","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport Badge from 'react-bootstrap/Badge';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\nimport Card from 'react-bootstrap/Card';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport copyToClipboard from 'clipboard-copy';\nimport DetailsModal from './details_modal.js';\nimport DeleteModal from './delete_modal.js';\nimport COLORS from 'constants/colors';\nimport background from './architecture.jpeg';\nimport upload from './upload.svg';\nimport './lesson.css';\n\n\n// VARIABLES //\n\nconst DEFAULT_DESCRIPTION = 'No description supplied.';\nconst debug = logger( 'isle:lessons-page:lesson' );\nconst IS_IOS = isIOS();\n\n\n// FUNCTIONS //\n\nfunction addDefaultSrc( event ) {\n\tevent.target.src = background;\n}\n\nfunction isIOS() {\n\treturn [\n\t\t'iPad Simulator',\n\t\t'iPhone Simulator',\n\t\t'iPod Simulator',\n\t\t'iPad',\n\t\t'iPhone',\n\t\t'iPod'\n\t].includes( navigator.platform ) ||\n\t(\n\t\tnavigator.userAgent.includes('Mac') &&\n\t\t'ontouchend' in document\n\t);\n}\n\n\n// MAIN //\n\nclass Lesson extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tshowDeleteModal: false,\n\t\t\tshowDetailsModal: false,\n\t\t\tisleFile: null\n\t\t};\n\t}\n\n\ttoggleLessonState = () => {\n\t\tconst query = {\n\t\t\tlessonName: this.props.title,\n\t\t\tnamespaceName: this.props.namespace\n\t\t};\n\t\tif ( this.props.active ) {\n\t\t\tthis.props.deactivateLesson( query );\n\t\t} else {\n\t\t\tthis.props.activateLesson( query );\n\t\t}\n\t}\n\n\ttoggleLessonVisibility = () => {\n\t\tconst query = {\n\t\t\tlessonName: this.props.title,\n\t\t\tnamespaceName: this.props.namespace\n\t\t};\n\t\tif ( this.props.public ) {\n\t\t\tthis.props.hideLessonInGallery( query );\n\t\t} else {\n\t\t\tthis.props.showLessonInGallery( query );\n\t\t}\n\t}\n\n\tdelete = () => {\n\t\tthis.props.deleteLesson({\n\t\t\tlessonName: this.props.title,\n\t\t\tnamespaceName: this.props.namespace\n\t\t});\n\t\tthis.closeDeleteModal();\n\t}\n\n\tupdate = async ({ newTitle, newDescription, lockUntil, template }) => {\n\t\tconst bool = await this.props.updateLesson({\n\t\t\tlessonName: this.props.title,\n\t\t\tnamespaceName: this.props.namespace,\n\t\t\tnewTitle,\n\t\t\tnewDescription,\n\t\t\ttemplate,\n\t\t\tlockUntil: lockUntil ? lockUntil.getTime() : null\n\t\t});\n\t\tif ( bool ) {\n\t\t\tthis.closeDetailsModal();\n\t\t}\n\t}\n\n\tshowDeleteModal = () => {\n\t\tthis.setState({ showDeleteModal: true });\n\t}\n\n\tshowDetailsModal = () => {\n\t\tthis.setState({ showDetailsModal: true });\n\t}\n\n\tcloseDeleteModal = () => {\n\t\tthis.setState({ showDeleteModal: false });\n\t};\n\n\tcloseDetailsModal = () => {\n\t\tthis.setState({ showDetailsModal: false });\n\t}\n\n\tgetIsleFile = async () => {\n\t\tdebug( 'Request ISLE source code from server...' );\n\t\tif ( !this.state.isleFile ) {\n\t\t\tconst data = await this.props.getIsleFile({\n\t\t\t\tlessonName: this.props.title,\n\t\t\t\tnamespaceName: this.props.namespace\n\t\t\t});\n\t\t\tif ( data ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tisleFile: data\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tcopyIsleFileToClipboard = () => {\n\t\tif ( !this.state.isleFile ) {\n\t\t\treturn this.props.addNotification({\n\t\t\t\tmessage: this.props.t('source-file-error'),\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t}\n\t\tconst promise = copyToClipboard( this.state.isleFile );\n\t\tpromise.then( () => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: this.props.t('source-file-copied'),\n\t\t\t\tlevel: 'success'\n\t\t\t});\n\t\t}).catch( err => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: err.message,\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t});\n\t}\n\n\tcopyLinkToClipboard = () => {\n\t\tconst promise = copyToClipboard( this.props.url );\n\t\tpromise.then( () => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: this.props.t('link-copied'),\n\t\t\t\tlevel: 'success'\n\t\t\t});\n\t\t}).catch( err => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: err.message,\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t});\n\t}\n\n\tcopyNameToClipboard = ( event ) => {\n\t\tevent.stopPropagation();\n\t\tconst promise = copyToClipboard( this.props.title );\n\t\tpromise.then( () => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: this.props.t('name-copied'),\n\t\t\t\tlevel: 'success'\n\t\t\t});\n\t\t}).catch( err => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: err.message,\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t});\n\t}\n\n\tshowPreviewImage = () => {\n\t\tthis.img.src = this.props.url+'/preview.jpg';\n\t}\n\n\topenLesson = () => {\n\t\tif ( IS_IOS ) {\n\t\t\twindow.location = this.props.url;\n\t\t} else {\n\t\t\tconst win = window.open( this.props.url, '_blank' );\n\t\t\twin.focus();\n\t\t}\n\t}\n\n\trenderButtonToolbarDate() {\n\t\tconst { t } = this.props;\n\n\t\tlet updated = new Date( this.props.updatedAt );\n\t\tupdated = updated.toLocaleDateString();\n\n\t\tlet date = new Date( this.props.createdAt );\n\t\tdate = date.toLocaleDateString();\n\t\treturn (\n\t\t\t<span className=\"lessons-upload\">\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"toggle_visibility\">{t('created-at')}</Tooltip>}>\n\t\t\t\t<span className=\"lessons-uploaded-image\">\n\t\t\t\t\t<img alt=\"Upload Date Icon\" style={{ stroke: 'white', fill: 'red' }} src={upload} />\n\t\t\t\t</span>\n\t\t\t</OverlayTrigger>\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"toggle_visibility\">{t('last-updated')}{updated}</Tooltip>}>\n\t\t\t\t<span className=\"lessons-uploaded\">{date}</span>\n\t\t\t</OverlayTrigger>\n\t\t</span>\n\t\t);\n\t}\n\n\trenderActivateButton() {\n\t\tconst { lockUntil, t } = this.props;\n\t\tconst activeStyle = this.props.active === true ? 'success' : 'warning';\n\t\tif ( lockUntil ) {\n\t\t\treturn ( <OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"lockUntil_disabled\">\n\t\t\t\t{t('scheduled-at', { date: lockUntil.toLocaleString() })}\n\t\t\t</Tooltip>} >\n\t\t\t\t<Badge\n\t\t\t\t\tclassName=\"lessons-status\"\n\t\t\t\t\tvariant={activeStyle}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\topacity: 0.3\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{this.props.active ? t('active') : t('inactive')}\n\t\t\t\t</Badge>\n\t\t\t</OverlayTrigger> );\n\t\t}\n\t\treturn (\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"toggle_availability\">{this.props.active ? t('disable-lesson') : t('activate-lesson')}</Tooltip>}>\n\t\t\t\t<Badge\n\t\t\t\t\tclassName=\"lessons-status\"\n\t\t\t\t\tonClick={this.toggleLessonState}\n\t\t\t\t\tvariant={activeStyle}\n\t\t\t\t>\n\t\t\t\t\t{this.props.active ? t('active') : t('inactive')}\n\t\t\t\t</Badge>\n\t\t\t</OverlayTrigger>\n\t\t);\n\t}\n\n\trenderButtonToolbar() {\n\t\tconst { t } = this.props;\n\t\tconst publicStyle = this.props.public === true ? 'success' : 'warning';\n\t\treturn ( <ButtonToolbar className=\"lesson-button-toolbar\">\n\t\t\t<ButtonGroup style={{ marginRight: '5px' }} >\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"open_details\">{t('open-details')}</Tooltip>}>\n\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.showDetailsModal} aria-label={t('open-details')} >\n\t\t\t\t\t\t<i className=\"fa fa-cog\"></i>\n\t\t\t\t\t</Button>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"delete_lesson\">{t('delete-lesson')}</Tooltip>}>\n\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.showDeleteModal} aria-label={t('delete-lesson')} >\n\t\t\t\t\t\t<i className=\"fa fa-trash-alt\"></i>\n\t\t\t\t\t</Button>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"isle-file\">{t('copy-file')}</Tooltip>}>\n\t\t\t\t\t<Button variant=\"secondary\" size=\"sm\" onFocus={this.getIsleFile} onMouseEnter={this.getIsleFile}\n\t\t\t\t\t\tonClick={this.copyIsleFileToClipboard} style={{ float: 'right' }}\n\t\t\t\t\t\taria-label={t('copy-file')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className=\"fa fa-clipboard\"></i>\n\t\t\t\t\t</Button>\n\t\t\t\t</OverlayTrigger>\n\t\t\t</ButtonGroup>\n\t\t\t{this.renderActivateButton()}\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"toggle_visibility\">{this.props.public ? t('remove-from-gallery') : t('show-in-gallery') }</Tooltip>}>\n\t\t\t\t<Badge className=\"lessons-status\" onClick={this.toggleLessonVisibility} variant={publicStyle}>{this.props.public ? t(('public')) : t('private')}</Badge>\n\t\t\t</OverlayTrigger>\n\t\t\t{ this.renderButtonToolbarDate() }\n\t\t</ButtonToolbar> );\n\t}\n\n\trenderModals() {\n\t\treturn ( <Fragment>\n\t\t\t<DeleteModal {...this.props} show={this.state.showDeleteModal} close={this.closeDeleteModal} delete={this.delete} />\n\t\t\t{ this.state.showDetailsModal ?\n\t\t\t\t<DetailsModal {...this.props} show={this.state.showDetailsModal} close={this.closeDetailsModal} update={this.update} /> :\n\t\t\t\tnull\n\t\t\t}\n\t\t</Fragment> );\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Card className=\"animated-lesson-card\">\n\t\t\t\t<Card.Body style={{ padding: 0 }}>\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\tfilter: 'grayscale(30%)',\n\t\t\t\t\t\tbackground: COLORS[ this.props.colorIndex ]\n\t\t\t\t\t}} className=\"hovereffect\"\n\t\t\t\t\t\tonMouseOver={this.showPreviewImage}\n\t\t\t\t\t\tonFocus={this.showPreviewImage}\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"img-responsive\"\n\t\t\t\t\t\t\tsrc={background}\n\t\t\t\t\t\t\tref={( div ) => {\n\t\t\t\t\t\t\t\tthis.img = div;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\theight: 180\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonError={addDefaultSrc}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"overlay\"\n\t\t\t\t\t\t\tstyle={{ cursor: 'cell' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<h2>\n\t\t\t\t\t\t\t\t<OverlayTrigger\n\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\toverlay={<Tooltip id=\"copy_name\">\n\t\t\t\t\t\t\t\t\t\t{t('common:copy-name')\n\t\t\t\t\t\t\t\t\t}</Tooltip>}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName=\"lesson-title-button\"\n\t\t\t\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\t\t\t\t\tonClick={this.copyNameToClipboard}\n\t\t\t\t\t\t\t\t\t\tonKeyPress={this.copyNameToClipboard}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{this.props.title}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t{this.props.description !== DEFAULT_DESCRIPTION ?\n\t\t\t\t\t\t\t\t<h3>{this.props.description}</h3> :\n\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tref={( link ) => {\n\t\t\t\t\t\t\t\t\tthis.link = link;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"info\"\n\t\t\t\t\t\t\t\tonClick={this.openLesson} onKeyPress={this.openLesson}\n\t\t\t\t\t\t\t\ttabIndex={0} role=\"button\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('open-lesson')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"copy_link\">{t('common:copy-link')}</Tooltip>}>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\t\tclassName=\"lesson-link-icon fas fa-external-link-alt\"\n\t\t\t\t\t\t\tonClick={this.copyLinkToClipboard}\n\t\t\t\t\t\t\tonKeyPress={this.copyLinkToClipboard}\n\t\t\t\t\t\t\taria-label={t('common:copy-link')}\n\t\t\t\t\t\t></i>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t{this.renderButtonToolbar()}\n\t\t\t\t\t{this.renderModals()}\n\t\t\t\t</Card.Body>\n\t\t\t</Card>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nLesson.propTypes = {\n\tactivateLesson: PropTypes.func.isRequired,\n\tactive: PropTypes.bool.isRequired,\n\taddNotification: PropTypes.func.isRequired,\n\tcolorIndex: PropTypes.number.isRequired,\n\tcreatedAt: PropTypes.any.isRequired,\n\tdeactivateLesson: PropTypes.func.isRequired,\n\tdeleteLesson: PropTypes.func.isRequired,\n\tdescription: PropTypes.string.isRequired,\n\tgetIsleFile: PropTypes.func.isRequired,\n\tgetLessons: PropTypes.func.isRequired,\n\thideLessonInGallery: PropTypes.func.isRequired,\n\tlockUntil: PropTypes.instanceOf( Date ),\n\tnamespace: PropTypes.string.isRequired,\n\tpublic: PropTypes.bool.isRequired,\n\tshowLessonInGallery: PropTypes.func.isRequired,\n\ttitle: PropTypes.string.isRequired,\n\tupdateLesson: PropTypes.func.isRequired,\n\tupdatedAt: PropTypes.any.isRequired,\n\turl: PropTypes.string.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nLesson.defaultProps = {\n\tlockUntil: null\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'lesson', 'common' ] )( Lesson );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Card from 'react-bootstrap/Card';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport copyToClipboard from 'clipboard-copy';\nimport round from '@stdlib/math/base/special/round';\nimport min from '@stdlib/math/base/special/min';\nimport COLORS from 'constants/colors';\nimport formatTime from 'utils/format_time.js';\nimport background from './architecture.jpeg';\nimport './lessons.css';\n\n\n// FUNCTIONS //\n\nfunction addDefaultSrc( event ) {\n\tevent.target.src = background;\n}\n\n\n// VARIABLES //\n\nconst DEFAULT_DESCRIPTION = 'No description supplied.';\n\n\n// MAIN //\n\nclass EnrolledLesson extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {};\n\t}\n\n\tshowPreviewImage = () => {\n\t\tthis.img.src = this.props.url+'/preview.jpg';\n\t}\n\n\topenLesson = () => {\n\t\tconst win = window.open( this.props.url, '_blank' );\n\t\twin.focus();\n\t}\n\n\tcopyLinkToClipboard = () => {\n\t\tconst promise = copyToClipboard( this.props.url );\n\t\tpromise.then( () => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: this.props.t('link-copied'),\n\t\t\t\tlevel: 'success'\n\t\t\t});\n\t\t}).catch( err => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: err.message,\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t});\n\t}\n\n\trenderProgress() {\n\t\tlet progress;\n\t\tif ( this.props.metadata && this.props.metadata.hideProgressBar === true ) {\n\t\t\treturn <div className=\"enrolled-lesson-progress\"></div>;\n\t\t}\n\t\tconst lessonData = this.props.user.lessonData;\n\t\tconst data = lessonData[ this.props._id ];\n\t\tif ( data ) {\n\t\t\tprogress = data.progress;\n\t\t\tprogress *= 100;\n\t\t\tprogress = min( round( progress ), 100.0 );\n\t\t} else {\n\t\t\tprogress = 0;\n\t\t}\n\t\tconst { t } = this.props;\n\t\treturn ( <div className=\"enrolled-lesson-progress\">\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"open_details\">{t('your-progress')}</Tooltip>}>\n\t\t\t\t<ProgressBar variant='success' now={progress} label={`${progress}%`} />\n\t\t\t</OverlayTrigger>\n\t\t</div> );\n\t}\n\n\trenderButtonToolbar() {\n\t\tlet duration;\n\t\tconst lessonData = this.props.user.lessonData;\n\t\tconst data = lessonData[ this.props._id ];\n\t\tif ( data ) {\n\t\t\tduration = data.spentTime;\n\t\t} else {\n\t\t\tduration = 0;\n\t\t}\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<ButtonToolbar style={{\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: 180,\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '36px',\n\t\t\t\tbackground: 'rgba(0, 0, 0, 0.75)'\n\t\t\t}}>\n\t\t\t\t{this.renderProgress()}\n\t\t\t\t<div className=\"enrolled-lesson-time\" style={{ width: '35%', height: '100%' }} >\n\t\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"open_details\">{t('time-format')}</Tooltip>}>\n\t\t\t\t\t\t<span>{t('time-spent')}: {formatTime( duration )}</span>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t</div>\n\t\t\t</ButtonToolbar>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Card className=\"animated-lesson-card\">\n\t\t\t\t<Card.Body style={{ padding: 0 }}>\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\tfilter: 'grayscale(30%)',\n\t\t\t\t\t\tbackground: COLORS[ this.props.colorIndex ]\n\t\t\t\t\t}} onMouseOver={this.showPreviewImage} onFocus={this.showPreviewImage}\n\t\t\t\t\t\tclassName=\"hovereffect\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"img-responsive\"\n\t\t\t\t\t\t\tsrc={background}\n\t\t\t\t\t\t\tref={( div ) => {\n\t\t\t\t\t\t\t\tthis.img = div;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\theight: 180\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonError={addDefaultSrc}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"overlay\" >\n\t\t\t\t\t\t\t<h2>{this.props.title}</h2>\n\t\t\t\t\t\t\t{this.props.description !== DEFAULT_DESCRIPTION ?\n\t\t\t\t\t\t\t\t<h3>{this.props.description}</h3> :\n\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tref={( link ) => {\n\t\t\t\t\t\t\t\t\tthis.link = link;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"info\"\n\t\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\t\t\tonClick={this.openLesson} onKeyPress={this.openLesson}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('open-lesson')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"copy_link\">{t('common:copy-link')}</Tooltip>}>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\t\tclassName=\"lesson-link-icon fas fa-external-link-alt\"\n\t\t\t\t\t\t\tonClick={this.copyLinkToClipboard}\n\t\t\t\t\t\t\tonKeyPress={this.copyLinkToClipboard}\n\t\t\t\t\t\t\taria-label={t('common:copy-link')}\n\t\t\t\t\t\t></i>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t{this.renderButtonToolbar()}\n\t\t\t\t</Card.Body>\n\t\t\t</Card>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nEnrolledLesson.propTypes = {\n\t'_id': PropTypes.string.isRequired,\n\taddNotification: PropTypes.func.isRequired,\n\tcolorIndex: PropTypes.number.isRequired,\n\tdescription: PropTypes.string.isRequired,\n\tmetadata: PropTypes.object,\n\ttitle: PropTypes.string.isRequired,\n\turl: PropTypes.string.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nEnrolledLesson.defaultProps = {\n\tmetadata: null\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'lesson', 'common' ] )( EnrolledLesson );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\n\n\n// MAIN //\n\nconst NoCourseBanner = ( props ) => {\n\tconst { user, t } = props;\n\tlet appendix = null;\n\tif ( user.writeAccess ) {\n\t\tappendix = <span>{t('create-new-one')}<i className=\"fa fa-pencil-alt\"></i>.</span>;\n\t} else {\n\t\tappendix = ' .';\n\t}\n\treturn ( <Jumbotron className=\"lessons-jumbotron\" >\n\t\t<h1>{t('common:no-course-selected')}</h1>\n\t\t<p>{t('no-course-description')}<i className=\"fa fa-align-justify\"></i>{appendix}\n\t\t</p>\n\t</Jumbotron> );\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'lessons_page', 'common' ] )( NoCourseBanner );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\n\n\n// MAIN //\n\nconst NoLessonBanner = ( props ) => {\n\tconst { user, t } = props;\n\tlet description = t('no-lessons');\n\tif ( user.writeAccess ) {\n\t\tdescription += t('upload-from-editor');\n\t}\n\treturn ( <Jumbotron className=\"lessons-jumbotron\">\n\t\t<h1>{t('no-lessons-found')}</h1>\n\t\t<p>{description}</p>\n\t</Jumbotron> );\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'lessons_page', 'common' ] )( NoLessonBanner );\n\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport PropTypes from 'prop-types';\nimport { Responsive, WidthProvider } from 'react-grid-layout';\nimport Button from 'react-bootstrap/Button';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport isArray from '@stdlib/assert/is-array';\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\nimport pluck from '@stdlib/utils/pluck';\nimport floor from '@stdlib/math/base/special/floor';\nimport LessonCreator from 'ev/containers/lesson-creator';\nimport Lesson from './lesson.js';\nimport EnrolledLesson from './enrolled_lesson.js';\nimport NoCourseBanner from './no_course_banner.js';\nimport NoLessonBanner from './no_lesson_banner.js';\nimport sortLessons from 'utils/sort_lessons.js';\nimport isOwner from 'utils/is_owner.js';\nimport 'css/image.css';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport './lessons.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle-dashboard:lessons-page' );\nconst ResponsiveReactGridLayout = WidthProvider( Responsive );\n\n\n// FUNCTIONS //\n\nfunction searchLessons( lessons, phrase ) {\n\tif ( !phrase ) {\n\t\treturn lessons;\n\t}\n\tconst filteredLessons = [];\n\tif ( isArray( lessons ) ) {\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tif (\n\t\t\t\tcontains( lowercase( lessons[ i ].title ), phrase ) ||\n\t\t\t\tcontains( lowercase( lessons[ i ].description ), phrase )\n\t\t\t) {\n\t\t\t\tfilteredLessons.push( lessons[ i ] );\n\t\t\t}\n\t\t}\n\t}\n\treturn filteredLessons;\n}\n\nfunction createLayout( lessons ) {\n\tdebug( 'Create layout...' );\n\tconst elemH = 3.52;\n\tlet layouts = lessons.map( ( e, i ) => {\n\t\treturn {\n\t\t\tlg: { i: `cell-${e.title}-${i}`, x: i*4 % 24, y: floor( i / 6 ) * elemH, w: 4, h: elemH },\n\t\t\tmd: { i: `cell-${e.title}-${i}`, x: i*4 % 20, y: floor( i / 5 ) * elemH, w: 4, h: elemH },\n\t\t\tsm: { i: `cell-${e.title}-${i}`, x: i*4 % 16, y: floor( i / 4 ) * elemH, w: 4, h: elemH },\n\t\t\txs: { i: `cell-${e.title}-${i}`, x: i*4 % 12, y: floor( i / 3 ) * elemH, w: 4, h: elemH },\n\t\t\txxs: { i: `cell-${e.title}-${i}`, x: i*4 % 8, y: floor( i / 2 ) * elemH, w: 4, h: elemH },\n\t\t\ttiny: { i: `cell-${e.title}-${i}`, x: i*4 % 4, y: floor( i / 1 ) * elemH, w: 4, h: elemH }\n\t\t};\n\t});\n\tlayouts = {\n\t\tlg: pluck( layouts, 'lg' ),\n\t\tmd: pluck( layouts, 'md' ),\n\t\tsm: pluck( layouts, 'sm' ),\n\t\txs: pluck( layouts, 'xs' ),\n\t\txxs: pluck( layouts, 'xxs' ),\n\t\ttiny: pluck( layouts, 'tiny' )\n\t};\n\treturn layouts;\n}\n\n\n// MAIN //\n\nclass LessonsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tlet lessons = props.namespace.lessons;\n\t\tif ( !isOwner( props.user, props.namespace ) ) {\n\t\t\tdebug( 'Filter out inactive lessons for enrolled students...' );\n\t\t\tlessons = lessons.filter( e => e.active === true );\n\t\t}\n\t\tthis.state = {\n\t\t\tfilteredLessons: searchLessons( lessons, props.search.phrase ),\n\t\t\tlayouts: createLayout( lessons ),\n\t\t\tunfilteredLessons: lessons,\n\t\t\tsearch: props.search,\n\t\t\tactiveElement: null,\n\t\t\tshowLessonCreator: false\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tif (\n\t\t\tnextProps.namespace.lessons !== prevState.unfilteredLessons ||\n\t\t\tnextProps.search.phrase !== prevState.search.phrase ||\n\t\t\tnextProps.search.direction !== prevState.search.direction ||\n\t\t\tnextProps.search.type !== prevState.search.type\n\t\t) {\n\t\t\tdebug( 'Get derived state...' );\n\t\t\tlet lessons = nextProps.namespace.lessons || [];\n\t\t\tif ( !isOwner( nextProps.user, nextProps.namespace ) ) {\n\t\t\t\tdebug( 'Filter out inactive lessons for enrolled students...' );\n\t\t\t\tlessons = lessons.filter( e => e.active === true );\n\t\t\t}\n\t\t\tconst filteredLessons = searchLessons( lessons, nextProps.search.phrase );\n\t\t\tsortLessons( filteredLessons, nextProps.search );\n\t\t\tconst layouts = createLayout( filteredLessons );\n\t\t\treturn {\n\t\t\t\tfilteredLessons,\n\t\t\t\tlayouts,\n\t\t\t\tunfilteredLessons: nextProps.namespace.lessons,\n\t\t\t\tsearch: nextProps.search\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\tcomponentDidMount() {\n\t\tdebug( 'Component did mount...' );\n\t\tconst course = this.props.namespace;\n\t\tif ( course.title ) {\n\t\t\tdebug( 'Fetch lessons...' );\n\t\t\tthis.props.getLessons( course.title );\n\t\t}\n\t}\n\n\tshouldComponentUpdate( nextProps, nextState ) {\n\t\tif (\n\t\t\tnextProps.search.direction !== this.props.search.direction ||\n\t\t\tnextProps.search.type !== this.props.search.type ||\n\t\t\tnextState.filteredLessons !== this.state.filteredLessons ||\n\t\t\tnextState.showLessonCreator !== this.state.showLessonCreator\n\t\t) {\n\t\t\tdebug( 'Should update page...' );\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpreventOpeningLink = ( event ) => {\n\t\tevent.preventDefault();\n\t}\n\n\trepositionLessons( idx, direction ) {\n\t\tconst unfilteredLessons = this.state.unfilteredLessons.slice();\n\t\tif ( direction === 'left' ) {\n\t\t\tif ( idx > 0 ) {\n\t\t\t\tconst lesson = unfilteredLessons[ idx ];\n\t\t\t\tconst left = unfilteredLessons[ idx - 1 ];\n\t\t\t\tconst tmp = left.pos;\n\t\t\t\tleft.pos = lesson.pos;\n\t\t\t\tlesson.pos = tmp;\n\t\t\t}\n\t\t}\n\t\telse if ( direction === 'right' ) {\n\t\t\tif ( idx < unfilteredLessons.length - 1 ) {\n\t\t\t\tconst lesson = unfilteredLessons[ idx ];\n\t\t\t\tconst right = unfilteredLessons[ idx + 1 ];\n\t\t\t\tconst tmp = right.pos;\n\t\t\t\tright.pos = lesson.pos;\n\t\t\t\tlesson.pos = tmp;\n\t\t\t}\n\t\t}\n\t\tconst filteredLessons = searchLessons( unfilteredLessons, this.props.search.phrase );\n\t\tsortLessons( filteredLessons, this.props.search );\n\t\tconst layouts = createLayout( filteredLessons );\n\t\tthis.setState({\n\t\t\tfilteredLessons,\n\t\t\tlayouts,\n\t\t\tunfilteredLessons\n\t\t}, this.forceUpdate );\n\t\tthis.props.setLessonOrder({\n\t\t\tid: this.props.namespace._id,\n\t\t\tlessons: unfilteredLessons.map( x => x._id )\n\t\t});\n\t}\n\n\thandlePositionChangeFactory = ( idx ) => {\n\t\treturn ( event ) => {\n\t\t\tlet bool = false;\n\t\t\tswitch ( event.code ) {\n\t\t\t\tcase 'ArrowLeft':\n\t\t\t\t\tbool = true;\n\t\t\t\t\tthis.repositionLessons( idx, 'left' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowRight':\n\t\t\t\t\tbool = true;\n\t\t\t\t\tthis.repositionLessons( idx, 'right' );\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( bool ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t};\n\t}\n\n\ttoggleCreator = () => {\n\t\tthis.props.getTemplateLessons();\n\t\tthis.setState({ showLessonCreator: !this.state.showLessonCreator });\n\t}\n\n\thandleCreate = () => {\n\t\tthis.setState({ showLessonCreator: false });\n\t\tconst course = this.props.namespace;\n\t\tif ( course.title ) {\n\t\t\tdebug( 'Fetch lessons...' );\n\t\t\tthis.props.getLessons( course.title );\n\t\t}\n\t}\n\n\trenderLessons() {\n\t\tlet lessons = this.state.filteredLessons;\n\t\tif ( !isOwner( this.props.user, this.props.namespace ) ) {\n\t\t\treturn lessons.map( ( e, i ) => {\n\t\t\t\treturn (<div className=\"lesson-grid-item\" key={`cell-${e.title}-${i}`}>\n\t\t\t\t\t<EnrolledLesson\n\t\t\t\t\t\t{...lessons[ i ]}\n\t\t\t\t\t\taddNotification={this.props.addNotification}\n\t\t\t\t\t\tuser={this.props.user}\n\t\t\t\t\t/>\n\t\t\t\t</div>);\n\t\t\t});\n\t\t}\n\t\treturn (\n\t\t\tlessons.map( ( e, i ) => {\n\t\t\t\tconst lesson = <Lesson\n\t\t\t\t\t{...lessons[ i ]}\n\t\t\t\t\taddNotification={this.props.addNotification}\n\t\t\t\t\tdeleteLesson={this.props.deleteLesson}\n\t\t\t\t\tupdateLesson={this.props.updateLesson}\n\t\t\t\t\tdeactivateLesson={this.props.deactivateLesson}\n\t\t\t\t\tactivateLesson={this.props.activateLesson}\n\t\t\t\t\tshowLessonInGallery={this.props.showLessonInGallery}\n\t\t\t\t\thideLessonInGallery={this.props.hideLessonInGallery}\n\t\t\t\t\tgetLessons={this.props.getLessons}\n\t\t\t\t\tgetIsleFile={this.props.getIsleFile}\n\t\t\t\t\tuser={this.props.user}\n\t\t\t\t/>;\n\t\t\t\tif ( this.props.search.type === 'sequentially' ) {\n\t\t\t\t\treturn ( <div\n\t\t\t\t\t\tclassName=\"lesson-grid-item\"\n\t\t\t\t\t\tkey={`cell-${e.title}-${i}`}\n\t\t\t\t\t\ttabIndex={0} role=\"button\"\n\t\t\t\t\t\tref={input => {\n\t\t\t\t\t\t\tif ( input && this.state.activeElement === e.title ) {\n\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn input;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonKeyDown={this.handlePositionChangeFactory( i )}\n\t\t\t\t\t\tonFocus={() => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tactiveElement: e.title\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{lesson}\n\t\t\t\t\t</div> );\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"lesson-grid-item\" key={`cell-${e.title}-${i}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{lesson}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t}\n\n\trender() {\n\t\tif ( !this.props.namespace.title ) {\n\t\t\treturn <NoCourseBanner user={this.props.user} />;\n\t\t}\n\t\tlet lessons = this.state.filteredLessons;\n\t\tif ( isArray( lessons ) ) {\n\t\t\tconst templateButton = <OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"create-from-template-tooltip\">{this.props.t('create-from-template')}</Tooltip>}>\n\t\t\t\t<Button className=\"create-from-template-button\" onClick={this.toggleCreator} >\n\t\t\t\t\t<i className=\"fas fa-plus\" />\n\t\t\t\t</Button>\n\t\t\t</OverlayTrigger>;\n\t\t\tif ( lessons.length === 0 ) {\n\t\t\t\treturn ( <Fragment>\n\t\t\t\t\t<NoLessonBanner user={this.props.user} />\n\t\t\t\t\t{templateButton}\n\t\t\t\t\t{this.state.showLessonCreator ? <LessonCreator\n\t\t\t\t\t\tonHide={this.toggleCreator}\n\t\t\t\t\t\tonCreate={this.handleCreate}\n\t\t\t\t\t\tnamespace={this.props.namespace}\n\t\t\t\t\t/> : null}\n\t\t\t\t</Fragment> );\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<div className=\"lessons-grid-container\">\n\t\t\t\t\t\t<ResponsiveReactGridLayout\n\t\t\t\t\t\t\tlayouts={this.state.layouts}\n\t\t\t\t\t\t\tbreakpoints={{ lg: 1800, md: 1550, sm: 1200, xs: 900, xxs: 400, tiny: 0 }}\n\t\t\t\t\t\t\tcols={{ lg: 24, md: 20, sm: 16, xs: 12, xxs: 8, tiny: 4 }}\n\t\t\t\t\t\t\tcontainerPadding={[10, 10]}\n\t\t\t\t\t\t\tisResizable={false}\n\t\t\t\t\t\t\tisBounded={true}\n\t\t\t\t\t\t\tisDraggable={false}\n\t\t\t\t\t\t\trowHeight={isOwner( this.props.user, this.props.namespace ) ? 54.5 : 55}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.renderLessons()}\n\t\t\t\t\t\t</ResponsiveReactGridLayout>\n\t\t\t\t\t\t{templateButton}\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.state.showLessonCreator ? <LessonCreator\n\t\t\t\t\t\tonHide={this.toggleCreator}\n\t\t\t\t\t\tonCreate={this.handleCreate}\n\t\t\t\t\t\tnamespace={this.props.namespace}\n\t\t\t\t\t/> : null}\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\t}\n}\n\n\n// PROPERTIES //\n\nLessonsPage.propTypes = {\n\tactivateLesson: PropTypes.func.isRequired,\n\taddNotification: PropTypes.func.isRequired,\n\tdeactivateLesson: PropTypes.func.isRequired,\n\tdeleteLesson: PropTypes.func.isRequired,\n\tgetIsleFile: PropTypes.func.isRequired,\n\tgetLessons: PropTypes.func.isRequired,\n\tgetTemplateLessons: PropTypes.func.isRequired,\n\thideLessonInGallery: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\tsearch: PropTypes.object.isRequired,\n\tsetLessonOrder: PropTypes.func.isRequired,\n\tshowLessonInGallery: PropTypes.func.isRequired,\n\tupdateLesson: PropTypes.func.isRequired,\n\turl: PropTypes.string,\n\tuser: PropTypes.object.isRequired\n};\n\nLessonsPage.defaultProps = {\n\turl: null\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'lessons_page', 'common' ] )( LessonsPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport LessonsPage from 'components/lessons-page';\nimport { setLessonOrderInjector } from 'actions/namespace';\nimport { activateLessonInjector, deactivateLessonInjector, deleteLessonInjector, getIsleFileInjector, getLessonsInjector, getTemplateLessonsInjector,\n\tshowLessonInGalleryInjector, hideLessonInGalleryInjector, updateLessonInjector } from 'actions/lesson';\nimport { addNotificationInjector } from 'actions/notification';\n\n\n// EXPORTS //\n\nconst VisibleLessonsPage = connect( mapStateToProps, mapDispatchToProps )( LessonsPage );\n\nfunction mapStateToProps( state ) {\n\treturn {\n\t\tsearch: state.search,\n\t\tuser: state.user,\n\t\tnamespace: state.namespace\n\t};\n}\n\nfunction mapDispatchToProps( dispatch ) {\n\treturn {\n\t\taddNotification: addNotificationInjector( dispatch ),\n\t\tshowLessonInGallery: showLessonInGalleryInjector( dispatch ),\n\t\thideLessonInGallery: hideLessonInGalleryInjector( dispatch ),\n\t\tactivateLesson: activateLessonInjector( dispatch ),\n\t\tdeactivateLesson: deactivateLessonInjector( dispatch ),\n\t\tupdateLesson: updateLessonInjector( dispatch ),\n\t\tdeleteLesson: deleteLessonInjector( dispatch ),\n\t\tgetLessons: getLessonsInjector( dispatch ),\n\t\tgetTemplateLessons: getTemplateLessonsInjector( dispatch ),\n\t\tgetIsleFile: getIsleFileInjector( dispatch ),\n\t\tsetLessonOrder: setLessonOrderInjector( dispatch )\n\t};\n}\n\nexport default VisibleLessonsPage;\n","/*\n* Adapted from:\n*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n* 1.3.8\n* 2018-03-22 14:03:47\n*\n* By Eli Grey, https://eligrey.com\n* License: MIT\n*   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n*\n* @source http://purl.eligrey.com/github/FileSaver.js/blob/master/src/FileSaver.js\n*/\n\n// VARIABLES //\n\nconst RE_AUTO_BOM = /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i;\nconst ARBITRARY_REVOKE_TIMEOUT = 1000 * 40; // Time in ms\n\n\n// FUNCTIONS //\n\nfunction click(node) {\n\tconst event = new MouseEvent( 'click' );\n\tnode.dispatchEvent( event );\n}\n\nfunction throwOutside( ex ) {\n\tsetImmediate(function throwEx() {\n\t\tthrow ex;\n\t}, 0 );\n}\n\nfunction autoBOM( blob ) {\n\t// Prepend BOM for UTF-8 XML and text/* types (including HTML). Note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\tif ( RE_AUTO_BOM.test( blob.type ) ) {\n\t\treturn new Blob([ String.fromCharCode( 0xFEFF ), blob ], {\n\t\t\ttype: blob.type\n\t\t});\n\t}\n\treturn blob;\n}\n\nfunction dispatch( filesaver, eventTypes, event ) {\n\teventTypes = [].concat( eventTypes );\n\tlet i = eventTypes.length;\n\twhile ( i-- ) {\n\t\tlet listener = filesaver[ 'on' + eventTypes[i] ];\n\t\tif ( typeof listener === 'function' ) {\n\t\t\ttry {\n\t\t\t\tlistener.call( filesaver, event || filesaver );\n\t\t\t} catch ( ex ) {\n\t\t\t\tthrowOutside( ex );\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n// MAIN //\n\nfunction saveFactory( view ) {\n\tif (\n\t\ttypeof view === 'undefined' ||\n\t\ttypeof navigator !== 'undefined' &&\n\t\t/MSIE [1-9]\\./.test( navigator.userAgent )\n\t) {\n\t\treturn;\n\t}\n\tconst doc = view.document;\n\n\t// Only get URL when necessary in case Blob.js hasn't overridden it yet:\n\tfunction getURL() {\n\t\treturn view.URL || view.webkitURL || view;\n\t}\n\tfunction revoke( file ) {\n\t\tfunction revoker() {\n\t\t\tif ( typeof file === 'string' ) { // File is an object URL...\n\t\t\t\tgetURL().revokeObjectURL(file);\n\t\t\t} else { // File is a File...\n\t\t\t\tfile.remove();\n\t\t\t}\n\t\t}\n\t\tsetTimeout( revoker, ARBITRARY_REVOKE_TIMEOUT );\n\t}\n\n\tconst saveLink = doc.createElementNS( 'http://www.w3.org/1999/xhtml', 'a' );\n\tconst canUseSaveLink = 'download' in saveLink;\n\tconst isSafari = /constructor/i.test( view.HTMLElement ) || view.safari;\n\tconst isChromeIOS =/CriOS\\/[\\d]+/.test( navigator.userAgent );\n\tconst setImmediate = view.setImmediate || view.setTimeout;\n\tconst forceSavableType = 'application/octet-stream';\n\n\tfunction FileSaver(blob, name, noAutoBOM ) {\n\t\tif ( !noAutoBOM ) {\n\t\t\tblob = autoBOM(blob);\n\t\t}\n\t\t// First try a.download, then web filesystem, then object URLs\n\t\tconst self = this;\n\t\tconst type = blob.type;\n\t\tconst force = type === forceSavableType;\n\t\tlet objectURL;\n\t\tfunction dispatchAll() {\n\t\t\tdispatch( self, 'writestart progress write writeend'.split(' ') );\n\t\t}\n\t\t// On any filesystem errors, revert to saving with object URLs:\n\t\tfunction fsError() {\n\t\t\tif ((isChromeIOS || (force && isSafari)) && view.FileReader) {\n\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\tconst reader = new FileReader();\n\t\t\t\treader.onloadend = function onLoadEnd() {\n\t\t\t\t\tlet url = isChromeIOS ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\tconst popup = view.open(url, '_blank');\n\t\t\t\t\tif ( !popup ) {\n\t\t\t\t\t\tview.location.href = url;\n\t\t\t\t\t}\n\t\t\t\t\turl = void 0; // Release reference before dispatching...\n\t\t\t\t\tself.readyState = self.DONE;\n\t\t\t\t\tdispatchAll();\n\t\t\t\t};\n\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\tself.readyState = self.INIT;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Don't create more object URLs than needed:\n\t\t\tif ( !objectURL ) {\n\t\t\t\tobjectURL = getURL().createObjectURL( blob );\n\t\t\t}\n\t\t\tif ( force ) {\n\t\t\t\tview.location.href = objectURL;\n\t\t\t} else {\n\t\t\t\tconst opened = view.open( objectURL, '_blank' );\n\t\t\t\tif ( !opened ) {\n\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\tview.location.href = objectURL;\n\t\t\t\t}\n\t\t\t}\n\t\t\tself.readyState = self.DONE;\n\t\t\tdispatchAll();\n\t\t\trevoke( objectURL );\n\t\t}\n\t\tself.readyState = self.INIT;\n\n\t\tif ( canUseSaveLink ) {\n\t\t\tobjectURL = getURL().createObjectURL(blob);\n\t\t\tsetImmediate(function save() {\n\t\t\t\tsaveLink.href = objectURL;\n\t\t\t\tsaveLink.download = name;\n\t\t\t\tclick( saveLink );\n\t\t\t\tdispatchAll();\n\t\t\t\trevoke( objectURL );\n\t\t\t\tself.readyState = self.DONE;\n\t\t\t}, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tfsError();\n\t}\n\tconst proto = FileSaver.prototype;\n\tfunction saveAs( blob, name, noAutoBOM ) {\n\t\treturn new FileSaver( blob, name || blob.name || 'download', noAutoBOM );\n\t}\n\n\t// IE 10+ (native saveAs)\n\tif ( typeof navigator !== 'undefined' && navigator.msSaveOrOpenBlob ) {\n\t\treturn function saveAs( blob, name, noAutoBOM ) {\n\t\t\tname = name || blob.name || 'download';\n\t\t\tif ( !noAutoBOM ) {\n\t\t\t\tblob = autoBOM( blob );\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tproto.abort = function abort() {};\n\tproto.readyState = proto.INIT = 0;\n\tproto.WRITING = 1;\n\tproto.DONE = 2;\n\n\tproto.error = null;\n\tproto.onwritestart = null;\n\tproto.onprogress = null;\n\tproto.onwrite = null;\n\tproto.onabort = null;\n\tproto.onerror = null;\n\tproto.onwriteend = null;\n\n\treturn saveAs;\n}\n\nconst saveAs = saveFactory(\n\ttypeof self !== 'undefined' && self ||\n\ttypeof window !== 'undefined' && window ||\n\tthis.content\n);\n\n\n// EXPORTS //\n\nexport default saveAs;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport floor from '@stdlib/math/base/special/floor';\n\n\n// MAIN //\n\nconst formatTime = ( time, opts = { hours: true, minutes: true, seconds: true }) => {\n\ttime = time / 1000;\n\tconst hours = floor( time / ( 60*60 ) );\n\ttime = time % ( 60*60 );\n\tlet minutes = floor( time / 60 );\n\tif ( minutes < 10 ) {\n\t\tminutes = '0'+minutes;\n\t}\n\ttime = time % 60;\n\tlet seconds = floor( time );\n\tif ( seconds < 10 ) {\n\t\tseconds = '0'+seconds;\n\t}\n\tlet out = '';\n\tif ( opts.hours ) {\n\t\tout += hours;\n\t}\n\tif ( opts.minutes ) {\n\t\tif ( out ) {\n\t\t\tout += ':';\n\t\t}\n\t\tout += minutes;\n\t}\n\tif ( opts.seconds ) {\n\t\tif ( out ) {\n\t\t\tout += ':';\n\t\t}\n\t\tout += seconds;\n\t}\n\treturn out;\n};\n\n\n// EXPORTS //\n\nexport default formatTime;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport isObject from '@stdlib/assert/is-object';\n\n\n// MAIN //\n\nfunction isOwner( user, namespace ) {\n\tlet bool = false;\n\tfor ( let i = 0; i < namespace.owners.length; i++ ) {\n\t\tconst owner = namespace.owners[ i ];\n\t\tif ( isObject( owner ) ) {\n\t\t\tif ( owner.email === user.email ) {\n\t\t\t\tbool = true;\n\t\t\t}\n\t\t} else if ( owner === user.id ) {\n\t\t\t// Case: Owners array is not yet populated but contains only string IDs:\n\t\t\tbool = true;\n\t\t}\n\t}\n\treturn bool;\n}\n\n\n// EXPORTS //\n\nexport default isOwner;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// VARIABLES //\n\nconst OPTS = {\n\tnumeric: true // Use numeric collation such that \"1\" < \"2\" < \"10\"...\n};\n\n\n// MAIN //\n\nfunction sortLessons( lessons, search ) {\n\tconst { type, direction } = search;\n\tif ( type === 'sequentially' ) {\n\t\tif ( direction === 'ascending' ) {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\treturn a.pos - b.pos;\n\t\t\t});\n\t\t} else {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\treturn b.pos - a.pos;\n\t\t\t});\n\t\t}\n\t}\n\telse if ( type === 'alphabetically' ) {\n\t\tif ( direction === 'ascending' ) {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\tconst x = a.namespace + a.title;\n\t\t\t\tconst y = b.namespace + b.title;\n\t\t\t\treturn x.localeCompare( y, void 0, OPTS );\n\t\t\t});\n\t\t} else {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\tconst x = a.namespace + a.title;\n\t\t\t\tconst y = b.namespace + b.title;\n\t\t\t\treturn y.localeCompare( x, void 0, OPTS );\n\t\t\t});\n\t\t}\n\t}\n\telse if ( type === 'created_at' ) {\n\t\tif ( direction === 'ascending' ) {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\treturn a.createdAt.localeCompare( b.createdAt, void 0, OPTS );\n\t\t\t});\n\t\t} else {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\treturn b.createdAt.localeCompare( a.createdAt, void 0, OPTS );\n\t\t\t});\n\t\t}\n\t}\n\telse if ( type === 'updated_at' ) {\n\t\tif ( direction === 'ascending' ) {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\treturn a.updatedAt.localeCompare( b.updatedAt, void 0, OPTS );\n\t\t\t});\n\t\t} else {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\treturn b.updatedAt.localeCompare( a.updatedAt, void 0, OPTS );\n\t\t\t});\n\t\t}\n\t}\n}\n\n\n// EXPORTS //\n\nexport default sortLessons;\n","export default __webpack_public_path__ + \"static/media/architecture.c9df90fc.jpeg\";"],"sourceRoot":""}