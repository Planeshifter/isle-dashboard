{"version":3,"sources":["../node_modules/@isle-project/components/image/index.js","../node_modules/@isle-project/components/node_modules/react-bootstrap/esm/ProgressBar.js","../node_modules/@isle-project/components/node_modules/react-bootstrap/esm/ElementChildren.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/string/uncapitalize/lib/index.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/nlp/tokenize/lib/index.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/assert/is-empty-string/lib/primitive.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/assert/is-empty-string/lib/object.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/string/remove-last/lib/index.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/string/uncapitalize/lib/uncapitalize.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/nlp/tokenize/lib/tokenize.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/assert/is-empty-string/lib/index.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/assert/is-empty-string/lib/main.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/string/remove-last/lib/remove_last.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/utils/tabulate/lib/index.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/utils/tabulate/lib/tabulate.js","../node_modules/react-innertext/index.js","../node_modules/@isle-project/components/internal/text-clustering/worker.js","../node_modules/@isle-project/components/internal/delete-modal/index.js","../node_modules/@isle-project/utils/is-user-in-cohort/index.js","../node_modules/@isle-project/components/chat-button/index.js","../node_modules/@isle-project/components/video-chat-button/index.js","../node_modules/@isle-project/components/internal/text-clustering/cluster_modal.js","../node_modules/@isle-project/components/internal/text-clustering/index.js","../node_modules/@isle-project/components/switch/main.js","../node_modules/@isle-project/components/switch/index.js","../node_modules/@isle-project/components/word-cloud/index.js","../node_modules/@isle-project/components/internal/response-visualizer/search.js","../node_modules/@isle-project/components/internal/response-visualizer/single_action_modal.js","../node_modules/@isle-project/components/range-picker/index.js","../node_modules/@isle-project/components/internal/response-visualizer/fullscreen_header.js","../node_modules/@isle-project/components/internal/response-visualizer/fullscreen_action_display.js","../node_modules/@isle-project/components/internal/response-visualizer/extract_value.js","../node_modules/@isle-project/components/internal/response-visualizer/main.js","../node_modules/@isle-project/components/input/checkbox/index.js","../node_modules/@isle-project/components/input/checkbox/main.js"],"names":["Image","Loadable","getPercentage","now","min","max","percentage","Math","round","renderProgressBar","_ref","ref","_classNames","label","srOnly","striped","animated","className","style","variant","bsPrefix","props","_objectWithoutPropertiesLoose","React","createElement","_extends","role","classNames","width","ProgressBar","forwardRef","_ref2","isChild","useBootstrapPrefix","children","wrapperProps","func","index","Children","map","child","isValidElement","cloneElement","displayName","defaultProps","uncapitalize","module","exports","tokenize","value","isString","isObject","valueOf","removeLast","isPrimitive","str","TypeError","charAt","toLowerCase","slice","isBoolean","hasOwnProp","ABBRS","EMOJIS","CONTRACT","REGEXP_PREFIXES","REGEXP_SUFFIXES","extend","arr","ext","i","length","push","tokenizeSubstring","substr","match","done","res","prefixes","suffixes","split","keepWhitespace","subtkns","substrs","tokens","cache","arguments","setReadOnly","isEmptyString","substring","tabulate","isCollection","indexOf","collection","count","tmp","len","out","v","j","reduceJsxToString","previous","current","innerText","jsx","toString","Array","isArray","reduce","Object","prototype","hasOwnProperty","call","hasProps","default","Worker","DeleteModal","isUserInCohort","cohort","userEmail","members","email","ChatButton","addResources","VideoChatButton","Plot","createPlotlyComponent","Plotly","CLUSTER_LABELS","ClusterModal","event","modelIndex","parseInt","target","state","setState","changeClusterCount","selectedCluster","this","clusterCoordinates","nClusters","clusterSizes","data","x","y","text","t","marker","size","color","COLORS","mode","hoverinfo","type","height","window","innerHeight","layout","hovermode","useResizeHandler","zIndex","config","displayModeBar","onClick","point","points","pointIndex","onPointClick","docDisplay","isNumber","padding","marginLeft","overflowY","ListGroup","representativeDocs","idx","Item","key","Modal","show","onHide","dialogClassName","Header","closeButton","Title","as","title","onChange","handleClusterCountChange","onBlur","Body","minHeight","Row","Col","md","maxWidth","renderClusterPlot","Footer","Button","Component","debug","logger","CLUSTER_SIZES","TextClustering","worker","onmessage","onClusters","clusters","_buffer","coordinates","representative","docs","texts","postMessage","isClustering","showClusterModal","terminate","actionLabel","ButtonGroup","clusterDocuments","disabled","toggleClusterModal","cluster","Switch","active","tooltip","tooltipPos","useState","pos","setPos","mappedChildren","elem","display","handleClick","newPos","fullClassName","content","tabIndex","onKeyPress","placement","WordCloud","Search","extended","search","setSearch","caseSensitive","setCaseSensitive","exact","setExact","useEffect","FormGroup","innerWidth","marginBottom","InputGroup","FormControl","placeholder","charCode","float","margin","tooltipPlacement","inline","legend","fontSize","SingleActionModal","backdropClassName","boxShadow","showExtended","modalContent","name","absoluteTime","date","Date","toLocaleDateString","toLocaleTimeString","maxHeight","RangePicker","FullscreenHeader","origin","select","cohorts","backgroundColor","onCohortChange","selectedCohort","nActions","actions","paddingBottom","componentID","onPeriodChange","RE_NEWLINE","wordWrap","n","floor","RE_LINE_BREAKS","RegExp","replace","generateValueLabel","levels","rows","cols","forEach","a","b","rv","cv","FullscreenActionDisplay","isStrictEqual","filtered","searchwords","newFilter","expr","action","actionValue","test","String","lines","noLines","showModal","seenEmails","Set","handleMultipleResponses","sort","filter","has","add","chatName","session","context","_","opened","inviteToChat","canLeave","closeChatForAll","inviteToVideo","highlighter","src","searchWords","autoEscape","textToHighlight","col","rgba","background","border","ListGroupItem","textAlign","userProgress","for","user","subject","videoChatInviteFactory","buttonVariant","buttonLabel","chatInviteFactory","showModalFactory","aria-label","deleteFactory","halfWidth","values","midpoints","indices","getActions","JSON","parse","error_y","array","visible","orientation","fit","editable","xaxis","showticklabels","showline","yaxis","removeQuestionWords","stopwords","question","rotate","triggerRender","d","contains","searchFilter","marginTop","defaultValue","left","bottom","position","maxLength","leftMargin","counts","table","maxVal","NINF","tabulateValues","val","categoryorder","categoryarray","l","right","labels","concat","paths","keys","objectKeys","source","elems","node","pad","thickness","line","link","freqs","toFixed","nRows","nCols","ndarray","k","set","Number","get","c","r","row","plot","Alert","renderWordCloud","renderBarchart","renderHistogram","renderTable","renderNestedTable","renderSankeyDiagram","renderRangePlot","lowercase","Trans","i18nKey","ns","toggleActions","initialIndex","itemRenderer","renderListGroupItem","pageSize","minSize","itemSizeGetter","Card","body","renderPlot","Badge","toggleExtended","hideModal","dataType","nextProps","prevState","newState","absdiff","contextType","SessionContext","extractValue","json","USER_FEEDBACK_FORM","copy","isObjectLike","comments","noUnderstanding","needsExplanation","noLogic","MULTIPLE_CHOICE_MATRIX_SUBMISSION","MATCH_LIST_SUBMISSION","extractSubstr","lastIndexOf","usersWithFocus","userFocuses","usersWithActions","id","ResponseVisualizer","log","RESPONSE_VISUALIZER_TOGGLE","showActions","addSessionActions","period","RESPONSE_VISUALIZER_EXTENDED","newPeriod","selectCohort","from","to","unshift","emailHash","success","nSuccess","danger","nDanger","info","nInfo","socketActions","users","userList","update","UPDATED_VISUALIZER","showDeleteModal","selectedAction","removeSessionElementFromDB","sessiondataID","err","closeDeleteModal","registerInSession","unsubscribe","subscribe","RETRIEVED_USER_ACTIONS","SELECTED_COHORT","MEMBER_ACTION","FOCUS_ELEMENT","LOSE_FOCUS_ELEMENT","forceUpdate","pushSessionAction","responseVisualizers","responseVisualizerIds","noSessionRegistration","ids","debouncedInitializeProgress","document","getElementById","compareDocumentPosition","nUsers","activeCohortMembers","focusUsers","Popover","Content","join","optionalProps","owner","successRate","dangerRate","infoRate","focusRate","renderFullscreenModal","vertical","verticalAlign","showID","buttonStyle","marginRight","pointerEvents","trigger","overlay","renderTooltip","onDelete","deleteSelectedAction","onClose","withTranslation","CheckboxInput","newValue","bind","global","lesson","checked","updateValue","globalVal","input","handleChange","handleSpanChange","onSpanChange","noop","isEmptyObject","Input","propTypes","PropTypes","string","bool","oneOfType","oneOf","object"],"mappings":"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","file":"static/js/82.df26e396.chunk.js","sourcesContent":["// MODULES //\n\nimport Loadable from '@isle-project/components/internal/loadable';\n\n\n// MAIN //\n\nconst Image = Loadable( () => import( /* webpackChunkName: \"Image\" */ './main.js' ) );\n\n\n// EXPORTS //\n\nexport default Image;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React, { cloneElement } from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { map } from './ElementChildren';\nvar ROUND_PRECISION = 1000;\n/**\n * Validate that children, if any, are instances of `<ProgressBar>`.\n */\n\nfunction onlyProgressBar(props, propName, componentName) {\n  var children = props[propName];\n\n  if (!children) {\n    return null;\n  }\n\n  var error = null;\n  React.Children.forEach(children, function (child) {\n    if (error) {\n      return;\n    }\n    /**\n     * Compare types in a way that works with libraries that patch and proxy\n     * components like react-hot-loader.\n     *\n     * see https://github.com/gaearon/react-hot-loader#checking-element-types\n     */\n\n\n    var element = /*#__PURE__*/React.createElement(ProgressBar, null);\n    if (child.type === element.type) return;\n    var childType = child.type;\n    var childIdentifier = React.isValidElement(child) ? childType.displayName || childType.name || childType : child;\n    error = new Error(\"Children of \" + componentName + \" can contain only ProgressBar \" + (\"components. Found \" + childIdentifier + \".\"));\n  });\n  return error;\n}\n\nvar defaultProps = {\n  min: 0,\n  max: 100,\n  animated: false,\n  isChild: false,\n  srOnly: false,\n  striped: false\n};\n\nfunction getPercentage(now, min, max) {\n  var percentage = (now - min) / (max - min) * 100;\n  return Math.round(percentage * ROUND_PRECISION) / ROUND_PRECISION;\n}\n\nfunction renderProgressBar(_ref, ref) {\n  var _classNames;\n\n  var min = _ref.min,\n      now = _ref.now,\n      max = _ref.max,\n      label = _ref.label,\n      srOnly = _ref.srOnly,\n      striped = _ref.striped,\n      animated = _ref.animated,\n      className = _ref.className,\n      style = _ref.style,\n      variant = _ref.variant,\n      bsPrefix = _ref.bsPrefix,\n      props = _objectWithoutPropertiesLoose(_ref, [\"min\", \"now\", \"max\", \"label\", \"srOnly\", \"striped\", \"animated\", \"className\", \"style\", \"variant\", \"bsPrefix\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref\n  }, props, {\n    role: \"progressbar\",\n    className: classNames(className, bsPrefix + \"-bar\", (_classNames = {}, _classNames[\"bg-\" + variant] = variant, _classNames[bsPrefix + \"-bar-animated\"] = animated, _classNames[bsPrefix + \"-bar-striped\"] = animated || striped, _classNames)),\n    style: _extends({\n      width: getPercentage(now, min, max) + \"%\"\n    }, style),\n    \"aria-valuenow\": now,\n    \"aria-valuemin\": min,\n    \"aria-valuemax\": max\n  }), srOnly ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sr-only\"\n  }, label) : label);\n}\n\nvar ProgressBar = React.forwardRef(function (_ref2, ref) {\n  var isChild = _ref2.isChild,\n      props = _objectWithoutPropertiesLoose(_ref2, [\"isChild\"]);\n\n  props.bsPrefix = useBootstrapPrefix(props.bsPrefix, 'progress');\n\n  if (isChild) {\n    return renderProgressBar(props, ref);\n  }\n\n  var min = props.min,\n      now = props.now,\n      max = props.max,\n      label = props.label,\n      srOnly = props.srOnly,\n      striped = props.striped,\n      animated = props.animated,\n      bsPrefix = props.bsPrefix,\n      variant = props.variant,\n      className = props.className,\n      children = props.children,\n      wrapperProps = _objectWithoutPropertiesLoose(props, [\"min\", \"now\", \"max\", \"label\", \"srOnly\", \"striped\", \"animated\", \"bsPrefix\", \"variant\", \"className\", \"children\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref\n  }, wrapperProps, {\n    className: classNames(className, bsPrefix)\n  }), children ? map(children, function (child) {\n    return cloneElement(child, {\n      isChild: true\n    });\n  }) : renderProgressBar({\n    min: min,\n    now: now,\n    max: max,\n    label: label,\n    srOnly: srOnly,\n    striped: striped,\n    animated: animated,\n    bsPrefix: bsPrefix,\n    variant: variant\n  }, ref));\n});\nProgressBar.displayName = 'ProgressBar';\nProgressBar.defaultProps = defaultProps;\nexport default ProgressBar;","import React from 'react';\n/**\n * Iterates through children that are typically specified as `props.children`,\n * but only maps over children that are \"valid elements\".\n *\n * The mapFunction provided index will be normalised to the components mapped,\n * so an invalid component would not increase the index.\n *\n */\n\nfunction map(children, func) {\n  var index = 0;\n  return React.Children.map(children, function (child) {\n    return React.isValidElement(child) ? func(child, index++) : child;\n  });\n}\n/**\n * Iterates through children that are \"valid elements\".\n *\n * The provided forEachFunc(child, index) will be called for each\n * leaf child with the index reflecting the position relative to \"valid components\".\n */\n\n\nfunction forEach(children, func) {\n  var index = 0;\n  React.Children.forEach(children, function (child) {\n    if (React.isValidElement(child)) func(child, index++);\n  });\n}\n\nexport { map, forEach };","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Uncapitalize the first character of a string.\n*\n* @module @stdlib/string/uncapitalize\n*\n* @example\n* var uncapitalize = require( '@stdlib/string/uncapitalize' );\n*\n* var out = uncapitalize( 'Last man standing' );\n* // returns 'last man standing'\n*\n* out = uncapitalize( 'Hidden Treasures' );\n* // returns 'hidden Treasures';\n*/\n// MODULES //\n\nvar uncapitalize = require('./uncapitalize.js'); // EXPORTS //\n\n\nmodule.exports = uncapitalize;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Tokenize a string.\n*\n* @module @stdlib/nlp/tokenize\n*\n* @example\n* var tokenize = require( '@stdlib/nlp/tokenize' );\n*\n* var str = 'Hello Mrs. Maple, could you call me back?';\n* var out = tokenize( str );\n* // returns [ 'Hello', 'Mrs.', 'Maple', ',', 'could', 'you', 'call', 'me', 'back', '?' ]\n*\n* str = 'Hello World!';\n* out = tokenize( str );\n* // returns [ 'Hello', 'World', '!' ]\n*/\n// MODULES //\n\nvar tokenize = require('./tokenize.js'); // EXPORTS //\n\n\nmodule.exports = tokenize;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MAIN //\n\n/**\n* Tests if a value is an empty string primitive.\n*\n* @param {*} value - value to test\n* @returns {boolean} boolean indicating whether value is an empty string primitive\n*\n* @example\n* var bool = isEmptyString( '' );\n* // returns true\n*\n* @example\n* var bool = isEmptyString( 'beep' );\n* // returns false\n*\n* @example\n* var bool = isEmptyString( [] );\n* // returns false\n*/\n\nfunction isEmptyString(value) {\n  return value === '';\n} // EXPORTS //\n\n\nmodule.exports = isEmptyString;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar isString = require('@stdlib/assert/is-string').isObject; // MAIN //\n\n/**\n* Tests if a value is an empty string object.\n*\n* @param {*} value - value to test\n* @returns {boolean} boolean indicating whether value is an empty string object\n*\n* @example\n* var bool = isEmptyString( '' );\n* // returns false\n*\n* @example\n* var bool = isEmptyString( new String( '' ) );\n* // returns true\n*\n* @example\n* var bool = isEmptyString( [] );\n* // returns false\n*/\n\n\nfunction isEmptyString(value) {\n  return isString(value) && value.valueOf() === '';\n} // EXPORTS //\n\n\nmodule.exports = isEmptyString;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Remove the last character of a string.\n*\n* @module @stdlib/string/remove-last\n*\n* @example\n* var removeLast = require( '@stdlib/string/remove-last' );\n*\n* var out = removeLast( 'last man standing' );\n* // returns 'last man standin'\n*\n* out = removeLast( 'Hidden Treasures' );\n* // returns 'Hidden Treasure';\n*/\n// MODULES //\n\nvar removeLast = require('./remove_last.js'); // EXPORTS //\n\n\nmodule.exports = removeLast;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar isString = require('@stdlib/assert/is-string').isPrimitive; // MAIN //\n\n/**\n* Uncapitalizes the first character of a string.\n*\n* @param {string} str - input string\n* @throws {TypeError} must provide a string primitive\n* @returns {string} input string with first character converted to lowercase\n*\n* @example\n* var out = uncapitalize( 'Last man standing' );\n* // returns 'last man standing'\n*\n* @example\n* var out = uncapitalize( 'Presidential election' );\n* // returns 'presidential election'\n*\n* @example\n* var out = uncapitalize( 'JavaScript' );\n* // returns 'javaScript'\n*\n* @example\n* var out = uncapitalize( 'Hidden Treasures' );\n* // returns 'hidden Treasures'\n*/\n\n\nfunction uncapitalize(str) {\n  if (!isString(str)) {\n    throw new TypeError('invalid argument. First argument must be a string primitive. Value: `' + str + '`.');\n  }\n\n  if (str === '') {\n    return '';\n  }\n\n  return str.charAt(0).toLowerCase() + str.slice(1);\n} // EXPORTS //\n\n\nmodule.exports = uncapitalize;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar isBoolean = require('@stdlib/assert/is-boolean').isPrimitive;\n\nvar isString = require('@stdlib/assert/is-string').isPrimitive;\n\nvar hasOwnProp = require('@stdlib/assert/has-own-property');\n\nvar ABBRS = require('./abbreviations.json');\n\nvar EMOJIS = require('./emojis.json');\n\nvar CONTRACT = require('./contractions.json'); // VARIABLES //\n\n\nvar REGEXP_PREFIXES = /^([,([{*<\"“'`‘.])/gi;\nvar REGEXP_SUFFIXES = /([,.!?%*>:;\"'”`)\\]}])$/gi; // FUNCTIONS //\n\n/**\n* Extends an array by the elements of another array.\n*\n* @private\n* @param {Array} arr - input array\n* @param {Array} ext - array to extend `arr` with\n* @returns {Array} mutated input array\n*\n* @example\n* var arr = [ 1, 2, 3 ];\n* var out = extend( arr, [ 4, 5 ] );\n* // returns [ 1, 2, 3, 4, 5 ]\n*/\n\nfunction extend(arr, ext) {\n  var i;\n\n  for (i = 0; i < ext.length; i++) {\n    arr.push(ext[i]);\n  }\n\n  return arr;\n}\n/**\n* Tokenizes a substring.\n*\n* @private\n* @param {string} substr - input string\n* @returns {Array} token array\n*\n* @example\n* var str = '(never)';\n* var out = tokenizeSubstring( str );\n* // returns [ '(', 'never', ')' ]\n*/\n\n\nfunction tokenizeSubstring(substr) {\n  var prefixes = [];\n  var suffixes = [];\n  var match;\n  var done;\n  var res;\n\n  do {\n    if (!EMOJIS[substr] && !ABBRS[substr] && !CONTRACT[substr]) {\n      match = substr.split(REGEXP_PREFIXES);\n\n      if (match.length > 1) {\n        prefixes.push(match[1]);\n        substr = match[2];\n      } else {\n        match = substr.split(REGEXP_SUFFIXES);\n\n        if (match.length > 1) {\n          substr = match[0];\n          suffixes.push(match[1]);\n        } else {\n          done = true;\n        }\n      }\n    } else {\n      done = true;\n    }\n  } while (!done);\n\n  res = prefixes;\n  res.push(substr);\n  extend(res, suffixes);\n  return res;\n} // MAIN //\n\n/**\n* Tokenize a string.\n*\n* @param {string} str - input string\n* @param {boolean} [keepWhitespace=false] - boolean indicating whether whitespace characters should be returned as part of the token array\n* @throws {TypeError} first argument must be a string primitive\n* @throws {TypeError} second argument must be a boolean primitive\n* @returns {Array} array of tokens\n*\n* @example\n* var str = 'Hello World!';\n* var out = tokenize( str );\n* // returns [ 'Hello', 'World', '!' ]\n*\n* @example\n* var str = '';\n* var out = tokenize( str );\n* // returns []\n*\n* @example\n* var str = 'Hello Mrs. Maple, could you call me back?';\n* var out = tokenize( str );\n* // returns [ 'Hello', 'Mrs.', 'Maple', ',', 'could', 'you', 'call', 'me', 'back', '?' ]\n*/\n\n\nfunction tokenize(str, keepWhitespace) {\n  var subtkns;\n  var substrs;\n  var tokens;\n  var substr;\n  var cache;\n  var i;\n\n  if (!isString(str)) {\n    throw new TypeError('invalid argument. First argument must be a string primitive. Value: `' + str + '`.');\n  }\n\n  if (arguments.length > 1) {\n    if (!isBoolean(keepWhitespace)) {\n      throw new TypeError('invalid argument. Second argument must be a boolean primitive. Value: `' + keepWhitespace + '`.');\n    }\n  }\n\n  if (!str) {\n    return [];\n  } // Split on whitespace:\n\n\n  if (keepWhitespace) {\n    substrs = str.split(/(\\s+)/);\n  } else {\n    substrs = str.split(/\\s+/);\n  } // Set up cache to hold tokens for substring matches:\n\n\n  cache = {}; // Initialize token array:\n\n  tokens = [];\n\n  for (i = 0; i < substrs.length; i++) {\n    substr = substrs[i];\n\n    if (hasOwnProp(cache, substr)) {\n      extend(tokens, cache[substr]);\n    } else {\n      subtkns = tokenizeSubstring(substr);\n      extend(tokens, subtkns);\n      cache[substr] = subtkns;\n    }\n  }\n\n  return tokens;\n} // EXPORTS //\n\n\nmodule.exports = tokenize;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Test if a value is an empty string.\n*\n* @module @stdlib/assert/is-empty-string\n*\n* @example\n* var isEmptyString = require( '@stdlib/assert/is-empty-string' );\n*\n* var bool = isEmptyString( '' );\n* // returns true\n*\n* bool = isEmptyString( 'beep' );\n* // returns false\n*\n* bool = isEmptyString( [] );\n* // returns false\n*\n* @example\n* var isEmptyString = require( '@stdlib/assert/is-empty-string' ).isObject;\n*\n* var bool = isEmptyString( new String( '' ) );\n* // returns true\n*\n* bool = isEmptyString( '' );\n* // returns false\n*\n* @example\n* var isEmptyString = require( '@stdlib/assert/is-empty-string' ).isPrimitive;\n*\n* var bool = isEmptyString( '' );\n* // returns true\n*\n* bool = isEmptyString( new String( '' ) );\n* // returns false\n*/\n// MODULES //\n\nvar setReadOnly = require('@stdlib/utils/define-nonenumerable-read-only-property');\n\nvar isEmptyString = require('./main.js');\n\nvar isPrimitive = require('./primitive.js');\n\nvar isObject = require('./object.js'); // MAIN //\n\n\nsetReadOnly(isEmptyString, 'isPrimitive', isPrimitive);\nsetReadOnly(isEmptyString, 'isObject', isObject); // EXPORTS //\n\nmodule.exports = isEmptyString;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar isPrimitive = require('./primitive.js');\n\nvar isObject = require('./object.js'); // MAIN //\n\n/**\n* Tests if a value is an empty string.\n*\n* @param {*} value - value to test\n* @returns {boolean} boolean indicating whether value is an empty string\n*\n* @example\n* var bool = isEmptyString( '' );\n* // returns true\n*\n* @example\n* var bool = isEmptyString( 'beep' );\n* // returns false\n*\n* @example\n* var bool = isEmptyString( [] );\n* // returns false\n*/\n\n\nfunction isEmptyString(value) {\n  return isPrimitive(value) || isObject(value);\n} // EXPORTS //\n\n\nmodule.exports = isEmptyString;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar isString = require('@stdlib/assert/is-string').isPrimitive; // MAIN //\n\n/**\n* Removes the last character of a string.\n*\n* @param {string} str - input string\n* @throws {TypeError} must provide a string primitive\n* @returns {string} updated string\n*\n* @example\n* var out = removeLast( 'last man standing' );\n* // returns 'last man standin'\n*\n* @example\n* var out = removeLast( 'presidential election' );\n* // returns 'presidential electio'\n*\n* @example\n* var out = removeLast( 'javaScript' );\n* // returns 'javaScrip'\n*\n* @example\n* var out = removeLast( 'Hidden Treasures' );\n* // returns 'Hidden Treasure'\n*/\n\n\nfunction removeLast(str) {\n  if (!isString(str)) {\n    throw new TypeError('invalid argument. First argument must be a string primitive. Value: `' + str + '`.');\n  }\n\n  if (str === '') {\n    return '';\n  }\n\n  return str.substring(0, str.length - 1);\n} // EXPORTS //\n\n\nmodule.exports = removeLast;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Generate a frequency table.\n*\n* @module @stdlib/utils/tabulate\n*\n* @example\n* var tabulate = require( '@stdlib/utils/tabulate' );\n*\n* var arr = [ 'beep', 'boop', 'foo', 'beep' ];\n*\n* var out = tabulate( arr );\n* // returns [ [ 'beep', 2, 0.5 ], [ 'boop', 1, 0.25 ], [ 'foo', 1, 0.25 ] ]\n*/\n// MODULES //\n\nvar tabulate = require('./tabulate.js'); // EXPORTS //\n\n\nmodule.exports = tabulate;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar isCollection = require('@stdlib/assert/is-collection');\n\nvar indexOf = require('@stdlib/utils/index-of'); // MAIN //\n\n/**\n* Generates a frequency table.\n*\n* ## Notes\n*\n* -   The output is an array of arrays. Each sub-array corresponds to a unique value in the input collection and is structured as follows:\n*\n*     -   0: unique value\n*     -   1: value count\n*     -   2: frequency percentage\n*\n*\n* @param {Collection} collection - input collection\n* @throws {TypeError} first argument must be a collection\n* @returns {(Array<Array>|Array)} frequency table\n*\n* @example\n* var arr = [ 'beep', 'boop', 'foo', 'beep' ];\n*\n* var out = tabulate( arr );\n* // returns [ [ 'beep', 2, 0.5 ], [ 'boop', 1, 0.25 ], [ 'foo', 1, 0.25 ] ]\n*/\n\n\nfunction tabulate(collection) {\n  var count;\n  var tmp;\n  var len;\n  var out;\n  var v;\n  var i;\n  var j;\n\n  if (!isCollection(collection)) {\n    throw new TypeError('invalid argument. First argument must be a collection. Value: `' + collection + '`.');\n  }\n\n  count = 0;\n  tmp = [];\n  out = []; // For each collection element, determine if we've seen the element before. If not, cache a reference which points to its location in the output array; otherwise, update the running count.\n\n  len = collection.length;\n\n  for (i = 0; i < len; i++) {\n    v = collection[i];\n    count += 1;\n    j = indexOf(tmp, v);\n\n    if (j === -1) {\n      tmp.push(v);\n      out.push([v, 1, 0]);\n    } else {\n      out[j][1] += 1;\n    }\n  } // Compute percentages...\n\n\n  len = out.length;\n\n  for (i = 0; i < len; i++) {\n    out[i][2] = out[i][1] / count;\n  }\n\n  return out;\n} // EXPORTS //\n\n\nmodule.exports = tabulate;","\"use strict\";\n\nvar hasProps = function hasProps(jsx) {\n  return Object.prototype.hasOwnProperty.call(jsx, 'props');\n};\n\nvar reduceJsxToString = function reduceJsxToString(previous, current) {\n  return previous + innerText(current);\n};\n\nvar innerText = function innerText(jsx) {\n  if (jsx === null || typeof jsx === 'boolean' || typeof jsx === 'undefined') {\n    return '';\n  }\n\n  if (typeof jsx === 'number') {\n    return jsx.toString();\n  }\n\n  if (typeof jsx === 'string') {\n    return jsx;\n  }\n\n  if (Array.isArray(jsx)) {\n    return jsx.reduce(reduceJsxToString, '');\n  }\n\n  if (hasProps(jsx) && Object.prototype.hasOwnProperty.call(jsx.props, 'children')) {\n    return innerText(jsx.props.children);\n  }\n\n  return '';\n};\n\ninnerText.default = innerText;\nmodule.exports = innerText;","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"88647faa0887ceb447da.worker.js\");\n};","// MODULES //\n\nimport Loadable from '@isle-project/components/internal/loadable';\n\n\n// MAIN //\n\nconst DeleteModal = Loadable( () => import( /* webpackChunkName: \"DeleteModal\" */ './main.js' ) );\n\n\n// EXPORTS //\n\nexport default DeleteModal;\n","// MAIN //\n\nfunction isUserInCohort( cohort, userEmail ) {\n\tconst members = cohort.members;\n\tfor ( let i = 0; i < members.length; i++ ) {\n\t\tconst member = members[ i ];\n\t\tif ( member.email === userEmail ) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\n\n// EXPORTS //\n\nexport default isUserInCohort;\n","// MODULES //\n\nimport Loadable from '@isle-project/components/internal/loadable';\n\n\n// MAIN //\n\nconst ChatButton = Loadable( () => import( /* webpackChunkName: \"ChatButton\" */ './main.js' ) );\n\n\n// EXPORTS //\n\nexport default ChatButton;\n","// MODULES //\n\nimport Loadable from '@isle-project/components/internal/loadable';\nimport { addResources } from '@isle-project/locales';\n\n\n// VARIABLES //\n\naddResources( 'Video' );\n\n\n// MAIN //\n\nconst VideoChatButton = Loadable( () => import( /* webpackChunkName: \"VideoChatButton\" */ './main.js' ) );\n\n\n// EXPORTS //\n\nexport default VideoChatButton;\n","// MODULES //\n\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Plotly from 'plotly.js';\nimport createPlotlyComponent from 'react-plotly.js/factory';\nconst Plot = createPlotlyComponent( Plotly );\nimport { isPrimitive as isNumber } from '@stdlib/assert/is-number';\nimport { CAT20 as COLORS } from '@isle-project/constants/colors';\n\n\n// VARIABLES //\n\nconst CLUSTER_LABELS = [ 'few-clusters', 'some-clusters', 'many-clusters' ];\n\n\n// MAIN //\n\nclass ClusterModal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tselectedCluster: null,\n\t\t\tmodelIndex: props.modelIndex\n\t\t};\n\t}\n\n\trenderClusterPlot() {\n\t\tconst arr = this.props.clusterCoordinates;\n\t\tconst nClusters = this.props.clusterSizes[ this.state.modelIndex ];\n\t\tconst data = [\n\t\t\t{\n\t\t\t\tx: arr.map( x => x[ 0 ] ),\n\t\t\t\ty: arr.map( x => x[ 1 ] ),\n\t\t\t\ttext: arr.map( ( x, i ) => `${this.props.t('cluster')} ${i+1}` ),\n\t\t\t\tmarker: {\n\t\t\t\t\tsize: 40,\n\t\t\t\t\tcolor: COLORS.slice( 0, nClusters )\n\t\t\t\t},\n\t\t\t\tmode: 'markers',\n\t\t\t\thoverinfo: 'text',\n\t\t\t\ttype: 'scatter'\n\t\t\t}\n\t\t];\n\t\treturn (\n\t\t\t<div style={{ height: 0.75 * window.innerHeight }}>\n\t\t\t\t<Plot\n\t\t\t\t\tdata={data}\n\t\t\t\t\tlayout={{\n\t\t\t\t\t\thovermode: 'closest'\n\t\t\t\t\t}}\n\t\t\t\t\tuseResizeHandler\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\tzIndex: 1\n\t\t\t\t\t}}\n\t\t\t\t\tconfig={{\n\t\t\t\t\t\tdisplayModeBar: false\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={( data ) => {\n\t\t\t\t\t\tconst point = data.points[ data.points.length-1 ];\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tselectedCluster: point.pointIndex\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\tthis.props.onPointClick( this.state.selectedCluster );\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\thandleClusterCountChange = ( event ) => {\n\t\tconst modelIndex = parseInt( event.target.value, 10 );\n\t\tif ( this.state.modelIndex !== modelIndex ) {\n\t\t\tthis.setState({\n\t\t\t\tmodelIndex\n\t\t\t});\n\t\t\tthis.props.changeClusterCount( modelIndex );\n\t\t}\n\t}\n\n\trender() {\n\t\tlet docDisplay;\n\t\tif ( isNumber( this.state.selectedCluster ) ) {\n\t\t\tdocDisplay = <Fragment>\n\t\t\t\t<h4\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpadding: 10,\n\t\t\t\t\t\tcolor: COLORS[ this.state.selectedCluster ]\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{this.props.t('representative-documents')} {this.state.selectedCluster+1}\n\t\t\t\t</h4>\n\t\t\t\t<div style={{ marginLeft: 0, overflowY: 'scroll', height: 0.70 * window.innerHeight }}>\n\t\t\t\t\t<ListGroup className=\"cluster-list\">\n\t\t\t\t\t{this.props.representativeDocs.map( ( x, idx ) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<ListGroup.Item className=\"cluster-list-item\" key={`${this.state.selectedCluster}-${idx}`} >\n\t\t\t\t\t\t\t\t{x}\n\t\t\t\t\t\t\t</ListGroup.Item>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t</ListGroup>\n\t\t\t\t</div>\n\t\t\t</Fragment>;\n\t\t} else {\n\t\t\tdocDisplay = <h4 className=\"cluster-directive\">{this.props.t('select-cluster-representative')}</h4>;\n\t\t}\n\t\treturn ( <Modal\n\t\t\tshow={this.props.show}\n\t\t\tonHide={this.props.onHide}\n\t\t\tdialogClassName=\"modal-100w\"\n\t\t>\n\t\t\t<Modal.Header closeButton>\n\t\t\t\t<Modal.Title as=\"h3\" >\n\t\t\t\t\t{this.props.t('clustering-results')}\n\t\t\t\t</Modal.Title>\n\t\t\t\t<span className=\"cluster-modal-select-wrapper\">\n\t\t\t\t\t<select\n\t\t\t\t\t\ttitle={this.props.t('cluster-select')}\n\t\t\t\t\t\tclassName=\"cluster-select\"\n\t\t\t\t\t\tonChange={this.handleClusterCountChange}\n\t\t\t\t\t\tonBlur={this.handleClusterCountChange}\n\t\t\t\t\t\tvalue={this.state.modelIndex}\n\t\t\t\t\t>\n\t\t\t\t\t\t{CLUSTER_LABELS.map( ( v, key ) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\tvalue={key}\n\t\t\t\t\t\t\t\t>{this.props.t( v )}</option>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t</span>\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Body style={{ minHeight: 0.75 * window.innerHeight, padding: 0 }} >\n\t\t\t\t<Row>\n\t\t\t\t\t<Col md={8}>\n\t\t\t\t\t\t{docDisplay}\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col md={4} style={{ overflowY: 'auto', maxWidth: '30%' }} >\n\t\t\t\t\t\t{this.props.clusterCoordinates ? this.renderClusterPlot() : null}\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal.Body>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Button onClick={this.props.onHide}>{this.props.t('close')}</Button>\n\t\t\t</Modal.Footer>\n\t\t</Modal> );\n\t}\n}\n\n\n// PROPERTIES //\n\nClusterModal.propTypes = {\n\tclusterSizes: PropTypes.array.isRequired,\n\tmodelIndex: PropTypes.number.isRequired,\n\tshow: PropTypes.bool.isRequired,\n\tonPointClick: PropTypes.func.isRequired,\n\tonHide: PropTypes.func.isRequired,\n\tclusterCoordinates: PropTypes.array.isRequired,\n\tchangeClusterCount: PropTypes.func.isRequired,\n\trepresentativeDocs: PropTypes.array.isRequired\n};\n\n\n// EXPORT //\n\nexport default ClusterModal;\n","// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Button from 'react-bootstrap/Button';\nimport Worker from 'worker-loader!./worker.js';\nimport ClusterModal from './cluster_modal.js';\nimport './text_clustering.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:response-visualizer:text-clustering' );\nconst CLUSTER_SIZES = [ 3, 5, 7 ];\nconst CLUSTER_LABELS = [ 'few-clusters', 'some-clusters', 'many-clusters' ];\n\n\n// MAIN //\n\nclass TextClustering extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisClustering: false,\n\t\t\tshowClusterModal: false,\n\t\t\tmodelIndex: 0,\n\t\t\tclusterCoordinates: null,\n\t\t\trepresentativeDocs: []\n\t\t};\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif ( this.worker ) {\n\t\t\tthis.worker.terminate();\n\t\t}\n\t}\n\n\tclusterDocuments = () => {\n\t\tthis.worker = new Worker();\n\t\tthis.worker.onmessage = ( event ) => {\n\t\t\tconst data = event.data;\n\t\t\tswitch ( data.type ) {\n\t\t\t\tcase 'CLUSTERS':\n\t\t\t\t\tthis.props.onClusters( data.value.clusters._buffer );\n\t\t\t\tbreak;\n\t\t\t\tcase 'CLUSTER_COORDINATES':\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tclusterCoordinates: data.value.coordinates,\n\t\t\t\t\t\tmodelIndex: data.value.modelIndex\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t\tcase 'REPRESENTATIVE_DOCUMENTS': {\n\t\t\t\t\tconst representative = data.value;\n\t\t\t\t\tconst docs = [];\n\t\t\t\t\tfor ( let i = 0; i < representative.length; i++ ) {\n\t\t\t\t\t\tdocs.push( this.props.texts[ representative[ i ].idx ] );\n\t\t\t\t\t}\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\trepresentativeDocs: docs\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'ADD_DOCUMENTS',\n\t\t\tvalue: this.props.texts\n\t\t});\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'ITERATE',\n\t\t\tvalue: 1\n\t\t});\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'GET_CLUSTERS',\n\t\t\tvalue: this.state.modelIndex\n\t\t});\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'GET_CLUSTER_COORDINATES',\n\t\t\tvalue: this.state.modelIndex\n\t\t});\n\t\tthis.setState({\n\t\t\tisClustering: true\n\t\t});\n\t}\n\n\thandleClusterCountChange = ( event ) => {\n\t\tconst modelIndex = parseInt( event.target.value, 10 );\n\t\tif ( this.state.modelIndex !== modelIndex ) {\n\t\t\tthis.changeClusterCount( modelIndex );\n\t\t\tthis.setState({\n\t\t\t\tmodelIndex\n\t\t\t});\n\t\t}\n\t}\n\n\tchangeClusterCount = ( modelIndex ) => {\n\t\tif ( this.worker ) {\n\t\t\tthis.worker.postMessage({\n\t\t\t\ttype: 'GET_CLUSTERS',\n\t\t\t\tvalue: modelIndex\n\t\t\t});\n\t\t\tthis.worker.postMessage({\n\t\t\t\ttype: 'GET_CLUSTER_COORDINATES',\n\t\t\t\tvalue: modelIndex\n\t\t\t});\n\t\t}\n\t}\n\n\ttoggleClusterModal = () => {\n\t\tthis.setState({\n\t\t\tshowClusterModal: !this.state.showClusterModal\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"cluster-wrapper\">\n\t\t\t\t<label>{this.props.t('cluster')} {this.props.actionLabel}</label>\n\t\t\t\t<span className=\"cluster-select-wrapper\">\n\t\t\t\t\t<select\n\t\t\t\t\t\ttitle={this.props.t('select-size')}\n\t\t\t\t\t\tclassName=\"cluster-select\"\n\t\t\t\t\t\tonChange={this.handleClusterCountChange}\n\t\t\t\t\t\tonBlur={this.handleClusterCountChange}\n\t\t\t\t\t\tvalue={this.state.modelIndex}\n\t\t\t\t\t>\n\t\t\t\t\t\t{CLUSTER_LABELS.map( ( v, key ) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\tvalue={key}\n\t\t\t\t\t\t\t\t>{this.props.t( v )}</option>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t</span>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button variant=\"secondary\" onClick={this.clusterDocuments}>{this.props.t('start')}</Button>\n\t\t\t\t\t<Button variant=\"secondary\" disabled={!this.state.isClustering} onClick={this.toggleClusterModal}>{this.props.t('show-clusters')}</Button>\n\t\t\t\t\t{ this.state.showClusterModal ? <ClusterModal\n\t\t\t\t\t\tshow={this.state.showClusterModal}\n\t\t\t\t\t\tonHide={this.toggleClusterModal}\n\t\t\t\t\t\tclusterSizes={CLUSTER_SIZES}\n\t\t\t\t\t\tclusterCoordinates={this.state.clusterCoordinates}\n\t\t\t\t\t\trepresentativeDocs={this.state.representativeDocs}\n\t\t\t\t\t\tmodelIndex={this.state.modelIndex}\n\t\t\t\t\t\tchangeClusterCount={this.changeClusterCount}\n\t\t\t\t\t\tonPointClick={( selectedCluster ) => {\n\t\t\t\t\t\t\tdebug( 'Retrieve representative documents...' );\n\t\t\t\t\t\t\tthis.worker.postMessage({\n\t\t\t\t\t\t\t\ttype: 'GET_REPRESENTATIVE_DOCUMENTS',\n\t\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\t\tcluster: selectedCluster,\n\t\t\t\t\t\t\t\t\tmodelIndex: this.state.modelIndex\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tt={this.props.t}\n\t\t\t\t\t/> : null }\n\t\t\t\t</ButtonGroup>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nTextClustering.propTypes = {\n\tactionLabel: PropTypes.string.isRequired,\n\ttexts: PropTypes.array.isRequired,\n\tonClusters: PropTypes.func.isRequired\n};\n\n\n// EXPORTS //\n\nexport default TextClustering;\n","// MODULES //\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport isArray from '@stdlib/assert/is-array';\nimport Tooltip from '@isle-project/components/tooltip';\nimport './switch.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:switch' );\n\n\n// MAIN //\n\n/**\n* The Switch component allows the display of one element out of a list of several elements. Users can cycle through the different children of the Switch tag by clicking on the currently displayed one.\n*\n* @property {boolean} active - controls whether the switch is active or not\n* @property {string} tooltip - tooltip displayed when hovering over the switch element\n* @property {string} tooltipPos - placement of the tooltip (either `top`, `left`, `right`, or `bottom`)\n* @property {string} className - class name for the enclosing span element\n* @property {Object} style - CSS inline styles\n* @property {Function} onChange - callback invoked when elements are switched. Receives as its first argument the index of the currently displayed child\n*/\nconst Switch = ({ active, tooltip, tooltipPos, className, style, onChange, children }) => {\n\tconst [ pos, setPos ] = useState( 0 );\n\n\tconst mappedChildren = React.Children.map( children, ( elem, idx ) => {\n\t\tconst props = { style: {}};\n\n\t\tdebug( `Check whether idx = ${idx} is equal to pos = ${pos}` );\n\t\tif ( idx !== pos ) {\n\t\t\tprops.style.display = 'none';\n\t\t} else {\n\t\t\tprops.style.display = 'inline';\n\t\t}\n\t\treturn React.cloneElement( elem, props );\n\t});\n\tconst handleClick = () => {\n\t\tif ( !isArray( children ) ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst newPos = pos + 1;\n\n\t\tdebug( 'Handle click: New position is '+ newPos );\n\t\tif ( newPos >= children.length ) {\n\t\t\tsetPos( 0 );\n\t\t\tonChange( 0 );\n\t\t} else {\n\t\t\tsetPos( newPos );\n\t\t\tonChange( newPos );\n\t\t}\n\t};\n\tlet fullClassName = active ? 'switch active' : 'switch';\n\tif ( className ) {\n\t\tfullClassName += ' '+className;\n\t}\n\tif ( !active ) {\n\t\treturn ( <span\n\t\t\tclassName={fullClassName}\n\t\t\tstyle={style}\n\t\t>\n\t\t\t{mappedChildren}\n\t\t</span> );\n\t}\n\tconst content =\n\t\t<span\n\t\t\trole=\"button\" tabIndex={0}\n\t\t\tclassName={fullClassName}\n\t\t\tonClick={handleClick}\n\t\t\tonKeyPress={handleClick}\n\t\t\tstyle={style}\n\t\t>\n\t\t\t{mappedChildren}\n\t\t</span>;\n\n\tif ( tooltip === '' || !active ) {\n\t\treturn content;\n\t}\n\treturn (\n\t\t<Tooltip\n\t\t\tplacement={tooltipPos}\n\t\t\ttooltip={tooltip}\n\t\t>\n\t\t\t{content}\n\t\t</Tooltip>\n\t);\n};\n\n\n// PROPERTIES //\n\nSwitch.propTypes = {\n\tactive: PropTypes.bool,\n\ttooltip: PropTypes.string,\n\ttooltipPos: PropTypes.string,\n\tclassName: PropTypes.string,\n\tstyle: PropTypes.object,\n\tonChange: PropTypes.func\n};\n\nSwitch.defaultProps = {\n\tactive: true,\n\ttooltip: 'Click to cycle through available options.',\n\ttooltipPos: 'top',\n\tclassName: '',\n\tstyle: {},\n\tonChange() {}\n};\n\n\n// EXPORTS //\n\nexport default Switch;\n","// MODULES //\n\nimport Switch from './main.js';\n\n\n// EXPORTS //\n\nexport default Switch;\n","// MODULES //\n\nimport Loadable from '@isle-project/components/internal/loadable';\n\n\n// MAIN //\n\nconst WordCloud = Loadable( () => import( /* webpackChunkName: \"WordCloud\" */ './main.js' ) );\n\n\n// EXPORTS //\n\nexport default WordCloud;\n","// MODULES //\n\nimport React, { Fragment, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'react-bootstrap/Button';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport Checkbox from '@isle-project/components/input/checkbox';\n\n\n// MAIN //\n\nconst Search = ({ extended, onClick, t }) => {\n\tconst [ search, setSearch ] = useState( '' );\n\tconst [ caseSensitive, setCaseSensitive ] = useState( false );\n\tconst [ exact, setExact ] = useState( false );\n\n\tconst handleSearch = ( event ) => {\n\t\tsetSearch( event.target.value );\n\t};\n\tuseEffect( () => {\n\t\tonClick( search, caseSensitive, exact );\n\t}, [ caseSensitive, exact, search, onClick ]);\n\n\tconst handleKeyPress = ( event ) => {\n\t\tif ( event.charCode === 13 ) {\n\t\t\tonClick( search, caseSensitive, exact );\n\t\t}\n\t};\n\tconst handleReset = () => {\n\t\tsetSearch( '' );\n\t\tonClick( '' );\n\t};\n\treturn (\n\t\t<Fragment>\n\t\t\t<FormGroup style={{ width: window.innerWidth * 0.3, padding: '0px', marginBottom: '0px' }} >\n\t\t\t\t<InputGroup size=\"small\" >\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder={t('enter-text')}\n\t\t\t\t\t\tonChange={handleSearch}\n\t\t\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t\t\t\tvalue={search}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tonClick( search, caseSensitive, exact );\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('search')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button style={{ float: 'left' }} size=\"small\" onClick={handleReset} >\n\t\t\t\t\t\t{t('reset')}\n\t\t\t\t\t</Button>\n\t\t\t\t</InputGroup>\n\t\t\t</FormGroup>\n\t\t\t<FormGroup style={{ float: 'left', margin: '4px' }} >\n\t\t\t\t<Checkbox\n\t\t\t\t\ttooltip={t('whole-word-tooltip')}\n\t\t\t\t\ttooltipPlacement=\"top\"\n\t\t\t\t\tsize=\"small\" inline\n\t\t\t\t\tlegend={t('whole-word')}\n\t\t\t\t\tstyle={{ fontSize: '0.9rem' }}\n\t\t\t\t\tonChange={( value ) => {\n\t\t\t\t\t\tsetExact( value );\n\t\t\t\t\t\tonClick( search, caseSensitive, value );\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<Checkbox\n\t\t\t\t\ttooltip={t('toggle-sensitivity')} tooltipPlacement=\"top\"\n\t\t\t\t\tsize=\"small\" inline\n\t\t\t\t\tlegend={t('case-sensitive')}\n\t\t\t\t\tstyle={{ fontSize: '0.9rem' }}\n\t\t\t\t\tonChange={( value ) => {\n\t\t\t\t\t\tsetCaseSensitive( value );\n\t\t\t\t\t\tonClick( search, value, exact );\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</FormGroup>\n\t\t</Fragment>\n\t);\n};\n\n\n// PROPERTIES //\n\nSearch.propTypes = {\n\textended: PropTypes.string,\n\tonClick: PropTypes.func\n};\n\nSearch.defaultProps = {\n\textended: false,\n\tonClick() {}\n};\n\n\n// EXPORTS //\n\nexport default Search;\n","// MODULES //\n\nimport React from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport removeLast from '@stdlib/string/remove-last';\n\n\n// FUNCTIONS //\n\nfunction toTimeString( absoluteTime ) {\n\tconst date = new Date( absoluteTime );\n\treturn `${date.toLocaleDateString()}, ${date.toLocaleTimeString()}`;\n}\n\n\n// MAIN //\n\nconst SingleActionModal = ( props ) => {\n\treturn (\n\t\t<Modal\n\t\t\tshow={props.show}\n\t\t\tonHide={props.onHide}\n\t\t\tdialogClassName=\"modal-75w\"\n\t\t\tbackdropClassName=\"modal-backdrop-second-order\"\n\t\t\tstyle={{\n\t\t\t\tminHeight: '300px',\n\t\t\t\tboxShadow: '0 0 10px black',\n\t\t\t\tfontSize: '2em',\n\t\t\t\tzIndex: 2000\n\t\t\t}}\n\t\t>\n\t\t\t<Modal.Header closeButton>\n\t\t\t\t<Modal.Title as=\"h3\">\n\t\t\t\t\t{removeLast( props.actionLabel) }\n\t\t\t\t\t{ props.showExtended ? ` ${props.t('from')} ${props.modalContent.name}`: ''}\n\t\t\t\t\t{props.t('on')}\n\t\t\t\t\t{toTimeString( props.modalContent.absoluteTime )}\n\t\t\t\t</Modal.Title>\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Body style={{ overflowY: 'scroll', maxHeight: 0.8 * window.innerHeight }} >\n\t\t\t\t<span className=\"response-visualizer-action-model-text\">\n\t\t\t\t\t{props.modalContent.value}\n\t\t\t\t</span>\n\t\t\t</Modal.Body>\n\t\t</Modal>\n\t);\n};\n\n\n// EXPORTS //\n\nexport default SingleActionModal;\n","// MODULES //\n\nimport Loadable from '@isle-project/components/internal/loadable';\nimport 'react-dates/initialize';\nimport 'react-dates/lib/css/_datepicker.css';\n\n\n// MAIN //\n\nconst RangePicker = Loadable( () => import( /* webpackChunkName: \"RangePicker\" */ './main.js' ) );\n\n\n// EXPORTS //\n\nexport default RangePicker;\n","// MODULES //\n\nimport React from 'react';\nimport RangePicker from '@isle-project/components/range-picker';\nimport Modal from 'react-bootstrap/Modal';\nimport isArray from '@stdlib/assert/is-array';\n\n\n// MAIN //\n\nconst FullscreenHeader = ( props ) => {\n\tlet select = null;\n\tif ( isArray( props.cohorts ) ) {\n\t\tselect = ( <select\n\t\t\ttitle=\"Cohort\"\n\t\t\tstyle={{ width: '150px', backgroundColor: 'ghostwhite', padding: '2px' }}\n\t\t\tonChange={props.onCohortChange} onBlur={props.onCohortChange}\n\t\t\tvalue={props.selectedCohort ? props.selectedCohort.title : 'all'}\n\t\t>\n\t\t\t<option value=\"all\">{props.t('all-cohorts')}</option>\n\t\t\t{props.cohorts.map( ( v, key ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<option\n\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\tvalue={v.title}\n\t\t\t\t\t>{v.title}</option>\n\t\t\t\t);\n\t\t\t})}\n\t\t</select> );\n\t}\n\tlet origin;\n\tconst nActions = props.actions.length;\n\tif ( nActions > 0 ) {\n\t\torigin = props.actions[ nActions-1 ].absoluteTime;\n\t} else {\n\t\torigin = 0;\n\t}\n\treturn (\n\t\t<Modal.Header style={{ paddingBottom: '5px' }} closeButton >\n\t\t\t<h4 style={{ float: 'left', margin: '2px 14px 2px 2px' }} >{props.actionLabel} {props.t('for')} {props.componentID}</h4>\n\t\t\t{select}\n\t\t\t<RangePicker\n\t\t\t\tstyle={{ float: 'left' }}\n\t\t\t\tsize=\"sm\"\n\t\t\t\tonChange={props.onPeriodChange}\n\t\t\t\torigin={origin}\n\t\t\t/>\n\t\t</Modal.Header>\n\t);\n};\n\n\n// EXPORTS //\n\nexport default FullscreenHeader;\n","// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { Trans } from 'react-i18next';\nimport tokenize from '@stdlib/nlp/tokenize';\nimport contains from '@stdlib/assert/contains';\nimport isStrictEqual from '@stdlib/assert/is-strict-equal';\nimport isArray from '@stdlib/assert/is-array';\nimport { isPrimitive as isString } from '@stdlib/assert/is-string';\nimport isEmptyString from '@stdlib/assert/is-empty-string';\nimport uncapitalize from '@stdlib/string/uncapitalize';\nimport lowercase from '@stdlib/string/lowercase';\nimport removeLast from '@stdlib/string/remove-last';\nimport ndarray from '@stdlib/ndarray/array';\nimport objectKeys from '@stdlib/utils/keys';\nimport tabulate from '@stdlib/utils/tabulate';\nimport indexOf from '@stdlib/utils/index-of';\nimport floor from '@stdlib/math/base/special/floor';\nimport max from '@stdlib/math/base/special/max';\nimport absdiff from '@stdlib/math/base/utils/absolute-difference';\nimport NINF from '@stdlib/constants/math/float64-ninf';\nimport Alert from 'react-bootstrap/Alert';\nimport Table from '@isle-project/components/table';\nimport Image from '@isle-project/components/image';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Button from 'react-bootstrap/Button';\nimport Badge from 'react-bootstrap/Badge';\nimport Col from 'react-bootstrap/Col';\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport ListGroupItem from 'react-bootstrap/ListGroupItem';\nimport Modal from 'react-bootstrap/Modal';\nimport ReactList from 'react-list';\nimport innerText from 'react-innertext';\nimport Highlighter from 'react-highlight-words';\nimport ChatButton from '@isle-project/components/chat-button';\nimport VideoChatButton from '@isle-project/components/video-chat-button';\nimport TextClustering from '@isle-project/components/internal/text-clustering';\nimport Checkbox from '@isle-project/components/input/checkbox';\nimport Plotly from '@isle-project/components/plotly';\nimport Switch from '@isle-project/components/switch';\nimport WordCloud from '@isle-project/components/word-cloud';\nimport SessionContext from '@isle-project/session/context.js';\nimport { CAT20 as COLORS } from '@isle-project/constants/colors';\nimport Search from './search.js';\nimport SingleActionModal from './single_action_modal.js';\nimport FullscreenHeader from './fullscreen_header';\nimport './fullscreen_action_display.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:response-visualizer' );\nconst LINE_HEIGHT = 15;\nconst TEXT_LINE_HEIGHT = 23;\nconst RE_NEWLINE = /\\r?\\n/g;\nconst UPDATE_THRESHOLD = 5;\n\n\n// FUNCTIONS //\n\nconst wordWrap = ( str ) => {\n\tconst n = floor( ( window.innerWidth * 0.5 ) / ( 16*0.575 ) );\n\tconst RE_LINE_BREAKS = new RegExp(`(?![^\\\\n]{1,${n}}$)([^\\\\n]{1,${n}})\\\\s`, 'g' );\n\treturn str.replace( RE_LINE_BREAKS, '$1\\n' );\n};\n\nconst tabulateValues = ( actions, levels ) => {\n\tif ( !actions ) {\n\t\treturn [];\n\t}\n\tconst table = {};\n\tfor ( let i = 0; i < actions.length; i++ ) {\n\t\tconst v = actions[ i ];\n\t\tif ( isArray( v.value ) ) {\n\t\t\tfor ( let j = 0; j < v.value.length; j++ ) {\n\t\t\t\tconst bool = v.value[ j ];\n\t\t\t\tif ( bool ) {\n\t\t\t\t\tconst key = levels[ j ];\n\t\t\t\t\tif ( !table[ key ] ) {\n\t\t\t\t\t\ttable[ key ] = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttable[ key ] += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst key = isString( v.value ) ? v.value : levels[ v.value ];\n\t\t\tif ( !table[ key ] ) {\n\t\t\t\ttable[ key ] = 1;\n\t\t\t} else {\n\t\t\t\ttable[ key ] += 1;\n\t\t\t}\n\t\t}\n\t}\n\tlet maxVal = NINF;\n\tconst counts = new Array( levels.length );\n\tfor ( let i = 0; i < levels.length; i++ ) {\n\t\tif ( table[ levels[ i ] ] > maxVal ) {\n\t\t\tmaxVal = table[ levels[ i ] ];\n\t\t}\n\t\tcounts[ i ] = table[ levels[ i ] ];\n\t}\n\treturn counts;\n};\n\nconst generateValueLabel = ({ value, type, levels, rows, cols }) => {\n\tif ( type === 'factor' ) {\n\t\tif ( isArray( value ) ) {\n\t\t\tlet str = '';\n\t\t\tvalue.forEach( ( v, idx ) => {\n\t\t\t\tif ( v ) {\n\t\t\t\t\tif ( str ) {\n\t\t\t\t\t\tstr += ', ';\n\t\t\t\t\t}\n\t\t\t\t\tstr += levels[ idx ];\n\t\t\t\t}\n\t\t\t});\n\t\t\tvalue = str || 'None';\n\t\t} else if ( !isString( value ) ) {\n\t\t\tvalue = levels[ value ] || 'None';\n\t\t}\n\t}\n\telse if ( type === 'matches' ) {\n\t\tlet str = '';\n\t\tif ( isArray( value ) ) {\n\t\t\tfor ( let i = 0; i < value.length; i++ ) {\n\t\t\t\tstr += value[ i ].a + ' - '+value[ i ].b+'; ';\n\t\t\t}\n\t\t}\n\t\tvalue = str || 'None';\n\t}\n\telse if ( type === 'matrix' ) {\n\t\tlet str = '';\n\t\tfor ( let i = 0; i < rows.length; i++ ) {\n\t\t\tfor ( let j = 0; j < cols.length; j++ ) {\n\t\t\t\tif ( value[ i ][ j ] ) {\n\t\t\t\t\tstr += rows[ i ] + ' - '+cols[ j ]+'; ';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvalue = str || 'None';\n\t}\n\telse if ( type === 'tensor' ) {\n\t\tlet str = '';\n\t\tfor ( let i = 0; i < rows.length; i++ ) {\n\t\t\tfor ( let j = 0; j < cols.length; j++ ) {\n\t\t\t\tconst rv = rows[ i ];\n\t\t\t\tconst cv = cols[ j ];\n\t\t\t\tstr += isString( rv ) && !isEmptyString( rv ) ? rv : i;\n\t\t\t\tstr += '-';\n\t\t\t\tstr += isString( cv ) && !isEmptyString( cv ) ? cv : j;\n\t\t\t\tstr += ': ';\n\t\t\t\tstr += ( value ? value[ i+':'+j ] : 'NA' ) + '; ';\n\t\t\t}\n\t\t}\n\t\tvalue = str || 'None';\n\t}\n\treturn value;\n};\n\n\n// MAIN //\n\nclass FullscreenActionDisplay extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tfiltered: props.actions.slice( 0 ),\n\t\t\tsearchwords: [],\n\t\t\tactions: props.actions.slice( 0 ),\n\t\t\tshowModal: false,\n\t\t\tmodalContent: {},\n\t\t\tclusters: [],\n\t\t\thandleMultipleResponses: 'first',\n\t\t\tremoveQuestionWords: true\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tconst newState = {};\n\t\tconst diff = absdiff( nextProps.actions.length, prevState.actions.length );\n\t\tif ( diff >= UPDATE_THRESHOLD || nextProps.actions.length === prevState.actions.length - 1 ) {\n\t\t\tnewState.filtered = nextProps.actions.slice();\n\t\t\tnewState.actions = nextProps.actions.slice();\n\t\t\tnewState.clusters = [];\n\t\t\treturn newState;\n\t\t}\n\t\treturn null;\n\t}\n\n\tsearchFilter = ( value, caseSensitive, exact ) => {\n\t\tconst { actions } = this.props;\n\t\tif ( isStrictEqual( value, '' ) ) {\n\t\t\tthis.setState({\n\t\t\t\tfiltered: this.props.actions,\n\t\t\t\tsearchwords: [],\n\t\t\t\tclusters: []\n\t\t\t});\n\t\t} else {\n\t\t\tconst newFilter = [];\n\t\t\tif ( !exact ) {\n\t\t\t\tfor ( let i = 0; i < actions.length; i++ ) {\n\t\t\t\t\tconst action = actions[ i ];\n\t\t\t\t\tconst flags = caseSensitive ? '' : 'i';\n\t\t\t\t\tconst expr = new RegExp( value, flags );\n\t\t\t\t\tconst actionValue = generateValueLabel({ value: action.value, ...this.props.data });\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.props.showExtended &&\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tString( actionValue ).search( expr ) !== -1 ||\n\t\t\t\t\t\t\tString( action.email ).search( expr ) !== -1 ||\n\t\t\t\t\t\t\tString( action.name ).search( expr ) !== -1\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tnewFilter.push( this.props.actions[ i ] );\n\t\t\t\t\t} else if ( String( actionValue ).search( expr ) !== -1 ) {\n\t\t\t\t\t\tnewFilter.push( this.props.actions[ i ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst flags = caseSensitive ? '' : 'i';\n\t\t\t\tconst expr = new RegExp( '(?:^|[^\\\\w])' + value + '(?:$|[^\\\\w])', flags );\n\t\t\t\tfor ( let i = 0; i < actions.length; i++ ) {\n\t\t\t\t\tconst action = actions[ i ];\n\t\t\t\t\tconst actionValue = generateValueLabel({ value: action.value, ...this.props.data });\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.props.showExtended &&\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\texpr.test( actionValue ) ||\n\t\t\t\t\t\t\texpr.test( action.email ) ||\n\t\t\t\t\t\t\texpr.test( action.name )\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tnewFilter.push( action );\n\t\t\t\t\t} else if ( expr.test( actionValue ) ) {\n\t\t\t\t\t\tnewFilter.push( action );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tfiltered: newFilter,\n\t\t\t\tsearchwords: [ value ],\n\t\t\t\tclusters: []\n\t\t\t});\n\t\t}\n\t}\n\n\titemSizeGetter = ( index ) => {\n\t\tlet lines = 2.0 * LINE_HEIGHT;\n\t\tconst action = this.state.actions[ index ];\n\t\tif ( !action ) {\n\t\t\treturn 0;\n\t\t}\n\t\tconst value = wordWrap( String( action.value ) );\n\t\tconst noLines = ( value.match( RE_NEWLINE ) || '' ).length + 1;\n\t\tlines += noLines * TEXT_LINE_HEIGHT;\n\t\tdebug( `Element at position ${index} is estimated to have ${noLines} lines.` );\n\t\treturn lines;\n\t}\n\n\tshowModalFactory = ( elem ) => {\n\t\treturn () => {\n\t\t\tdebug( 'Show model for prominently displaying a single answer...' );\n\t\t\tthis.setState({\n\t\t\t\tmodalContent: elem,\n\t\t\t\tshowModal: true\n\t\t\t});\n\t\t};\n\t}\n\n\thideModal = () => {\n\t\tthis.setState({\n\t\t\tshowModal: false\n\t\t});\n\t}\n\n\tgetActions = () => {\n\t\tlet actions;\n\t\tconst seenEmails = new Set();\n\t\tif ( this.state.handleMultipleResponses === 'last' ) {\n\t\t\tactions = this.props.actions.slice();\n\t\t\tactions.sort( ( a, b ) => b.absoluteTime - a.absoluteTime );\n\t\t\tactions = actions.filter( x => {\n\t\t\t\tif ( !seenEmails.has( x.email ) ) {\n\t\t\t\t\tseenEmails.add( x.email );\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t\telse if ( this.state.handleMultipleResponses === 'first' ) {\n\t\t\tactions = this.props.actions.slice();\n\t\t\tactions.sort( ( a, b ) => a.absoluteTime - b.absoluteTime );\n\t\t\tactions = actions.filter( x => {\n\t\t\t\tif ( !seenEmails.has( x.email ) ) {\n\t\t\t\t\tseenEmails.add( x.email );\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tactions = this.props.actions;\n\t\t}\n\t\treturn actions;\n\t}\n\n\trenderWordCloud() {\n\t\tdebug( 'Rendering word cloud...' );\n\t\tconst actions = this.getActions();\n\t\tconst texts = actions.map( x => x.value );\n\t\tlet stopwords = [];\n\t\tif (\n\t\t\tthis.state.removeQuestionWords &&\n\t\t\tisString( this.props.data.question )\n\t\t) {\n\t\t\tstopwords = tokenize( this.props.data.question );\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<WordCloud\n\t\t\t\t\tdata={texts}\n\t\t\t\t\theight={0.65 * window.innerHeight}\n\t\t\t\t\twidth={0.45*window.innerWidth}\n\t\t\t\t\trotate={0}\n\t\t\t\t\ttriggerRender={true}\n\t\t\t\t\tonClick={( d ) => {\n\t\t\t\t\t\tif ( contains( this.state.searchwords, d.text ) ) {\n\t\t\t\t\t\t\tthis.searchFilter( '' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.searchFilter( d.text );\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmarginTop: 20\n\t\t\t\t\t}}\n\t\t\t\t\tstopwords={stopwords}\n\t\t\t\t/>\n\t\t\t\t<TextClustering\n\t\t\t\t\ttexts={this.state.filtered.map( x => x.value )}\n\t\t\t\t\tactionLabel={this.props.actionLabel || this.props.t('action-label')}\n\t\t\t\t\tonClusters={( data ) => {\n\t\t\t\t\t\tdebug( 'Received clusters...' );\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tclusters: data\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t\tt={this.props.t}\n\t\t\t\t/>\n\t\t\t\t<Checkbox\n\t\t\t\t\ttooltip={this.props.t('remove-question-words-tooltip')}\n\t\t\t\t\ttooltipPlacement=\"top\"\n\t\t\t\t\tsize=\"small\" inline legend={this.props.t('remove-question-words')}\n\t\t\t\t\tdefaultValue={this.state.removeQuestionWords}\n\t\t\t\t\tonChange={( value ) => {\n\t\t\t\t\t\tthis.setState({ removeQuestionWords: value });\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tleft: '5px',\n\t\t\t\t\t\tbottom: '85px',\n\t\t\t\t\t\tposition: 'absolute'\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderBarchart() {\n\t\tconst actions = this.getActions();\n\t\tlet maxLength = 0;\n\t\tlet levels = this.props.data.levels.map( ( x, i ) => {\n\t\t\tlet out = isString( x ) ? x : innerText( x );\n\t\t\tif ( !out ) {\n\t\t\t\tout = `${this.props.t('choice')} ${i+1}`;\n\t\t\t}\n\t\t\tif ( out.length > maxLength ) {\n\t\t\t\tmaxLength = out.length;\n\t\t\t}\n\t\t\treturn out;\n\t\t});\n\t\tlet leftMargin = max( 250, maxLength * 7.5 );\n\t\tlet counts = tabulateValues( actions, levels );\n\t\tif ( levels.length > 7 ) {\n\t\t\t// Drop empty labels in case of many levels for readability of plot:\n\t\t\tlevels = levels.filter( ( _, idx ) => counts[ idx ] > 0 );\n\t\t\tcounts = counts.filter( val => val > 0 );\n\t\t}\n\t\treturn (\n\t\t\t<div style={{ height: 0.75 * window.innerHeight }}>\n\t\t\t\t<Plotly\n\t\t\t\t\tdata={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ty: levels,\n\t\t\t\t\t\t\tx: counts,\n\t\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\t\torientation: 'h'\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\t\t\tfit editable\n\t\t\t\t\tlayout={{\n\t\t\t\t\t\txaxis: {\n\t\t\t\t\t\t\ttitle: this.props.t('count')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tyaxis: {\n\t\t\t\t\t\t\ttitle: this.props.t('value'),\n\t\t\t\t\t\t\tcategoryorder: 'array',\n\t\t\t\t\t\t\tcategoryarray: levels\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmargin: {\n\t\t\t\t\t\t\tl: leftMargin\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderSankeyDiagram() {\n\t\tconst { left, right } = this.props.data;\n\t\tconst labels = left.concat( right );\n\t\tconst actions = this.getActions();\n\t\tconst paths = {};\n\t\tfor ( let i = 0; i < actions.length; i++ ) {\n\t\t\tconst arr = actions[ i ].value;\n\t\t\tif ( isArray( arr ) ) {\n\t\t\t\tfor ( let j = 0; j < arr.length; j++ ) {\n\t\t\t\t\tconst { a, b } = arr[ j ];\n\t\t\t\t\tif ( paths[ a+'-'+b ] ) {\n\t\t\t\t\t\tpaths[ a+'-'+b ] += 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpaths[ a+'-'+b ] = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst keys = objectKeys( paths );\n\t\tconst source = new Array( keys.length );\n\t\tconst target = new Array( keys.length );\n\t\tconst value = new Array( keys.length );\n\t\tfor ( let i = 0; i < keys.length; i++ ) {\n\t\t\tconst elems = keys[ i ].split( '-' );\n\t\t\tsource[ i ] = indexOf( left, elems[ 0 ] );\n\t\t\ttarget[ i ] = left.length + indexOf( right, elems[ 1 ] );\n\t\t\tvalue[ i ] = paths[ keys[ i ] ];\n\t\t}\n\t\treturn (\n\t\t\t<div style={{ height: 0.75 * window.innerHeight }}>\n\t\t\t\t<Plotly\n\t\t\t\t\tdata={[{\n\t\t\t\t\t\ttype: 'sankey',\n\t\t\t\t\t\torientation: 'h',\n\t\t\t\t\t\tnode: {\n\t\t\t\t\t\t\tpad: 15,\n\t\t\t\t\t\t\tthickness: 30,\n\t\t\t\t\t\t\tline: {\n\t\t\t\t\t\t\t\tcolor: 'black',\n\t\t\t\t\t\t\t\twidth: 0.5\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlabel: labels,\n\t\t\t\t\t\t\tcolor: 'blue'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlink: {\n\t\t\t\t\t\t\tsource,\n\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t}\n\t\t\t\t\t}]}\n\t\t\t\t\tfit editable\n\t\t\t\t\tlayout={{\n\t\t\t\t\t\tfontSize: 10\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderHistogram() {\n\t\tconst actions = this.getActions();\n\t\tconst values = actions.map( x => x.value );\n\t\tlet freqs = tabulate( values );\n\t\tfreqs = freqs.sort( ( a, b ) => {\n\t\t\treturn b[ 2 ] - a[ 2 ];\n\t\t});\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"scrollable-table\" style={{ height: 0.3 * window.innerHeight }} >\n\t\t\t\t\t<Table>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>{this.props.t('value')}</th>\n\t\t\t\t\t\t\t\t<th>{this.props.t('absolute')}</th>\n\t\t\t\t\t\t\t\t<th>{this.props.t('relative')}</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody >\n\t\t\t\t\t\t\t{freqs.map( ( val, idx ) => {\n\t\t\t\t\t\t\t\treturn ( <tr key={idx} >\n\t\t\t\t\t\t\t\t\t<td>{val[ 0 ]}</td>\n\t\t\t\t\t\t\t\t\t<td>{val[ 1 ]}</td>\n\t\t\t\t\t\t\t\t\t<td>{val[ 2 ].toFixed( 3 )}</td>\n\t\t\t\t\t\t\t\t</tr> );\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</Table>\n\t\t\t\t</div>\n\t\t\t\t<div style={{ height: 0.4 * window.innerHeight }}>\n\t\t\t\t\t<Plotly\n\t\t\t\t\t\tdata={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tx: values,\n\t\t\t\t\t\t\t\ttype: 'histogram',\n\t\t\t\t\t\t\t\tname: 'histogram'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tfit editable\n\t\t\t\t\t\tlayout={{\n\t\t\t\t\t\t\txaxis: {\n\t\t\t\t\t\t\t\ttitle: this.props.t('value')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tyaxis: {\n\t\t\t\t\t\t\t\ttitle: this.props.t('count')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderTable() {\n\t\tconst nRows = this.props.data.rows.length;\n\t\tconst nCols = this.props.data.cols.length;\n\t\tconst counts = ndarray({\n\t\t\t'shape': [ nRows, nCols ],\n\t\t\t'dtype': 'int32'\n\t\t});\n\t\tconst actions = this.getActions();\n\t\tfor ( let i = 0; i < actions.length; i++ ) {\n\t\t\tconst elem = actions[ i ].value;\n\t\t\tfor ( let j = 0; j < nRows; j++ ) {\n\t\t\t\tfor ( let k = 0; k < nCols; k++ ) {\n\t\t\t\t\tif ( elem[ j ][ k ] === true ) {\n\t\t\t\t\t\tcounts.set( j, k, Number( counts.get( j, k ) ) + 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst table = <table className=\"table table-bordered\" >\n\t\t\t<thead>\n\t\t\t\t<th></th>\n\t\t\t\t{this.props.data.cols.map( ( c, i ) => <th key={i} >{c}</th> )}\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{this.props.data.rows.map( ( r, idx ) => {\n\t\t\t\t\tconst row = new Array( nCols+1 );\n\t\t\t\t\trow[ 0 ] = <th>{r}</th>;\n\t\t\t\t\tfor ( let i = 0; i < nCols; i++ ) {\n\t\t\t\t\t\trow.push( <td>{counts.get( idx, i )}</td> );\n\t\t\t\t\t}\n\t\t\t\t\treturn <tr key={idx}>{row}</tr>;\n\t\t\t\t})}\n\t\t\t</tbody>\n\t\t</table>;\n\t\treturn (\n\t\t\t<div style={{ height: 0.75 * window.innerHeight }} >\n\t\t\t\t{table}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderNestedTable = () => {\n\t\treturn null;\n\t}\n\n\tchatInviteFactory = ( chatName, email ) => {\n\t\tconst session = this.context;\n\t\treturn ( _, opened ) => {\n\t\t\tdebug( 'Invite '+email+' to personal chat...' );\n\t\t\tif ( opened ) {\n\t\t\t\tsession.inviteToChat({\n\t\t\t\t\tname: chatName,\n\t\t\t\t\tcanLeave: false\n\t\t\t\t}, email );\n\t\t\t} else {\n\t\t\t\tsession.closeChatForAll( chatName );\n\t\t\t}\n\t\t};\n\t}\n\n\tvideoChatInviteFactory = ( data, email ) => {\n\t\tconst session = this.context;\n\t\treturn ( _, opened ) => {\n\t\t\tdebug( 'Invite '+email+' to video chat...' );\n\t\t\tif ( opened ) {\n\t\t\t\tsession.inviteToVideo( data, email );\n\t\t\t}\n\t\t};\n\t}\n\n\trenderListGroupItem = ( index, key ) => {\n\t\tdebug( `Rendering item at position ${index}...` );\n\t\tconst { filtered, clusters, searchwords } = this.state;\n\t\tconst elem = filtered[ index ];\n\t\tconst value = generateValueLabel({ value: elem.value, ...this.props.data });\n\t\tlet highlighter;\n\t\tif ( this.props.data.type === 'image' ) {\n\t\t\thighlighter = <Image src={value} width=\"50%\" />;\n\t\t} else {\n\t\t\thighlighter = isString( value ) ? <Highlighter\n\t\t\t\tclassName=\"response-visualizer-text\"\n\t\t\t\tsearchWords={searchwords}\n\t\t\t\tautoEscape={true}\n\t\t\t\ttextToHighlight={wordWrap( String( value ) )}\n\t\t\t/> : value;\n\t\t}\n\t\tconst name = elem.name;\n\t\tconst style = {\n\t\t\tpadding: '0.75rem'\n\t\t};\n\t\tif ( clusters.length > 0 ) {\n\t\t\tconst opacity = 0.1;\n\t\t\tconst col = COLORS[ clusters[ index ] % COLORS.length ] || '#D3D3D3';\n\t\t\tlet rgba = 'rgba(' + parseInt( col.substring( 1, 3 ), 16 ) + ','+ parseInt( col.substring( 3, 5 ), 16 );\n\t\t\trgba += ',' + parseInt( col.substring( 5, 7 ), 16 ) + ',' + opacity + ')';\n\t\t\tstyle.background = rgba;\n\t\t\tstyle.border = '1px solid '+col;\n\t\t}\n\t\tconst session = this.context;\n\t\tconst date = new Date( elem.absoluteTime );\n\t\treturn ( <ListGroupItem key={key} style={style}>\n\t\t\t{ this.props.showExtended ?\n\t\t\t\t<span style={{ textAlign: 'left' }}>\n\t\t\t\t\t<b style={{ marginBottom: 4 }}>{name} ({elem.email}) ({date.toLocaleTimeString() + ' ' + date.toLocaleDateString()}):</b>\n\t\t\t\t\t<br />\n\t\t\t\t\t{highlighter}\n\t\t\t\t</span> :\n\t\t\t\thighlighter\n\t\t\t}\n\t\t\t{ this.props.showExtended && session.userProgress[ elem.email ] ? <ButtonGroup className=\"chat-button-group\" >\n\t\t\t\t<VideoChatButton\n\t\t\t\t\tfor={`${session.user.name}-${name}`}\n\t\t\t\t\tsubject={this.props.t( 'video-chat-with', { name })}\n\t\t\t\t\tstyle={{ float: 'right' }}\n\t\t\t\t\tonClick={this.videoChatInviteFactory({\n\t\t\t\t\t\tname: `${session.user.name}-${name}`,\n\t\t\t\t\t\tsubject: this.props.t( 'video-chat-with', { name })\n\t\t\t\t\t}, elem.email )}\n\t\t\t\t\tbuttonVariant=\"outline-secondary\"\n\t\t\t\t\tbuttonLabel={<i className=\"fa fa-xs fa-video\"></i>}\n\t\t\t\t\ttooltipPlacement=\"bottom\"\n\t\t\t\t\ttooltip={this.props.t( 'video-chat' )}\n\t\t\t\t/>\n\t\t\t\t<ChatButton\n\t\t\t\t\tfor={this.props.t( 'chat-with', { name })}\n\t\t\t\t\tonClick={this.chatInviteFactory( this.props.t( 'chat-with', { name }), elem.email )}\n\t\t\t\t\tbuttonVariant=\"outline-secondary\"\n\t\t\t\t\tbuttonLabel={<i className=\"fas fa-comments\"></i>}\n\t\t\t\t\ttooltipPlacement=\"bottom\"\n\t\t\t\t\ttooltip={this.props.t( 'text-chat' )}\n\t\t\t\t\tstyle={{ float: 'right' }}\n\t\t\t\t/>\n\t\t\t</ButtonGroup> : null }\n\t\t\t<ButtonGroup className=\"action-display-button-group\">\n\t\t\t{ this.props.data.type !== 'image' ?\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"outline-secondary\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tonClick={this.showModalFactory({ ...elem, value: value })}\n\t\t\t\t\taria-label={this.props.t('fullscreen-view')}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"fa fa-search-plus\" />\n\t\t\t\t</Button> :\n\t\t\t\tnull\n\t\t\t}\n\t\t\t{ this.props.showExtended ?\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"outline-danger\"\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tonClick={this.props.deleteFactory( index )}\n\t\t\t\t\t\taria-label={this.props.t('delete')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"fa fa-trash\" />\n\t\t\t\t\t</Button> :\n\t\t\t\tnull\n\t\t\t}\n\t\t\t</ButtonGroup>\n\t\t</ListGroupItem> );\n\t}\n\n\trenderRangePlot = () => {\n\t\tconst halfWidth = [];\n\t\tconst values = [];\n\t\tconst midpoints = [];\n\t\tconst indices = [];\n\t\tconst actions = this.getActions();\n\t\tfor ( let i = 0; i < actions.length; i++ ) {\n\t\t\tvalues.push( JSON.parse( actions[ i ].value ) );\n\t\t\tmidpoints.push( 0.5 * ( values[ i ][ 0 ] + values[ i ][ 1 ] ) );\n\t\t\thalfWidth.push( 0.5 * ( values[ i ][ 1 ] - values[ i ][ 0 ] ) );\n\t\t\tindices.push( i );\n\t\t}\n\t\treturn ( <div style={{ height: 0.75 * window.innerHeight }}>\n\t\t\t<Plotly\n\t\t\t\tdata={[\n\t\t\t\t\t{\n\t\t\t\t\t\ty: midpoints,\n\t\t\t\t\t\tx: indices,\n\t\t\t\t\t\ttext: indices.map( i => {\n\t\t\t\t\t\t\treturn `[${values[ i ][ 0 ]}, ${values[ i ][ 1 ]}]`;\n\t\t\t\t\t\t}),\n\t\t\t\t\t\terror_y: {\n\t\t\t\t\t\t\ttype: 'data',\n\t\t\t\t\t\t\tarray: halfWidth,\n\t\t\t\t\t\t\tvisible: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttype: 'scatter',\n\t\t\t\t\t\tmode: 'markers',\n\t\t\t\t\t\torientation: 'h'\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t\tfit editable\n\t\t\t\tlayout={{\n\t\t\t\t\txaxis: {\n\t\t\t\t\t\tshowticklabels: false,\n\t\t\t\t\t\tshowline: false\n\t\t\t\t\t},\n\t\t\t\t\tyaxis: {\n\t\t\t\t\t\ttitle: this.props.t('value')\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div> );\n\t}\n\n\trenderPlot() {\n\t\tlet plot;\n\t\tif ( this.props.actions.length === 0 ) {\n\t\t\treturn <Alert variant=\"warning\" >{this.props.t('no-data-available')}</Alert>;\n\t\t}\n\t\tswitch ( this.props.data.type ) {\n\t\t\tcase 'image':\n\t\t\t\tplot = null;\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\tdefault:\n\t\t\t\tplot = this.renderWordCloud();\n\t\t\t\tbreak;\n\t\t\tcase 'factor':\n\t\t\t\tplot = this.renderBarchart();\n\t\t\t\tbreak;\n\t\t\tcase 'number':\n\t\t\t\tplot = this.renderHistogram();\n\t\t\t\tbreak;\n\t\t\tcase 'matrix':\n\t\t\t\tplot = this.renderTable();\n\t\t\t\tbreak;\n\t\t\tcase 'tensor':\n\t\t\t\tplot = this.renderNestedTable();\n\t\t\t\tbreak;\n\t\t\tcase 'matches':\n\t\t\t\tplot = this.renderSankeyDiagram();\n\t\t\t\tbreak;\n\t\t\tcase 'range':\n\t\t\t\tplot = this.renderRangePlot();\n\t\t\t\tbreak;\n\t\t}\n\t\tif ( !plot ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst label = removeLast( lowercase( this.props.actionLabel ) );\n\t\treturn ( <div>\n\t\t\t{plot}\n\t\t\t<Switch style={{ zIndex: 2000 }} onChange={( idx ) => {\n\t\t\t\tlet type;\n\t\t\t\tswitch ( idx ) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\ttype = 'first';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\ttype = 'all';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\ttype = 'last';\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.setState({ handleMultipleResponses: type });\n\t\t\t}}>\n\t\t\t\t<i>\n\t\t\t\t\t<Trans i18nKey=\"include-first\" ns=\"ResponseVisualizer\" >\n\t\t\t\t\t\t<b>Only</b> include first {label} for any student.\n\t\t\t\t\t</Trans>\n\t\t\t\t</i>\n\t\t\t\t<i>\n\t\t\t\t\t<Trans i18nKey=\"include-all\" ns=\"ResponseVisualizer\" >\n\t\t\t\t\t\tInclude <b>all</b> {label}s for any student.\n\t\t\t\t\t</Trans>\n\t\t\t\t</i>\n\t\t\t\t<i>\n\t\t\t\t\t<Trans i18nKey=\"include-latest\" ns=\"ResponseVisualizer\" >\n\t\t\t\t\t\t<b>Only</b> include latest {label} for any student.\n\t\t\t\t\t</Trans>\n\t\t\t\t</i>\n\t\t\t</Switch>\n\t\t</div> );\n\t}\n\n\trender() {\n\t\treturn ( <Fragment>\n\t\t\t<Modal\n\t\t\t\tshow={true}\n\t\t\t\tonHide={this.props.toggleActions}\n\t\t\t\tdialogClassName=\"modal-100w\"\n\t\t\t>\n\t\t\t\t<FullscreenHeader\n\t\t\t\t\tcomponentID={this.props.componentID}\n\t\t\t\t\tactionLabel={this.props.actionLabel}\n\t\t\t\t\tonPeriodChange={this.props.onPeriodChange}\n\t\t\t\t\tcohorts={this.context.cohorts}\n\t\t\t\t\tselectedCohort={this.props.selectedCohort}\n\t\t\t\t\tonCohortChange={this.props.onCohortChange}\n\t\t\t\t\tactions={this.props.actions}\n\t\t\t\t\tt={this.props.t}\n\t\t\t\t/>\n\t\t\t\t<Modal.Body style={{ minHeight: 0.75 * window.innerHeight, padding: 0 }} >\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col md={6}>\n\t\t\t\t\t\t\t{ this.state.filtered.length > 0 ?\n\t\t\t\t\t\t\t\t<div style={{ marginLeft: 0, overflowY: 'scroll', height: 0.75 * window.innerHeight }}>\n\t\t\t\t\t\t\t\t\t<ReactList\n\t\t\t\t\t\t\t\t\t\tinitialIndex={0}\n\t\t\t\t\t\t\t\t\t\titemRenderer={this.renderListGroupItem}\n\t\t\t\t\t\t\t\t\t\tlength={this.state.filtered.length}\n\t\t\t\t\t\t\t\t\t\ttype={this.props.data.type === 'image' ? 'uniform' : 'variable'}\n\t\t\t\t\t\t\t\t\t\tpageSize={50}\n\t\t\t\t\t\t\t\t\t\tminSize={10}\n\t\t\t\t\t\t\t\t\t\titemSizeGetter={this.itemSizeGetter}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div> :\n\t\t\t\t\t\t\t\t<Card body className=\"bg-light\">\n\t\t\t\t\t\t\t\t\t<h2>{this.props.t('no-matching-data')}</h2>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col md={6} style={{ overflowY: 'auto', maxWidth: '49.2%' }}>\n\t\t\t\t\t\t\t{this.renderPlot()}\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Modal.Body>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t<Badge variant=\"secondary\">\n\t\t\t\t\t\t\t{this.props.t( 'num-actions', { label: uncapitalize( this.props.actionLabel ), n: this.state.filtered.length })}\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t</h4>\n\t\t\t\t\t<Search\n\t\t\t\t\t\tonClick={this.searchFilter}\n\t\t\t\t\t\textended={this.props.showExtended}\n\t\t\t\t\t\tt={this.props.t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button variant=\"secondary\" onClick={this.props.toggleExtended}>{ this.props.showExtended ? this.props.t('hide-extended') : this.props.t('show-extended') }</Button>\n\t\t\t\t\t<Button onClick={this.props.toggleActions}>{this.props.t('close')}</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t\t<SingleActionModal\n\t\t\t\tshow={this.state.showModal} onHide={this.hideModal}\n\t\t\t\tmodalContent={this.state.modalContent}\n\t\t\t\tactionLabel={this.props.actionLabel}\n\t\t\t\tdataType={this.props.data.type}\n\t\t\t\tshowExtended={this.state.showExtended}\n\t\t\t\tt={this.props.t}\n\t\t\t/>\n\t\t</Fragment> );\n\t}\n}\n\n\n// PROPERTIES //\n\nFullscreenActionDisplay.propTypes = {\n\tactions: PropTypes.array.isRequired,\n\tactionLabel: PropTypes.string,\n\tdata: PropTypes.object.isRequired,\n\tcomponentID: PropTypes.string.isRequired,\n\tdeleteFactory: PropTypes.func.isRequired,\n\tonPeriodChange: PropTypes.func.isRequired,\n\tshowExtended: PropTypes.bool.isRequired,\n\ttoggleActions: PropTypes.func.isRequired,\n\ttoggleExtended: PropTypes.func.isRequired\n};\n\nFullscreenActionDisplay.defaultProps = {\n\tactionLabel: null\n};\n\nFullscreenActionDisplay.contextType = SessionContext;\n\n\n// EXPORTS //\n\n\nexport default FullscreenActionDisplay;\n","// MODULES //\n\nimport copy from '@stdlib/utils/copy';\nimport logger from 'debug';\nimport isObjectLike from '@stdlib/assert/is-object-like';\nimport { MATCH_LIST_SUBMISSION, MULTIPLE_CHOICE_MATRIX_SUBMISSION, USER_FEEDBACK_FORM } from '@isle-project/constants/actions.js';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:response-visualizer' );\n\n\n// MAIN //\n\nfunction extractValue( action ) {\n\tif ( action.type === USER_FEEDBACK_FORM ) {\n\t\taction = copy( action );\n\t\tdebug( 'Received a feedback action...' );\n\t\tlet json;\n\t\tif ( isObjectLike( action.value ) ) {\n\t\t\tjson = action.value;\n\t\t} else {\n\t\t\tjson = JSON.parse( action.value );\n\t\t}\n\t\taction.value = '';\n\t\tif ( json.comments ) {\n\t\t\taction.value += json.comments + '. ';\n\t\t}\n\t\tif ( json.noUnderstanding ) {\n\t\t\taction.value += 'I do not understand this. ';\n\t\t}\n\t\tif ( json.needsExplanation ) {\n\t\t\taction.value += 'It needs a more detailed explanation. ';\n\t\t}\n\t\tif ( json.noLogic ) {\n\t\t\taction.value += 'I can\\'t follow the logic. ';\n\t\t}\n\t}\n\telse if (\n\t\taction.type === MULTIPLE_CHOICE_MATRIX_SUBMISSION ||\n\t\taction.type === MATCH_LIST_SUBMISSION\n\t) {\n\t\tif ( !isObjectLike( action.value ) ) {\n\t\t\taction.value = JSON.parse( action.value );\n\t\t}\n\t}\n\treturn action;\n}\n\n\n// EXPORTS //\n\nexport default extractValue;\n","// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport Badge from 'react-bootstrap/Badge';\nimport Button from 'react-bootstrap/Button';\nimport Popover from 'react-bootstrap/Popover';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport hasOwnProperty from '@stdlib/assert/has-own-property';\nimport uncapitalize from '@stdlib/string/uncapitalize';\nimport Gate from '@isle-project/components/gate';\nimport OverlayTrigger from '@isle-project/components/overlay-trigger';\nimport Tooltip from '@isle-project/components/tooltip';\nimport DeleteModal from '@isle-project/components/internal/delete-modal';\nimport SessionContext from '@isle-project/session/context.js';\nimport isUserInCohort from '@isle-project/utils/is-user-in-cohort';\nimport { RESPONSE_VISUALIZER_TOGGLE, RESPONSE_VISUALIZER_EXTENDED } from '@isle-project/constants/actions.js';\nimport { FOCUS_ELEMENT, LOSE_FOCUS_ELEMENT, MEMBER_ACTION,\n\tRETRIEVED_USER_ACTIONS, SELECTED_COHORT, UPDATED_VISUALIZER } from '@isle-project/constants/events.js';\nimport { addResources } from '@isle-project/locales';\nimport FullscreenActionDisplay from './fullscreen_action_display.js';\nimport extractValue from './extract_value.js';\nimport './response_visualizer.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:response-visualizer' );\naddResources( 'ResponseVisualizer' );\n\n\n// FUNCTIONS //\n\n/**\n* Extracts the second to last word of an action type, as these should be most informative about the nature of the action (recall that project convention is to use `_` to separate words in action types)\n*\n* @private\n* @param {string} str - action type\n* @returns {string} substring of action type\n*/\nconst extractSubstr = ( str ) => {\n\treturn str.substr( str.lastIndexOf( '_', str.lastIndexOf( '_' ) - 1 ) + 1 );\n};\n\nconst usersWithFocus = ( userFocuses, usersWithActions, id ) => {\n\tconst out = [];\n\tfor ( let key in userFocuses ) {\n\t\tif (\n\t\t\thasOwnProperty( userFocuses, key ) && // user has component in focus\n\t\t\t!hasOwnProperty( usersWithActions, key ) // user has not already submitted an action\n\t\t) {\n\t\t\tconst elemID = userFocuses[ key ];\n\t\t\tif ( elemID === id ) {\n\t\t\t\tout.push( key );\n\t\t\t}\n\t\t}\n\t}\n\treturn out;\n};\n\n\n// MAIN //\n\n/**\n* Instructor panel for visualizing component responses.\n*\n* @property {string} buttonLabel - label of button to pull of action display\n* @property {Object} buttonStyle - button CSS styles\n* @property {Object} data - data type information to visualize\n* @property {string} showID - whether to display the component ID\n* @property {string} variant - button style variant\n* @property {string} info - action identifier for info\n* @property {string} success - action identifier for success\n* @property {string} danger - action identifier for danger\n* @property {boolean} noSessionRegistration - controls whether to register the component in the session (e.g., for progress calculations)\n*/\nclass ResponseVisualizer extends Component {\n\tconstructor( props, context ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tactions: [],\n\t\t\tnActions: 0,\n\t\t\tnSuccess: 0,\n\t\t\tnDanger: 0,\n\t\t\tnInfo: 0,\n\t\t\tshowActions: false,\n\t\t\tshowExtended: false,\n\t\t\tshowDeleteModal: false,\n\t\t\tselectedAction: null,\n\t\t\tperiod: null\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconst session = this.context;\n\t\tthis.registerInSession();\n\t\tthis.addSessionActions();\n\t\tif ( session ) {\n\t\t\tthis.unsubscribe = session.subscribe( ( type, action ) => {\n\t\t\t\tif ( type === RETRIEVED_USER_ACTIONS || type === SELECTED_COHORT ) {\n\t\t\t\t\tthis.addSessionActions();\n\t\t\t\t}\n\t\t\t\telse if (\n\t\t\t\t\ttype === MEMBER_ACTION &&\n\t\t\t\t\taction.id === this.props.id\n\t\t\t\t) {\n\t\t\t\t\tif (\n\t\t\t\t\t\taction.type === FOCUS_ELEMENT ||\n\t\t\t\t\t\taction.type === LOSE_FOCUS_ELEMENT\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t\t} else if (\n\t\t\t\t\t\taction.type === this.props.info ||\n\t\t\t\t\t\taction.type === this.props.success ||\n\t\t\t\t\t\taction.type === this.props.danger\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tsession.selectedCohort &&\n\t\t\t\t\t\t\t!isUserInCohort( session.selectedCohort, action.email )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.pushSessionAction( action );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif ( this.unsubscribe ) {\n\t\t\tthis.unsubscribe();\n\t\t}\n\n\t\t// Unregister from session:\n\t\tconst session = this.context;\n\t\tdelete session.responseVisualizers[ this.props.id ];\n\t\tsession.responseVisualizerIds = session.responseVisualizerIds.filter( x => {\n\t\t\treturn x !== this.props.id;\n\t\t});\n\t}\n\n\tregisterInSession() {\n\t\tconst props = this.props;\n\t\tconst session = this.context;\n\t\tif ( props.info && props.id && !props.noSessionRegistration ) {\n\t\t\tdebug( `Register response visualizer for ${props.id} in session:` );\n\t\t\tsession.responseVisualizers[ props.id ] = {\n\t\t\t\ttype: props.info,\n\t\t\t\tref: this\n\t\t\t};\n\t\t\tconst ids = session.responseVisualizerIds;\n\t\t\tids.push( props.id );\n\t\t\tsession.debouncedInitializeProgress();\n\t\t\tids.sort( ( a, b ) => {\n\t\t\t\ta = document.getElementById( `${a}_response_visualizer` );\n\t\t\t\tb = document.getElementById( `${b}_response_visualizer` );\n\t\t\t\tif ( !a || !b ) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tif ( a === b ) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tconst comp = a.compareDocumentPosition( b );\n\t\t\t\tif ( comp & 2 ) {\n\t\t\t\t\t// `b` comes before `a`\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn -1;\n\t\t\t});\n\t\t}\n\t}\n\n\ttoggleActions = () => {\n\t\tconst session = this.context;\n\t\tsession.log({\n\t\t\tid: this.props.id+'_response_visualizer',\n\t\t\ttype: RESPONSE_VISUALIZER_TOGGLE,\n\t\t\tvalue: !this.state.showActions\n\t\t});\n\t\tconst newState = {\n\t\t\tshowActions: !this.state.showActions\n\t\t};\n\t\tif ( newState.showActions ) {\n\t\t\tthis.addSessionActions();\n\t\t} else {\n\t\t\tnewState.period = null;\n\t\t}\n\t\tthis.setState( newState );\n\t}\n\n\ttoggleExtended = () => {\n\t\tthis.setState({\n\t\t\tshowExtended: !this.state.showExtended\n\t\t}, () => {\n\t\t\tconst session = this.context;\n\t\t\tsession.log({\n\t\t\t\tid: this.props.id+'_response_visualizer',\n\t\t\t\ttype: RESPONSE_VISUALIZER_EXTENDED,\n\t\t\t\tvalue: this.state.showExtended\n\t\t\t});\n\t\t});\n\t}\n\n\tonPeriodChange = ( newPeriod ) => {\n\t\tthis.setState({\n\t\t\tperiod: newPeriod\n\t\t}, this.addSessionActions );\n\t}\n\n\tonCohortChange = ( event ) => {\n\t\tdebug( 'Change the selected cohort...' );\n\t\tthis.context.selectCohort( event.target.value );\n\t}\n\n\tpushSessionAction = ( action ) => {\n\t\taction = extractValue( action );\n\t\tconst filtered = this.state.actions;\n\t\tif ( this.state.period ) {\n\t\t\tconst { from, to } = this.state.period;\n\t\t\tif ( action.absoluteTime > from && action.absoluteTime < to ) {\n\t\t\t\tfiltered.unshift( action );\n\t\t\t}\n\t\t} else {\n\t\t\tfiltered.unshift( action );\n\t\t}\n\t\tconst newState = {\n\t\t\tactions: filtered,\n\t\t\tnActions: this.state.nActions + 1\n\t\t};\n\t\tif ( !this.emailHash[ action.email ] ) {\n\t\t\tthis.emailHash[ action.email ] = action.type;\n\t\t\tif ( this.props.success && action.type === this.props.success ) {\n\t\t\t\tnewState.nSuccess = this.state.nSuccess + 1;\n\t\t\t} else if ( this.props.danger && action.type === this.props.danger ) {\n\t\t\t\tnewState.nDanger = this.state.nDanger + 1;\n\t\t\t} else if ( this.props.info && action.type === this.props.info ){\n\t\t\t\tnewState.nInfo = this.state.nInfo + 1;\n\t\t\t}\n\t\t}\n\t\tthis.setState( newState );\n\t}\n\n\taddSessionActions = () => {\n\t\tconst session = this.context;\n\t\tdebug( !session.selectedCohort ? 'Add session actions...' : 'Add session actions for cohort '+session.selectedCohort.title );\n\t\tconst actions = session.socketActions;\n\t\tconst filtered = [];\n\t\tthis.emailHash = {};\n\t\tfor ( let i = 0; i < actions.length; i++ ) {\n\t\t\tlet action = actions[ i ];\n\t\t\tif (\n\t\t\t\taction.id === this.props.id &&\n\t\t\t\t( action.type === this.props.info || action.type === this.props.success || action.type === this.props.danger )\n\t\t\t) {\n\t\t\t\taction = extractValue( action );\n\t\t\t\tif (\n\t\t\t\t\tsession.selectedCohort &&\n\t\t\t\t\t!isUserInCohort( session.selectedCohort, action.email )\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthis.emailHash[ action.email ] = action.type;\n\t\t\t\tif ( this.state.period ) {\n\t\t\t\t\tconst { from, to } = this.state.period;\n\t\t\t\t\tif ( action.absoluteTime > from && action.absoluteTime < to ) {\n\t\t\t\t\t\tfiltered.push( action );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfiltered.push( action );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst newState = {\n\t\t\tnSuccess: 0,\n\t\t\tnDanger: 0,\n\t\t\tnInfo: 0,\n\t\t\tactions: filtered\n\t\t};\n\t\tif ( !this.state.period ) {\n\t\t\t// Attach total number of actions on initial call:\n\t\t\tnewState.nActions = filtered.length;\n\t\t}\n\t\tconst users = session.userList;\n\t\tfor ( let i = 0; i < users.length; i++ ) {\n\t\t\tconst userEmail = users[ i ].email;\n\t\t\tif ( hasOwnProperty( this.emailHash, userEmail ) ) {\n\t\t\t\tconst type = this.emailHash[ userEmail ];\n\t\t\t\tif ( this.props.success && type === this.props.success ) {\n\t\t\t\t\tnewState.nSuccess += 1;\n\t\t\t\t} else if ( this.props.danger && type === this.props.danger ) {\n\t\t\t\t\tnewState.nDanger += 1;\n\t\t\t\t} else if ( this.props.info && type === this.props.info ) {\n\t\t\t\t\tnewState.nInfo += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.setState( newState, () => {\n\t\t\tsession.update( UPDATED_VISUALIZER, this.props.id );\n\t\t});\n\t}\n\n\tcloseDeleteModal = () => {\n\t\tthis.setState({\n\t\t\tshowDeleteModal: false,\n\t\t\tselectedAction: null\n\t\t});\n\t}\n\n\tdeleteFactory = ( idx ) => {\n\t\treturn () => {\n\t\t\tdebug( 'Delete action at index '+idx );\n\t\t\tthis.setState({\n\t\t\t\tselectedAction: this.state.actions[ idx ],\n\t\t\t\tshowDeleteModal: true\n\t\t\t});\n\t\t};\n\t}\n\n\tdeleteSelectedAction = () => {\n\t\tconst session = this.context;\n\t\tsession.removeSessionElementFromDB( this.state.selectedAction.sessiondataID, ( err ) => {\n\t\t\tif ( !err ) {\n\t\t\t\tthis.addSessionActions();\n\t\t\t}\n\t\t\tthis.closeDeleteModal();\n\t\t});\n\t}\n\n\trenderTooltip() {\n\t\tconst session = this.context;\n\t\tlet nUsers;\n\t\tif ( session.selectedCohort ) {\n\t\t\tnUsers = session.activeCohortMembers.length;\n\t\t} else {\n\t\t\tnUsers = session.userList.length;\n\t\t}\n\t\tconst focusUsers = usersWithFocus( session.userFocuses, this.emailHash, this.props.id );\n\n\t\t// eslint-disable-next-line i18next/no-literal-string\n\t\tlet tooltip = `${this.props.t('interaction-rate-tooltip')}:\\n\\n`;\n\t\tconst table = <table className=\"table table-bordered table-condensed\" >\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>{this.props.t('action-type')}</th>\n\t\t\t\t\t<th>{this.props.t('rate')}</th>\n\t\t\t\t\t<th>{this.props.t('color')}</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{ this.props.success ?\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>{extractSubstr( this.props.success )}</td>\n\t\t\t\t\t\t<td>{this.state.nSuccess} / {nUsers}</td>\n\t\t\t\t\t\t<td>{this.props.t('green')}</td>\n\t\t\t\t\t</tr> : null\n\t\t\t\t}\n\t\t\t\t{ this.props.danger ?\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>{extractSubstr( this.props.danger)}</td>\n\t\t\t\t\t\t<td>{this.state.nDanger} / {nUsers}</td>\n\t\t\t\t\t\t<td>{this.props.t('red')}</td>\n\t\t\t\t\t</tr> : null\n\t\t\t\t}\n\t\t\t\t{ this.props.info ?\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>{extractSubstr( this.props.info )}</td>\n\t\t\t\t\t\t<td>{this.state.nInfo} / {nUsers}</td>\n\t\t\t\t\t\t<td>{this.props.t('blue')}</td>\n\t\t\t\t\t</tr> : null\n\t\t\t\t}\n\t\t\t\t<tr>\n\t\t\t\t\t<td>{this.props.t('in-focus')}</td>\n\t\t\t\t\t<td>{focusUsers.length} / {nUsers}</td>\n\t\t\t\t\t<td>{this.props.t('orange')}</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>;\n\n\t\ttooltip = <Popover title={tooltip} style={{ fontSize: 12, textAlign: 'left', maxWidth: 1200 }} >\n\t\t\t<Popover.Content>\n\t\t\t\t{table}\n\t\t\t\t<p>{this.props.t('users-in-focus')}</p>\n\t\t\t\t<p style={{ wordWrap: 'break-word' }} >{focusUsers.join( ', ')}</p>\n\t\t\t</Popover.Content>\n\t\t</Popover>;\n\t\treturn tooltip;\n\t}\n\n\trenderFullscreenModal() {\n\t\tconst optionalProps = {};\n\t\tif ( this.props.buttonLabel ) {\n\t\t\toptionalProps.actionLabel = this.props.buttonLabel;\n\t\t} else {\n\t\t\toptionalProps.actionLabel = this.props.t('actions');\n\t\t}\n\t\tif ( !this.state.showActions ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn ( <FullscreenActionDisplay\n\t\t\tcomponentID={this.props.id}\n\t\t\tactions={this.state.actions}\n\t\t\tshowExtended={this.state.showExtended}\n\t\t\tdeleteFactory={this.deleteFactory}\n\t\t\tonPeriodChange={this.onPeriodChange}\n\t\t\ttoggleExtended={this.toggleExtended}\n\t\t\ttoggleActions={this.toggleActions}\n\t\t\tdata={this.props.data}\n\t\t\tselectedCohort={this.context.selectedCohort}\n\t\t\tonCohortChange={this.onCohortChange}\n\t\t\tt={this.props.t}\n\t\t\t{...optionalProps}\n\t\t/> );\n\t}\n\n\trender() {\n\t\tif ( !this.props.id ) {\n\t\t\treturn <Gate owner><span className=\"title no-id-message\">{this.props.t('no-id')}</span></Gate>;\n\t\t}\n\t\tconst session = this.context;\n\t\tlet nUsers;\n\t\tif ( session.selectedCohort ) {\n\t\t\tnUsers = session.activeCohortMembers.length;\n\t\t} else {\n\t\t\tnUsers = session.userList.length;\n\t\t}\n\t\tconst focusUsers = usersWithFocus( session.userFocuses, this.emailHash, this.props.id );\n\t\tlet successRate = this.state.nSuccess / nUsers;\n\t\tsuccessRate *= 100.0;\n\t\tlet dangerRate = this.state.nDanger / nUsers;\n\t\tdangerRate *= 100.0;\n\t\tlet infoRate = this.state.nInfo / nUsers;\n\t\tinfoRate *= 100.0;\n\t\tlet focusRate = focusUsers.length / nUsers;\n\t\tfocusRate *= 100.0;\n\t\tconst buttonLabel = this.props.buttonLabel || this.props.t('actions');\n\t\treturn (\n\t\t\t<div\n\t\t\t\tid={`${this.props.id}_response_visualizer`}\n\t\t\t\tstyle={{ display: this.props.inline ? 'inline' : 'inherit' }}\n\t\t\t>\n\t\t\t\t<Gate owner>\n\t\t\t\t{this.renderFullscreenModal()}\n\t\t\t\t\t<ButtonGroup size=\"sm\" vertical style={{ verticalAlign: 'inherit', ...this.props.style }} >\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tplacement='top'\n\t\t\t\t\t\t\ttooltip={this.props.showID ? <span>\n\t\t\t\t\t\t\t\t{this.props.t('open-tooltip', { label: uncapitalize( buttonLabel ), id: this.props.id })}\n\t\t\t\t\t\t\t</span> : null}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={this.toggleActions}\n\t\t\t\t\t\t\t\tstyle={{ ...this.props.buttonStyle }}\n\t\t\t\t\t\t\t\tvariant={this.props.variant}\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\tid={`${this.props.id}_answers_button`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span style={{ marginRight: '5px', pointerEvents: 'none' }} >{buttonLabel}</span>\n\t\t\t\t\t\t\t\t<Badge variant=\"dark\" style={{ fontSize: '10px', pointerEvents: 'none' }}>{this.state.nActions}</Badge>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<OverlayTrigger\n\t\t\t\t\t\t\ttrigger={['hover', 'focus']}\n\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\toverlay={this.renderTooltip()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ProgressBar style={{ width: '100%', marginTop: '3px', height: '0.7rem', boxShadow: '0 0 2px black' }}>\n\t\t\t\t\t\t\t\t<ProgressBar variant=\"info\" now={infoRate} max={100} min={0} />\n\t\t\t\t\t\t\t\t<ProgressBar variant=\"warning\" now={focusRate} max={100} min={0} />\n\t\t\t\t\t\t\t\t<ProgressBar variant=\"success\" now={successRate} max={100} min={0} />\n\t\t\t\t\t\t\t\t<ProgressBar variant=\"danger\" now={dangerRate} max={100} min={0} />\n\t\t\t\t\t\t\t</ProgressBar>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Gate>\n\t\t\t\t<DeleteModal\n\t\t\t\t\tshow={this.state.showDeleteModal}\n\t\t\t\t\tonDelete={this.deleteSelectedAction}\n\t\t\t\t\tonClose={this.closeDeleteModal}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nResponseVisualizer.propTypes = {\n\tbuttonLabel: PropTypes.string,\n\tbuttonStyle: PropTypes.object,\n\tdata: PropTypes.shape({\n\t\ttype: PropTypes.oneOf([\n\t\t\t'factor', 'image', 'text', 'number', 'matches', 'matrix', 'range', 'tensor'\n\t\t]),\n\t\tlevels: PropTypes.array,\n\t\tquestion: PropTypes.oneOfType([ PropTypes.node, PropTypes.string ]),\n\t\tsolution: PropTypes.any\n\t}),\n\tshowID: PropTypes.bool,\n\tsuccess: PropTypes.string,\n\tdanger: PropTypes.string,\n\tinfo: PropTypes.string,\n\tinline: PropTypes.bool,\n\tstyle: PropTypes.object,\n\tvariant: PropTypes.oneOf([\n\t\t'primary', 'secondary', 'light', 'dark'\n\t]),\n\tnoSessionRegistration: PropTypes.bool\n};\n\nResponseVisualizer.defaultProps = {\n\tbuttonLabel: null,\n\tbuttonStyle: {},\n\tdata: {\n\t\ttype: 'text'\n\t},\n\tshowID: true,\n\tsuccess: null,\n\tdanger: null,\n\tinfo: null,\n\tinline: false,\n\tstyle: {},\n\tvariant: 'secondary',\n\tnoSessionRegistration: false\n};\n\nResponseVisualizer.contextType = SessionContext;\n\n\n// EXPORTS //\n\nexport default withTranslation( 'ResponseVisualizer' )( ResponseVisualizer );\n","// MODULES //\n\nimport CheckboxInput from './main.js';\n\n\n// EXPORTS //\n\nexport default CheckboxInput;\n","// MODULES //\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport isEmptyObject from '@stdlib/assert/is-empty-object';\nimport noop from '@stdlib/utils/noop';\nimport Input from '@isle-project/components/input/base';\nimport Tooltip from '@isle-project/components/tooltip';\nimport SessionContext from '@isle-project/session/context.js';\nimport './checkbox.css';\n\n\n// MAIN //\n\n/**\n* A checkbox input component. Can be used as part of an ISLE dashboard or standalone. In the latter case, you want to handle changes via the `onChange` attribute or bind the value to a global variable via the `bind` attribute.\n*\n* @property {string} bind - name of global variable for the checkbox value to be assigned to\n* @property {boolean} defaultValue - boolean value indicating the default value of the checkbox\n* @property {boolean} value - checkbox value (for controlled component)\n* @property {boolean} disabled - indicates whether the input is active or not\n* @property {boolean} inline - indicates whether the checkbox is displayed inline\n* @property {string} legend - text displayed next to the checkbox\n* @property {string} tooltip - text displayed when hovering over checkbox\n* @property {string} tooltipPlacement - position of button tooltip\n* @property {Object} style - CSS inline styles\n* @property {Function} onChange - callback function to be invoked when checkbox is clicked. The function is called with the current checkbox value\n*/\nclass CheckboxInput extends Input {\n\tconstructor( props, context ) {\n\t\tsuper( props );\n\n\t\tconst session = context;\n\t\tthis.state = {\n\t\t\tvalue: props.bind && session.state ?\n\t\t\t\tsession.state[ props.bind ]:\n\t\t\t\tprops.defaultValue,\n\t\t\tbind: props.bind,\n\t\t\tdefaultValue: props.defaultValue\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tlet newState = {};\n\t\tif ( nextProps.defaultValue !== prevState.defaultValue ) {\n\t\t\tnewState.value = nextProps.defaultValue;\n\t\t\tnewState.defaultValue = nextProps.defaultValue;\n\t\t}\n\t\telse if ( nextProps.bind !== prevState.bind ) {\n\t\t\tnewState.value = global.lesson.state[ nextProps.bind ];\n\t\t\tnewState.bind = nextProps.bind;\n\t\t}\n\t\tif ( !isEmptyObject( newState ) ) {\n\t\t\treturn newState;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif ( this.props.bind ) {\n\t\t\tlet globalVal = global.lesson.state[ this.props.bind ];\n\t\t\tif ( globalVal !== this.state.value ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tvalue: globalVal\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateValue = ( newValue ) => {\n\t\tthis.setState({\n\t\t\tvalue: newValue\n\t\t}, () => {\n\t\t\tif ( this.props.bind ) {\n\t\t\t\tglobal.lesson.setState({\n\t\t\t\t\t[ this.props.bind ]: newValue\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\thandleChange = ( event ) => {\n\t\tconst newValue = event.target.checked;\n\t\tthis.props.onChange( newValue );\n\t\tthis.updateValue( newValue );\n\t}\n\n\thandleSpanChange = ( event ) => {\n\t\tconst newValue = this.props.value !== null ? !this.props.value : !this.state.value;\n\t\tthis.props.onChange( newValue );\n\t\tthis.updateValue( newValue );\n\t}\n\n\trender() {\n\t\tlet { value } = this.state;\n\t\tif ( this.props.value !== null ) {\n\t\t\tvalue = this.props.value;\n\t\t}\n\t\tconst input = <input\n\t\t\tclassName=\"checkbox-input\"\n\t\t\ttype=\"checkbox\"\n\t\t\tchecked={value}\n\t\t\tvalue=\"checkbox\"\n\t\t\tonChange={this.handleChange}\n\t\t\tdisabled={this.props.disabled}\n\t\t\taria-label={this.props.tooltip}\n\t\t></input>;\n\t\tif ( this.props.inline === true ) {\n\t\t\treturn (\n\t\t\t\t<Tooltip tooltip={this.props.tooltip} placement={this.props.tooltipPlacement} >\n\t\t\t\t\t<span style={{ marginLeft: '8px', ...this.props.style }}>\n\t\t\t\t\t\t{input}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\t\tclassName=\"checkbox-legend\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: this.props.disabled ? 'darkgray' : null\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={this.handleSpanChange} onKeyPress={this.handleSpanChange}\n\t\t\t\t\t\t>{this.props.legend}</span>\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\t\t\t);\n\t\t}\n\t\tconst onSpanChange = this.props.disabled ? noop : this.handleSpanChange;\n\t\treturn (\n\t\t\t<Tooltip tooltip={this.props.tooltip} placement={this.props.tooltipPlacement} >\n\t\t\t\t<div className=\"input checkbox-input-div\" style={this.props.style}>\n\t\t\t\t\t{input}\n\t\t\t\t\t<span\n\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\tclassName=\"checkbox-legend\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: this.props.disabled ? 'darkgray' : null\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClick={onSpanChange} onKeyPress={onSpanChange}\n\t\t\t\t\t>{this.props.legend}</span>\n\t\t\t\t</div>\n\t\t\t</Tooltip>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nCheckboxInput.defaultProps = {\n\tbind: '',\n\tonChange() {},\n\tdefaultValue: false,\n\tvalue: null,\n\tdisabled: false,\n\tinline: false,\n\tlegend: '',\n\ttooltip: '',\n\ttooltipPlacement: 'right',\n\tstyle: {}\n};\n\nCheckboxInput.propTypes = {\n\tbind: PropTypes.string,\n\tdefaultValue: PropTypes.bool,\n\tvalue: PropTypes.bool,\n\tdisabled: PropTypes.bool,\n\tinline: PropTypes.bool,\n\tonChange: PropTypes.func,\n\tlegend: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.node\n\t]),\n\ttooltip: PropTypes.string,\n\ttooltipPlacement: PropTypes.oneOf([ 'left', 'top', 'right', 'bottom' ]),\n\tstyle: PropTypes.object\n};\n\nCheckboxInput.contextType = SessionContext;\n\n\n// EXPORTS //\n\nexport default CheckboxInput;\n"],"sourceRoot":""}