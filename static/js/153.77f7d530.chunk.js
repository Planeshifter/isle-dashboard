(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{3975:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(3),o=t(12),l=t(13),i=t(27),c=t(20),m=t(39),p=t(50),d=t(1),u=t.n(d),h=t(1048),w=t(490),g=t(540),E=t(522),v=t(581),b=t(516),f=t(502),y=t(511),O=t(567),S=t(559),j=t(727),k=t(595),C=t(496),I=t(505),P=t(52),x=t(1001),N=t.n(x),V=t(6),R=t.n(V),F=t(5),M=(t(705),function(e){return u.a.createElement(I.a,{id:"tooltip"},e)}),T=function(e){return u.a.createElement(S.a,{show:e.show,onHide:e.close},u.a.createElement(S.a.Header,null,u.a.createElement(S.a.Title,null,"Registration Completion")),u.a.createElement(S.a.Body,null,e.message),u.a.createElement(S.a.Footer,null,u.a.createElement(w.a,{onClick:e.close},e.t("common:close"))))},L=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(o.a)(this,t),n=a.call(this,e),Object(p.a)(Object(i.a)(n),"handleSubmit",function(){var e=Object(r.a)(s.a.mark((function e(a){var t,r,o,l,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!n.getPasswordValidationState()||!n.getNameValidationState()){e.next=18;break}return e.prev=2,t=window.location.hash.substring(24),r=N.a.parse(t),o=r.token,e.next=8,R.a.post(F.a+"/complete_registration",{id:o,newName:n.state.name,newPassword:n.state.password});case 8:l=e.sent,n.setState({message:l.data.message,showModal:!0}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),e.t0.response?(i="Server response: "+e.t0.response.status+".\n",i+=e.t0.response.data):i=e.t0.message,n.setState({message:i,showModal:!0});case 16:e.next=19;break;case 18:n.setState({showSubmitOverlay:!0,overlayTarget:a.target},(function(){setTimeout((function(){n.setState({showSubmitOverlay:!1})}),4e3)}));case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(a){return e.apply(this,arguments)}}()),Object(p.a)(Object(i.a)(n),"handleInputChange",(function(e){var a=e.target,t=a.value,s=a.name;n.setState({[s]:t})})),Object(p.a)(Object(i.a)(n),"getPasswordValidationState",(function(){var e=n.state,a=e.password,t=e.passwordRepeat;return!(a.length<6||0===t.length)&&a===t})),Object(p.a)(Object(i.a)(n),"close",(function(){n.props.history.replace("/")})),Object(p.a)(Object(i.a)(n),"getNameValidationState",(function(){return n.state.name.length>3})),n.state={name:"",password:"",passwordRepeat:"",showModal:!1},n}return Object(l.a)(t,[{key:"renderName",value:function(){var e=this.props.t;return u.a.createElement(C.a,{placement:"right",overlay:M(e("signup:name-tooltip"))},u.a.createElement(y.a,{controlId:"form-name"},u.a.createElement(v.a,null,u.a.createElement(E.a,{sm:3},u.a.createElement(b.a,null,e("common:name"))),u.a.createElement(E.a,{sm:9},u.a.createElement(f.a,{name:"name",type:"text",placeholder:e("signup:enter-name"),onChange:this.handleInputChange,isInvalid:this.state.name&&!this.getNameValidationState()}),u.a.createElement(O.a.Control.Feedback,{type:"invalid"},e("signup:invalid-name"))))))}},{key:"renderPassword",value:function(){var e=this.state.password||this.state.passwordRepeat,a=this.getPasswordValidationState();return u.a.createElement(d.Fragment,null,u.a.createElement(C.a,{placement:"right",overlay:M("Please enter a new password with at least six characters")},u.a.createElement(y.a,{controlId:"form-password"},u.a.createElement(v.a,null,u.a.createElement(E.a,{sm:3},u.a.createElement(b.a,null,this.props.t("common:password"))),u.a.createElement(E.a,{sm:9},u.a.createElement(f.a,{name:"password",type:"password",placeholder:this.props.t("common:choose-new-password"),onChange:this.handleInputChange,maxLength:30,minLength:6,autoComplete:"new-password",isInvalid:e&&!a}),u.a.createElement(f.a.Feedback,{type:"invalid"},"Please enter a new password with at least six characters."))))),u.a.createElement(y.a,{controlId:"form-password-confirmation"},u.a.createElement(v.a,null,u.a.createElement(E.a,{sm:{span:9,offset:3}},u.a.createElement(f.a,{name:"passwordRepeat",type:"password",placeholder:this.props.t("signup:confirm-password"),onChange:this.handleInputChange,maxLength:30,minLength:6,autoComplete:"new-password",isInvalid:e&&!a}),u.a.createElement(f.a.Feedback,{type:"invalid"},this.props.t("signup:invalid-password"))))))}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("div",{className:"login"},u.a.createElement(g.a,{style:{opacity:.9}},u.a.createElement(g.a.Header,null,u.a.createElement(g.a.Title,{as:"h1"},u.a.createElement("small",null,"Complete Registration"))),u.a.createElement(g.a.Body,null,u.a.createElement(O.a,null,this.renderName(),this.renderPassword(),u.a.createElement(y.a,null,u.a.createElement(w.a,{variant:"primary",type:"submit",onClick:this.handleSubmit,className:"centered",disabled:!this.getNameValidationState()||!this.getPasswordValidationState()},"Confirm")))))),this.state.showModal?u.a.createElement(T,{show:this.state.showModal,close:this.close,message:this.state.message,t:this.props.t}):null,u.a.createElement(j.a,{show:this.state.showSubmitOverlay,target:this.state.overlayTarget,placement:"bottom",containerPadding:20},u.a.createElement(k.a,{id:"popover-contained",title:"Input fields are not valid"},"Please make sure that the passwords are valid and match each other before submitting.")))}}]),t}(d.Component);a.default=Object(P.e)(Object(h.a)(["common","signup"])(L))},705:function(e,a,t){}}]);
//# sourceMappingURL=153.77f7d530.chunk.js.map