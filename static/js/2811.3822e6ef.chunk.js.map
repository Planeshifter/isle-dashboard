{"version":3,"sources":["actions/badge.js","actions/namespace.js","components/confirm-modal/index.js","components/dashboard-table/index.js","components/ticket-modal/index.js","components/namespace-data/files_page.js","components/namespace-data/announcements_page.js","components/namespace-data/editable_progress.js","components/namespace-data/progress_page.js","components/namespace-data/cohorts_page.js","components/namespace-data/grades_page.js","components/namespace-data/actions_page.js","components/namespace-data/tickets_page.js","components/namespace-data/index.js","actions/announcement.js","containers/visible-namespace-data/index.js","ev/components/data-explorer/index.js","utils/create_boolean_column.js","utils/create_categorical_column.js","utils/create_date_column.js","utils/create_numeric_column.js","utils/create_text_column.js","utils/file_saver.js","utils/format_time.js","utils/text_filter.js","../node_modules/moment/locale|sync|/^/.//.*$"],"names":["receivedUserBadges","badges","type","USER_RECEIVED_BADGES","payload","getUserBadges","dispatch","axios","server","res","data","addedBadges","length","i","item","contains","name","addNotification","description","picture","pic","children","i18next","className","src","alt","style","marginTop","level","position","dismissible","autoDismiss","addErrorNotification","getUserBadgesInjector","getAvailableBadges","RETRIEVED_BADGES","getAvailableBadgesInjector","appendCreatedNamespace","namespace","APPEND_CREATED_NAMESPACE","changedNamespace","title","owners","announcements","cohorts","enableTicketing","_id","CHANGED_NAMESPACE","deletedCurrentNamespace","id","DELETED_CURRENT_NAMESPACE","updateStudentProgress","email","lessonID","progress","cohort","UPDATED_STUDENT_PROGRESS","createNamespace","props","successful","Error","message","onNamespace","history","replace","createNamespaceInjector","deleteCurrentNamespace","deleteCurrentNamespaceInjector","updateCurrentNamespace","ns","UPDATED_OWNED_NAMESPACE","getCohorts","namespaceID","updateCurrentNamespaceInjector","getNamespaceActions","namespaceTitle","qs","blob","Blob","saveAs","getNamespaceActionsInjector","adjustProgress","adjustProgressInjector","getAllNamespaces","GET_ALL_NAMESPACES","namespaces","getAllNamespacesInjector","setLessonOrder","lessons","setLessonOrderInjector","ConfirmModal","show","onHide","close","as","onClick","t","variant","onConfirm","defaultProps","withTranslation","DashboardTable","this","Fragment","filterable","columns","previousText","nextText","loadingText","noDataText","pageText","ofText","rowsText","ref","table","getProps","onButtonClick","ButtonGroup","vertical","float","marginRight","OverlayTrigger","placement","overlay","Tooltip","Button","aria-label","marginBottom","Component","TicketModal","event","setState","response","target","value","submitTicketMessage","state","ticketID","ticket","done","openTicket","closeTicket","val","idx","createdAt","Date","key","author","date","toLocaleTimeString","toLocaleDateString","body","str","Modal","dialogClassName","width","aria-hidden","height","overflowY","whiteSpace","lesson","component","attachments","map","file","href","filename","marginLeft","rel","messages","renderMessage","background","FormGroup","controlId","FormLabel","FormControl","rows","placeholder","onChange","handleResponseChange","disabled","block","handleResponseSubmit","toggleCompletion","EXPORT_COLUMNS","debug","logger","prepareExportData","row","pick","FilesPage","handleFileDeletion","deletionID","ownerFiles","toggleDeleteModal","showDeleteModal","createTextColumn","Header","accessor","minWidth","filterMethod","filter","lowercase","Cell","size","resizable","sortable","copyToClipboard","maxWidth","url","startsWith","d","parts","trim","split","pop","join","createNumericColumn","roundn","pivotId","min","max","formatLabel","maxValue","ceil","fileMaxSize","minValue","createDateColumn","currentFiles","dashboardTable","getResolvedState","sortedData","JSON","stringify","header","err","output","showExplorer","fileInputKey","createColumns","getFiles","namespaceName","prevProps","files","replacement","updatedAt","push","obsToVar","categorical","quantitative","toggleExplorer","saveCSV","saveJSON","htmlFor","cursor","Badge","accept","handleUpload","display","r","handleDelete","AnnouncementsPage","ndx","editItem","announcement","deleteAnnouncement","clear","closeDeleteModal","now","getTime","user","addAnnouncement","editAnnouncement","mode","index","dateString","navigator","language","hour","minute","editMessage","isDisabled","isEmpty","renderMessages","Card","Form","padding","handleInputChange","createMessage","deleteSelectedMessage","isEditing","newProgress","clamp","hasChanged","onSubmit","originalProgress","handleChange","role","tabIndex","toggleEditing","onKeyPress","handleSubmit","ProgressBar","fontSize","label","nextProps","prevState","filterNumbersFactory","lessonData","isUndefinedOrNull","round","sortFactory","a","b","filterMethodCategories","isArray","String","ProgressPage","original","fontWeight","formatTime","spentTime","toLocaleString","assembleData","displayedMembers","lessonSortDirection","lessonOrder","createDisplayedMembers","members","cohortMembers","j","concat","lastName","firstName","COLUMNS","color","Filter","newValue","onBlur","backgroundColor","v","_lesson","accessorFactory","sortMethod","paddingLeft","paddingRight","paddingTop","ariaLabelledby","ariaControls","allowSameValues","len","out","Array","member","_original","availableCustomFields","fieldName","customFields","lessonName","slice","sort","localeCompare","DropdownButton","onSelect","reorderColumns","Dropdown","eventKey","renderSortButton","CohortsPage","selectedCohorts","actualMember","cohortOptions","ani","showUser","animation","list","renderMember","totalTime","time","score","closeActualMember","renderMemberLessons","renderMemberBadges","isMulti","options","handleCohortChange","renderCohort","renderActualMember","grades","points","_sumPoints","GradesPage","lessonGrades","maxPoints","metadata","tally","hasOwnProp","margin","defaultVal","ActionsPage","anonymized","lessonActionsPage","actualLesson","hideLessonActions","renderCohorts","showLessonActions","renderExportSection","ToggleButtonGroup","handleRadioChange","ToggleButton","retrieveActions","renderLessons","renderLessonActionsPage","RE_TICKET","TicketsPage","showTicketModal","tickets","minTime","PINF","maxTime","moment","selectedTicket","toggleTicketModal","createCategoricalColumn","labels","higher","lower","updatePriority","createBooleanColumn","trueLabel","falseLabel","textAlign","popover","Popover","maxHeight","arrowProps","omit","trigger","startDate","endDate","priority","browser","platform","version","os","family","architecture","getCourseTickets","location","search","match","exec","assembleExplorerData","NamespaceData","activePage","formData","FormData","append","uploadFile","deleteFile","sendTicketMessage","selectedKey","Number","params","subpage","getBadges","handleAnnouncementEdit","handleAnnouncementDeletion","handleAnnouncementCreation","getOwnerFiles","Alert","page","renderPage","Nav","activeKey","handleSelect","editedAnnouncement","EDITED_ANNOUNCEMENT","createdAnnouncement","CREATED_ANNOUNCEMENT","deletedAnnouncement","DELETED_ANNOUNCEMENT","namespaceAxios","addAnnouncementInjector","deleteAnnouncementInjector","editAnnouncementInjector","VisibleNamespaceData","connect","getCourseTicketsInjector","getFilesInjector","getOwnerFilesInjector","addNotificationInjector","deleteFileInjector","sendTicketMessageInjector","closeTicketInjector","openTicketInjector","uploadFileInjector","updatePriorityInjector","withRouter","DashboardDataExplorer","asyncComponent","printLabels","x","CustomDatePicker","onDatesChange","minDate","maxDate","DateRangePicker","startDateId","endDateId","handleDatesChange","focusedInput","onFocusChange","isOutsideRange","handleReset","paddingBottom","DefaultCell","valueOf","filterValue","defaultFilterMethod","defaultFormatLabel","step","spec","textFilter","autoComplete","RE_AUTO_BOM","throwOutside","ex","setImmediate","autoBOM","test","fromCharCode","view","userAgent","saveLink","document","createElementNS","canUseSaveLink","isSafari","HTMLElement","safari","isChromeIOS","setTimeout","proto","FileSaver","prototype","msSaveOrOpenBlob","noAutoBOM","abort","readyState","INIT","WRITING","DONE","error","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","getURL","URL","webkitURL","revoke","revokeObjectURL","remove","objectURL","self","force","dispatchAll","filesaver","eventTypes","listener","call","createObjectURL","node","download","MouseEvent","dispatchEvent","FileReader","reader","onloadend","result","open","readAsDataURL","fsError","saveFactory","window","content","opts","hours","minutes","seconds","floor","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","code","keys","Object","resolve","module","exports"],"mappings":"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","file":"static/js/2811.3822e6ef.chunk.js","sourcesContent":["/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport axios from 'axios';\nimport i18next from 'i18next';\nimport contains from '@stdlib/assert/contains';\nimport server from 'constants/server';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { RETRIEVED_BADGES, USER_RECEIVED_BADGES } from 'constants/action_types.js';\n\n\n// FUNCTIONS //\n\nfunction createBadgeNotification({ name, description, picture }) {\n\tconst pic = server + '/badges/' + picture;\n\treturn {\n\t\tchildren: (\n\t\t\t<div>\n\t\t\t\t<h3>{i18next.t('common:received-badge')}{name}</h3>\n\t\t\t\t<div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className=\"received-badge-before\" />\n\t\t\t\t\t\t<img className=\"received-badge\" src={pic} alt=\"Received Badge\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<p style={{ marginTop: 15 }}>{i18next.t('common:received-badge-for')}<b>{description}</b></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t),\n\t\tlevel: 'info',\n\t\tposition: 'tc',\n\t\tdismissible: 'button',\n\t\tautoDismiss: 0\n\t};\n}\n\n\n// FUNCTIONS //\n\nexport function receivedUserBadges( badges ) {\n\treturn {\n\t\ttype: USER_RECEIVED_BADGES,\n\t\tpayload: {\n\t\t\tbadges\n\t\t}\n\t};\n}\n\nexport function retrievedBadges( badges ) {\n\treturn {\n\t\ttype: RETRIEVED_BADGES,\n\t\tpayload: {\n\t\t\tbadges\n\t\t}\n\t};\n}\n\nexport const getUserBadges = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_user_badges' );\n\t\tconst { badges, addedBadges } = res.data;\n\t\tdispatch( receivedUserBadges( badges ) );\n\t\tif ( addedBadges.length > 0 ) {\n\t\t\tfor ( let i = 0; i < badges.length; i++ ) {\n\t\t\t\tconst item = badges[i];\n\t\t\t\tif ( contains( addedBadges, item.name ) ) {\n\t\t\t\t\taddNotification( dispatch, createBadgeNotification( item ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getUserBadgesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getUserBadges( dispatch );\n\t};\n};\n\nexport const getAvailableBadges = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_available_badges' );\n\t\tdispatch( retrievedBadges( res.data ) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getAvailableBadgesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getAvailableBadges( dispatch );\n\t};\n};\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport axios from 'axios';\nimport qs from 'querystring';\nimport i18next from 'i18next';\nimport saveAs from 'utils/file_saver.js';\nimport server from 'constants/server';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { getCohorts } from 'actions/cohort';\nimport { APPEND_CREATED_NAMESPACE, CHANGED_NAMESPACE, DELETED_CURRENT_NAMESPACE, GET_ALL_NAMESPACES, UPDATED_OWNED_NAMESPACE, UPDATED_STUDENT_PROGRESS } from 'constants/action_types.js';\n\n\n// EXPORTS //\n\nexport function appendCreatedNamespace( namespace ) {\n\treturn {\n\t\ttype: APPEND_CREATED_NAMESPACE,\n\t\tpayload: {\n\t\t\tnamespace\n\t\t}\n\t};\n}\n\nexport function changedNamespace({ title, owners, announcements = [], cohorts = [], description, enableTicketing, _id }) {\n\treturn {\n\t\ttype: CHANGED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tannouncements,\n\t\t\tcohorts,\n\t\t\tdescription,\n\t\t\tenableTicketing,\n\t\t\towners,\n\t\t\t_id\n\t\t}\n\t};\n}\n\nexport function deletedCurrentNamespace( id ) {\n\treturn {\n\t\ttype: DELETED_CURRENT_NAMESPACE,\n\t\tpayload: {\n\t\t\tid\n\t\t}\n\t};\n}\n\nexport function updateStudentProgress({ email, lessonID, progress, cohort }) {\n\treturn {\n\t\ttype: UPDATED_STUDENT_PROGRESS,\n\t\tpayload: {\n\t\t\temail, lessonID, progress, cohort\n\t\t}\n\t};\n}\n\nexport function updatedOwnedNamespace({ title, owners, description, enableTicketing, _id }) {\n\treturn {\n\t\ttype: UPDATED_OWNED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\towners,\n\t\t\tenableTicketing,\n\t\t\t_id\n\t\t}\n\t};\n}\n\nexport const createNamespace = async ( dispatch, { title, description, owners, props }) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/create_namespace', { title, description, owners });\n\t\tif ( !res.data.successful ) {\n\t\t\treturn addErrorNotification( dispatch, new Error( res.data.message ));\n\t\t}\n\t\tconst namespace = res.data.namespace;\n\t\tprops.onNamespace( namespace );\n\t\tdispatch( appendCreatedNamespace( namespace ) );\n\t\tprops.history.replace( '/lessons' );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: res.data.successful ? 'success' : 'error'\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const createNamespaceInjector = dispatch => {\n\treturn async ({ title, description, owners, props }) => {\n\t\tawait createNamespace( dispatch, { title, description, owners, props } );\n\t};\n};\n\nexport const deleteCurrentNamespace = async ( dispatch, id, history ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/delete_namespace', { id });\n\t\tif ( history ) {\n\t\t\thistory.replace( '/lessons' );\n\t\t}\n\t\tdispatch( deletedCurrentNamespace( id ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const deleteCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id, history ) => {\n\t\tawait deleteCurrentNamespace( dispatch, id, history );\n\t};\n};\n\nexport const updateCurrentNamespace = async ( dispatch, ns ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/update_namespace', { ns });\n\t\tdispatch( changedNamespace( res.data.namespace ) );\n\t\tdispatch( updatedOwnedNamespace( res.data.namespace ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tgetCohorts( dispatch, {\n\t\t\tnamespaceID: ns._id\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const updateCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id, ns ) => {\n\t\tawait updateCurrentNamespace( dispatch, id, ns );\n\t};\n};\n\nexport const getNamespaceActions = async ( dispatch, { namespaceID, namespaceTitle } ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_namespace_actions?'+qs.stringify({ namespaceID }) );\n\t\tconst blob = new Blob([ res.data ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `actions_${namespaceTitle}.json`;\n\t\tsaveAs( blob, name );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getNamespaceActionsInjector = ( dispatch ) => {\n\treturn async ({ namespaceID, namespaceTitle }) => {\n\t\tawait getNamespaceActions( dispatch, { namespaceID, namespaceTitle });\n\t};\n};\n\nexport const adjustProgress = async ( dispatch, { email, lessonID, namespaceID, progress, cohort }) => {\n\tconst res = await axios.post( server+'/user_adjust_progress', {\n\t\temail, lessonID, namespaceID, progress\n\t});\n\taddNotification( dispatch, {\n\t\ttitle: i18next.t('common:updated'),\n\t\tmessage: res.data.message,\n\t\tlevel: 'success'\n\t});\n\tdispatch( updateStudentProgress({ email, lessonID, progress, cohort }) );\n};\n\nexport const adjustProgressInjector = ( dispatch ) => {\n\treturn async ( { email, lessonID, namespaceID, progress, cohort } ) => {\n\t\tawait adjustProgress( dispatch, { email, lessonID, namespaceID, progress, cohort } );\n\t};\n};\n\nexport const getAllNamespaces = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_all_namespaces' );\n\t\tdispatch({\n\t\t\ttype: GET_ALL_NAMESPACES,\n\t\t\tpayload: {\n\t\t\t\tnamespaces: res.data.namespaces\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getAllNamespacesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getAllNamespaces( dispatch );\n\t};\n};\n\nexport const setLessonOrder = async ( dispatch, { lessons, id }) => {\n\ttry {\n\t\tawait axios.post( server+'/set_lesson_order', {\n\t\t\tlessons, id\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const setLessonOrderInjector = ( dispatch ) => {\n\treturn async ({ lessons, id }) => {\n\t\tawait setLessonOrder( dispatch, { lessons, id } );\n\t};\n};\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\n\n\n// MAIN //\n\nconst ConfirmModal = ( props ) => (\n\t<Modal show={props.show} onHide={props.close}>\n\t\t<Modal.Header>\n\t\t\t<Modal.Title as=\"h3\">{props.title}</Modal.Title>\n\t\t</Modal.Header>\n\t\t<Modal.Body>\n\t\t\t{props.message}\n\t\t</Modal.Body>\n\t\t<Modal.Footer>\n\t\t\t<Button onClick={props.close}>{props.t('cancel')}</Button>\n\t\t\t<Button variant=\"danger\" onClick={props.onConfirm}>{props.t('confirm')}</Button>\n\t\t</Modal.Footer>\n\t</Modal>\n);\n\n\n// PROPERTIES //\n\nConfirmModal.propTypes = {\n\tclose: PropTypes.func,\n\tmessage: PropTypes.node,\n\tonConfirm: PropTypes.func,\n\tshow: PropTypes.bool,\n\ttitle: PropTypes.string\n};\n\nConfirmModal.defaultProps = {\n\tclose() {},\n\tmessage: '',\n\tonConfirm() {},\n\tshow: false,\n\ttitle: ''\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'common' ] )( ConfirmModal );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactTable from 'react-table';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport 'react-table/react-table.css';\nimport './table.css';\n\n\n// MAIN //\n\nclass DashboardTable extends Component {\n\tgetProps = () => {\n\t\treturn {\n\t\t\tid: this.props.id || 'dashboard-table'\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<ReactTable\n\t\t\t\t\t{...this.props}\n\t\t\t\t\tfilterable\n\t\t\t\t\tclassName={`dashboard-table ${this.props.className}`}\n\t\t\t\t\tdata={this.props.data}\n\t\t\t\t\tcolumns={this.props.columns}\n\t\t\t\t\tpreviousText={t('common:previous')}\n\t\t\t\t\tnextText={t('common:next')}\n\t\t\t\t\tloadingText={t('common:loading')}\n\t\t\t\t\tnoDataText={t('common:no-rows-found')}\n\t\t\t\t\tpageText={t('common:page')}\n\t\t\t\t\tofText={t('common:of')}\n\t\t\t\t\trowsText={t('common:rows')}\n\t\t\t\t\tref={( table ) => {\n\t\t\t\t\t\tthis.table = table;\n\t\t\t\t\t}}\n\t\t\t\t\tgetProps={this.getProps}\n\t\t\t\t/>\n\t\t\t\t{this.props.onButtonClick ? <ButtonGroup vertical style={{ float: 'right', marginRight: -9 }} >\n\t\t\t\t\t<OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"explorer-tooltip\">{t('common:data-explorer')}</Tooltip>}>\n\t\t\t\t\t\t<Button aria-label={t('common:data-explorer')} variant=\"primary\" style={{ marginBottom: 8 }} onClick={this.props.onButtonClick} >\n\t\t\t\t\t\t\t<i className=\"fas fa-chart-bar\" ></i>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t</ButtonGroup> : null}\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nDashboardTable.propTypes = {\n\tclassName: PropTypes.string,\n\tcolumns: PropTypes.array.isRequired,\n\tdata: PropTypes.oneOfType([\n\t\tPropTypes.object,\n\t\tPropTypes.array\n\t]).isRequired,\n\tonButtonClick: PropTypes.func.isRequired,\n\tt: PropTypes.func\n};\n\nDashboardTable.defaultProps = {\n\tclassName: '',\n\tt() {}\n};\n\n\n// EXPORTS //\n\nexport default DashboardTable;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Modal from 'react-bootstrap/Modal';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport server from 'constants/server';\nimport './ticket_modal.css';\n\n\n// FUNCTIONS //\n\nconst createTooltip = ( str ) => {\n\treturn <Tooltip id=\"tooltip\">{str}</Tooltip>;\n};\n\n\n// MAIN //\n\nclass TicketModal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tresponse: ''\n\t\t};\n\t}\n\n\thandleResponseChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tresponse: event.target.value\n\t\t});\n\t}\n\n\thandleResponseSubmit = () => {\n\t\tthis.props.submitTicketMessage({\n\t\t\tmessage: this.state.response,\n\t\t\tticketID: this.props.ticket._id\n\t\t});\n\t\tthis.setState({\n\t\t\tresponse: ''\n\t\t});\n\t}\n\n\ttoggleCompletion = () => {\n\t\tif ( this.props.ticket.done ) {\n\t\t\tthis.props.openTicket( this.props.ticket._id );\n\t\t} else {\n\t\t\tthis.props.closeTicket( this.props.ticket._id );\n\t\t}\n\t}\n\n\trenderMessage = ( val, idx ) => {\n\t\tconst t = this.props.t;\n\t\tconst createdAt = new Date( val.createdAt );\n\t\treturn (\n\t\t\t<div className=\"message-container\" key={idx} >\n\t\t\t\t<div className=\"message-data\">\n\t\t\t\t\t<div className=\"message-profile-pic\">\n\t\t\t\t\t\t<img src={`${server}/thumbnail/${val.picture}`} alt=\"User Profile Pic\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"message-author-line\">\n\t\t\t\t\t\t<span className=\"message-author\">{ val.author }</span>\n\t\t\t\t\t\t&nbsp;{t('common:wrote-on', { date: `${createdAt.toLocaleTimeString()} ${createdAt.toLocaleDateString()}` })}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"message-body\">\n\t\t\t\t\t{val.body}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst t = this.props.t;\n\t\tconst { ticket } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Modal show={this.props.show} onHide={this.props.onHide} dialogClassName=\"modal-60w\" >\n\t\t\t\t\t<Modal.Header>\n\t\t\t\t\t\t<Modal.Title as=\"h3\" style={{ width: '100%' }}>\n\t\t\t\t\t\t\t{t('common:title')}: {ticket.title}\n\t\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={createTooltip( t('close-ticket-modal') )}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={this.props.onHide}\n\t\t\t\t\t\t\t\t\tstyle={{ float: 'right' }}\n\t\t\t\t\t\t\t\t\tvariant=\"outline-secondary\"\n\t\t\t\t\t\t\t\t\taria-label={t('close-ticket-modal')}\n\t\t\t\t\t\t\t\t\tclassName=\"modal-close\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">x</span>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t</Modal.Title>\n\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t<Modal.Body style={{ height: '60vh', overflowY: 'auto' }}>\n\t\t\t\t\t\t<span className=\"title\">{t('common:description')}:</span>\n\t\t\t\t\t\t<p style={{ whiteSpace: 'pre-wrap' }}>\n\t\t\t\t\t\t\t{ticket.description}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t{ticket.namespace.title ?\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<span className=\"title\">{`${t('common:course')}: `}</span>\n\t\t\t\t\t\t\t\t<span>{ticket.namespace.title}</span>\n\t\t\t\t\t\t\t\t{' | '}\n\t\t\t\t\t\t\t</Fragment> :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ticket.lesson ?\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<span className=\"title\">{`${t('common:lesson')}: `}</span>\n\t\t\t\t\t\t\t\t<span>{ticket.lesson.title}</span>\n\t\t\t\t\t\t\t\t{' | '}\n\t\t\t\t\t\t\t</Fragment> :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ticket.component ?\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<span className=\"title\">{`${t('common:component')}: `}</span>\n\t\t\t\t\t\t\t\t<span>{ticket.component}</span>\n\t\t\t\t\t\t\t</Fragment> :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ticket.attachments.length > 0 ?\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<span className=\"title\">{`${t('common:attachments')}: `}</span>\n\t\t\t\t\t\t\t\t{ticket.attachments.map( ( file, idx ) => {\n\t\t\t\t\t\t\t\t\treturn ( <a aria-label={t('common:attachments')} href={`${server}/attachments/${file.filename}`} key={idx} style={{ marginLeft: 6 }} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-link\" style={{ marginRight: 2 }} ></i>\n\t\t\t\t\t\t\t\t\t\t{file.title}\n\t\t\t\t\t\t\t\t\t</a> );\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Fragment> :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<span className=\"title\">{t('common:messages')}:</span>\n\t\t\t\t\t\t{ticket.messages.map( this.renderMessage )}\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t\t<Modal.Footer style={{ background: 'ghostwhite' }} >\n\t\t\t\t\t\t<FormGroup controlId=\"form-text\" style={{ width: 'calc(100% - 200px)' }} >\n\t\t\t\t\t\t\t<FormLabel>{t('enter-response')}</FormLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tname=\"body\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tas=\"textarea\" rows=\"5\"\n\t\t\t\t\t\t\t\tvalue={this.state.response}\n\t\t\t\t\t\t\t\tplaceholder={ticket.done ? t('require-open-ticket') : t('response-comes-here')}\n\t\t\t\t\t\t\t\tonChange={this.handleResponseChange}\n\t\t\t\t\t\t\t\tdisabled={ticket.done}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t<div style={{ float: 'right', width: '180px' }} >\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\tonClick={this.handleResponseSubmit}\n\t\t\t\t\t\t\t\tdisabled={!this.state.response || ticket.done}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('submit-response')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\tonClick={this.toggleCompletion}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ticket.done ? t('common:open-ticket') : t('common:close-ticket')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\tonClick={this.props.onHide}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('common:hide')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Modal.Footer>\n\t\t\t\t</Modal>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nTicketModal.propTypes = {\n\tcloseTicket: PropTypes.func.isRequired,\n\tonHide: PropTypes.func.isRequired,\n\topenTicket: PropTypes.func.isRequired,\n\tshow: PropTypes.bool.isRequired,\n\tsubmitTicketMessage: PropTypes.func.isRequired,\n\tticket: PropTypes.object.isRequired\n};\n\nTicketModal.defaultProps = {};\n\n\n// EXPORTS\n\nexport default withTranslation( [ 'ticket_modal', 'common' ] )( TicketModal );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport stringify from 'csv-stringify';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Button from 'react-bootstrap/Button';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Badge from 'react-bootstrap/Badge';\nimport copyToClipboard from 'clipboard-copy';\nimport roundn from '@stdlib/math/base/special/roundn';\nimport ceil from '@stdlib/math/base/special/ceil';\nimport pick from '@stdlib/utils/pick';\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\nimport trim from '@stdlib/string/trim';\nimport DashboardDataExplorer from 'ev/components/data-explorer';\nimport obsToVar from '@isle-project/utils/obs-to-var';\nimport DashboardTable from 'components/dashboard-table';\nimport ConfirmModal from 'components/confirm-modal';\nimport server from 'constants/server';\nimport saveAs from 'utils/file_saver.js';\nimport createDateColumn from 'utils/create_date_column.js';\nimport createTextColumn from 'utils/create_text_column.js';\nimport createNumericColumn from 'utils/create_numeric_column.js';\nimport 'css/input_range.css';\nimport './files_page.css';\n\n\n// VARIABLES //\n\nconst EXPORT_COLUMNS = [ 'name', 'email', 'lesson', 'title', 'filename', 'type', 'createdAt', 'updatedAt' ];\nconst debug = logger( 'isle:files-page' );\n\n\n// FUNCTIONS //\n\nconst prepareExportData = ( data ) => {\n\tfor ( let i = 0; i < data.length; i++ ) {\n\t\tconst row = pick( data[ i ], EXPORT_COLUMNS );\n\t\trow.lesson = row.lesson.title;\n\t\trow.filename = server+'/'+row.filename;\n\t\tdata[ i ] = row;\n\t}\n\treturn data;\n};\n\n\n// MAIN //\n\nclass FilesPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tshowDeleteModal: false,\n\t\t\tdeletionID: null,\n\t\t\tfileMaxSize: 0,\n\t\t\tfileInputKey: 0,\n\t\t\tshowExplorer: false\n\t\t};\n\t\tthis.columns = this.createColumns();\n\t}\n\n\tcomponentDidMount() {\n\t\tdebug( 'Component did mount...' );\n\t\tthis.props.getFiles({\n\t\t\tnamespaceName: this.props.namespace.title\n\t\t});\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( prevProps.files !== this.props.files ) {\n\t\t\tconst files = this.props.files;\n\t\t\tlet fileMaxSize = 0;\n\t\t\tfor ( let i = 0; i < files.length; i++ ) {\n\t\t\t\tconst size = files[ i ].size;\n\t\t\t\tif ( size && size > fileMaxSize ) {\n\t\t\t\t\tfileMaxSize = size;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tfileMaxSize,\n\t\t\t\tfileInputKey: this.state.fileInputKey + 1\n\t\t\t});\n\t\t}\n\t}\n\n\thandleDelete = () => {\n\t\tthis.props.handleFileDeletion( this.state.deletionID, this.props.ownerFiles );\n\t\tthis.toggleDeleteModal();\n\t}\n\n\ttoggleDeleteModal = () => {\n\t\tthis.setState({\n\t\t\tshowDeleteModal: !this.state.showDeleteModal\n\t\t});\n\t}\n\n\tcreateColumns = () => {\n\t\tconst { t } = this.props;\n\t\treturn [\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:filename'),\n\t\t\t\taccessor: 'title',\n\t\t\t\tminWidth: 250,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: t('common:open'),\n\t\t\t\taccessor: 'filename',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"external-link-tooltip\">{t('open-file')}</Tooltip>}>\n\t\t\t\t\t\t\t<a aria-label={t('open-file')} href={server+'/'+row.value} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t<Button aria-label={t('open-file')} size=\"sm\" variant=\"outline-secondary\">\n\t\t\t\t\t\t\t\t\t<i className=\"fa fa-external-link-alt\"></i>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</OverlayTrigger> );\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 45\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('common:copy'),\n\t\t\t\tid: 'copy-path',\n\t\t\t\taccessor: 'filename',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"copy-clipboard-tooltip\">{t('common:copy-link')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button aria-label={t('common:copy-link')} variant=\"outline-secondary\" size=\"sm\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tcopyToClipboard( server+'/'+row.value );\n\t\t\t\t\t\t\t\t\tthis.props.addNotification({\n\t\t\t\t\t\t\t\t\t\ttitle: 'Copied',\n\t\t\t\t\t\t\t\t\t\tmessage: 'Link copied to clipboard',\n\t\t\t\t\t\t\t\t\t\tlevel: 'success',\n\t\t\t\t\t\t\t\t\t\tposition: 'tl'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i className=\"fa fa-clipboard\"></i>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 45\n\t\t\t},\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:lesson'),\n\t\t\t\taccessor: 'lesson',\n\t\t\t\tmaxWidth: 160,\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( !row.row.lesson ) {\n\t\t\t\t\t\treturn <span>{t('no-lesson')}</span>;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"open-lesson-tooltip\">{t('open-lesson-new-tab')}</Tooltip>}>\n\t\t\t\t\t\t\t<div style={{ width: '100%', height: '100%' }} >\n\t\t\t\t\t\t\t\t<a aria-label={t('open-lesson-new-tab')} href={row.row.lesson.url} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t\t{row.row.lesson.title}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn row[ filter.id ].title.startsWith( filter.value );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('first-name'),\n\t\t\t\tid: 'first_name',\n\t\t\t\taccessor: d => {\n\t\t\t\t\tconst parts = trim( d.name ).split( ' ' );\n\t\t\t\t\tif ( parts.length > 1 ) {\n\t\t\t\t\t\tparts.pop();\n\t\t\t\t\t\treturn parts.join( ' ' );\n\t\t\t\t\t}\n\t\t\t\t\treturn parts[ 0 ];\n\t\t\t\t},\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('last-name'),\n\t\t\t\tid: 'last_name',\n\t\t\t\taccessor: d => {\n\t\t\t\t\tconst parts = trim( d.name ).split( ' ' );\n\t\t\t\t\tif ( parts.length > 1 ) {\n\t\t\t\t\t\treturn parts[ parts.length - 1 ];\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:email'),\n\t\t\t\taccessor: 'email',\n\t\t\t\tmaxWidth: 160,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('type'),\n\t\t\t\taccessor: 'type',\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( row[ filter.id ], filter.value );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateNumericColumn({\n\t\t\t\tHeader: t('common:size'),\n\t\t\t\taccessor: 'size',\n\t\t\t\tCell: row => row.value ? `${roundn( row.value, -3 )}mb` : 'NA',\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\tconst id = filter.pivotId || filter.id;\n\t\t\t\t\tconst size = row[ id ];\n\t\t\t\t\treturn size >= filter.value.min && size <= filter.value.max;\n\t\t\t\t},\n\t\t\t\tformatLabel: value => roundn( value, -2 ),\n\t\t\t\tmaxValue: ceil( this.state.fileMaxSize ) || 1,\n\t\t\t\tminValue: 0\n\t\t\t}),\n\t\t\tcreateDateColumn({\n\t\t\t\tHeader: t('common:date'),\n\t\t\t\taccessor: 'updatedAt',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( row.value && row.value.toLocaleDateString ) {\n\t\t\t\t\t\treturn row.value.toLocaleDateString( 'en-US' );\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tmaxWidth: 120,\n\t\t\t\tt: t\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: 'Del',\n\t\t\t\taccessor: '_id',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"delete-file-tooltip\">{t('delete-file-tooltip')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\taria-label={t('delete-file-tooltip')}\n\t\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-secondary\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tdeletionID: row.value,\n\t\t\t\t\t\t\t\t\tshowDeleteModal: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}} >\n\t\t\t\t\t\t\t\t<div className=\"fa fa-trash-alt\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 45\n\t\t\t}\n\t\t];\n\t}\n\n\tsaveJSON = () => {\n\t\tconst currentFiles = this.dashboardTable.table.getResolvedState().sortedData;\n\t\tlet data = prepareExportData( currentFiles );\n\t\tconst blob = new Blob([ JSON.stringify( data ) ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `files_${this.props.namespace.title}.json`;\n\t\tsaveAs( blob, name );\n\t}\n\n\tsaveCSV = () => {\n\t\tconst currentFiles = this.dashboardTable.table.getResolvedState().sortedData;\n\t\tlet data = prepareExportData( currentFiles );\n\t\tstringify( data, {\n\t\t\theader: true\n\t\t}, ( err, output ) => {\n\t\t\tif ( err ) {\n\t\t\t\treturn this.props.addNotification({\n\t\t\t\t\ttitle: 'Error encountered',\n\t\t\t\t\tmessage: 'Encountered an error while creating CSV: '+err.message,\n\t\t\t\t\tlevel: 'error',\n\t\t\t\t\tposition: 'tl'\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst blob = new Blob([ output ], {\n\t\t\t\ttype: 'text/plain'\n\t\t\t});\n\t\t\tconst name = `files_${this.props.namespace.title}.csv`;\n\t\t\tsaveAs( blob, name );\n\t\t});\n\t}\n\n\ttoggleExplorer = () => {\n\t\tthis.setState({\n\t\t\tshowExplorer: !this.state.showExplorer\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( this.state.showExplorer ) {\n\t\t\tconst files = this.props.files;\n\t\t\tlet data = [];\n\t\t\tfor ( let i = 0; i < files.length; i++ ) {\n\t\t\t\tconst file = files[ i ];\n\t\t\t\tconst replacement = {};\n\t\t\t\treplacement.title = file.title;\n\t\t\t\treplacement.type = file.type;\n\t\t\t\treplacement.lesson = file.lesson ? file.lesson.title : null;\n\t\t\t\treplacement.size = file.size ? file.size : null;\n\t\t\t\treplacement.email = file.email;\n\t\t\t\treplacement.createdAt = file.createdAt;\n\t\t\t\treplacement.updatedAt = file.updatedAt;\n\t\t\t\tdata.push( replacement );\n\t\t\t}\n\t\t\tdata = obsToVar( data );\n\t\t\tconst quantitative = [ 'size' ];\n\t\t\tconst categorical = [ 'title', 'type', 'lesson', 'email', 'createdAt', 'updatedAt' ];\n\t\t\treturn (\n\t\t\t\t<DashboardDataExplorer\n\t\t\t\t\ttitle={t('explorer-files-title')}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tclose={this.toggleExplorer}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn ( <div className=\"namespace-data-page\">\n\t\t\t<div className=\"namespace-data-buttons\">\n\t\t\t\t<ButtonGroup className=\"files-export-button-group\" >\n\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"csvTooltip\" >{t('save-as-csv')}</Tooltip>}>\n\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveCSV} ><i className=\"fas fa-download\"></i> CSV</Button>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"jsonTooltip\">{t('save-as-json')}</Tooltip>}>\n\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveJSON} ><i className=\"fas fa-download\"></i> JSON</Button>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t</ButtonGroup>\n\t\t\t\t{ this.props.ownerFiles ? <FormGroup className=\"file-upload-button\" >\n\t\t\t\t\t<FormLabel htmlFor=\"fileUpload\" style={{ cursor: 'pointer' }}>\n\t\t\t\t\t\t<Badge id=\"fileUploadBadge\" variant=\"success\">{t('upload-file')}</Badge>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"fileUpload\"\n\t\t\t\t\t\t\tkey={this.state.fileInputKey}\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\taccept=\".pdf,.html,.md,image/*,video/*,audio/*,.json,.csv\"\n\t\t\t\t\t\t\tonChange={this.props.handleUpload}\n\t\t\t\t\t\t\tstyle={{ display: 'none' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FormLabel>\n\t\t\t\t</FormGroup> : null }\n\t\t\t</div>\n\t\t\t<DashboardTable\n\t\t\t\tdata={this.props.files}\n\t\t\t\tcolumns={this.columns}\n\t\t\t\tt={t}\n\t\t\t\tref={(r) => {\n\t\t\t\t\tthis.dashboardTable = r;\n\t\t\t\t}}\n\t\t\t\tonButtonClick={this.toggleExplorer}\n\t\t\t/>\n\t\t\t<ConfirmModal\n\t\t\t\tshow={this.state.showDeleteModal}\n\t\t\t\tclose={this.toggleDeleteModal}\n\t\t\t\tmessage={t('delete-file')}\n\t\t\t\ttitle={`${t('common:delete')}?`}\n\t\t\t\tonConfirm={this.handleDelete}\n\t\t\t/>\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nFilesPage.propTypes = {\n\taddNotification: PropTypes.func.isRequired,\n\tfiles: PropTypes.array.isRequired,\n\tgetFiles: PropTypes.func.isRequired,\n\thandleFileDeletion: PropTypes.func.isRequired,\n\thandleUpload: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\townerFiles: PropTypes.bool\n};\n\nFilesPage.defaultProps = {\n\townerFiles: false\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( FilesPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Card from 'react-bootstrap/Card';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport Form from 'react-bootstrap/Form';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport ConfirmModal from 'components/confirm-modal';\nimport '../profile-page/message-page.css';\nimport './message_admin_page.css';\n\n\n// MAIN //\n\nclass AnnouncementsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\ttitle: '',\n\t\t\tbody: '',\n\t\t\tmode: 'new-announcement',\n\t\t\teditItem: null,\n\t\t\tshowDeleteModal: false\n\t\t};\n\t}\n\n\trenderModals() {\n\t\treturn null;\n\t}\n\n\teditMessage( ndx ) {\n\t\tconst announcement = this.props.namespace.announcements[ ndx ];\n\t\tthis.setState({\n\t\t\tmode: 'edit-announcement',\n\t\t\teditItem: ndx,\n\t\t\ttitle: announcement.title,\n\t\t\tbody: announcement.body\n\t\t});\n\t}\n\n\tdeleteSelectedMessage = () => {\n\t\tconst ndx = this.state.editItem;\n\t\tconst announcement = this.props.namespace.announcements[ ndx ];\n\t\tthis.props.deleteAnnouncement( announcement.createdAt, ndx );\n\t\tthis.clear();\n\t\tthis.closeDeleteModal();\n\t}\n\n\trenderMessages() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{this.props.namespace.announcements.map( ( value, index ) => {\n\t\t\t\t\tconst date = new Date( value.createdAt );\n\t\t\t\t\tconst dateString = date.toLocaleDateString() + '  -  ' + date.toLocaleTimeString( navigator.language, {\n\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\tminute: '2-digit'\n\t\t\t\t\t});\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={index}>\n\t\t\t\t\t\t<div className=\"message-container\">\n\t\t\t\t\t\t\t<div className=\"message-data\">\n\t\t\t\t\t\t\t\t<div className=\"message-profile-pic\">\n\t\t\t\t\t\t\t\t\t<img src={value.picture} alt=\"User Profile Pic\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"message-author-line\">\n\t\t\t\t\t\t\t\t\t<span className=\"message-author\">{ value.author }</span>\n\t\t\t\t\t\t\t\t\t&nbsp;{t('common:wrote-on', { date: dateString })}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"message-title\">\n\t\t\t\t\t\t\t\t{ value.title }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"message-body\">\n\t\t\t\t\t\t\t\t{ value.body }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"message-manip\">\n\t\t\t\t\t\t\t<button onClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\teditItem: index,\n\t\t\t\t\t\t\t\t\tshowDeleteModal: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}} className=\"message-delete\">{t('common:delete')}</button>\n\t\t\t\t\t\t\t<button onClick={() => {\n\t\t\t\t\t\t\t\tthis.editMessage(index);\n\t\t\t\t\t\t\t}} className=\"message-edit\">{t('common:edit')}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcreateMessage = () => {\n\t\tconst now = new Date().getTime();\n\t\tconst message = {\n\t\t\ttitle: this.state.title,\n\t\t\tbody: this.state.body,\n\t\t\tauthor: this.props.user.name,\n\t\t\temail: this.props.user.email,\n\t\t\tpicture: this.props.user.picture\n\t\t};\n\t\tif ( this.state.editItem === null ) {\n\t\t\tmessage.createdAt = now;\n\t\t\tthis.props.addAnnouncement( message );\n\t\t}\n\t\telse {\n\t\t\tconst announcement = this.props.namespace.announcements[ this.state.editItem ];\n\t\t\tmessage.createdAt = announcement.createdAt;\n\t\t\tthis.props.editAnnouncement( message );\n\t\t}\n\t\tthis.clear();\n\t}\n\n\thandleInputChange = ( event ) => {\n\t\tconst target = event.target;\n\t\tconst name = target.name;\n\t\tlet value = target.value;\n\t\tthis.setState({\n\t\t\t[ name ]: value\n\t\t});\n\t}\n\n\tclear = () => {\n\t\tthis.setState({\n\t\t\ttitle: '',\n\t\t\tbody: '',\n\t\t\tmode: 'new-announcement',\n\t\t\teditItem: null\n\t\t});\n\t}\n\n\tcloseDeleteModal = () => {\n\t\tthis.setState({\n\t\t\teditItem: null,\n\t\t\tshowDeleteModal: false\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tconst isDisabled = this.state.title.length < 3 || this.state.body.length < 3;\n\t\tconst isEmpty = this.state.title.length === 0 && this.state.body.length === 0;\n\t\treturn ( <div className=\"namespace-data-page\">\n\t\t\t<div className=\"messages\">\n\t\t\t\t{ this.renderMessages() }\n\t\t\t</div>\n\t\t\t<div className=\"new_message\">\n\t\t\t\t<Card>\n\t\t\t\t\t<Card.Header>\n\t\t\t\t\t\t<Card.Title as=\"h3\">\n\t\t\t\t\t\t\t{t(this.state.mode)}\n\t\t\t\t\t\t</Card.Title>\n\t\t\t\t\t</Card.Header>\n\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t<Form style={{ padding: '20px' }}>\n\t\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"titleTooltip\">{t('announcement-title')}</Tooltip>}>\n\t\t\t\t\t\t\t\t<FormGroup controlId=\"form-title\" >\n\t\t\t\t\t\t\t\t\t<FormLabel>{t('common:title')}</FormLabel>\n\t\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.title}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t\t<FormGroup controlId=\"form-text\" >\n\t\t\t\t\t\t\t\t<FormLabel>{t('announcement-text')}</FormLabel>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\tname=\"body\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tas=\"textarea\" rows=\"10\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.body}\n\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t\t<Button type=\"submit\" disabled={isDisabled} onClick={this.createMessage}>\n\t\t\t\t\t\t\t\t{ this.state.mode === 'new-announcement' ? t('common:create') : t('common:update') }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={this.clear} disabled={isEmpty} variant=\"danger\">{t('common:clear')}</Button>\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</Card.Body>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t\t<ConfirmModal\n\t\t\t\tshow={this.state.showDeleteModal}\n\t\t\t\tclose={this.closeDeleteModal}\n\t\t\t\tmessage={t('delete-announcement')}\n\t\t\t\ttitle={`${t('common:delete')}?`}\n\t\t\t\tonConfirm={this.deleteSelectedMessage}\n\t\t\t/>\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nAnnouncementsPage.propTypes = {\n\taddAnnouncement: PropTypes.func.isRequired,\n\tdeleteAnnouncement: PropTypes.func.isRequired,\n\teditAnnouncement: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nAnnouncementsPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( AnnouncementsPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport clamp from '@stdlib/math/base/special/clamp';\nimport './editable_progress.css';\n\n\n// MAIN //\n\nclass EditableProgress extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisEditing: false,\n\t\t\thasChanged: false,\n\t\t\tnewProgress: props.progress,\n\t\t\toriginalProgress: props.progress\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tif ( nextProps.progress !== prevState.originalProgress ) {\n\t\t\treturn {\n\t\t\t\tnewProgress: nextProps.progress,\n\t\t\t\toriginalProgress: nextProps.progress\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\ttoggleEditing = () => {\n\t\tthis.setState({\n\t\t\tisEditing: !this.state.isEditing,\n\t\t\tnewProgress: this.props.progress\n\t\t});\n\t}\n\n\thandleChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tnewProgress: clamp( event.target.value, 0, 100 ),\n\t\t\thasChanged: true\n\t\t});\n\t}\n\n\thandleSubmit = () => {\n\t\tthis.setState({\n\t\t\tisEditing: false,\n\t\t\thasChanged: false\n\t\t});\n\t\tthis.props.onSubmit( this.state.newProgress );\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\tthis.state.isEditing ?\n\t\t\t<Fragment>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tvalue={this.state.newProgress}\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={100}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\tclassName=\"editable-progress-input\"\n\t\t\t\t/>\n\t\t\t\t<i\n\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\tonClick={this.toggleEditing}\n\t\t\t\t\tonKeyPress={this.toggleEditing}\n\t\t\t\t\tclassName=\"fas fa-window-close editable-progress-close\"\n\t\t\t\t></i>\n\t\t\t\t<span className=\"editable-progress-submit\" style={{ display: this.state.hasChanged ? 'inline' : 'none' }}>\n\t\t\t\t\t<i\n\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\tonClick={this.handleSubmit}\n\t\t\t\t\t\tonKeyPress={this.handleSubmit}\n\t\t\t\t\t\tclassName=\"fas fa-check-square\"\n\t\t\t\t\t></i>\n\t\t\t\t</span>\n\t\t\t</Fragment>: <ProgressBar\n\t\t\t\taria-label=\"new-progress\"\n\t\t\t\tstyle={{\n\t\t\t\t\tfontSize: '10px',\n\t\t\t\t\theight: '12px'\n\t\t\t\t}}\n\t\t\t\tnow={this.state.newProgress}\n\t\t\t\tlabel={`${this.state.newProgress}%`}\n\t\t\t\tonClick={this.toggleEditing}\n\t\t\t/>\n\t\t);\n\t}\n}\n\n\n// EXPORTS //\n\nexport default EditableProgress;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport stringify from 'csv-stringify';\nimport InputRange from 'react-input-range';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport round from '@stdlib/math/base/special/round';\nimport min from '@stdlib/math/base/special/min';\nimport isArray from '@stdlib/assert/is-array';\nimport isUndefinedOrNull from '@stdlib/assert/is-undefined-or-null';\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\nimport trim from '@stdlib/string/trim';\nimport DashboardTable from 'components/dashboard-table';\nimport DashboardDataExplorer from 'ev/components/data-explorer';\nimport obsToVar from '@isle-project/utils/obs-to-var';\nimport server from 'constants/server';\nimport saveAs from 'utils/file_saver.js';\nimport createTextColumn from 'utils/create_text_column.js';\nimport EditableProgress from './editable_progress.js';\nimport formatTime from 'utils/format_time.js';\nimport './progress_page.css';\nimport 'css/input_range.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:progress-page' );\n\n\n// FUNCTIONS //\n\nfunction filterNumbersFactory( lessons, idx ) {\n\treturn ( filter, row ) => {\n\t\tconst data = row[ filter.id ];\n\t\tconst lessonData = data[ lessons[ idx ]._id ];\n\t\tif ( isUndefinedOrNull( lessonData ) ) {\n\t\t\treturn filter.value.min === 0;\n\t\t}\n\t\tconst progress = min( round( lessonData.progress*100 ), 100 );\n\t\treturn progress >= filter.value.min && progress <= filter.value.max;\n\t};\n}\n\nfunction sortFactory( lessons, idx ) {\n\treturn ( a, b ) => {\n\t\ta = a[ lessons[ idx ]._id ];\n\t\tb = b[ lessons[ idx ]._id ];\n\t\tif ( !a && !b ) {\n\t\t\treturn 0;\n\t\t}\n\t\tif ( a && !b ) {\n\t\t\treturn 1;\n\t\t}\n\t\tif ( !a && b ) {\n\t\t\treturn -1;\n\t\t}\n\t\tif ( a.progress > b.progress ) {\n\t\t\treturn 1;\n\t\t}\n\t\tif ( a.progress < b.progress ) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 0;\n\t};\n}\n\nfunction filterMethodCategories( filter, row ) {\n\tif ( filter.value === 'all' ) {\n\t\treturn true;\n\t}\n\tconst id = filter.pivotId || filter.id;\n\tif ( row[ id ] === void 0 ) {\n\t\treturn true;\n\t}\n\tif ( isArray( filter.value ) ) {\n\t\treturn contains( filter.value, String( row[ id ] ) );\n\t}\n\treturn String( row[ id ] ) === filter.value;\n}\n\n\n// MAIN //\n\nclass ProgressPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.columns = this.createColumns( props.lessons, props.cohorts );\n\t\tthis.state = {\n\t\t\tdisplayedMembers: [],\n\t\t\tlessonSortDirection: 'ascending',\n\t\t\tlessonOrder: 'createdAt',\n\t\t\tshowExplorer: false\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.createDisplayedMembers();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tthis.props.cohorts !== prevProps.cohorts ||\n\t\t\tthis.props.lessons !== prevProps.lessons\n\t\t) {\n\t\t\tthis.createDisplayedMembers();\n\t\t\tthis.columns = this.createColumns( this.props.lessons, this.props.cohorts );\n\t\t}\n\t}\n\n\tcreateDisplayedMembers() {\n\t\tlet members = [];\n\t\tfor ( let i = 0; i < this.props.cohorts.length; i++ ) {\n\t\t\tconst cohortMembers = this.props.cohorts[ i ].members;\n\t\t\tfor ( let j = 0; j < cohortMembers.length; j++ ) {\n\t\t\t\tcohortMembers[ j ].cohort = this.props.cohorts[ i ].title;\n\t\t\t\tif ( !cohortMembers[ j ].lessonData ) {\n\t\t\t\t\tcohortMembers[ j ].lessonData = {};\n\t\t\t\t}\n\t\t\t}\n\t\t\tmembers = members.concat( this.props.cohorts[ i ].members );\n\t\t}\n\t\tfor ( let i = 0; i < members.length; i++ ) {\n\t\t\tconst d = members[ i ];\n\t\t\tconst parts = trim( d.name ).split( ' ' );\n\t\t\tif ( parts.length > 1 ) {\n\t\t\t\td.lastName = parts.pop();\n\t\t\t\td.firstName = parts.join( ' ' );\n\t\t\t} else {\n\t\t\t\td.firstName = parts[ 0 ];\n\t\t\t\td.lastName = '';\n\t\t\t}\n\t\t}\n\t\tthis.setState({ // eslint-disable-line react/no-did-mount-set-state\n\t\t\tdisplayedMembers: members\n\t\t});\n\t}\n\n\tcreateColumns( lessons, cohorts ) {\n\t\tconst { t } = this.props;\n\t\tconst COLUMNS = [\n\t\t\t{\n\t\t\t\tHeader: 'Pic',\n\t\t\t\taccessor: 'picture',\n\t\t\t\tCell: row => (\n\t\t\t\t\t<img className=\"table-pic\" src={`${server}/thumbnail/${row.original.picture}`} alt=\"Profile Pic\" />\n\t\t\t\t),\n\t\t\t\tmaxWidth: 46,\n\t\t\t\tminWidth: 46,\n\t\t\t\tfilterable: false,\n\t\t\t\tresizable: false,\n\t\t\t\tsortable: false,\n\t\t\t\tstyle: { color: 'darkslategrey' }\n\t\t\t},\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('first-name'),\n\t\t\t\tid: 'first_name',\n\t\t\t\taccessor: 'firstName',\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('last-name'),\n\t\t\t\tid: 'last_name',\n\t\t\t\taccessor: 'lastName',\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:email'),\n\t\t\t\taccessor: 'email',\n\t\t\t\tmaxWidth: 200,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: t('common:cohort'),\n\t\t\t\taccessor: 'cohort',\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tfilterMethod: filterMethodCategories,\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tconst handleChange = ( event ) => {\n\t\t\t\t\t\tconst newValue = event.target.value;\n\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t};\n\t\t\t\t\tlet value;\n\t\t\t\t\tif ( !filter ) {\n\t\t\t\t\t\tvalue = 'all';\n\t\t\t\t\t} else if ( isArray( filter.value ) ) {\n\t\t\t\t\t\tvalue = filter.value.join( ', ' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = filter.value;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tonBlur={handleChange} onChange={handleChange}\n\t\t\t\t\t\t\tstyle={{ width: '100%', backgroundColor: 'ghostwhite' }}\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"all\">Show All</option>\n\t\t\t\t\t\t\t{cohorts.map( ( v, key ) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\tvalue={`${v.title}`}\n\t\t\t\t\t\t\t\t\t>{v.title}</option>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tconst id = 'lesson_'+i;\n\t\t\tCOLUMNS.push({\n\t\t\t\tid,\n\t\t\t\tHeader: <span id={id} >{lessons[ i ].title}</span>,\n\t\t\t\t_lesson: lessons[ i ],\n\t\t\t\tCell: this.accessorFactory( lessons, i ),\n\t\t\t\taccessor: 'lessonData',\n\t\t\t\tsortMethod: sortFactory( lessons, i ),\n\t\t\t\tfilterMethod: filterNumbersFactory( lessons, i ),\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tconst defaultVal = {\n\t\t\t\t\t\tmax: 100,\n\t\t\t\t\t\tmin: 0\n\t\t\t\t\t};\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tpaddingLeft: '4px',\n\t\t\t\t\t\t\tpaddingRight: '4px',\n\t\t\t\t\t\t\tpaddingTop: '8px'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<InputRange\n\t\t\t\t\t\t\t\tariaLabelledby={id}\n\t\t\t\t\t\t\t\tariaControls=\"dashboard-table\"\n\t\t\t\t\t\t\t\tallowSameValues\n\t\t\t\t\t\t\t\tmaxValue={100}\n\t\t\t\t\t\t\t\tminValue={0}\n\t\t\t\t\t\t\t\tvalue={filter ? filter.value : defaultVal}\n\t\t\t\t\t\t\t\tonChange={( newValue ) => {\n\t\t\t\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn COLUMNS;\n\t}\n\n\taccessorFactory = ( lessons, idx ) => {\n\t\tconst { t } = this.props;\n\t\treturn d => {\n\t\t\tlet data = d.original.lessonData;\n\t\t\tconst lessonID = lessons[ idx ]._id;\n\t\t\tdata = data[ lessonID ];\n\t\t\tif ( data ) {\n\t\t\t\tconst progress = min( round( data.progress*100 ), 100 );\n\t\t\t\treturn (\n\t\t\t\t\t<span style={{ fontSize: '12px', fontWeight: 800 }}>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"durationTooltip\" >{t('hours-minutes-seconds')}</Tooltip>}>\n\t\t\t\t\t\t\t<span>{t('duration')}: {formatTime( data.spentTime )}</span>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"startTooltip\" >{t('first-accessed')}</Tooltip>}>\n\t\t\t\t\t\t\t<span> | {new Date( data.createdAt ).toLocaleString()}</span>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"startTooltip\" >{t('last-accessed')}</Tooltip>}>\n\t\t\t\t\t\t\t<span> - {new Date( data.updatedAt ).toLocaleString()}</span>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<EditableProgress\n\t\t\t\t\t\t\tprogress={progress}\n\t\t\t\t\t\t\temail={d.original.email}\n\t\t\t\t\t\t\tlessonID={lessonID}\n\t\t\t\t\t\t\tonSubmit={( newProgress ) => {\n\t\t\t\t\t\t\t\tthis.props.adjustProgress({\n\t\t\t\t\t\t\t\t\temail: d.original.email,\n\t\t\t\t\t\t\t\t\tlessonID: lessonID,\n\t\t\t\t\t\t\t\t\tnamespaceID: this.props.namespace._id,\n\t\t\t\t\t\t\t\t\tcohort: d.original.cohort,\n\t\t\t\t\t\t\t\t\tprogress: newProgress\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn <span></span>;\n\t\t};\n\t}\n\n\tassembleData() {\n\t\tconst displayedMembers = this.dashboardTable.table.getResolvedState().sortedData;\n\t\tconst len = displayedMembers.length;\n\t\tconst out = new Array( len );\n\t\tconst lessons = this.props.lessons;\n\t\tfor ( let i = 0; i < len; i++ ) {\n\t\t\tconst member = displayedMembers[ i ]._original;\n\t\t\tout[ i ] = {\n\t\t\t\tname: member.name,\n\t\t\t\tfirstName: member.firstName,\n\t\t\t\tlastName: member.lastName,\n\t\t\t\temail: member.email,\n\t\t\t\tcohort: member.cohort\n\t\t\t};\n\t\t\tconst availableCustomFields = this.props.user.availableCustomFields;\n\t\t\tfor ( let j = 0; j < availableCustomFields.length; j++ ) {\n\t\t\t\tconst fieldName = availableCustomFields[ j ].name;\n\t\t\t\tif ( member.customFields ) {\n\t\t\t\t\tout[ i ][ fieldName ] = member.customFields[ fieldName ];\n\t\t\t\t} else {\n\t\t\t\t\tout[ i ][ fieldName ] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor ( let j = 0; j < lessons.length; j++ ) {\n\t\t\t\tconst lessonName = lessons[ j ]._id;\n\t\t\t\tlet data = member.lessonData;\n\t\t\t\tif ( data && data[ lessonName ] ) {\n\t\t\t\t\tdata = data[ lessonName ];\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_question_progress' ] = min( round( data.progress*100 ), 100 );\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_time' ] = round( data.spentTime / ( 1000*60 ) );\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_first_accessed' ] = new Date( data.createdAt ).toLocaleString();\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_last_accessed' ] = new Date( data.updatedAt ).toLocaleString();\n\t\t\t\t} else {\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_question_progress' ] = 0;\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_time' ] = 0;\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_first_accessed' ] = '';\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_last_accessed' ] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn out;\n\t}\n\n\tsaveJSON = () => {\n\t\tconst data = this.assembleData();\n\t\tconst blob = new Blob([ JSON.stringify( data ) ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `completion_${this.props.namespace.title}.json`;\n\t\tsaveAs( blob, name );\n\t}\n\n\tsaveCSV = () => {\n\t\tconst data = this.assembleData();\n\t\tstringify( data, {\n\t\t\theader: true\n\t\t}, ( err, output ) => {\n\t\t\tif ( err ) {\n\t\t\t\treturn this.props.addNotification({\n\t\t\t\t\ttitle: 'Error encountered',\n\t\t\t\t\tmessage: 'Encountered an error while creating CSV: '+err.message,\n\t\t\t\t\tlevel: 'error',\n\t\t\t\t\tposition: 'tl'\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst blob = new Blob([ output ], {\n\t\t\t\ttype: 'text/plain'\n\t\t\t});\n\t\t\tconst name = `completion_${this.props.namespace.title}.csv`;\n\t\t\tsaveAs( blob, name );\n\t\t});\n\t}\n\n\ttoggleExplorer = () => {\n\t\tthis.setState({\n\t\t\tshowExplorer: !this.state.showExplorer\n\t\t});\n\t}\n\n\treorderColumns( lessonOrder, lessonSortDirection ) {\n\t\tdebug( 'Sort columns by '+lessonOrder+' in '+lessonSortDirection+' order' );\n\t\tif ( lessonSortDirection === 'ascending' ) {\n\t\t\treturn this.columns.slice().sort( ( a, b ) => {\n\t\t\t\tif ( !a._lesson || !b._lesson ) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif ( lessonOrder === 'title' ) {\n\t\t\t\t\treturn a._lesson.title.localeCompare( b._lesson.title );\n\t\t\t\t}\n\t\t\t\treturn a._lesson[ lessonOrder ] > b._lesson[ lessonOrder ] ? 1 : -1;\n\t\t\t});\n\t\t}\n\t\treturn this.columns.slice().sort( ( a, b ) => {\n\t\t\tif ( !a._lesson || !b._lesson ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif ( lessonOrder === 'title' ) {\n\t\t\t\treturn b._lesson.title.localeCompare( a._lesson.title );\n\t\t\t}\n\t\t\treturn a._lesson[ lessonOrder ] < b._lesson[ lessonOrder ] ? 1 : -1;\n\t\t});\n\t}\n\n\trenderSortButton() {\n\t\tconst { t } = this.props;\n\t\tlet title;\n\t\tswitch ( this.state.lessonOrder ) {\n\t\t\tcase 'title':\n\t\t\t\ttitle = t('common:sort-alphabetically');\n\t\t\t\tbreak;\n\t\t\tcase 'createdAt':\n\t\t\t\ttitle = t('common:sort-create-date');\n\t\t\t\tbreak;\n\t\t\tcase 'updatedAt':\n\t\t\t\ttitle = t('common:sort-update-date');\n\t\t\t\tbreak;\n\t\t}\n\t\treturn (\n\t\t\t<ButtonGroup className=\"sort-button-group\" >\n\t\t\t\t<DropdownButton size=\"sm\" variant=\"secondary\" onSelect={( newValue ) => {\n\t\t\t\t\tthis.columns = this.reorderColumns( newValue, this.state.lessonSortDirection );\n\t\t\t\t\tthis.setState({ lessonOrder: newValue });\n\t\t\t\t}} id=\"dropdown\" title={<small>{title}</small>} >\n\t\t\t\t\t<Dropdown.Item eventKey=\"title\" >\n\t\t\t\t\t\t<small>{t('common:sort-alphabetically')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"createdAt\" >\n\t\t\t\t\t\t<small>{t('common:sort-create-date')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"updatedAt\" >\n\t\t\t\t\t\t<small>{t('common:sort-update-date')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t</DropdownButton>\n\t\t\t\t<Button size=\"sm\" variant=\"secondary\" style={{ marginLeft: 2 }} onClick={() => {\n\t\t\t\t\tif ( this.state.lessonSortDirection === 'ascending' ) {\n\t\t\t\t\t\tthis.columns = this.reorderColumns( this.state.lessonOrder, 'descending' );\n\t\t\t\t\t\tthis.setState({ lessonSortDirection: 'descending' });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.columns = this.reorderColumns( this.state.lessonOrder, 'ascending' );\n\t\t\t\t\t\tthis.setState({ lessonSortDirection: 'ascending' });\n\t\t\t\t\t}\n\t\t\t\t}} aria-label={this.state.lessonSortDirection === 'ascending' ?\n\t\t\t\tt('common:sort-descending') : t('common:sort-ascending')} >\n\t\t\t\t\t{ this.state.lessonSortDirection === 'ascending' ?\n\t\t\t\t\t\t<i className=\"fas fa-arrow-right\" /> :\n\t\t\t\t\t\t<i className=\"fas fa-arrow-left\" />\n\t\t\t\t\t}\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( this.state.showExplorer ) {\n\t\t\tlet data = this.assembleData();\n\t\t\tdata = obsToVar( data );\n\t\t\tconst quantitative = [];\n\t\t\tconst categorical = [ 'name', 'email', 'cohort' ];\n\t\t\tfor ( let i = 0; i < this.props.lessons.length; i++ ) {\n\t\t\t\tconst title = this.props.lessons[ i ].title;\n\t\t\t\tquantitative.push( `${title}_question_progress` );\n\t\t\t\tquantitative.push( `${title}_time` );\n\t\t\t\tcategorical.push( `${title}_first_accessed` );\n\t\t\t\tcategorical.push( `${title}_last_accessed` );\n\t\t\t}\n\t\t\tconst availableCustomFields = this.props.user.availableCustomFields;\n\t\t\tfor ( let i = 0; i < availableCustomFields.length; i++ ) {\n\t\t\t\tcategorical.push( availableCustomFields[ i ].name );\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<DashboardDataExplorer\n\t\t\t\t\ttitle={t('explorer-progress-title')}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tclose={this.toggleExplorer}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"namespace-data-buttons\" >\n\t\t\t\t\t{this.renderSortButton()}\n\t\t\t\t\t<ButtonGroup className=\"progress-button-group\" >\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"csvTooltip\" >{t('save-as-csv')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveCSV} ><i className=\"fas fa-download\"></i> CSV</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"jsonTooltip\">{t('save-as-json')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveJSON} ><i className=\"fas fa-download\"></i> JSON</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"namespace-data-page\">\n\t\t\t\t\t<DashboardTable\n\t\t\t\t\t\tclassName=\"progress-table\"\n\t\t\t\t\t\tdata={this.state.displayedMembers}\n\t\t\t\t\t\tcolumns={this.columns}\n\t\t\t\t\t\tt={t}\n\t\t\t\t\t\tref={(r) => {\n\t\t\t\t\t\t\tthis.dashboardTable = r;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonButtonClick={this.toggleExplorer}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nProgressPage.propTypes = {\n\taddNotification: PropTypes.func.isRequired,\n\tadjustProgress: PropTypes.func.isRequired,\n\tcohorts: PropTypes.array.isRequired,\n\tlessons: PropTypes.array.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nProgressPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( ProgressPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Select from 'react-select';\nimport round from '@stdlib/math/base/special/round';\nimport min from '@stdlib/math/base/special/min';\nimport contains from '@stdlib/assert/contains';\nimport server from 'constants/server';\nimport formatTime from 'utils/format_time.js';\nimport './cohorts.css';\n\n\n// MAIN //\n\nclass CohortsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst cohortOptions = props.cohorts.map( cohort => {\n\t\t\treturn { label: cohort.title, value: cohort.title, data: cohort };\n\t\t});\n\n\t\tlet displayedMembers = [];\n\t\tfor ( let i = 0; i < props.cohorts.length; i++ ) {\n\t\t\tdisplayedMembers = displayedMembers.concat( props.cohorts[i].members);\n\t\t}\n\n\t\tthis.state = {\n\t\t\tcohortOptions: cohortOptions,\n\t\t\tselectedCohorts: cohortOptions,\n\t\t\tdisplayedMembers: displayedMembers,\n\t\t\tactualMember: null\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.cohorts !== prevProps.cohorts ) {\n\t\t\tconst cohortOptions = this.props.cohorts.map( cohort => {\n\t\t\t\treturn { label: cohort.title, value: cohort.title, data: cohort };\n\t\t\t});\n\t\t\tlet displayedMembers = [];\n\t\t\tfor ( let i = 0; i < this.props.cohorts.length; i++ ) {\n\t\t\t\tdisplayedMembers = displayedMembers.concat( this.props.cohorts[i].members);\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tcohortOptions: cohortOptions,\n\t\t\t\tselectedCohorts: cohortOptions,\n\t\t\t\tdisplayedMembers: displayedMembers,\n\t\t\t\tactualMember: null\n\t\t\t});\n\t\t}\n\t}\n\n\thandleCohortChange = ( cohorts ) => {\n\t\tlet members = [];\n\t\tif ( cohorts ) {\n\t\t\tfor ( let i = 0; i < cohorts.length; i++ ) {\n\t\t\t\tmembers = members.concat( cohorts[ i ].data.members );\n\t\t\t}\n\t\t}\n\t\tthis.setState({\n\t\t\tselectedCohorts: cohorts,\n\t\t\tdisplayedMembers: members\n\t\t});\n\t}\n\n\tshowUser = (member) => {\n\t\tthis.setState({\n\t\t\tactualMember: member\n\t\t});\n\t}\n\n\trenderMember( member, key ) {\n\t\tlet phase = 0.3 + key*0.05;\n\t\tlet ani = 'scale-up ' + phase + 's';\n\t\treturn (\n\t\t\t<Fragment key={key}>\n\t\t\t\t<div className=\"cohort-member\" role=\"button\"\n\t\t\t\t\tonClick={() => this.showUser( member )}\n\t\t\t\t\tonKeyPress={() => this.showUser( member )}\n\t\t\t\t\tstyle={{ animation: ani }} tabIndex={0}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"cohort-member-name\">{member.name}</div>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={server + '/thumbnail/'+member.picture}\n\t\t\t\t\t\t\talt=\"Member Profile Pic\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"cohort-member-email\">\n\t\t\t\t\t\t\t<a href={'mailto:' + member.email}>{member.email}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderCohort() {\n\t\tconst members = this.state.displayedMembers;\n\t\tconst list = [];\n\t\tfor ( let i = 0; i < members.length; i++ ) {\n\t\t\tlist.push( this.renderMember( members[ i ], i ) );\n\t\t}\n\t\treturn list;\n\t}\n\n\trenderMemberLessons( member ) {\n\t\tconst lessons = this.props.lessons;\n\t\tconst list = [];\n\t\tlet progress = 0;\n\t\tlet spentTime = 0;\n\t\tlet totalTime = 0;\n\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tlet id = lessons[i]._id;\n\t\t\tif ( member.lessonData && member.lessonData[ id ] ) {\n\t\t\t\tconst data = member.lessonData[ id ];\n\t\t\t\tprogress = min( round( data.progress * 100 ), 100 );\n\t\t\t\tspentTime = formatTime( data.spentTime );\n\t\t\t\ttotalTime += data.spentTime;\n\t\t\t} else {\n\t\t\t\tprogress = 0;\n\t\t\t\tspentTime = formatTime( 0 );\n\t\t\t}\n\t\t\tlist.push(\n\t\t\t\t<div key={i} >\n\t\t\t\t\t<div className=\"cohort-actual-member-lesson-title\">{lessons[i].title}</div>\n\t\t\t\t\t<ProgressBar aria-label=\"lesson-progress\" className=\"cohort-actual-member-lesson-progress\" style={{ float: 'left', fontSize: '10px', height: '12px'\n\t\t\t\t\t}} now={progress} label={`${progress}%`} />\n\t\t\t\t\t<span className=\"cohort-actual-member-lesson-time\">{spentTime}</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\ttotalTime = formatTime( totalTime );\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<hr />\n\t\t\t\t<div className=\"cohort-actual-member-lesson-header\">COURSE INFO</div>\n\t\t\t\t<div className=\"cohort-actual-member-lesson-total\">COURSE TOTAL TIME: {totalTime}</div>\n\t\t\t\t<div className=\"lessons-area\">\n\t\t\t\t\t{list}\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\tcloseActualMember = () => {\n\t\tthis.setState({\n\t\t\tactualMember: null\n\t\t});\n\t}\n\n\trenderMemberBadges(member) {\n\t\tconst badges = this.props.badges;\n\t\tconst time = formatTime( member.spentTime );\n\t\tconst list = [];\n\t\tfor ( let i = 0; i < badges.length; i++ ) {\n\t\t\tif ( contains(member.badges, badges[i].name ) ) {\n\t\t\t\tlist.push(\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<OverlayTrigger\n\t\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\t\toverlay={<Tooltip id=\"isleTime\">{badges[i].description}</Tooltip>}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"cohort-user-badge\" >\n\t\t\t\t\t\t\t\t<img src={server + '/badges/' + badges[i].picture} alt=\"User Badge\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t</Fragment>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tconst isleTime = 'the time the user spent with ISLE';\n\t\tconst scoreComment = 'user score';\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div>General User Info</div>\n\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"isleTime\">{ isleTime }</Tooltip>}>\n\t\t\t\t\t<span className=\"user-info-time\">ISLE TIME: {time}</span>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"isleTime\">{ scoreComment }</Tooltip>}>\n\t\t\t\t\t<span className=\"user-info-score\">SCORE: {member.score}</span>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<div></div>\n\t\t\t\t<div className=\"user-info-badges\">\n\t\t\t\t\t<div className=\"user-info-separator\">Badges</div>\n\t\t\t\t\t{list}\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderActualMember() {\n\t\tconst member = this.state.actualMember;\n\t\tlet date = null;\n\t\tif ( member.createdAt ) {\n\t\t\tdate = new Date( member.createdAt ).toLocaleDateString();\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"cohort-actual-member\">\n\t\t\t\t<button onClick={this.closeActualMember} className=\"cohort-actual-member-exit empty-button\" >&#10005;</button>\n\t\t\t\t<img className=\"cohort-actual-member-portrait\" src={server + '/avatar/'+member.picture} alt=\"User Profile Pic\" />\n\t\t\t\t<div className=\"cohort-actual-member-portrait-shadow\" />\n\t\t\t\t{date ? <div className=\"cohort-actual-member-registered\">registered since {date}</div> : null}\n\t\t\t\t<div className=\"cohort-actual-member-name\">\n\t\t\t\t\t<h3>{member.name}</h3>\n\t\t\t\t\t<div>{member.email}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cohort-actual-member-info\">\n\t\t\t\t\t{ this.renderMemberLessons(member)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cohort-actual-member-badges\">\n\t\t\t\t\t{ this.renderMemberBadges(member) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"namespace-data-page\">\n\t\t\t\t<div style={{ width: '100%', height: '40px' }}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={this.state.selectedCohorts}\n\t\t\t\t\t\tisMulti\n\t\t\t\t\t\tname=\"cohorts\"\n\t\t\t\t\t\taria-label=\"Select cohorts\"\n\t\t\t\t\t\tplaceholder=\"Select cohorts to display\"\n\t\t\t\t\t\toptions={this.state.cohortOptions}\n\t\t\t\t\t\tonChange={this.handleCohortChange}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cohort-page\">\n\t\t\t\t\t{this.renderCohort()}\n\t\t\t\t</div>\n\t\t\t\t{this.state.actualMember ? this.renderActualMember() : null}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nCohortsPage.propTypes = {\n\tbadges: PropTypes.array.isRequired,\n\tcohorts: PropTypes.array.isRequired,\n\tlessons: PropTypes.array.isRequired\n};\n\nCohortsPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default CohortsPage;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport stringify from 'csv-stringify';\nimport { withTranslation } from 'react-i18next';\nimport InputRange from 'react-input-range';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Card from 'react-bootstrap/Card';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport isArray from '@stdlib/assert/is-array';\nimport isUndefinedOrNull from '@stdlib/assert/is-undefined-or-null';\nimport hasOwnProp from '@stdlib/assert/has-own-property';\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\nimport trim from '@stdlib/string/trim';\nimport DashboardTable from 'components/dashboard-table';\nimport DashboardDataExplorer from 'ev/components/data-explorer';\nimport obsToVar from '@isle-project/utils/obs-to-var';\nimport server from 'constants/server';\nimport saveAs from 'utils/file_saver.js';\nimport createTextColumn from 'utils/create_text_column.js';\nimport './progress_page.css';\nimport 'css/input_range.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:progress-page' );\n\n\n// FUNCTIONS //\n\nfunction filterNumbersFactory( lessons, idx ) {\n\treturn ( filter, row ) => {\n\t\tconst data = row[ filter.id ];\n\t\tconst grades = data[ lessons[ idx ]._id ];\n\t\tif ( isUndefinedOrNull( grades ) ) {\n\t\t\treturn filter.value.min === 0;\n\t\t}\n\t\tconst points = grades._sumPoints;\n\t\treturn points >= filter.value.min && points <= filter.value.max;\n\t};\n}\n\nfunction filterMethodCategories( filter, row ) {\n\tif ( filter.value === 'all' ) {\n\t\treturn true;\n\t}\n\tconst id = filter.pivotId || filter.id;\n\tif ( row[ id ] === void 0 ) {\n\t\treturn true;\n\t}\n\tif ( isArray( filter.value ) ) {\n\t\treturn contains( filter.value, String( row[ id ] ) );\n\t}\n\treturn String( row[ id ] ) === filter.value;\n}\n\nfunction sortFactory( lessons, idx ) {\n\treturn ( a, b ) => {\n\t\ta = a[ lessons[ idx ]._id ];\n\t\tb = b[ lessons[ idx ]._id ];\n\t\tif ( !a && !b ) {\n\t\t\treturn 0;\n\t\t}\n\t\tif ( a && !b ) {\n\t\t\treturn 1;\n\t\t}\n\t\tif ( !a && b ) {\n\t\t\treturn -1;\n\t\t}\n\t\tif ( a._sumPoints > b._sumPoints ) {\n\t\t\treturn 1;\n\t\t}\n\t\tif ( a._sumPoints < b._sumPoints ) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 0;\n\t};\n}\n\n\n// MAIN //\n\nclass GradesPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.columns = this.createColumns( props.lessons, props.cohorts );\n\t\tthis.state = {\n\t\t\tdisplayedMembers: [],\n\t\t\tlessonSortDirection: 'ascending',\n\t\t\tlessonOrder: 'createdAt',\n\t\t\tshowExplorer: false\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.createDisplayedMembers();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tthis.props.cohorts !== prevProps.cohorts ||\n\t\t\tthis.props.lessons !== prevProps.lessons\n\t\t) {\n\t\t\tthis.createDisplayedMembers();\n\t\t\tthis.columns = this.createColumns( this.props.lessons, this.props.cohorts );\n\t\t}\n\t}\n\n\tcreateDisplayedMembers() {\n\t\tlet members = [];\n\t\tfor ( let i = 0; i < this.props.cohorts.length; i++ ) {\n\t\t\tconst cohortMembers = this.props.cohorts[ i ].members;\n\t\t\tfor ( let j = 0; j < cohortMembers.length; j++ ) {\n\t\t\t\tcohortMembers[ j ].cohort = this.props.cohorts[ i ].title;\n\t\t\t\tif ( !cohortMembers[ j ].lessonGrades ) {\n\t\t\t\t\tcohortMembers[ j ].lessonGrades = {};\n\t\t\t\t}\n\t\t\t}\n\t\t\tmembers = members.concat( this.props.cohorts[ i ].members );\n\t\t}\n\t\tfor ( let i = 0; i < members.length; i++ ) {\n\t\t\tconst d = members[ i ];\n\t\t\tconst parts = trim( d.name ).split( ' ' );\n\t\t\tif ( parts.length > 1 ) {\n\t\t\t\td.lastName = parts.pop();\n\t\t\t\td.firstName = parts.join( ' ' );\n\t\t\t} else {\n\t\t\t\td.firstName = parts[ 0 ];\n\t\t\t\td.lastName = '';\n\t\t\t}\n\t\t}\n\t\tthis.setState({ // eslint-disable-line react/no-did-mount-set-state\n\t\t\tdisplayedMembers: members\n\t\t});\n\t}\n\n\tcreateColumns( lessons, cohorts ) {\n\t\tconst { t } = this.props;\n\t\tconst COLUMNS = [\n\t\t\t{\n\t\t\t\tHeader: 'Pic',\n\t\t\t\taccessor: 'picture',\n\t\t\t\tCell: row => (\n\t\t\t\t\t<img className=\"table-pic\" src={`${server}/thumbnail/${row.original.picture}`} alt=\"Profile Pic\" />\n\t\t\t\t),\n\t\t\t\tmaxWidth: 46,\n\t\t\t\tminWidth: 46,\n\t\t\t\tfilterable: false,\n\t\t\t\tresizable: false,\n\t\t\t\tsortable: false,\n\t\t\t\tstyle: { color: 'darkslategrey' }\n\t\t\t},\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('first-name'),\n\t\t\t\tid: 'first_name',\n\t\t\t\taccessor: 'firstName',\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('last-name'),\n\t\t\t\tid: 'last_name',\n\t\t\t\taccessor: 'lastName',\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:email'),\n\t\t\t\taccessor: 'email',\n\t\t\t\tmaxWidth: 200,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: t('common:cohort'),\n\t\t\t\taccessor: 'cohort',\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tfilterMethod: filterMethodCategories,\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tconst handleChange = ( event ) => {\n\t\t\t\t\t\tconst newValue = event.target.value;\n\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t};\n\t\t\t\t\tlet value;\n\t\t\t\t\tif ( !filter ) {\n\t\t\t\t\t\tvalue = 'all';\n\t\t\t\t\t} else if ( isArray( filter.value ) ) {\n\t\t\t\t\t\tvalue = filter.value.join( ', ' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = filter.value;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tonBlur={handleChange} onChange={handleChange}\n\t\t\t\t\t\t\tstyle={{ width: '100%', backgroundColor: 'ghostwhite' }}\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"all\">Show All</option>\n\t\t\t\t\t\t\t{cohorts.map( ( v, key ) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\tvalue={`${v.title}`}\n\t\t\t\t\t\t\t\t\t>{v.title}</option>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tconst id = 'lesson_'+i;\n\t\t\tCOLUMNS.push({\n\t\t\t\tid,\n\t\t\t\tHeader: <span id={id} >{lessons[ i ].title}</span>,\n\t\t\t\t_lesson: lessons[ i ],\n\t\t\t\tCell: this.accessorFactory( lessons, i ),\n\t\t\t\tsortMethod: sortFactory( lessons, i ),\n\t\t\t\tfilterMethod: filterNumbersFactory( lessons, i ),\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tlet maxPoints = 0;\n\t\t\t\t\tif ( lessons[ i ].metadata && lessons[ i ].metadata.grades ) {\n\t\t\t\t\t\tmaxPoints = lessons[ i ].metadata.grades.maxPoints;\n\t\t\t\t\t}\n\t\t\t\t\tconst defaultVal = {\n\t\t\t\t\t\tmax: maxPoints,\n\t\t\t\t\t\tmin: 0\n\t\t\t\t\t};\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tpaddingLeft: '4px',\n\t\t\t\t\t\t\tpaddingRight: '4px',\n\t\t\t\t\t\t\tpaddingTop: '8px'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<InputRange\n\t\t\t\t\t\t\t\tariaLabelledby={id}\n\t\t\t\t\t\t\t\tariaControls=\"dashboard-table\"\n\t\t\t\t\t\t\t\tallowSameValues\n\t\t\t\t\t\t\t\tmaxValue={maxPoints}\n\t\t\t\t\t\t\t\tminValue={0}\n\t\t\t\t\t\t\t\tvalue={filter ? filter.value : defaultVal}\n\t\t\t\t\t\t\t\tonChange={( newValue ) => {\n\t\t\t\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\taccessor: 'lessonGrades'\n\t\t\t});\n\t\t}\n\t\treturn COLUMNS;\n\t}\n\n\taccessorFactory = ( lessons, idx ) => {\n\t\treturn d => {\n\t\t\tlet data = d.original.lessonGrades || {};\n\t\t\tconst lesson = lessons[ idx ];\n\t\t\tconst lessonID = lesson._id;\n\t\t\tlet maxPoints = '';\n\t\t\tif ( lesson.metadata && lesson.metadata.grades ) {\n\t\t\t\tmaxPoints += ` / ${lessons[ idx ].metadata.grades.maxPoints}`;\n\t\t\t}\n\t\t\tdata = data[ lessonID ];\n\t\t\tif ( data ) {\n\t\t\t\tlet tally = [];\n\t\t\t\tfor ( let key in data ) {\n\t\t\t\t\tif ( hasOwnProp( data, key ) && key !== '_sumPoints' ) {\n\t\t\t\t\t\ttally.push( <p style={{ margin: 0 }} key={key}>{key}: <b style={{ float: 'right', marginLeft: 12 }}>{data[ key ]}</b></p> );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn ( <OverlayTrigger placement=\"top\" overlay={<Card className=\"tickets-description-overlay\" body id=\"description-tooltip\">\n\t\t\t\t\t{tally}\n\t\t\t\t</Card>}>\n\t\t\t\t\t<p>{data._sumPoints}{maxPoints}</p>\n\t\t\t\t</OverlayTrigger> );\n\t\t\t}\n\t\t\treturn <span></span>;\n\t\t};\n\t}\n\n\treorderColumns( lessonOrder, lessonSortDirection ) {\n\t\tdebug( 'Sort columns by '+lessonOrder+' in '+lessonSortDirection+' order' );\n\t\tif ( lessonSortDirection === 'ascending' ) {\n\t\t\treturn this.columns.slice().sort( ( a, b ) => {\n\t\t\t\tif ( !a._lesson || !b._lesson ) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif ( lessonOrder === 'title' ) {\n\t\t\t\t\treturn a._lesson.title.localeCompare( b._lesson.title );\n\t\t\t\t}\n\t\t\t\treturn a._lesson[ lessonOrder ] > b._lesson[ lessonOrder ] ? 1 : -1;\n\t\t\t});\n\t\t}\n\t\treturn this.columns.slice().sort( ( a, b ) => {\n\t\t\tif ( !a._lesson || !b._lesson ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif ( lessonOrder === 'title' ) {\n\t\t\t\treturn b._lesson.title.localeCompare( a._lesson.title );\n\t\t\t}\n\t\t\treturn a._lesson[ lessonOrder ] < b._lesson[ lessonOrder ] ? 1 : -1;\n\t\t});\n\t}\n\n\tassembleData() {\n\t\tconst displayedMembers = this.dashboardTable.table.getResolvedState().sortedData;\n\t\tconst len = displayedMembers.length;\n\t\tconst out = new Array( len );\n\t\tconst lessons = this.props.lessons;\n\t\tfor ( let i = 0; i < len; i++ ) {\n\t\t\tconst member = displayedMembers[ i ]._original;\n\t\t\tout[ i ] = {\n\t\t\t\tname: member.name,\n\t\t\t\tfirstName: member.firstName,\n\t\t\t\tlastName: member.lastName,\n\t\t\t\temail: member.email,\n\t\t\t\tcohort: member.cohort\n\t\t\t};\n\t\t\tconst availableCustomFields = this.props.user.availableCustomFields;\n\t\t\tfor ( let j = 0; j < availableCustomFields.length; j++ ) {\n\t\t\t\tconst fieldName = availableCustomFields[ j ].name;\n\t\t\t\tif ( member.customFields ) {\n\t\t\t\t\tout[ i ][ fieldName ] = member.customFields[ fieldName ];\n\t\t\t\t} else {\n\t\t\t\t\tout[ i ][ fieldName ] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor ( let j = 0; j < lessons.length; j++ ) {\n\t\t\t\tconst lessonName = lessons[ j ]._id;\n\t\t\t\tlet data = member.lessonGrades;\n\t\t\t\tif ( data && data[ lessonName ] ) {\n\t\t\t\t\tdata = data[ lessonName ];\n\t\t\t\t\tout[ i ][ lessons[ j ].title ] = data._sumPoints;\n\t\t\t\t} else {\n\t\t\t\t\tout[ i ][ lessons[ j ].title ] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn out;\n\t}\n\n\tsaveJSON = () => {\n\t\tconst data = this.assembleData();\n\t\tconst blob = new Blob([ JSON.stringify( data ) ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `grades_${this.props.namespace.title}.json`;\n\t\tsaveAs( blob, name );\n\t}\n\n\tsaveCSV = () => {\n\t\tconst data = this.assembleData();\n\t\tstringify( data, {\n\t\t\theader: true\n\t\t}, ( err, output ) => {\n\t\t\tif ( err ) {\n\t\t\t\treturn this.props.addNotification({\n\t\t\t\t\ttitle: 'Error encountered',\n\t\t\t\t\tmessage: 'Encountered an error while creating CSV: '+err.message,\n\t\t\t\t\tlevel: 'error',\n\t\t\t\t\tposition: 'tl'\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst blob = new Blob([ output ], {\n\t\t\t\ttype: 'text/plain'\n\t\t\t});\n\t\t\tconst name = `grades_${this.props.namespace.title}.csv`;\n\t\t\tsaveAs( blob, name );\n\t\t});\n\t}\n\n\ttoggleExplorer = () => {\n\t\tthis.setState({\n\t\t\tshowExplorer: !this.state.showExplorer\n\t\t});\n\t}\n\n\trenderSortButton() {\n\t\tconst { t } = this.props;\n\t\tlet title;\n\t\tswitch ( this.state.lessonOrder ) {\n\t\t\tcase 'title':\n\t\t\t\ttitle = t('common:sort-alphabetically');\n\t\t\t\tbreak;\n\t\t\tcase 'createdAt':\n\t\t\t\ttitle = t('common:sort-create-date');\n\t\t\t\tbreak;\n\t\t\tcase 'updatedAt':\n\t\t\t\ttitle = t('common:sort-update-date');\n\t\t\t\tbreak;\n\t\t}\n\t\treturn (\n\t\t\t<ButtonGroup className=\"sort-button-group\" >\n\t\t\t\t<DropdownButton size=\"sm\" variant=\"secondary\" onSelect={( newValue ) => {\n\t\t\t\t\tthis.columns = this.reorderColumns( newValue, this.state.lessonSortDirection );\n\t\t\t\t\tthis.setState({ lessonOrder: newValue });\n\t\t\t\t}} id=\"dropdown\" title={<small>{title}</small>} >\n\t\t\t\t\t<Dropdown.Item eventKey=\"title\" >\n\t\t\t\t\t\t<small>{t('common:sort-alphabetically')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"createdAt\" >\n\t\t\t\t\t\t<small>{t('common:sort-create-date')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"updatedAt\" >\n\t\t\t\t\t\t<small>{t('common:sort-update-date')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t</DropdownButton>\n\t\t\t\t<Button size=\"sm\" variant=\"secondary\" style={{ marginLeft: 2 }} onClick={() => {\n\t\t\t\t\tif ( this.state.lessonSortDirection === 'ascending' ) {\n\t\t\t\t\t\tthis.columns = this.reorderColumns( this.state.lessonOrder, 'descending' );\n\t\t\t\t\t\tthis.setState({ lessonSortDirection: 'descending' });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.columns = this.reorderColumns( this.state.lessonOrder, 'ascending' );\n\t\t\t\t\t\tthis.setState({ lessonSortDirection: 'ascending' });\n\t\t\t\t\t}\n\t\t\t\t}} aria-label={this.state.lessonSortDirection === 'ascending' ?\n\t\t\t\tt('common:sort-descending') : t('common:sort-ascending')} >\n\t\t\t\t\t{ this.state.lessonSortDirection === 'ascending' ?\n\t\t\t\t\t\t<i className=\"fas fa-arrow-right\" /> :\n\t\t\t\t\t\t<i className=\"fas fa-arrow-left\" />\n\t\t\t\t\t}\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( this.state.showExplorer ) {\n\t\t\tlet data = this.assembleData();\n\t\t\tdata = obsToVar( data );\n\t\t\tconst quantitative = [];\n\t\t\tconst categorical = [ 'name', 'email', 'cohort' ];\n\t\t\tfor ( let i = 0; i < this.props.lessons.length; i++ ) {\n\t\t\t\tquantitative.push( this.props.lessons[ i ].title );\n\t\t\t}\n\t\t\tconst availableCustomFields = this.props.user.availableCustomFields;\n\t\t\tfor ( let i = 0; i < availableCustomFields.length; i++ ) {\n\t\t\t\tcategorical.push( availableCustomFields[ i ].name );\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<DashboardDataExplorer\n\t\t\t\t\ttitle={t('explorer-grades-title')}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tclose={this.toggleExplorer}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"namespace-data-buttons\" >\n\t\t\t\t\t{this.renderSortButton()}\n\t\t\t\t\t<ButtonGroup className=\"progress-button-group\" >\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"csvTooltip\" >{t('save-as-csv')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveCSV} ><i className=\"fas fa-download\"></i> CSV</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"jsonTooltip\">{t('save-as-json')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveJSON} ><i className=\"fas fa-download\"></i> JSON</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"namespace-data-page\">\n\t\t\t\t\t<DashboardTable\n\t\t\t\t\t\tclassName=\"grades-table\"\n\t\t\t\t\t\tdata={this.state.displayedMembers}\n\t\t\t\t\t\tcolumns={this.columns}\n\t\t\t\t\t\tt={t}\n\t\t\t\t\t\tref={(r) => {\n\t\t\t\t\t\t\tthis.dashboardTable = r;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonButtonClick={this.toggleExplorer}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nGradesPage.propTypes = {\n\taddNotification: PropTypes.func.isRequired,\n\tcohorts: PropTypes.array.isRequired,\n\tlessons: PropTypes.array.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nGradesPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( GradesPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'react-bootstrap/Button';\nimport ToggleButtonGroup from 'react-bootstrap/ToggleButtonGroup';\nimport ToggleButton from 'react-bootstrap/ToggleButton';\nimport logger from 'debug';\nimport Select from 'react-select';\nimport './actions_page.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle-dashboard:namespace-data:actions-page' );\n\n\n// MAIN //\n\nclass ActionsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst cohortOptions = props.cohorts.map( cohort => {\n\t\t\treturn { label: cohort.title, value: cohort };\n\t\t});\n\n\t\tlet displayedMembers = [];\n\t\tfor ( let i = 0; i < props.cohorts.length; i++ ) {\n\t\t\tdisplayedMembers = displayedMembers.concat( props.cohorts[i].members);\n\t\t}\n\n\t\tthis.state = {\n\t\t\tcohortOptions: cohortOptions,\n\t\t\tselectedCohorts: cohortOptions,\n\t\t\tdisplayedMembers: displayedMembers,\n\t\t\tlessonActionsPage: false,\n\t\t\tactualLesson: null,\n\t\t\tanonymized: true\n\t\t};\n\t}\n\n\tretrieveActions = () => {\n\t\tthis.props.getNamespaceActions({\n\t\t\tnamespaceID: this.props.namespace._id,\n\t\t\tnamespaceTitle: this.props.namespace.title\n\t\t});\n\t}\n\n\thandleRadioChange = ( val ) => {\n\t\tthis.setState({\n\t\t\tanonymized: !this.state.anonymized\n\t\t});\n\t}\n\n\thandleCohortChange = ( cohorts ) => {\n\t\tlet members = [];\n\t\tfor ( let i = 0; i < cohorts.length; i++ ) {\n\t\t\tmembers = members.concat( cohorts[ i ].value.members );\n\t\t}\n\t\tthis.setState({\n\t\t\tselectedCohorts: cohorts,\n\t\t\tdisplayedMembers: members\n\t\t}, () => {\n\t\t\tdebug( 'New number of displayed members: '+this.state.displayedMembers.length );\n\t\t});\n\t}\n\n\trenderCohorts() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"actions-page-cohorts\">\n\t\t\t\t\t<div style={{ width: '400px', height: '40px' }}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={this.state.selectedCohorts}\n\t\t\t\t\t\t\tisMulti\n\t\t\t\t\t\t\tname=\"cohorts\"\n\t\t\t\t\t\t\toptions={this.state.cohortOptions}\n\t\t\t\t\t\t\tonChange={this.handleCohortChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderLessonActionsPage() {\n\t\treturn (\n\t\t\t<div className=\"actions-page-lesson-action-page\">\n\t\t\t\t<div className=\"lesson-action-page-resize\">\t&#x1f5d6;</div>\n\t\t\t\t<button onClick={this.hideLessonActions} className=\"lesson-action-page-exit empty-button\">&#10005;</button>\n\t\t\t\t<div className=\"lesson-action-page-title\">{ this.state.actualLesson.title}</div>\n\t\t\t\t<div className=\"lesson-action-page-filter\">\n\t\t\t\t\t{this.renderCohorts() }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\n\thideLessonActions = () => {\n\t\tthis.setState({\n\t\t\tlessonActionsPage: false\n\t\t});\n\t}\n\n\tshowLessonActions = (lesson) => {\n\t\tthis.setState({\n\t\t\tlessonActionsPage: true,\n\t\t\tactualLesson: lesson\n\t\t});\n\t}\n\n\trenderLessons() {\n\t\tconst lessons = this.props.namespace.lessons;\n\t\tconst list = [];\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tlist.push(\n\t\t\t\t<button key={i} onClick={()=> this.showLessonActions( lessons[i] )} className=\"actions-page-lesson\">\n\t\t\t\t\t<div className=\"actions-page-lesson-title\">{lessons[i].title}</div>\n\t\t\t\t</button>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"actions-page\">\n\t\t\t\t<div className=\"actions-page-export\">\n\t\t\t\t{ this.renderExportSection() }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"actions-page-lessons\">\n\t\t\t\t\t{ list }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderExportSection() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"actions-page-export-title\">Export Actions</div>\n\t\t\t\t<ToggleButtonGroup\n\t\t\t\t\tname=\"options\"\n\t\t\t\t\tonChange={this.handleRadioChange}\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tvalue={this.state.anonymized}\n\t\t\t\t>\n\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"light\"\n\t\t\t\t\t\tvalue={false}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\t\t\tcolor: this.state.anonymized ? '#A9A9A9' : 'black'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>Original</ToggleButton>\n\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"light\"\n\t\t\t\t\t\tvalue={true}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\t\t\tcolor: this.state.anonymized ? 'black' : '#A9A9A9'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>Anonymized</ToggleButton>\n\t\t\t\t</ToggleButtonGroup>\n\t\t\t\t<Button onClick={this.retrieveActions}>\n\t\t\t\t\tSave all namespace actions\n\t\t\t\t</Button>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn ( <div className=\"namespace-data-page\">\n\t\t\t{ this.renderLessons() }\n\t\t\t{ this.state.lessonActionsPage ? this.renderLessonActionsPage() : null }\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nActionsPage.propTypes = {\n\tcohorts: PropTypes.array.isRequired,\n\tgetNamespaceActions: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired\n};\n\nActionsPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default ActionsPage;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport moment from 'moment';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport PINF from '@stdlib/constants/float64/pinf';\nimport omit from '@stdlib/utils/omit';\nimport Popover from 'react-bootstrap/Popover';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport Badge from 'react-bootstrap/Badge';\nimport DashboardDataExplorer from 'ev/components/data-explorer';\nimport obsToVar from '@isle-project/utils/obs-to-var';\nimport DashboardTable from 'components/dashboard-table';\nimport createCategoricalColumn from 'utils/create_categorical_column.js';\nimport createBooleanColumn from 'utils/create_boolean_column.js';\nimport createTextColumn from 'utils/create_text_column.js';\nimport createDateColumn from 'utils/create_date_column.js';\nimport TicketModal from 'components/ticket-modal';\nimport server from 'constants/server';\nimport 'css/input_range.css';\nimport './tickets_page.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:files-page' );\nconst RE_TICKET = /ticket=([^&]*)/;\n\n\n// MAIN //\n\nclass TicketsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tshowTicketModal: false,\n\t\t\tselectedTicket: null,\n\t\t\tshowExplorer: false\n\t\t};\n\t\tthis.columns = this.createColumns();\n\t}\n\n\tasync componentDidMount() {\n\t\tdebug( 'Component did mount...' );\n\t\tawait this.props.getCourseTickets( this.props.namespace._id );\n\n\t\tif ( this.props.history.location.search ) {\n\t\t\tconst match = RE_TICKET.exec( this.props.history.location.search );\n\t\t\tif ( match && match[ 1 ] ) {\n\t\t\t\tconst tickets = this.props.tickets;\n\t\t\t\tfor ( let i = 0; i < tickets.length; i++ ) {\n\t\t\t\t\tconst ticket = tickets[ i ];\n\t\t\t\t\tif ( ticket._id === match[ 1 ] ) {\n\t\t\t\t\t\t// eslint-disable-next-line react/no-did-mount-set-state\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tselectedTicket: ticket,\n\t\t\t\t\t\t\tshowTicketModal: true\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\ttoggleTicketModal = () => {\n\t\tthis.setState({\n\t\t\tshowTicketModal: !this.state.showTicketModal\n\t\t});\n\t}\n\n\tcreateColumns = () => {\n\t\tconst { t } = this.props;\n\t\tconst tickets = this.props.tickets || [];\n\t\tlet minTime = PINF;\n\t\tlet maxTime = 0;\n\t\tfor ( let i = 0; i < tickets.length; i++ ) {\n\t\t\tif ( tickets[ i ].createdAt > maxTime ) {\n\t\t\t\tmaxTime = tickets[ i ].createdAt;\n\t\t\t}\n\t\t\tif ( tickets[ i ].updatedAt > maxTime ) {\n\t\t\t\tmaxTime = tickets[ i ].updatedAt;\n\t\t\t}\n\t\t\tif ( tickets[ i ].createdAt < minTime ) {\n\t\t\t\tminTime = tickets[ i ].createdAt;\n\t\t\t}\n\t\t\tif ( tickets[ i ].updatedAt < minTime ) {\n\t\t\t\tminTime = tickets[ i ].updatedAt;\n\t\t\t}\n\t\t}\n\t\tmaxTime = moment( maxTime );\n\t\tminTime = moment( minTime );\n\t\treturn [\n\t\t\t{\n\t\t\t\tHeader: 'Pic',\n\t\t\t\taccessor: 'user.picture',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn <img className=\"table-pic\" src={`${server}/thumbnail/${row.value}`} alt=\"Profile Pic\" />;\n\t\t\t\t},\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tmaxWidth: 46,\n\t\t\t\tminWidth: 46,\n\t\t\t\tfilterable: false,\n\t\t\t\tresizable: false,\n\t\t\t\tsortable: false\n\t\t\t},\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:name'),\n\t\t\t\taccessor: 'user.name',\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' }\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:email'),\n\t\t\t\taccessor: 'user.email',\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' }\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:title'),\n\t\t\t\taccessor: 'title',\n\t\t\t\tminWidth: 200\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: t('common:description'),\n\t\t\t\taccessor: 'description',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn ( <OverlayTrigger placement=\"top\" overlay={<Card className=\"tickets-description-overlay\" body id=\"description-tooltip\">\n\t\t\t\t\t\t{row.value}\n\t\t\t\t\t</Card>}>\n\t\t\t\t\t\t<p className=\"tickets-description\" >{row.value}</p>\n\t\t\t\t\t</OverlayTrigger> );\n\t\t\t\t},\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tminWidth: 300\n\t\t\t},\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:component'),\n\t\t\t\taccessor: 'component'\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: 'Reply',\n\t\t\t\taccessor: '_id',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"open-ticket-tooltip\">{t('common:open-ticket-tooltip')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-secondary\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tselectedTicket: row.original\n\t\t\t\t\t\t\t\t\t}, this.toggleTicketModal );\n\t\t\t\t\t\t\t\t}} >\n\t\t\t\t\t\t\t\t<i className=\"fas fa-reply\"></i>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 45\n\t\t\t},\n\t\t\tcreateCategoricalColumn({\n\t\t\t\tHeader: t('common:priority'),\n\t\t\t\taccessor: 'priority',\n\t\t\t\tlabels: [ 'Low', 'Middle', 'High' ],\n\t\t\t\tmaxWidth: 200,\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( !row.value ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tlet variant;\n\t\t\t\t\tlet higher;\n\t\t\t\t\tlet lower;\n\t\t\t\t\tswitch ( row.value ) {\n\t\t\t\t\t\tcase 'Low':\n\t\t\t\t\t\t\tvariant = 'secondary';\n\t\t\t\t\t\t\thigher = 'Middle';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Middle':\n\t\t\t\t\t\t\tvariant = 'warning';\n\t\t\t\t\t\t\thigher = 'High';\n\t\t\t\t\t\t\tlower = 'Low';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'High':\n\t\t\t\t\t\t\tvariant = 'danger';\n\t\t\t\t\t\t\tlower = 'Middle';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\treturn ( <div>\n\t\t\t\t\t\t<Badge variant={variant} style={{ marginRight: 6, fontSize: '1em' }} >\n\t\t\t\t\t\t\t{row.value}\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-secondary\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.props.updatePriority( row.original._id, higher );\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisabled={!higher}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"fas fa-arrow-up\"></i>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-secondary\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.props.updatePriority( row.original._id, lower );\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisabled={!lower}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"fas fa-arrow-down\"></i>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div> );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:lesson'),\n\t\t\t\taccessor: 'lesson.title',\n\t\t\t\tmaxWidth: 140,\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( !row.value ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tconst url = `${server}/${this.props.namespace.title}/${row.value}`;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"open-lesson-tooltip\">{t('namespace_data:open-lesson-new-tab')}</Tooltip>}>\n\t\t\t\t\t\t\t<Badge variant=\"light\" style={{ fontSize: '1em' }} >\n\t\t\t\t\t\t\t\t<a href={url} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t\t{row.value}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateBooleanColumn({\n\t\t\t\tHeader: t('common:done'),\n\t\t\t\taccessor: 'done',\n\t\t\t\ttrueLabel: t('common:done'),\n\t\t\t\tfalseLabel: t('common:not-done')\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: t( 'common:platform' ),\n\t\t\t\taccessor: 'platform',\n\t\t\t\tstyle: { marginTop: '2px', color: 'darkslategrey', fontSize: 24, textAlign: 'center', cursor: 'pointer' },\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( row.value ) {\n\t\t\t\t\t\tconst popover = <Popover\n\t\t\t\t\t\t\tid=\"popover-data\"\n\t\t\t\t\t\t\tstyle={{ maxWidth: 500, maxHeight: '80vh', overflowY: 'auto' }}\n\t\t\t\t\t\t\tarrowProps={{ display: 'none' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Popover.Title as=\"h3\">{row.row._original.title}</Popover.Title>\n\t\t\t\t\t\t\t<Popover.Content style={{ backgroundColor: 'lightblue' }} >\n\t\t\t\t\t\t\t\t<pre>\n\t\t\t\t\t\t\t\t\t{JSON.stringify( omit( row.value, [ 'description' ] ), null, 2 )}\n\t\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t\t</Popover.Content>\n\t\t\t\t\t\t</Popover>;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<OverlayTrigger trigger=\"click\" placement=\"left\" overlay={popover}>\n\t\t\t\t\t\t\t\t<i className=\"data-icon fas fa-tablet-alt\"></i>\n\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false\n\t\t\t},\n\t\t\tcreateDateColumn({\n\t\t\t\tHeader: t('created-at'),\n\t\t\t\taccessor: 'createdAt',\n\t\t\t\tstartDate: minTime,\n\t\t\t\tendDate: maxTime,\n\t\t\t\tt\n\t\t\t})\n\t\t];\n\t}\n\n\ttoggleExplorer = () => {\n\t\tthis.setState({\n\t\t\tshowExplorer: !this.state.showExplorer\n\t\t});\n\t}\n\n\tassembleExplorerData = () => {\n\t\tlet tickets = this.props.tickets;\n\t\tlet data = [];\n\t\tfor ( let i = 0; i < tickets.length; i++ ) {\n\t\t\tconst ticket = tickets[ i ];\n\t\t\tconst replacement = {};\n\t\t\treplacement.component = ticket.component;\n\t\t\treplacement.title = ticket.title;\n\t\t\treplacement.description = ticket.description;\n\t\t\treplacement.lesson = ticket.lesson ? ticket.lesson.title : null;\n\t\t\treplacement.messages = ticket.messages.length;\n\t\t\treplacement.attachments = ticket.attachments.length;\n\t\t\treplacement.user = ticket.user.email;\n\t\t\treplacement.done = ticket.done;\n\t\t\treplacement.priority = ticket.priority;\n\t\t\treplacement.browser = `${ticket.platform.name} ${ticket.platform.version}`;\n\t\t\tconst os = ticket.platform.os;\n\t\t\treplacement.os = `${os.family} ${os.version ? os.version : ''} ${os.architecture}bit`;\n\t\t\treplacement.createdAt = ticket.createdAt;\n\t\t\treplacement.updatedAt = ticket.updatedAt;\n\t\t\tdata.push( replacement );\n\t\t}\n\t\tdata = obsToVar( data );\n\t\treturn data;\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( this.state.showExplorer ) {\n\t\t\treturn (\n\t\t\t\t<DashboardDataExplorer\n\t\t\t\t\ttitle={t('explorer-tickets-title')}\n\t\t\t\t\tdata={this.assembleExplorerData()}\n\t\t\t\t\tcategorical={[ 'component', 'lesson', 'done', 'createdAt', 'updatedAt', 'priority', 'browser', 'os' ]}\n\t\t\t\t\tquantitative={[ 'messages', 'attachments' ]}\n\t\t\t\t\tclose={this.toggleExplorer}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn ( <div className=\"namespace-data-page\">\n\t\t\t<DashboardTable\n\t\t\t\tdata={this.props.tickets}\n\t\t\t\tcolumns={this.columns}\n\t\t\t\tt={t}\n\t\t\t\tonButtonClick={this.toggleExplorer}\n\t\t\t/>\n\t\t\t{ this.state.showTicketModal ? <TicketModal\n\t\t\t\tshow={this.state.showTicketModal}\n\t\t\t\tonHide={this.toggleTicketModal}\n\t\t\t\tticket={this.state.selectedTicket}\n\t\t\t\tsubmitTicketMessage={this.props.submitTicketMessage}\n\t\t\t\topenTicket={this.props.openTicket}\n\t\t\t\tcloseTicket={this.props.closeTicket}\n\t\t\t/> : null }\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nTicketsPage.propTypes = {\n\tcloseTicket: PropTypes.func.isRequired,\n\tgetCourseTickets: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\topenTicket: PropTypes.func.isRequired,\n\tsubmitTicketMessage: PropTypes.func.isRequired,\n\ttickets: PropTypes.array,\n\tupdatePriority: PropTypes.func.isRequired\n};\n\nTicketsPage.defaultProps = {\n\ttickets: []\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( TicketsPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport Alert from 'react-bootstrap/Alert';\nimport Nav from 'react-bootstrap/Nav';\nimport FilesPage from './files_page.js';\nimport AnnouncementsPage from './announcements_page.js';\nimport ProgressPage from './progress_page.js';\nimport CohortsPage from './cohorts_page.js';\nimport GradesPage from './grades_page.js';\nimport ActionsPage from './actions_page.js';\nimport TicketsPage from './tickets_page.js';\nimport './namespace_data.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle-dashboard:namespace-data' );\n\n\n// MAIN //\n\nclass NamespaceData extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst subpage = props.match.params.subpage;\n\t\tlet activePage;\n\t\tswitch ( subpage ) {\n\t\t\tdefault:\n\t\t\tcase 'announcements':\n\t\t\t\tactivePage = 1;\n\t\t\t\tbreak;\n\t\t\tcase 'progress':\n\t\t\t\tactivePage = 2;\n\t\t\t\tbreak;\n\t\t\tcase 'grades':\n\t\t\t\tactivePage = 3;\n\t\t\t\tbreak;\n\t\t\tcase 'cohorts':\n\t\t\t\tactivePage = 4;\n\t\t\t\tbreak;\n\t\t\tcase 'owner-files':\n\t\t\t\tactivePage = 5;\n\t\t\t\tbreak;\n\t\t\tcase 'student-files':\n\t\t\t\tactivePage = 6;\n\t\t\t\tbreak;\n\t\t\tcase 'tickets':\n\t\t\t\tactivePage = 7;\n\t\t\t\tbreak;\n\t\t\tcase 'actions':\n\t\t\t\tactivePage = 8;\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.state = {\n\t\t\tactivePage\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.getBadges();\n\t}\n\n\thandleUpload = ( event ) => {\n\t\tdebug( 'Uploading file...' );\n\t\tconst file = event.target.files[ 0 ];\n\t\tconst formData = new FormData();\n\t\tformData.append( 'file', file, file.name );\n\t\tformData.append( 'namespaceName', this.props.namespace.title );\n\t\tformData.append( 'owner', 'true' );\n\t\tthis.props.uploadFile({\n\t\t\tformData: formData,\n\t\t\tuser: this.props.user\n\t\t});\n\t}\n\n\thandleAnnouncementDeletion = (createdAt, index) => {\n\t\tthis.props.deleteAnnouncement( {\n\t\t\tnamespaceName: this.props.namespace.title,\n\t\t\tindex,\n\t\t\tcreatedAt\n\t\t});\n\t}\n\n\thandleAnnouncementEdit = ( announcement ) => {\n\t\tthis.props.editAnnouncement({\n\t\t\tnamespaceName: this.props.namespace.title,\n\t\t\tannouncement\n\t\t});\n\t}\n\n\thandleAnnouncementCreation = ( announcement ) => {\n\t\tthis.props.addAnnouncement({\n\t\t\tnamespaceName: this.props.namespace.title,\n\t\t\tannouncement\n\t\t});\n\t}\n\n\thandleFileDeletion = ( _id, ownerFiles ) => {\n\t\tthis.props.deleteFile( _id, this.props.namespace.title, ownerFiles );\n\t}\n\n\tsubmitTicketMessage = ({ message, ticketID }) => {\n\t\tthis.props.sendTicketMessage({ message, ticketID, user: this.props.user });\n\t}\n\n\thandleSelect = ( selectedKey ) => {\n\t\tselectedKey = Number( selectedKey );\n\t\tconst title = this.props.namespace.title;\n\t\tswitch ( selectedKey ) {\n\t\t\tcase 1:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/announcements` );\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/progress` );\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/grades` );\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/cohorts` );\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/owner-files` );\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/student-files` );\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/tickets` );\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/actions` );\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.setState({\n\t\t\tactivePage: selectedKey\n\t\t});\n\t}\n\n\trenderPage() {\n\t\tswitch ( this.state.activePage ) {\n\t\t\tcase 1:\n\t\t\t\treturn <AnnouncementsPage namespace={this.props.namespace} editAnnouncement={this.handleAnnouncementEdit} deleteAnnouncement={this.handleAnnouncementDeletion} addAnnouncement={this.handleAnnouncementCreation} user={this.props.user} />;\n\t\t\tcase 2:\n\t\t\t\treturn <ProgressPage adjustProgress={this.props.adjustProgress} addNotification={this.props.addNotification} namespace={this.props.namespace} cohorts={this.props.namespace.cohorts} lessons={this.props.namespace.lessons} user={this.props.user} />;\n\t\t\tcase 3:\n\t\t\t\treturn <GradesPage addNotification={this.props.addNotification} namespace={this.props.namespace} cohorts={this.props.namespace.cohorts} lessons={this.props.namespace.lessons} user={this.props.user} />;\n\t\t\tcase 4:\n\t\t\t\treturn <CohortsPage badges={this.props.badges} cohorts={this.props.namespace.cohorts} lessons={this.props.namespace.lessons} />;\n\t\t\tcase 5:\n\t\t\t\treturn <FilesPage ownerFiles files={this.props.namespace.ownerFiles} namespace={this.props.namespace} handleUpload={this.handleUpload} handleFileDeletion={this.handleFileDeletion} addNotification={this.props.addNotification} getFiles={this.props.getOwnerFiles} />;\n\t\t\tcase 6:\n\t\t\t\treturn <FilesPage files={this.props.namespace.files} namespace={this.props.namespace} handleUpload={this.handleUpload} handleFileDeletion={this.handleFileDeletion} addNotification={this.props.addNotification} getFiles={this.props.getFiles} />;\n\t\t\tcase 7:\n\t\t\t\treturn <TicketsPage tickets={this.props.namespace.tickets} namespace={this.props.namespace} getCourseTickets={this.props.getCourseTickets} submitTicketMessage={this.submitTicketMessage} openTicket={this.props.openTicket} closeTicket={this.props.closeTicket} updatePriority={this.props.updatePriority} history={this.props.history} />;\n\t\t\tcase 8:\n\t\t\t\treturn <ActionsPage namespace={this.props.namespace} getNamespaceActions={this.props.getNamespaceActions} user={this.props.user} cohorts={this.props.namespace.cohorts} />;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( !this.props.namespace._id ) {\n\t\t\treturn ( <div className=\"namespace-data-div\">\n\t\t\t\t<Alert variant=\"danger\">{t('common:no-course-selected')}</Alert>\n\t\t\t</div> );\n\t\t}\n\t\tconst page = this.renderPage();\n\t\treturn (\n\t\t\t<div className=\"namespace-data-div\">\n\t\t\t\t<div className=\"namespace-data-navbar\">\n\t\t\t\t\t<Nav variant=\"pills\" className=\"namespace-data-navbar-pills\" activeKey={this.state.activePage} onSelect={this.handleSelect}>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"1\" title=\"Announcements\" >{t('common:announcements')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"2\" title=\"Progress\" >{t('common:progress')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"3\" title=\"Grades\" >{t('grades')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"4\" title=\"Cohorts\" >{t('common:cohorts')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"5\" title=\"Owner Files\" >{t('owner-files')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"6\" title=\"Student Files\" >{t('student-files')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"7\" title=\"Tickets\" disabled={!this.props.namespace.enableTicketing} >{t('common:tickets')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"8\" title=\"Actions\" disabled >{t('common:actions')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t</Nav>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"namespace-data-page-container\" style={{ overflowY: 'auto' }}>\n\t\t\t\t\t{page}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nNamespaceData.propTypes = {\n\taddAnnouncement: PropTypes.func.isRequired,\n\taddNotification: PropTypes.func.isRequired,\n\tadjustProgress: PropTypes.func.isRequired,\n\tbadges: PropTypes.array,\n\tcloseTicket: PropTypes.func.isRequired,\n\tdeleteAnnouncement: PropTypes.func.isRequired,\n\tdeleteFile: PropTypes.func.isRequired,\n\teditAnnouncement: PropTypes.func.isRequired,\n\tgetBadges: PropTypes.func.isRequired,\n\tgetCourseTickets: PropTypes.func.isRequired,\n\tgetFiles: PropTypes.func.isRequired,\n\tgetNamespaceActions: PropTypes.func.isRequired,\n\tgetOwnerFiles: PropTypes.func.isRequired,\n\tmatch: PropTypes.object.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\topenTicket: PropTypes.func.isRequired,\n\tsendTicketMessage: PropTypes.func.isRequired,\n\tupdatePriority: PropTypes.func.isRequired,\n\tuploadFile: PropTypes.func.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nNamespaceData.defaultProps = {\n\tbadges: null\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( NamespaceData );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport server from 'constants/server';\nimport { CREATED_ANNOUNCEMENT, EDITED_ANNOUNCEMENT, DELETED_ANNOUNCEMENT } from 'constants/action_types.js';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { namespaceAxios } from 'helpers/axios.js';\n\n\n// EXPORTS //\n\nexport function editedAnnouncement( announcement, namespaceName ) {\n\treturn {\n\t\ttype: EDITED_ANNOUNCEMENT,\n\t\tpayload: {\n\t\t\tannouncement,\n\t\t\tnamespaceName\n\t\t}\n\t};\n}\n\nexport function createdAnnouncement( announcement, namespaceName ) {\n\treturn {\n\t\ttype: CREATED_ANNOUNCEMENT,\n\t\tpayload: {\n\t\t\tannouncement,\n\t\t\tnamespaceName\n\t\t}\n\t};\n}\n\nexport function deletedAnnouncement( index, namespaceName ) {\n\treturn {\n\t\ttype: DELETED_ANNOUNCEMENT,\n\t\tpayload: {\n\t\t\tindex,\n\t\t\tnamespaceName\n\t\t}\n\t};\n}\n\nexport const addAnnouncement = async ( dispatch, { namespaceName, announcement }) => {\n\ttry {\n\t\tconst res = await namespaceAxios.post( server+'/new_announcement', {\n\t\t\tnamespaceName,\n\t\t\tannouncement\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch( createdAnnouncement( announcement, namespaceName ) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const addAnnouncementInjector = dispatch => {\n\treturn async ( { namespaceName, announcement } ) => {\n\t\tawait addAnnouncement( dispatch, { namespaceName, announcement } );\n\t};\n};\n\nexport const deleteAnnouncement = async ( dispatch, { namespaceName, createdAt, index }) => {\n\ttry {\n\t\tconst res = await namespaceAxios.post( server+'/delete_announcement', {\n\t\t\tnamespaceName,\n\t\t\tcreatedAt\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch( deletedAnnouncement( index, namespaceName ) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const deleteAnnouncementInjector = dispatch => {\n\treturn async ( { namespaceName, createdAt, index } ) => {\n\t\tawait deleteAnnouncement( dispatch, { namespaceName, createdAt, index } );\n\t};\n};\n\nexport const editAnnouncement = async ( dispatch, { namespaceName, announcement }) => {\n\ttry {\n\t\tconst res = await namespaceAxios.post( server+'/edit_announcement', {\n\t\t\tnamespaceName,\n\t\t\tannouncement\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch( editedAnnouncement( announcement, namespaceName ) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const editAnnouncementInjector = dispatch => {\n\treturn async ( { namespaceName, announcement } ) => {\n\t\tawait editAnnouncement( dispatch, { namespaceName, announcement } );\n\t};\n};\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport NamespaceData from 'components/namespace-data';\nimport { addAnnouncementInjector, deleteAnnouncementInjector, editAnnouncementInjector } from 'actions/announcement';\nimport { getAvailableBadgesInjector } from 'actions/badge';\nimport { deleteFileInjector, getFilesInjector, getOwnerFilesInjector, uploadFileInjector } from 'actions/file';\nimport { addNotificationInjector } from 'actions/notification';\nimport { getNamespaceActionsInjector, adjustProgressInjector } from 'actions/namespace';\nimport { getCourseTicketsInjector, sendTicketMessageInjector,\n\tcloseTicketInjector, openTicketInjector, updatePriorityInjector } from 'actions/ticket';\n\n\n// FUNCTIONS //\n\nfunction mapStateToProps( state ) {\n\treturn {\n\t\tbadges: state.badges,\n\t\tuser: state.user,\n\t\tnamespace: state.namespace\n\t};\n}\n\nfunction mapDispatchToProps( dispatch ) {\n\treturn {\n\t\tadjustProgress: adjustProgressInjector( dispatch ),\n\t\tgetBadges: getAvailableBadgesInjector( dispatch ),\n\t\tgetCourseTickets: getCourseTicketsInjector( dispatch ),\n\t\tgetFiles: getFilesInjector( dispatch ),\n\t\tgetOwnerFiles: getOwnerFilesInjector( dispatch ),\n\t\tgetNamespaceActions: getNamespaceActionsInjector( dispatch ),\n\t\taddNotification: addNotificationInjector( dispatch ),\n\t\tdeleteFile: deleteFileInjector( dispatch ),\n\t\tdeleteAnnouncement: deleteAnnouncementInjector( dispatch ),\n\t\teditAnnouncement: editAnnouncementInjector( dispatch ),\n\t\taddAnnouncement: addAnnouncementInjector( dispatch ),\n\t\tsendTicketMessage: sendTicketMessageInjector( dispatch ),\n\t\tcloseTicket: closeTicketInjector( dispatch ),\n\t\topenTicket: openTicketInjector( dispatch ),\n\t\tuploadFile: uploadFileInjector( dispatch ),\n\t\tupdatePriority: updatePriorityInjector( dispatch )\n\t};\n}\n\n\n// MAIN //\n\nconst VisibleNamespaceData = connect( mapStateToProps, mapDispatchToProps )( NamespaceData );\n\n\n// EXPORTS //\n\nexport default withRouter( VisibleNamespaceData );\n","// MODULES //\n\nimport asyncComponent from 'components/async';\n\n\n// MAIN //\n\nconst DashboardDataExplorer = asyncComponent( () => import( './main.js' ) );\n\n\n// EXPORTS //\n\nexport default DashboardDataExplorer;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\n\n\n// MAIN //\n\nfunction createBooleanColumn({ Header, accessor, trueLabel, falseLabel, printLabels = false, maxWidth = 150 }) {\n\tlet Cell;\n\tlet style;\n\tif ( printLabels ) {\n\t\tCell = ( row ) => {\n\t\t\tif ( row.value === true ) {\n\t\t\t\treturn trueLabel;\n\t\t\t} else if ( row.value === false ) {\n\t\t\t\treturn falseLabel;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\tstyle = { marginTop: '8px', color: 'darkslategrey' };\n\t} else {\n\t\tCell = ( row ) => {\n\t\t\tif ( row.value ) {\n\t\t\t\treturn <i className=\"far fa-check-square\"></i>;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\tstyle = { marginTop: '2px', color: 'darkslategrey', fontSize: 24, textAlign: 'center' };\n\t}\n\treturn {\n\t\tHeader,\n\t\taccessor,\n\t\tstyle,\n\t\tCell: Cell,\n\t\tfilterMethod: ( filter, row ) => {\n\t\t\tif ( filter.value === 'all' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst id = filter.pivotId || filter.id;\n\t\t\tif ( row[ id ] === void 0 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn String( row[ id ] ) === filter.value;\n\t\t},\n\t\tFilter: ({ filter, onChange }) => {\n\t\t\tconst handleChange = ( event ) => {\n\t\t\t\tconst newValue = event.target.value;\n\t\t\t\tonChange( newValue );\n\t\t\t};\n\t\t\tlet value;\n\t\t\tif ( !filter ) {\n\t\t\t\tvalue = 'all';\n\t\t\t} else {\n\t\t\t\tvalue = filter.value;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<select\n\t\t\t\t\tonBlur={handleChange} onChange={handleChange}\n\t\t\t\t\tstyle={{ width: '100%', backgroundColor: 'ghostwhite' }}\n\t\t\t\t\tvalue={value}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"all\">Show All</option>\n\t\t\t\t\t<option value={true} >{trueLabel}</option>\n\t\t\t\t\t<option value={false} >{falseLabel}</option>\n\t\t\t\t</select>\n\t\t\t);\n\t\t},\n\t\tmaxWidth: maxWidth\n\t};\n}\n\n\n// EXPORTS //\n\nexport default createBooleanColumn;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\n\n\n// MAIN //\n\nfunction createCategoricalColumn({ Header, Cell, accessor, labels, maxWidth = 150 }) {\n\tlet style;\n\treturn {\n\t\tHeader,\n\t\taccessor,\n\t\tstyle,\n\t\tCell,\n\t\tfilterMethod: ( filter, row ) => {\n\t\t\tif ( filter.value === 'all' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst id = filter.pivotId || filter.id;\n\t\t\tif ( row[ id ] === void 0 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn String( row[ id ] ) === filter.value;\n\t\t},\n\t\tFilter: ({ filter, onChange }) => {\n\t\t\tconst handleChange = ( event ) => {\n\t\t\t\tconst newValue = event.target.value;\n\t\t\t\tonChange( newValue );\n\t\t\t};\n\t\t\tlet value;\n\t\t\tif ( !filter ) {\n\t\t\t\tvalue = 'all';\n\t\t\t} else {\n\t\t\t\tvalue = filter.value;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<select\n\t\t\t\t\tonBlur={handleChange} onChange={handleChange}\n\t\t\t\t\tstyle={{ width: '100%', backgroundColor: 'ghostwhite' }}\n\t\t\t\t\tvalue={value}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"all\">Show All</option>\n\t\t\t\t\t{labels.map( ( x, idx ) => <option value={x} key={idx} >{x}</option> )}\n\t\t\t\t</select>\n\t\t\t);\n\t\t},\n\t\tmaxWidth: maxWidth\n\t};\n}\n\n\n// EXPORTS //\n\nexport default createCategoricalColumn;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport { DateRangePicker } from 'react-dates';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport Button from 'react-bootstrap/Button';\nimport 'react-dates/lib/css/_datepicker.css';\n\n\n// FUNCTIONS //\n\nclass CustomDatePicker extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tstartDate: props.startDate,\n\t\t\tendDate: props.endDate\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tthis.props.startDate !== prevProps.startDate ||\n\t\t\tthis.props.endDate !== prevProps.endDate\n\t\t) {\n\t\t\tthis.setState({\n\t\t\t\tstartDate: this.props.startDate,\n\t\t\t\tendDate: this.props.endDate\n\t\t\t});\n\t\t}\n\t}\n\n\thandleDatesChange = ({ startDate, endDate }) => {\n\t\tthis.setState({\n\t\t\tstartDate,\n\t\t\tendDate\n\t\t}, () => {\n\t\t\tthis.props.onDatesChange( this.state );\n\t\t});\n\t}\n\n\thandleReset = () => {\n\t\tthis.setState({\n\t\t\tstartDate: this.props.minDate,\n\t\t\tendDate: this.props.maxDate\n\t\t}, () => {\n\t\t\tthis.props.onDatesChange( this.state );\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<DateRangePicker\n\t\t\t\t\tstartDate={this.state.startDate}\n\t\t\t\t\tendDate={this.state.endDate}\n\t\t\t\t\tstartDateId=\"start_date_input\"\n\t\t\t\t\tendDateId=\"end_date_input\"\n\t\t\t\t\tonDatesChange={this.handleDatesChange}\n\t\t\t\t\tfocusedInput={this.state.focusedInput}\n\t\t\t\t\tonFocusChange={focusedInput => this.setState({ focusedInput })}\n\t\t\t\t\tisOutsideRange={() => false}\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\taria-label={this.props.t('common:close')}\n\t\t\t\t\tvariant=\"warning\"\n\t\t\t\t\tonClick={this.handleReset}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpaddingTop: 8,\n\t\t\t\t\t\tpaddingLeft: 16,\n\t\t\t\t\t\tpaddingRight: 16,\n\t\t\t\t\t\tpaddingBottom: 8,\n\t\t\t\t\t\tfontSize: 20\n\t\t\t\t\t}}\n\t\t\t\t>x</Button>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nconst DefaultCell = ( row ) => {\n\treturn new Date( row.value ).toLocaleString();\n};\n\n\n// MAIN //\n\nfunction createBooleanColumn({ Header, accessor, Cell, style, startDate, endDate, t, maxWidth = 150 }) {\n\treturn {\n\t\tHeader,\n\t\taccessor,\n\t\tstyle,\n\t\tCell: Cell || DefaultCell,\n\t\tfilterMethod: ( filter, row ) => {\n\t\t\tif ( !filter.value ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst { startDate, endDate } = filter.value;\n\t\t\tconst id = filter.pivotId || filter.id;\n\t\t\tconst value = row[ id ].getTime();\n\t\t\tif ( startDate && endDate ) {\n\t\t\t\treturn value >= startDate.valueOf() && value <= endDate.valueOf();\n\t\t\t}\n\t\t\tif ( startDate ) {\n\t\t\t\treturn value >= startDate.valueOf();\n\t\t\t}\n\t\t\tif ( endDate ) {\n\t\t\t\treturn value <= endDate.valueOf();\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tFilter: ({ filter, onChange }) => {\n\t\t\tconst filterValue = filter ? ( filter.value || {} ) : {};\n\t\t\tconst popover = <Popover id=\"popover-data\" style={{ maxWidth: 400 }}>\n\t\t\t\t<Popover.Title as=\"h3\">{t('common:dates')}</Popover.Title>\n\t\t\t\t<Popover.Content style={{ backgroundColor: 'grey' }} >\n\t\t\t\t\t<CustomDatePicker\n\t\t\t\t\t\tstartDate={filterValue.startDate || startDate}\n\t\t\t\t\t\tminDate={startDate}\n\t\t\t\t\t\tmaxDate={endDate}\n\t\t\t\t\t\tendDate={filterValue.endDate || endDate}\n\t\t\t\t\t\tonDatesChange={({ startDate, endDate }) => {\n\t\t\t\t\t\t\tonChange({ startDate, endDate });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tt={t}\n\t\t\t\t\t/>\n\t\t\t\t</Popover.Content>\n\t\t\t</Popover>;\n\t\t\treturn (\n\t\t\t\t<OverlayTrigger trigger=\"click\" placement=\"right\" overlay={popover}>\n\t\t\t\t\t<Button aria-label={t('common:toggle-calendar')} size=\"sm\" style={{ float: 'left', marginLeft: 6 }} variant=\"secondary\" >\n\t\t\t\t\t\t<i className=\"far fa-calendar-alt\"></i>\n\t\t\t\t\t</Button>\n\t\t\t\t</OverlayTrigger>\n\t\t\t);\n\t\t},\n\t\tmaxWidth: maxWidth\n\t};\n}\n\n\n// EXPORTS //\n\nexport default createBooleanColumn;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport InputRange from 'react-input-range';\nimport replace from '@stdlib/string/replace';\nimport lowercase from '@stdlib/string/lowercase';\nimport roundn from '@stdlib/math/base/special/roundn';\nimport 'css/input_range.css';\n\n\n// FUNCTIONS //\n\nconst defaultFilterMethod = ( filter, row ) => {\n\tconst id = filter.pivotId || filter.id;\n\tconst val = row[ id ];\n\treturn val >= filter.value.min && val <= filter.value.max;\n};\n\nconst defaultFormatLabel = ( value ) => roundn( value, -2 );\n\n\n// MAIN //\n\nfunction createNumericColumn({ Header, accessor, Cell, minValue = 0, maxValue = 1, maxWidth = 150, filterMethod, formatLabel }) {\n\tconst id = `header-${lowercase( replace( Header, ' ', '-' ) )}`;\n\treturn {\n\t\tHeader: <span id={id} >{Header}</span>,\n\t\taccessor,\n\t\tCell: Cell ? Cell : ( row ) => row.value ? `${roundn( row.value, -3 )}` : 'NA',\n\t\tfilterMethod: filterMethod || defaultFilterMethod,\n\t\tFilter: ({ filter, onChange }) => {\n\t\t\tif ( minValue === maxValue ) {\n\t\t\t\tmaxValue = minValue += 1;\n\t\t\t}\n\t\t\tconst defaultVal = {\n\t\t\t\tmax: maxValue,\n\t\t\t\tmin: minValue\n\t\t\t};\n\t\t\treturn (\n\t\t\t\t<div style={{\n\t\t\t\t\tpaddingLeft: '4px',\n\t\t\t\t\tpaddingRight: '4px',\n\t\t\t\t\tpaddingTop: '8px'\n\t\t\t\t}}>\n\t\t\t\t\t<InputRange\n\t\t\t\t\t\tariaLabelledby={id}\n\t\t\t\t\t\tariaControls=\"dashboard-table\"\n\t\t\t\t\t\tallowSameValues\n\t\t\t\t\t\tmaxValue={maxValue}\n\t\t\t\t\t\tminValue={minValue}\n\t\t\t\t\t\tstep={0.1}\n\t\t\t\t\t\tvalue={filter ? filter.value : defaultVal}\n\t\t\t\t\t\tonChange={( newValue ) => {\n\t\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tformatLabel={formatLabel || defaultFormatLabel}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t},\n\t\tmaxWidth: maxWidth\n\t};\n}\n\n\n// EXPORTS //\n\nexport default createNumericColumn;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport FormControl from 'react-bootstrap/FormControl';\nimport textFilter from './text_filter.js';\n\n\n// MAIN //\n\nfunction createTextColumn({ id, Header, Cell, accessor, maxWidth = 150, minWidth, filterMethod }) {\n\tif ( minWidth > maxWidth ) {\n\t\tmaxWidth = minWidth;\n\t}\n\tconst spec = {\n\t\tid,\n\t\tHeader,\n\t\taccessor,\n\t\tCell,\n\t\tfilterMethod: filterMethod ? filterMethod : textFilter,\n\t\tFilter: ({ filter, onChange }) => {\n\t\t\treturn (\n\t\t\t\t<FormControl\n\t\t\t\t\taria-label={Header}\n\t\t\t\t\tautoComplete=\"none\"\n\t\t\t\t\tonChange={( event ) => {\n\t\t\t\t\t\tonChange( event.target.value );\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t};\n\tif ( maxWidth ) {\n\t\tspec.maxWidth = maxWidth;\n\t}\n\tif ( minWidth ) {\n\t\tspec.minWidth = minWidth;\n\t}\n\treturn spec;\n}\n\n\n// EXPORTS //\n\nexport default createTextColumn;\n","/*\n* Adapted from:\n*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n* 1.3.8\n* 2018-03-22 14:03:47\n*\n* By Eli Grey, https://eligrey.com\n* License: MIT\n*   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n*\n* @source http://purl.eligrey.com/github/FileSaver.js/blob/master/src/FileSaver.js\n*/\n\n// VARIABLES //\n\nconst RE_AUTO_BOM = /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i;\nconst ARBITRARY_REVOKE_TIMEOUT = 1000 * 40; // Time in ms\n\n\n// FUNCTIONS //\n\nfunction click(node) {\n\tconst event = new MouseEvent( 'click' );\n\tnode.dispatchEvent( event );\n}\n\nfunction throwOutside( ex ) {\n\tsetImmediate(function throwEx() {\n\t\tthrow ex;\n\t}, 0 );\n}\n\nfunction autoBOM( blob ) {\n\t// Prepend BOM for UTF-8 XML and text/* types (including HTML). Note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\tif ( RE_AUTO_BOM.test( blob.type ) ) {\n\t\treturn new Blob([ String.fromCharCode( 0xFEFF ), blob ], {\n\t\t\ttype: blob.type\n\t\t});\n\t}\n\treturn blob;\n}\n\nfunction dispatch( filesaver, eventTypes, event ) {\n\teventTypes = [].concat( eventTypes );\n\tlet i = eventTypes.length;\n\twhile ( i-- ) {\n\t\tlet listener = filesaver[ 'on' + eventTypes[i] ];\n\t\tif ( typeof listener === 'function' ) {\n\t\t\ttry {\n\t\t\t\tlistener.call( filesaver, event || filesaver );\n\t\t\t} catch ( ex ) {\n\t\t\t\tthrowOutside( ex );\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n// MAIN //\n\nfunction saveFactory( view ) {\n\tif (\n\t\ttypeof view === 'undefined' ||\n\t\ttypeof navigator !== 'undefined' &&\n\t\t/MSIE [1-9]\\./.test( navigator.userAgent )\n\t) {\n\t\treturn;\n\t}\n\tconst doc = view.document;\n\n\t// Only get URL when necessary in case Blob.js hasn't overridden it yet:\n\tfunction getURL() {\n\t\treturn view.URL || view.webkitURL || view;\n\t}\n\tfunction revoke( file ) {\n\t\tfunction revoker() {\n\t\t\tif ( typeof file === 'string' ) { // File is an object URL...\n\t\t\t\tgetURL().revokeObjectURL(file);\n\t\t\t} else { // File is a File...\n\t\t\t\tfile.remove();\n\t\t\t}\n\t\t}\n\t\tsetTimeout( revoker, ARBITRARY_REVOKE_TIMEOUT );\n\t}\n\n\tconst saveLink = doc.createElementNS( 'http://www.w3.org/1999/xhtml', 'a' );\n\tconst canUseSaveLink = 'download' in saveLink;\n\tconst isSafari = /constructor/i.test( view.HTMLElement ) || view.safari;\n\tconst isChromeIOS =/CriOS\\/[\\d]+/.test( navigator.userAgent );\n\tconst setImmediate = view.setImmediate || view.setTimeout;\n\tconst forceSavableType = 'application/octet-stream';\n\n\tfunction FileSaver(blob, name, noAutoBOM ) {\n\t\tif ( !noAutoBOM ) {\n\t\t\tblob = autoBOM(blob);\n\t\t}\n\t\t// First try a.download, then web filesystem, then object URLs\n\t\tconst self = this;\n\t\tconst type = blob.type;\n\t\tconst force = type === forceSavableType;\n\t\tlet objectURL;\n\t\tfunction dispatchAll() {\n\t\t\tdispatch( self, 'writestart progress write writeend'.split(' ') );\n\t\t}\n\t\t// On any filesystem errors, revert to saving with object URLs:\n\t\tfunction fsError() {\n\t\t\tif ((isChromeIOS || (force && isSafari)) && view.FileReader) {\n\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\tconst reader = new FileReader();\n\t\t\t\treader.onloadend = function onLoadEnd() {\n\t\t\t\t\tlet url = isChromeIOS ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\tconst popup = view.open(url, '_blank');\n\t\t\t\t\tif ( !popup ) {\n\t\t\t\t\t\tview.location.href = url;\n\t\t\t\t\t}\n\t\t\t\t\turl = void 0; // Release reference before dispatching...\n\t\t\t\t\tself.readyState = self.DONE;\n\t\t\t\t\tdispatchAll();\n\t\t\t\t};\n\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\tself.readyState = self.INIT;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Don't create more object URLs than needed:\n\t\t\tif ( !objectURL ) {\n\t\t\t\tobjectURL = getURL().createObjectURL( blob );\n\t\t\t}\n\t\t\tif ( force ) {\n\t\t\t\tview.location.href = objectURL;\n\t\t\t} else {\n\t\t\t\tconst opened = view.open( objectURL, '_blank' );\n\t\t\t\tif ( !opened ) {\n\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\tview.location.href = objectURL;\n\t\t\t\t}\n\t\t\t}\n\t\t\tself.readyState = self.DONE;\n\t\t\tdispatchAll();\n\t\t\trevoke( objectURL );\n\t\t}\n\t\tself.readyState = self.INIT;\n\n\t\tif ( canUseSaveLink ) {\n\t\t\tobjectURL = getURL().createObjectURL(blob);\n\t\t\tsetImmediate(function save() {\n\t\t\t\tsaveLink.href = objectURL;\n\t\t\t\tsaveLink.download = name;\n\t\t\t\tclick( saveLink );\n\t\t\t\tdispatchAll();\n\t\t\t\trevoke( objectURL );\n\t\t\t\tself.readyState = self.DONE;\n\t\t\t}, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tfsError();\n\t}\n\tconst proto = FileSaver.prototype;\n\tfunction saveAs( blob, name, noAutoBOM ) {\n\t\treturn new FileSaver( blob, name || blob.name || 'download', noAutoBOM );\n\t}\n\n\t// IE 10+ (native saveAs)\n\tif ( typeof navigator !== 'undefined' && navigator.msSaveOrOpenBlob ) {\n\t\treturn function saveAs( blob, name, noAutoBOM ) {\n\t\t\tname = name || blob.name || 'download';\n\t\t\tif ( !noAutoBOM ) {\n\t\t\t\tblob = autoBOM( blob );\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tproto.abort = function abort() {};\n\tproto.readyState = proto.INIT = 0;\n\tproto.WRITING = 1;\n\tproto.DONE = 2;\n\n\tproto.error = null;\n\tproto.onwritestart = null;\n\tproto.onprogress = null;\n\tproto.onwrite = null;\n\tproto.onabort = null;\n\tproto.onerror = null;\n\tproto.onwriteend = null;\n\n\treturn saveAs;\n}\n\nconst saveAs = saveFactory(\n\ttypeof self !== 'undefined' && self ||\n\ttypeof window !== 'undefined' && window ||\n\tthis.content\n);\n\n\n// EXPORTS //\n\nexport default saveAs;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport floor from '@stdlib/math/base/special/floor';\n\n\n// MAIN //\n\nconst formatTime = ( time, opts = { hours: true, minutes: true, seconds: true }) => {\n\ttime = time / 1000;\n\tconst hours = floor( time / ( 60*60 ) );\n\ttime = time % ( 60*60 );\n\tlet minutes = floor( time / 60 );\n\tif ( minutes < 10 ) {\n\t\tminutes = '0'+minutes;\n\t}\n\ttime = time % 60;\n\tlet seconds = floor( time );\n\tif ( seconds < 10 ) {\n\t\tseconds = '0'+seconds;\n\t}\n\tlet out = '';\n\tif ( opts.hours ) {\n\t\tout += hours;\n\t}\n\tif ( opts.minutes ) {\n\t\tif ( out ) {\n\t\t\tout += ':';\n\t\t}\n\t\tout += minutes;\n\t}\n\tif ( opts.seconds ) {\n\t\tif ( out ) {\n\t\t\tout += ':';\n\t\t}\n\t\tout += seconds;\n\t}\n\treturn out;\n};\n\n\n// EXPORTS //\n\nexport default formatTime;\n","// MODULES //\n\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\n\n\n// MAIN //\n\nconst textFilter = ( filter, row ) => {\n\tconst str = row[ filter.id ] || '';\n\treturn contains( lowercase( str ), lowercase( filter.value ) );\n};\n\n\n// EXPORTS //\n\nexport default textFilter;\n","var map = {\n\t\"./af\": 77213,\n\t\"./af.js\": 77213,\n\t\"./ar\": 78421,\n\t\"./ar-dz\": 40604,\n\t\"./ar-dz.js\": 40604,\n\t\"./ar-kw\": 40145,\n\t\"./ar-kw.js\": 40145,\n\t\"./ar-ly\": 25984,\n\t\"./ar-ly.js\": 25984,\n\t\"./ar-ma\": 1789,\n\t\"./ar-ma.js\": 1789,\n\t\"./ar-sa\": 47317,\n\t\"./ar-sa.js\": 47317,\n\t\"./ar-tn\": 81841,\n\t\"./ar-tn.js\": 81841,\n\t\"./ar.js\": 78421,\n\t\"./az\": 18169,\n\t\"./az.js\": 18169,\n\t\"./be\": 56771,\n\t\"./be.js\": 56771,\n\t\"./bg\": 75581,\n\t\"./bg.js\": 75581,\n\t\"./bm\": 98145,\n\t\"./bm.js\": 98145,\n\t\"./bn\": 63297,\n\t\"./bn-bd\": 88255,\n\t\"./bn-bd.js\": 88255,\n\t\"./bn.js\": 63297,\n\t\"./bo\": 45899,\n\t\"./bo.js\": 45899,\n\t\"./br\": 86370,\n\t\"./br.js\": 86370,\n\t\"./bs\": 7001,\n\t\"./bs.js\": 7001,\n\t\"./ca\": 552,\n\t\"./ca.js\": 552,\n\t\"./cs\": 67170,\n\t\"./cs.js\": 67170,\n\t\"./cv\": 65046,\n\t\"./cv.js\": 65046,\n\t\"./cy\": 447,\n\t\"./cy.js\": 447,\n\t\"./da\": 55541,\n\t\"./da.js\": 55541,\n\t\"./de\": 55672,\n\t\"./de-at\": 86000,\n\t\"./de-at.js\": 86000,\n\t\"./de-ch\": 56806,\n\t\"./de-ch.js\": 56806,\n\t\"./de.js\": 55672,\n\t\"./dv\": 47454,\n\t\"./dv.js\": 47454,\n\t\"./el\": 51671,\n\t\"./el.js\": 51671,\n\t\"./en-au\": 84748,\n\t\"./en-au.js\": 84748,\n\t\"./en-ca\": 19229,\n\t\"./en-ca.js\": 19229,\n\t\"./en-gb\": 27334,\n\t\"./en-gb.js\": 27334,\n\t\"./en-ie\": 79218,\n\t\"./en-ie.js\": 79218,\n\t\"./en-il\": 63581,\n\t\"./en-il.js\": 63581,\n\t\"./en-in\": 42704,\n\t\"./en-in.js\": 42704,\n\t\"./en-nz\": 34390,\n\t\"./en-nz.js\": 34390,\n\t\"./en-sg\": 31591,\n\t\"./en-sg.js\": 31591,\n\t\"./eo\": 36284,\n\t\"./eo.js\": 36284,\n\t\"./es\": 99028,\n\t\"./es-do\": 59761,\n\t\"./es-do.js\": 59761,\n\t\"./es-mx\": 77837,\n\t\"./es-mx.js\": 77837,\n\t\"./es-us\": 86976,\n\t\"./es-us.js\": 86976,\n\t\"./es.js\": 99028,\n\t\"./et\": 64785,\n\t\"./et.js\": 64785,\n\t\"./eu\": 53578,\n\t\"./eu.js\": 53578,\n\t\"./fa\": 71574,\n\t\"./fa.js\": 71574,\n\t\"./fi\": 26755,\n\t\"./fi.js\": 26755,\n\t\"./fil\": 84772,\n\t\"./fil.js\": 84772,\n\t\"./fo\": 50289,\n\t\"./fo.js\": 50289,\n\t\"./fr\": 93273,\n\t\"./fr-ca\": 74123,\n\t\"./fr-ca.js\": 74123,\n\t\"./fr-ch\": 97543,\n\t\"./fr-ch.js\": 97543,\n\t\"./fr.js\": 93273,\n\t\"./fy\": 5257,\n\t\"./fy.js\": 5257,\n\t\"./ga\": 78336,\n\t\"./ga.js\": 78336,\n\t\"./gd\": 61427,\n\t\"./gd.js\": 61427,\n\t\"./gl\": 86017,\n\t\"./gl.js\": 86017,\n\t\"./gom-deva\": 67359,\n\t\"./gom-deva.js\": 67359,\n\t\"./gom-latn\": 74517,\n\t\"./gom-latn.js\": 74517,\n\t\"./gu\": 10542,\n\t\"./gu.js\": 10542,\n\t\"./he\": 17184,\n\t\"./he.js\": 17184,\n\t\"./hi\": 14955,\n\t\"./hi.js\": 14955,\n\t\"./hr\": 71621,\n\t\"./hr.js\": 71621,\n\t\"./hu\": 26007,\n\t\"./hu.js\": 26007,\n\t\"./hy-am\": 42692,\n\t\"./hy-am.js\": 42692,\n\t\"./id\": 22315,\n\t\"./id.js\": 22315,\n\t\"./is\": 81068,\n\t\"./is.js\": 81068,\n\t\"./it\": 98274,\n\t\"./it-ch\": 13247,\n\t\"./it-ch.js\": 13247,\n\t\"./it.js\": 98274,\n\t\"./ja\": 92828,\n\t\"./ja.js\": 92828,\n\t\"./jv\": 55580,\n\t\"./jv.js\": 55580,\n\t\"./ka\": 66736,\n\t\"./ka.js\": 66736,\n\t\"./kk\": 79055,\n\t\"./kk.js\": 79055,\n\t\"./km\": 24894,\n\t\"./km.js\": 24894,\n\t\"./kn\": 54934,\n\t\"./kn.js\": 54934,\n\t\"./ko\": 21502,\n\t\"./ko.js\": 21502,\n\t\"./ku\": 68828,\n\t\"./ku.js\": 68828,\n\t\"./ky\": 43038,\n\t\"./ky.js\": 43038,\n\t\"./lb\": 21360,\n\t\"./lb.js\": 21360,\n\t\"./lo\": 66079,\n\t\"./lo.js\": 66079,\n\t\"./lt\": 3569,\n\t\"./lt.js\": 3569,\n\t\"./lv\": 54810,\n\t\"./lv.js\": 54810,\n\t\"./me\": 18414,\n\t\"./me.js\": 18414,\n\t\"./mi\": 78352,\n\t\"./mi.js\": 78352,\n\t\"./mk\": 82709,\n\t\"./mk.js\": 82709,\n\t\"./ml\": 18912,\n\t\"./ml.js\": 18912,\n\t\"./mn\": 49885,\n\t\"./mn.js\": 49885,\n\t\"./mr\": 85065,\n\t\"./mr.js\": 85065,\n\t\"./ms\": 61465,\n\t\"./ms-my\": 14014,\n\t\"./ms-my.js\": 14014,\n\t\"./ms.js\": 61465,\n\t\"./mt\": 23103,\n\t\"./mt.js\": 23103,\n\t\"./my\": 76378,\n\t\"./my.js\": 76378,\n\t\"./nb\": 20408,\n\t\"./nb.js\": 20408,\n\t\"./ne\": 62121,\n\t\"./ne.js\": 62121,\n\t\"./nl\": 89580,\n\t\"./nl-be\": 31613,\n\t\"./nl-be.js\": 31613,\n\t\"./nl.js\": 89580,\n\t\"./nn\": 14035,\n\t\"./nn.js\": 14035,\n\t\"./oc-lnc\": 44823,\n\t\"./oc-lnc.js\": 44823,\n\t\"./pa-in\": 53718,\n\t\"./pa-in.js\": 53718,\n\t\"./pl\": 1688,\n\t\"./pl.js\": 1688,\n\t\"./pt\": 56663,\n\t\"./pt-br\": 19980,\n\t\"./pt-br.js\": 19980,\n\t\"./pt.js\": 56663,\n\t\"./ro\": 47164,\n\t\"./ro.js\": 47164,\n\t\"./ru\": 96670,\n\t\"./ru.js\": 96670,\n\t\"./sd\": 58708,\n\t\"./sd.js\": 58708,\n\t\"./se\": 81353,\n\t\"./se.js\": 81353,\n\t\"./si\": 16389,\n\t\"./si.js\": 16389,\n\t\"./sk\": 5756,\n\t\"./sk.js\": 5756,\n\t\"./sl\": 7072,\n\t\"./sl.js\": 7072,\n\t\"./sq\": 80637,\n\t\"./sq.js\": 80637,\n\t\"./sr\": 67668,\n\t\"./sr-cyrl\": 29580,\n\t\"./sr-cyrl.js\": 29580,\n\t\"./sr.js\": 67668,\n\t\"./ss\": 95120,\n\t\"./ss.js\": 95120,\n\t\"./sv\": 97082,\n\t\"./sv.js\": 97082,\n\t\"./sw\": 92711,\n\t\"./sw.js\": 92711,\n\t\"./ta\": 89974,\n\t\"./ta.js\": 89974,\n\t\"./te\": 78671,\n\t\"./te.js\": 78671,\n\t\"./tet\": 58856,\n\t\"./tet.js\": 58856,\n\t\"./tg\": 45576,\n\t\"./tg.js\": 45576,\n\t\"./th\": 28073,\n\t\"./th.js\": 28073,\n\t\"./tk\": 75971,\n\t\"./tk.js\": 75971,\n\t\"./tl-ph\": 17856,\n\t\"./tl-ph.js\": 17856,\n\t\"./tlh\": 43642,\n\t\"./tlh.js\": 43642,\n\t\"./tr\": 76838,\n\t\"./tr.js\": 76838,\n\t\"./tzl\": 28936,\n\t\"./tzl.js\": 28936,\n\t\"./tzm\": 77621,\n\t\"./tzm-latn\": 58368,\n\t\"./tzm-latn.js\": 58368,\n\t\"./tzm.js\": 77621,\n\t\"./ug-cn\": 24613,\n\t\"./ug-cn.js\": 24613,\n\t\"./uk\": 19279,\n\t\"./uk.js\": 19279,\n\t\"./ur\": 89859,\n\t\"./ur.js\": 89859,\n\t\"./uz\": 79081,\n\t\"./uz-latn\": 56127,\n\t\"./uz-latn.js\": 56127,\n\t\"./uz.js\": 79081,\n\t\"./vi\": 23163,\n\t\"./vi.js\": 23163,\n\t\"./x-pseudo\": 35330,\n\t\"./x-pseudo.js\": 35330,\n\t\"./yo\": 43246,\n\t\"./yo.js\": 43246,\n\t\"./zh-cn\": 17918,\n\t\"./zh-cn.js\": 17918,\n\t\"./zh-hk\": 64377,\n\t\"./zh-hk.js\": 64377,\n\t\"./zh-mo\": 28322,\n\t\"./zh-mo.js\": 28322,\n\t\"./zh-tw\": 1308,\n\t\"./zh-tw.js\": 1308\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;"],"sourceRoot":""}