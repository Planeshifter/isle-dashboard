(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[4331],{48630:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var o=n(28991),r=n(96156),l=n(34699),a=n(41488),c=n(10077),i=n.n(c),s=n(26180),u=n(47701),d=n(49659),m=n(87651),h=n(45906),p=n(6610),f=n(5991),g=n(10379),v=n(60446),w=n(5434),k=n.n(w),y=function(e){(0,g.Z)(n,e);var t=(0,v.Z)(n);function n(){return(0,p.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){return a.createElement("button",{onClick:this.props.onClick})}}]),n}(a.Component);y.defaultProps={onClick:function(){}};var b=k()||y,E=i()("isle:voice-input");var C=function(e){var t=e.autorecord,c=e.bind,i=e.defaultValue,p=e.grammars,f=e.id,g=e.maxAlternatives,v=e.remote,w=e.startTooltip,k=e.stopTooltip,y=e.speechInterface,C=e.onChange,S=e.onClick,x=e.onFinalText,N=e.onRecordingStart,R=e.onRecordingStop,Z=e.onSegment,T=e.onSubmit,F=e.timeout,P=(0,a.useState)(t),A=(0,l.Z)(P,2),z=A[0],B=A[1],I=(0,a.useContext)(m.Z),V=(0,s.$)("input").t,Y=(0,a.useState)(c&&I.state?I.state[c]:i),_=(0,l.Z)(Y,2),D=_[0],G=_[1],H=(0,a.useRef)(),K=(0,a.useRef)(),L=(0,a.useCallback)((function(e){var t=e.target.value;G(t),C(t),c&&n.g.lesson.setState((0,r.Z)({},c,t))}),[c,C]),M=(0,a.useCallback)((function(e){switch(e.keyCode){case 13:T(D)}}),[D,T]),$=(0,a.useCallback)((function(){E("Set `isRecording` to false..."),B(!1),H.current&&H.current.stop(),R()}),[R]),j=(0,a.useCallback)((function(){H.current=null;var e=window.SpeechRecognition||window.webkitSpeechRecognition;if(e){var t=new e;t.lang=h.a.language,t.continuous=!0,t.interimResults=!0,t.maxAlternatives=g,t.grammars=function(e){for(var t=t||webkitSpeechGrammarList,n=new t,o=0;o<e.length;o++){var r=e[o],l=r.src,a=r.weight;n.addFromString(l,a)}return n}(p),t.onerror=function(e){if(E("Encountered an error..."),"not-allowed"===e.error||"service-not-allowed"===e.error)return B(!1),I.addNotification({title:"Not allowed",message:"No permission to use the speech recognition service",level:"error",position:"tr"});try{t.start()}catch(n){E(n)}},t.onend=function(){E("onend: %s",f),z&&t.start()},t.onstart=function(){E("onstart: %s",f),N()},t.onresult=function(e){if(E("Processing result..."),"undefined"!==typeof e.results)for(var t=e.resultIndex;t<e.results.length;++t){var n=e.results[t];if(e.results[t].isFinal){F&&(K.current=setTimeout($,F)),E("Received final text");var o=void 0;if(g>1){o=new Array(n.length);for(var r=0;r<n.length;r++)o[r]=n[r].transcript}else o=n[0].transcript;G(o),x(o),y&&y.check(o,{onStart:function(){$()},onEnd:function(){j()}})}else{K.current&&clearTimeout(K.current);var l=void 0;if(g>1){l=new Array(n.length);for(var a=0;a<n.length;a++)l[a]=n[a].transcript}else l=n[0].transcript;G(l),Z(l)}}else E("Something went wrong...")},t.start(),H.current=t}E("Set `isRecording` to true..."),B(!0)}),[p,f,z,g,N,I,y,$,F,x,Z]),q=(0,a.useCallback)((function(e){return e?!0===z?k||V("click-to-stop-recording"):w||V("click-to-start-recording"):"Your browser does not support voice recognition. You may use the Chrome Browser instead"}),[z,w,k,V]);(0,a.useEffect)((function(){v&&(window.onkeydown=function(e){switch(e.keyCode){case v.stop:$();break;case v.start:z||j();break;case v.toggle:z?$():j()}}),t&&(E("Should record voice..."),j())}),[t,v,z,j,$]);var J=(0,a.useCallback)((function(e){S(e),z?$():j()}),[z,j,$,S]),O="voice-microphone";!0===z&&(O="voice-microphone voice-recording");var Q=q(function(){try{var e=e||webkitSpeechRecognition;return!!e}catch(t){return!1}}()),U=a.createElement(u.Z,{id:"".concat(e.id,"-voice-input-tooltip")},Q);switch(e.mode){case"full":return a.createElement(a.Fragment,null,e.legend?a.createElement("label",null,e.legend):null,a.createElement("div",{className:"input voice-input ".concat(e.className),style:(0,o.Z)({height:e.height,width:e.width},e.style)},a.createElement("input",{className:"voice-input-text",type:"text",onKeyDown:M,onChange:L,placeholder:null!==e.placeholder?e.placeholder:V("enter-text"),value:D}),a.createElement(d.Z,{placement:e.tooltipPlacement,overlay:U},a.createElement(b,{onClick:J,className:O}))));case"status":return a.createElement(a.Fragment,null,e.legend?a.createElement("label",null,e.legend):null,a.createElement("div",{className:"voice-input-status-text ".concat(e.className),style:(0,o.Z)({height:e.height,width:e.width},e.style)},a.createElement("div",{className:"voice-input-status"},D),a.createElement(d.Z,{placement:"bottom",overlay:U},a.createElement(b,{onClick:J,className:O}))));case"microphone":return a.createElement(a.Fragment,null,e.legend?a.createElement("label",null,e.legend):null,a.createElement("div",{className:"voice-solo-microphone ".concat(e.className),style:(0,o.Z)({height:e.height,width:e.width},e.style)},a.createElement(d.Z,{placement:"bottom",overlay:U},a.createElement(b,{onClick:J,className:O}))));case"none":return null}};C.defaultProps={autorecord:!1,defaultValue:"",grammars:[],legend:"",mode:"full",maxAlternatives:1,onChange:function(){},onClick:function(){},onFinalText:function(){},onSegment:function(){},onRecordingStart:function(){},onRecordingStop:function(){},onSubmit:function(){},placeholder:null,remote:null,className:"",style:{},timeout:null,stopTooltip:null,startTooltip:null,tooltipPlacement:"left",width:500,height:36};var S=C},5434:function(e,t,n){var o=n(41488);function r(e){return o.createElement("svg",e,[o.createElement("defs",{id:"defs3723",key:0}),o.createElement("path",{d:"m 75.897176,155.35465 h -20.741 c -4.834,0 -4.84,15.963 0,15.963 h 53.854004 c 4.839,0 4.833,-15.963 0,-15.963 H 88.718176 l -0.602,-10.14 c 35.693004,-3.164 48.733004,-32.896 47.931004,-63.961003 -0.198,-7.666 -13.296,-6.779 -12.443,0.979 3.413,71.099003 -86.068004,69.681003 -83.271004,-1.358 0.251,-6.389 -11.982,-6.453 -12.232,0.46 -0.598,28.619003 13.64,60.803003 48.257,63.880003 z M 107.47818,48.083647 c -0.528,-14.312 -6.628,-23.486 -14.452004,-27.655 -6.579,-3.506 -14.45,-3.5 -21.076,-0.113 -8.071,4.127 -14.504,13.346 -15.273,27.676 l 0.005,20.069 h 50.800004 z m -9.674004,-36.613 c 10.769004,5.739 19.146004,17.829 19.826004,36.254 l 0.008,44.158 c 0,12.720003 -7.705,26.975003 -18.903004,33.302003 -9.819,5.547 -21.804,5.594 -31.748,0.326 -10.292,-5.451 -18.583,-16.519 -20.432,-33.071003 l -0.031,-44.705 c 0,-14.39 7.714,-29.763 20.808,-36.458 9.579,-4.8959999 20.965,-4.8729999 30.472,0.194 z",id:"path3713",style:{clipRule:"evenodd",fillRule:"evenodd"},key:1})])}r.defaultProps={x:"0px",y:"0px",viewBox:"0 0 164 180",xmlSpace:"preserve",id:"svg3719",width:"32",height:"35"},e.exports=r,r.default=r}}]);
//# sourceMappingURL=VoiceInput.76caecc4.chunk.js.map