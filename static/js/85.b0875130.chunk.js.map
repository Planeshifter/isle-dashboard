{"version":3,"sources":["../node_modules/@isle-project/components/node_modules/react-bootstrap/esm/ButtonToolbar.js","../node_modules/@isle-project/utils/factor-variable/index.js","../node_modules/@isle-project/components/collapse/index.js","../node_modules/@isle-project/components/input/text/index.js","../node_modules/@isle-project/components/input/text/main.js","../node_modules/@isle-project/components/node_modules/react-bootstrap/esm/Table.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/assert/is-digit-string/lib/index.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/assert/is-digit-string/lib/main.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/random/base/uniform/lib/factory.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/random/base/uniform/lib/index.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/random/base/uniform/lib/main.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/random/base/uniform/lib/validate.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/random/base/uniform/lib/uniform.js","../node_modules/@isle-project/components/panel/index.js","../node_modules/@isle-project/utils/stop-propagation/index.js","../node_modules/@isle-project/components/data-explorer/variable-transformer/bin_transformer.js","../node_modules/@isle-project/components/input/text-area/main.js","../node_modules/@isle-project/components/input/text-area/index.js","../node_modules/@isle-project/components/data-explorer/variable-transformer/formula_transformer.js","../node_modules/@isle-project/components/data-explorer/variable-transformer/categorical_transformer.js","../node_modules/@isle-project/components/data-explorer/variable-transformer/group_transformer.js","../node_modules/@isle-project/components/data-explorer/variable-transformer/index.js","../node_modules/@isle-project/components/input/number/create_tooltip.js","../node_modules/@isle-project/components/input/checkbox/index.js","../node_modules/@isle-project/components/input/checkbox/main.js","../node_modules/@isle-project/components/input/number/index.js","../node_modules/@isle-project/components/input/number/main.js"],"names":["ButtonToolbar","React","forwardRef","_ref","ref","bsPrefix","className","props","_objectWithoutPropertiesLoose","prefix","useBootstrapPrefix","createElement","_extends","classNames","displayName","defaultProps","role","factorVariable","name","categories","out","String","Collapse","Loadable","TextInput","uid","generateUID","context","event","value","target","onChange","setState","bind","global","lesson","textInput","focus","session","state","defaultValue","prevProps","id","this","globalVal","inline","style","legend","htmlFor","type","placeholder","input","width","handleChange","onKeyPress","onKeyDown","onKeyUp","description","onBlur","nextProps","prevState","newState","isEmptyObject","Input","propTypes","PropTypes","string","oneOfType","node","bool","func","number","object","contextType","SessionContext","Table","striped","bordered","borderless","hover","size","variant","responsive","decoratedBsPrefix","classes","table","responsiveClass","isDigitString","module","exports","isString","isPrimitive","x","len","ch","i","length","charCodeAt","setReadOnly","setReadOnlyAccessor","setReadWriteAccessor","isObject","isFunction","hasOwnProp","constantFunction","noop","randu","factory","isnan","typedarray2json","validate","uniform0","opts","rand","prng","err","a","b","arguments","TypeError","uniform2","uniform1","getSeed","getSeedLength","getState","getStateLength","getStateSize","toJSON","normalized","seed","seedLength","stateLength","byteLength","s","NAME","params","NaN","uniform","isNumber","RangeError","r","addResources","Panel","stopPropagation","debug","logger","RE_SHAPE","HISTOGRAM_SETTINGS","group","displayDensity","densityType","chooseBins","nBins","ascending","makeShapes","breakpoints","breakShapes","push","x0","y0","x1","y1","line","color","createCategoryNames","customNames","Array","last","BinningTransformer","configHist","select","useState","setName","snapDigits","setSnapDigits","variable","invalidName","makeNewVar","rawData","data","values","retrieveBinnedValues","logAction","DATA_EXPLORER_BIN_TRANSFORMER","breaks","newName","factor","onGenerate","onHide","handleKeyPress","charCode","handleNameChange","changeFactory","ind","newBreakpoints","slice","roundn","sort","copy","layout","shapes","categoryChangeFactory","newCategories","newCustomNames","deleteBreakpoint","splice","onChangeHistLine","keyUpdate","keys","matches","exec","handleVariableChange","histConfigSettings","generateHistogramConfig","yaxis","range","min","y","max","fixedrange","xaxis","filter","mean","addBreakpoint","avg","runif","cancel","onDragStart","zIndex","show","header","t","footer","Button","onClick","disabled","bodyStyle","maxHeight","overflowY","position","tabIndex","options","quantitative","maxWidth","height","editable","fit","removeButtons","legendButtons","onRelayout","Card","Header","Body","inputs","disableButton","Row","key","Col","md","raw","step","changeFn","marginTop","tooltipPlacement","makeTextInputs","FormGroup","FormLabel","FormControl","FormText","Alert","TextArea","renderLegend","as","div","textarea","resize","resizable","rows","Component","DIGITS","incrspace","RE_LAST_EXPRESSION","RE_DIGITS_START","CustomMenu","children","labeledBy","setValue","aria-labelledby","e","Children","toArray","child","toLowerCase","startsWith","FormulaTransformer","code","contains","replace","valuesFromFormula","DATA_EXPLORER_VARIABLE_TRANSFORMER","addNotification","title","message","level","handleGenerate","newCode","substring","selection","replacement","test","operator","funcName","defaultCode","showGuide","continuousItems","map","v","Dropdown","Item","insertVarFactory","eventKey","headerClassName","visible","condensed","Trans","i18nKey","ns","first","second","marginBottom","Toggle","Menu","categorical","ButtonGroup","insertLiteralFactory","placement","tooltip","FUNCTION_KEYS","insertFuncFactory","d","handleCodeChange","selectionStart","margin","escapeDots","str","checkNumericLabels","nameMappings","objectKeys","allNumeric","CategoricalTransformer","firstFreqs","secondVar","firstVar","firstValues","countBy","identity","firstKeys","extractUsedCategories","secondKeys","secondFreqs","j","label","onlyNumbers","secondValues","generatedName","oldLabel","rowLabel","colLabel","castNumeric","newVar","recodeCategorical","DATA_EXPLORER_CAT_TRANSFORMER","varFreqs","val","idx","changeFreqFactory","borderTop","freq","rowVar","colVar","rowValues","colValues","rowFreqs","colFreqs","rowKeys","colKeys","col","row","changeContigencyFactory","renderContingencyTable","renderFrequencyTable","handleFirstVariableChange","clearable","handleSecondVariableChange","overflowX","renderTable","handleGeneratedNameChange","GroupTransformer","nGroups","groupProbs","fill","labels","sum","absdiff","nobs","sample","probs","DATA_EXPLORER_GROUP_TRANSFORMER","elems","numbersOnly","hasValidValues","handleGroupNumberChange","Transformer","modal","active","setActive","toggleFormulaModal","newActive","onActive","toggleBinModal","toggleCategoricalModal","toggleGroupModal","padding","block","fontSize","createTooltip","PINF","NINF","CheckboxInput","newValue","checked","updateValue","aria-label","marginLeft","handleSpanChange","onSpanChange","oneOf","CreateTooltip","NumberInput","valid","validity","parseFloat","vals","split","paddingLeft","inputStyle","finishChange","autoComplete"],"mappings":"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","file":"static/js/85.b0875130.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  role: 'toolbar'\n};\nvar ButtonToolbar = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'btn-toolbar');\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, props, {\n    ref: ref,\n    className: classNames(className, prefix)\n  }));\n});\nButtonToolbar.displayName = 'ButtonToolbar';\nButtonToolbar.defaultProps = defaultProps;\nexport default ButtonToolbar;","// MAIN //\n\n/**\n* A wrapper around String objects for specifying ordered categories.\n*\n* @param {string} name - variable name\n* @param {Array} categories - ordered categories\n* @returns {String} factor variable string object\n*/\nfunction factorVariable( name, categories ) {\n\tconst out = new String( name ); // eslint-disable-line no-new-wrappers\n\tout.categories = categories;\n\treturn out;\n}\n\n\n// EXPORTS //\n\nexport default factorVariable;\n","// MODULES //\n\nimport Loadable from '@isle-project/components/internal/loadable';\n\n\n// MAIN //\n\nconst Collapse = Loadable( () => import( /* webpackChunkName: \"Collapse\" */ './main.js' ) );\n\n\n// EXPORTS //\n\nexport default Collapse;\n","// MODULES //\n\nimport TextInput from './main.js';\n\n\n// EXPORTS //\n\nexport default TextInput;\n","// MODULES //\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport isEmptyObject from '@stdlib/assert/is-empty-object';\nimport Input from '@isle-project/components/input/base';\nimport generateUID from '@isle-project/utils/uid';\nimport SessionContext from '@isle-project/session/context.js';\nimport './text.css';\n\n\n// VARIABLES //\n\nconst uid = generateUID( 'text-input' );\n\n\n// MAIN //\n\n/**\n* A text input component. Can be used as part of an ISLE dashboard or standalone. In the latter case, you want to handle changes via the `onChange` attribute or bind the value to a global variable via the `bind` attribute.\n*\n* @property {Function} onChange - A function to be called when a text value is changed\n* @property {string} defaultValue - A value indicating the default value of the input at start\n* @property {string} value - text value (for controlled component)\n* @property {boolean} disabled - A boolean indicating whether the input is active or not\n* @property {number} width - A number indicating the width of the input in pixels\n* @property {boolean} inline - Indicates whether the input is displayed inline\n* @property {string} legend - A string indicating the text displayed next to the number input\n* @property {string} bind - name of global variable for the number to be assigned to\n* @property {string} placeholder - A string indicating the value to be displayed before an initial choice is made\n* @property {Object} style - CSS inline styles\n* @property {Function} onBlur - callback function invoked when the text area loses focus\n* @property {Function} onKeyPress - callback function to be invoked when any key is entered\n* @property {Function} onKeyDown - callback function to be invoked when any key is pressed down\n* @property {Function} onKeyUp - callback function to be invoked when key is released\n*/\nclass TextInput extends Input {\n\tconstructor( props, context ) {\n\t\tsuper( props );\n\n\t\tconst session = context;\n\t\tthis.state = {\n\t\t\tvalue: props.bind && session.state ?\n\t\t\t\tsession.state[ props.bind ]:\n\t\t\t\tprops.defaultValue,\n\t\t\tprevProps: props\n\t\t};\n\n\t\tthis.id = props.id || uid( props );\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tconst newState = {};\n\t\tconst { prevProps } = prevState;\n\t\tif ( nextProps.defaultValue !== prevProps.defaultValue ) {\n\t\t\tnewState.value = nextProps.defaultValue;\n\t\t} else if ( nextProps.bind !== prevProps.bind ) {\n\t\t\tnewState.value = global.lesson.state[ nextProps.bind ];\n\t\t}\n\t\tif ( !isEmptyObject( newState ) ) {\n\t\t\tnewState.prevProps = nextProps;\n\t\t\treturn newState;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif ( this.props.bind ) {\n\t\t\tlet globalVal = global.lesson.state[ this.props.bind ];\n\t\t\tif ( globalVal !== this.state.value ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tvalue: globalVal\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\thandleChange = ( event ) => {\n\t\tconst value = event.target.value;\n\t\tthis.props.onChange( value );\n\t\tthis.setState({\n\t\t\tvalue\n\t\t}, () => {\n\t\t\tif ( this.props.bind ) {\n\t\t\t\tglobal.lesson.setState({\n\t\t\t\t\t[ this.props.bind ]: value\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tfocus = () => {\n\t\tthis.textInput.focus();\n\t}\n\n\trender() {\n\t\tlet { value } = this.state;\n\t\tif ( this.props.value !== null ) {\n\t\t\tvalue = this.props.value;\n\t\t}\n\t\tif ( this.props.inline ) {\n\t\t\treturn (\n\t\t\t\t<span className=\"input\" style={this.props.style} >\n\t\t\t\t\t{ this.props.legend ? <label htmlFor={this.id} >\n\t\t\t\t\t\t{this.props.legend}:\n\t\t\t\t\t</label> : <span /> }\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={this.id}\n\t\t\t\t\t\tclassName=\"text-inline-input\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"input\"\n\t\t\t\t\t\tplaceholder={this.props.placeholder}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tref={( input ) => {\n\t\t\t\t\t\t\tthis.textInput = input;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: this.props.width\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\tonKeyPress={this.props.onKeyPress}\n\t\t\t\t\t\tonKeyDown={this.props.onKeyDown}\n\t\t\t\t\t\tonKeyUp={this.props.onKeyUp}\n\t\t\t\t\t/>\n\t\t\t\t\t{ this.props.description ?\n\t\t\t\t\t\t<span> ({this.props.description}) </span> :\n\t\t\t\t\t\t<span />\n\t\t\t\t\t}\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"input text-container-div\" style={this.props.style} >\n\t\t\t\t<span>\n\t\t\t\t\t{ this.props.legend ?\n\t\t\t\t\t\t<label htmlFor={this.id} >{this.props.legend}:</label> :\n\t\t\t\t\t\tnull\n\t\t\t\t\t}\n\t\t\t\t\t{ this.props.description ?\n\t\t\t\t\t\t<span> {this.props.description}</span> :\n\t\t\t\t\t\t<span />\n\t\t\t\t\t}\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\tid={this.id}\n\t\t\t\t\tclassName=\"text-input\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"input\"\n\t\t\t\t\tplaceholder={this.props.placeholder}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tref={( input ) => {\n\t\t\t\t\t\tthis.textInput = input;\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: this.props.width\n\t\t\t\t\t}}\n\t\t\t\t\tonBlur={this.props.onBlur}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\tonKeyPress={this.props.onKeyPress}\n\t\t\t\t\tonKeyDown={this.props.onKeyDown}\n\t\t\t\t\tonKeyUp={this.props.onKeyUp}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nTextInput.defaultProps = {\n\tbind: null,\n\tdefaultValue: '',\n\tvalue: null,\n\tlegend: '',\n\twidth: 80,\n\tonBlur() {},\n\tonChange() {},\n\tonKeyDown() {},\n\tonKeyPress() {},\n\tonKeyUp() {},\n\tinline: false,\n\tplaceholder: 'Enter text',\n\tstyle: {}\n};\n\nTextInput.propTypes = {\n\tbind: PropTypes.string,\n\tdefaultValue: PropTypes.string,\n\tvalue: PropTypes.string,\n\tlegend: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.node\n\t]),\n\tinline: PropTypes.bool,\n\tonBlur: PropTypes.func,\n\tonChange: PropTypes.func,\n\tonKeyDown: PropTypes.func,\n\tonKeyPress: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tplaceholder: PropTypes.string,\n\twidth: PropTypes.number,\n\tstyle: PropTypes.object\n};\n\nTextInput.contextType = SessionContext;\n\n\n// EXPORTS //\n\nexport default TextInput;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Test whether a string contains only numeric digits.\n*\n* @module @stdlib/assert/is-digit-string\n*\n* @example\n* var isDigitString = require( '@stdlib/assert/is-digit-string' );\n*\n* var out = isDigitString( '0123456789' );\n* // returns true\n*\n* out = isDigitString( '0xffffff' );\n* // returns false\n*\n* out = isDigitString( '' );\n* // returns false\n*/\n// MODULES //\n\nvar isDigitString = require('./main.js'); // EXPORTS //\n\n\nmodule.exports = isDigitString;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar isString = require('@stdlib/assert/is-string').isPrimitive; // VARIABLES //\n// Character codes:\n\n\nvar ZERO = 48;\nvar NINE = 57; // MAIN //\n\n/**\n* Tests whether a string contains only numeric digits.\n*\n* @param {*} x - value to test\n* @returns {boolean} boolean indicating if a string contains only numeric digits\n*\n* @example\n* var out = isDigitString( '0123456789' );\n* // returns true\n*\n* @example\n* var out = isDigitString( '0xffffff' );\n* // returns false\n*\n* @example\n* var out = isDigitString( '' );\n* // returns false\n*\n* @example\n* var out = isDigitString( 123 );\n* // returns false\n*/\n\nfunction isDigitString(x) {\n  var len;\n  var ch;\n  var i;\n\n  if (!isString(x)) {\n    return false;\n  }\n\n  len = x.length;\n\n  if (len === 0) {\n    return false;\n  }\n\n  for (i = 0; i < len; i++) {\n    ch = x.charCodeAt(i);\n\n    if (ch < ZERO || ch > NINE) {\n      return false;\n    }\n  }\n\n  return true;\n} // EXPORTS //\n\n\nmodule.exports = isDigitString;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar setReadOnly = require('@stdlib/utils/define-nonenumerable-read-only-property');\n\nvar setReadOnlyAccessor = require('@stdlib/utils/define-nonenumerable-read-only-accessor');\n\nvar setReadWriteAccessor = require('@stdlib/utils/define-nonenumerable-read-write-accessor');\n\nvar isObject = require('@stdlib/assert/is-plain-object');\n\nvar isFunction = require('@stdlib/assert/is-function');\n\nvar hasOwnProp = require('@stdlib/assert/has-own-property');\n\nvar constantFunction = require('@stdlib/utils/constant-function');\n\nvar noop = require('@stdlib/utils/noop');\n\nvar randu = require('@stdlib/random/base/mt19937').factory;\n\nvar isnan = require('@stdlib/math/base/assert/is-nan');\n\nvar typedarray2json = require('@stdlib/array/to-json');\n\nvar validate = require('./validate.js');\n\nvar uniform0 = require('./uniform.js'); // MAIN //\n\n/**\n* Returns a pseudorandom number generator for generating uniformly distributed random numbers.\n*\n* @param {number} [a] - minimum support (inclusive)\n* @param {number} [b] - maximum support (exclusive)\n* @param {Options} [options] - function options\n* @param {PRNG} [options.prng] - pseudorandom number generator which generates uniformly distributed pseudorandom numbers\n* @param {PRNGSeedMT19937} [options.seed] - pseudorandom number generator seed\n* @param {PRNGStateMT19937} [options.state] - pseudorandom number generator state\n* @param {boolean} [options.copy=true] - boolean indicating whether to copy a provided pseudorandom number generator state\n* @throws {TypeError} `a` must be a number\n* @throws {TypeError} `b` must be a number\n* @throws {RangeError} `a` must be less than `b`\n* @throws {TypeError} options argument must be an object\n* @throws {TypeError} must provide valid options\n* @throws {Error} must provide a valid state\n* @returns {PRNG} pseudorandom number generator\n*\n* @example\n* var uniform = factory( 0.0, 1.0 );\n*\n* var v = uniform();\n* // returns <number>\n*\n* @example\n* var uniform = factory( -3.0, -1.0, {\n*     'seed': 297\n* });\n* var v = uniform();\n* // returns <number>\n*/\n\n\nfunction factory() {\n  var opts;\n  var rand;\n  var prng;\n  var err;\n  var a;\n  var b;\n\n  if (arguments.length === 0) {\n    rand = randu();\n  } else if (arguments.length === 1) {\n    opts = arguments[0];\n\n    if (!isObject(opts)) {\n      throw new TypeError('invalid argument. Options argument must be an object. Value: `' + opts + '`.');\n    }\n\n    if (hasOwnProp(opts, 'prng')) {\n      if (!isFunction(opts.prng)) {\n        throw new TypeError('invalid option. `prng` option must be a pseudorandom number generator function. Option: `' + opts.prng + '`.');\n      }\n\n      rand = opts.prng;\n    } else {\n      rand = randu(opts);\n    }\n  } else {\n    a = arguments[0];\n    b = arguments[1];\n    err = validate(a, b);\n\n    if (err) {\n      throw err;\n    }\n\n    if (arguments.length > 2) {\n      opts = arguments[2];\n\n      if (!isObject(opts)) {\n        throw new TypeError('invalid argument. Options argument must be an object. Value: `' + opts + '`.');\n      }\n\n      if (hasOwnProp(opts, 'prng')) {\n        if (!isFunction(opts.prng)) {\n          throw new TypeError('invalid option. `prng` option must be a pseudorandom number generator function. Option: `' + opts.prng + '`.');\n        }\n\n        rand = opts.prng;\n      } else {\n        rand = randu(opts);\n      }\n    } else {\n      rand = randu();\n    }\n  }\n\n  if (a === void 0) {\n    prng = uniform2;\n  } else {\n    prng = uniform1;\n  }\n\n  setReadOnly(prng, 'NAME', 'uniform'); // If we are provided an \"external\" PRNG, we don't support getting or setting PRNG state, as we'd need to check for compatible state value types, etc, entailing considerable complexity.\n\n  if (opts && opts.prng) {\n    setReadOnly(prng, 'seed', null);\n    setReadOnly(prng, 'seedLength', null);\n    setReadWriteAccessor(prng, 'state', constantFunction(null), noop);\n    setReadOnly(prng, 'stateLength', null);\n    setReadOnly(prng, 'byteLength', null);\n    setReadOnly(prng, 'toJSON', constantFunction(null));\n    setReadOnly(prng, 'PRNG', rand);\n  } else {\n    setReadOnlyAccessor(prng, 'seed', getSeed);\n    setReadOnlyAccessor(prng, 'seedLength', getSeedLength);\n    setReadWriteAccessor(prng, 'state', getState, setState);\n    setReadOnlyAccessor(prng, 'stateLength', getStateLength);\n    setReadOnlyAccessor(prng, 'byteLength', getStateSize);\n    setReadOnly(prng, 'toJSON', toJSON);\n    setReadOnly(prng, 'PRNG', rand);\n    rand = rand.normalized;\n  }\n\n  return prng;\n  /**\n  * Returns the PRNG seed.\n  *\n  * @private\n  * @returns {PRNGSeedMT19937} seed\n  */\n\n  function getSeed() {\n    return rand.seed;\n  }\n  /**\n  * Returns the PRNG seed length.\n  *\n  * @private\n  * @returns {PositiveInteger} seed length\n  */\n\n\n  function getSeedLength() {\n    return rand.seedLength;\n  }\n  /**\n  * Returns the PRNG state length.\n  *\n  * @private\n  * @returns {PositiveInteger} state length\n  */\n\n\n  function getStateLength() {\n    return rand.stateLength;\n  }\n  /**\n  * Returns the PRNG state size (in bytes).\n  *\n  * @private\n  * @returns {PositiveInteger} state size (in bytes)\n  */\n\n\n  function getStateSize() {\n    return rand.byteLength;\n  }\n  /**\n  * Returns the current pseudorandom number generator state.\n  *\n  * @private\n  * @returns {PRNGStateMT19937} current state\n  */\n\n\n  function getState() {\n    return rand.state;\n  }\n  /**\n  * Sets the pseudorandom number generator state.\n  *\n  * @private\n  * @param {PRNGStateMT19937} s - generator state\n  * @throws {Error} must provide a valid state\n  */\n\n\n  function setState(s) {\n    rand.state = s;\n  }\n  /**\n  * Serializes the pseudorandom number generator as a JSON object.\n  *\n  * ## Notes\n  *\n  * -   `JSON.stringify()` implicitly calls this method when stringifying a PRNG.\n  *\n  * @private\n  * @returns {Object} JSON representation\n  */\n\n\n  function toJSON() {\n    var out = {};\n    out.type = 'PRNG';\n    out.name = prng.NAME;\n    out.state = typedarray2json(rand.state);\n\n    if (a === void 0) {\n      out.params = [];\n    } else {\n      out.params = [a, b];\n    }\n\n    return out;\n  }\n  /**\n  * Returns a uniformly distributed pseudorandom number with minimum support `a` and maximum support `b`.\n  *\n  * @private\n  * @returns {number} pseudorandom number\n  *\n  * @example\n  * var v = uniform1();\n  * // returns <number>\n  */\n\n\n  function uniform1() {\n    return uniform0(rand, a, b);\n  }\n  /**\n  * Returns a uniformly distributed pseudorandom number with minimum support `a` and maximum support `b`.\n  *\n  * @private\n  * @param {number} a - minimum support (inclusive)\n  * @param {number} b - maximum support (exclusive)\n  * @returns {number} pseudorandom number\n  *\n  * @example\n  * var v = uniform2( 0.0, 1.0 );\n  * // returns <number>\n  *\n  * @example\n  * var v = uniform2( 1.0, 0.0 );\n  * // returns NaN\n  */\n\n\n  function uniform2(a, b) {\n    if (isnan(a) || isnan(b) || a >= b) {\n      return NaN;\n    }\n\n    return uniform0(rand, a, b);\n  }\n} // EXPORTS //\n\n\nmodule.exports = factory;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Uniform distribution pseudorandom numbers.\n*\n* @module @stdlib/random/base/uniform\n*\n* @example\n* var uniform = require( '@stdlib/random/base/uniform' );\n*\n* var v = uniform( 0.0, 1.0 );\n* // returns <number>\n*\n* @example\n* var factory = require( '@stdlib/random/base/uniform' ).factory;\n* var uniform = factory( -5.0, 5.0, {\n*     'seed': 297\n* });\n*\n* var v = uniform();\n* // returns <number>\n*\n* @example\n* var factory = require( '@stdlib/random/base/uniform' ).factory;\n* var uniform = factory({\n*     'seed': 297\n* });\n*\n* var v = uniform( -5.0, 5.0 );\n* // returns <number>\n*/\n// MODULES //\n\nvar setReadOnly = require('@stdlib/utils/define-nonenumerable-read-only-property');\n\nvar uniform = require('./main.js');\n\nvar factory = require('./factory.js'); // MAIN //\n\n\nsetReadOnly(uniform, 'factory', factory); // EXPORTS //\n\nmodule.exports = uniform;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar factory = require('./factory.js'); // MAIN //\n\n/**\n* Returns a uniformly distributed pseudorandom number with minimum support `a` and maximum support `b`.\n*\n* @name uniform\n* @type {PRNG}\n* @param {number} a - minimum support (inclusive)\n* @param {number} b - maximum support (exclusive)\n* @returns {number} pseudorandom number\n*\n* @example\n* var v = uniform( 0.0, 1.0 );\n* // returns <number>\n*/\n\n\nvar uniform = factory(); // EXPORTS //\n\nmodule.exports = uniform;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MODULES //\n\nvar isNumber = require('@stdlib/assert/is-number').isPrimitive;\n\nvar isnan = require('@stdlib/assert/is-nan'); // MAIN //\n\n/**\n* Validates values provided for minimum and maximum support.\n*\n* @private\n* @param {number} a - minimum support\n* @param {number} b - maximum support\n* @returns {(Error|null)} error or null\n*\n* @example\n* var err = validate( 1.0, 2.0 );\n* if ( err ) {\n*     throw err;\n* }\n*/\n\n\nfunction validate(a, b) {\n  if (!isNumber(a) || isnan(a)) {\n    return new TypeError('invalid argument. First argument must be a number primitive and not `NaN`. Value: `' + a + '`.');\n  }\n\n  if (!isNumber(b) || isnan(b)) {\n    return new TypeError('invalid argument. Second argument must be a number primitive and not `NaN`. Value: `' + b + '`.');\n  }\n\n  if (a >= b) {\n    return new RangeError('invalid argument. Minimum support `a` must be less than maximum support `b`. Value: `[' + a + ',' + b + ']`.');\n  }\n\n  return null;\n} // EXPORTS //\n\n\nmodule.exports = validate;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Returns a uniformly distributed pseudorandom number with minimum support `a` and maximum support `b`.\n*\n* @private\n* @param {PRNG} rand - pseudorandom number generator\n* @param {number} a - minimum support (inclusive)\n* @param {number} b - maximum support (exclusive)\n* @returns {number} pseudorandom number\n*/\n\nfunction uniform(rand, a, b) {\n  var r = rand();\n  return b * r + (1.0 - r) * a; // equivalent to (b-a)*r + a\n} // EXPORTS //\n\n\nmodule.exports = uniform;","// MODULES //\n\nimport Loadable from '@isle-project/components/internal/loadable';\nimport { addResources } from '@isle-project/locales';\n\n\n// VARIABLES //\n\naddResources( 'Panel' );\n\n\n// MAIN //\n\nconst Panel = Loadable( () => import( /* webpackChunkName: \"Panel\" */ './main.js' ) );\n\n\n// EXPORTS //\n\nexport default Panel;\n","// MAIN //\n\nfunction stopPropagation( event ) {\n\tevent.stopPropagation();\n}\n\n\n// EXPORTS //\n\nexport default stopPropagation;\n","// MODULES //\n\nimport React, { Fragment, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport FormText from 'react-bootstrap/FormText';\nimport Button from 'react-bootstrap/Button';\nimport Alert from 'react-bootstrap/Alert';\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport runif from '@stdlib/random/base/uniform';\nimport keys from '@stdlib/utils/keys';\nimport roundn from '@stdlib/math/base/special/roundn';\nimport copy from '@stdlib/utils/copy';\nimport { isPrimitive as isNumber } from '@stdlib/assert/is-number';\nimport NumberInput from '@isle-project/components/input/number';\nimport SelectInput from '@isle-project/components/input/select';\nimport TextInput from '@isle-project/components/input/text';\nimport Draggable from '@isle-project/components/draggable';\nimport Plotly from '@isle-project/components/plotly';\nimport Panel from '@isle-project/components/panel';\nimport TeX from '@isle-project/components/tex';\nimport isnan from '@stdlib/assert/is-nan';\nimport factor from '@isle-project/utils/factor-variable';\nimport mean from '@isle-project/utils/statistic/mean.js';\nimport min from '@isle-project/utils/statistic/min.js';\nimport max from '@isle-project/utils/statistic/max.js';\nimport { DATA_EXPLORER_BIN_TRANSFORMER } from '@isle-project/constants/actions.js';\nimport { generateHistogramConfig } from '@isle-project/components/plots/histogram';\nimport stopPropagation from '@isle-project/utils/stop-propagation';\nimport retrieveBinnedValues from './retrieve_binned_values.js';\nimport ClearButton from './../clear_button.js';\nimport './bin_transformer.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:data-explorer:variable-transformer' );\nconst RE_SHAPE = /shapes\\[(\\d)\\]\\.x0/;\nconst HISTOGRAM_SETTINGS = {\n\tgroup: null,\n\tdisplayDensity: true,\n\tdensityType: 'Data-driven',\n\tchooseBins: false,\n\tnBins: null\n};\n\n\n// FUNCTIONS //\n\n/**\n* Comparator function used to sort values in ascending order.\n*\n* @private\n* @param {number} a - first number\n* @param {number} b - second number\n* @returns {number} difference between `a` and `b`\n*/\nfunction ascending( a, b ) {\n\treturn a - b;\n}\n\n/**\n* Function to make shapes from breakpoints.\n*/\nconst makeShapes = ( breakpoints ) => {\n\tconst breakShapes = [];\n\tfor ( let i = 0; i < breakpoints.length; i++ ) {\n\t\tbreakShapes.push({\n\t\t\ttype: 'line',\n\t\t\tx0: breakpoints[i],\n\t\t\ty0: -100,\n\t\t\tx1: breakpoints[i],\n\t\t\ty1: 100,\n\t\t\tline: {\n\t\t\t\tcolor: 'red',\n\t\t\t\twidth: 3\n\t\t\t}\n\t\t});\n\t}\n\treturn breakShapes;\n};\n\n/**\n* Creates an array of category names for created bins.\n*\n* @param {Array<number>} breakpoints - breakpoints\n* @param {Array<string>} customNames - custom category labels\n* @returns {Array<string>} array of bin labels\n*/\nconst createCategoryNames = ( breakpoints, customNames ) => {\n\tconst out = new Array( customNames.length );\n\tif ( customNames[ 0 ] ) {\n\t\tout[ 0 ] = customNames[ 0 ];\n\t} else {\n\t\tout[ 0 ] = `(-\\u221E,${breakpoints[0]})`; // eslint-disable-line i18next/no-literal-string\n\t}\n\tfor ( let i = 1; i < customNames.length; i++ ) {\n\t\tif ( customNames[ i ] ) {\n\t\t\tout[ i ] = customNames[ i ];\n\t\t} else {\n\t\t\tout[ i ] = `[${breakpoints[i-1]},${breakpoints[i]})`;\n\t\t}\n\t}\n\tconst last = customNames.length - 1;\n\tif ( customNames[ last ] ) {\n\t\tout[ last ] = customNames[ last ];\n\t} else {\n\t\tout[ last ] = `[${breakpoints[ breakpoints.length - 1 ]},\\u221E)`; // eslint-disable-line i18next/no-literal-string\n\t}\n\treturn out;\n};\n\n\n// MAIN //\n\nconst BinningTransformer = ( props ) => {\n\tconst [ name, setName ] = useState( '' );\n\tconst [ snapDigits, setSnapDigits ] = useState( 0 );\n\tconst [ state, setState ] = useState({\n\t\tvariable: null,\n\t\tconfigHist: null,\n\t\tbreakpoints: null,\n\t\tcategories: null,\n\t\tcustomNames: null\n\t});\n\tconst invalidName = name.length < 2;\n\tconst makeNewVar = () => {\n\t\tconst { variable, categories, breakpoints } = state;\n\t\tconst rawData = props.data[ variable ];\n\t\tconst values = retrieveBinnedValues( rawData, categories, breakpoints );\n\t\tprops.logAction( DATA_EXPLORER_BIN_TRANSFORMER, {\n\t\t\tname,\n\t\t\tvariable,\n\t\t\tbreaks: breakpoints,\n\t\t\tcategories\n\t\t});\n\t\tconst newName = factor( name, categories );\n\t\tprops.onGenerate( newName, values );\n\t\tprops.onHide();\n\t};\n\tconst handleKeyPress = ( event ) => {\n\t\t// Handle \"Return\" key:\n\t\tif ( event.charCode === 13 && !invalidName ) {\n\t\t\tmakeNewVar();\n\t\t}\n\t};\n\tconst handleNameChange = ( event ) => {\n\t\tsetName( event.target.value );\n\t};\n\tconst changeFactory = ( ind ) => {\n\t\treturn ( value ) => {\n\t\t\tdebug( 'Change break point...' );\n\t\t\tconst newBreakpoints = state.breakpoints.slice();\n\t\t\tnewBreakpoints[ ind ] = roundn( value, -snapDigits );\n\t\t\tnewBreakpoints.sort( ascending );\n\t\t\tconst configHist = copy( state.configHist );\n\t\t\tconfigHist.layout.shapes = makeShapes( newBreakpoints );\n\t\t\tsetState({\n\t\t\t\t...state,\n\t\t\t\tconfigHist,\n\t\t\t\tbreakpoints: newBreakpoints,\n\t\t\t\tcategories: createCategoryNames( newBreakpoints, state.customNames )\n\t\t\t});\n\t\t};\n\t};\n\tconst categoryChangeFactory = ( ind ) => {\n\t\treturn ( value ) => {\n\t\t\tconst newCategories = state.categories.slice();\n\t\t\tnewCategories[ ind ] = value;\n\t\t\tconst newCustomNames = state.customNames.slice();\n\t\t\tnewCustomNames[ ind ] = value;\n\t\t\tconst newState = {\n\t\t\t\t...state,\n\t\t\t\tcategories: newCategories,\n\t\t\t\tcustomNames: newCustomNames\n\t\t\t};\n\t\t\tsetState( newState );\n\t\t};\n\t};\n\tconst deleteBreakpoint = ( ind ) => {\n\t\treturn () => {\n\t\t\tconst { breakpoints, categories, customNames } = state;\n\n\t\t\t// Remove the elements at the specified index:\n\t\t\tbreakpoints.splice( ind, 1 );\n\t\t\tcategories.splice( ind, 1 );\n\t\t\tcustomNames.splice( ind, 1 );\n\t\t\tconst configHist = { ...state.configHist };\n\t\t\tconfigHist.layout.shapes = makeShapes( breakpoints );\n\t\t\tsetState({\n\t\t\t\t...state,\n\t\t\t\tconfigHist,\n\t\t\t\tcategories,\n\t\t\t\tcustomNames,\n\t\t\t\tbreakpoints\n\t\t\t});\n\t\t};\n\t};\n\tconst makeTextInputs = () => {\n\t\tconst inputs = [];\n\t\tconst breakpoints = state.breakpoints;\n\t\tconst disableButton = breakpoints.length === 1;\n\t\tinputs.push( <Row key=\"div-0\">\n\t\t\t<Col md={7}>\n\t\t\t\t<TeX\n\t\t\t\t\traw=\"x < \"\n\t\t\t\t/><NumberInput\n\t\t\t\t\tinline\n\t\t\t\t\tonBlur={changeFactory( 0 )}\n\t\t\t\t\tdefaultValue={breakpoints[0]}\n\t\t\t\t\tstep=\"any\"\n\t\t\t\t/>\n\t\t\t</Col>\n\t\t\t<Col md={4}>\n\t\t\t\t<TextInput\n\t\t\t\t\tkey={0}\n\t\t\t\t\tlegend=\"Label 1\"\n\t\t\t\t\tdefaultValue={state.categories[ 0 ]}\n\t\t\t\t\tonChange={categoryChangeFactory( 0 )}\n\t\t\t\t\tstyle={{ width: 200 }}\n\t\t\t\t/>\n\t\t\t</Col>\n\t\t\t<Col md={1}></Col>\n\t\t</Row> );\n\t\tif ( breakpoints.length > 1 ) {\n\t\t\tfor ( let i = 0; i < breakpoints.length - 1; i++ ) {\n\t\t\t\tconst changeFn = categoryChangeFactory( i+1 );\n\t\t\t\tinputs.push( <Row key={`div-${i+1}`}>\n\t\t\t\t\t<Col md={7}>\n\t\t\t\t\t\t<NumberInput\n\t\t\t\t\t\t\tinline\n\t\t\t\t\t\t\tonBlur={changeFactory( i )}\n\t\t\t\t\t\t\tdefaultValue={breakpoints[i]}\n\t\t\t\t\t\t\tstep=\"any\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TeX raw=\"\\le x <\" />\n\t\t\t\t\t\t<NumberInput\n\t\t\t\t\t\t\tinline\n\t\t\t\t\t\t\tonBlur={changeFactory( i+1 )}\n\t\t\t\t\t\t\tdefaultValue={breakpoints[i+1]}\n\t\t\t\t\t\t\tstep=\"any\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col md={4}>\n\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\tkey={1+i}\n\t\t\t\t\t\t\tlegend={`Label ${i+2}`}\n\t\t\t\t\t\t\tdefaultValue={state.categories[ i+1 ]}\n\t\t\t\t\t\t\tonChange={changeFn}\n\t\t\t\t\t\t\tstyle={{ width: 200 }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col md={1}>\n\t\t\t\t\t\t<ClearButton\n\t\t\t\t\t\t\tonClick={deleteBreakpoint(i)}\n\t\t\t\t\t\t\tstyle={{ marginTop: '5px' }}\n\t\t\t\t\t\t\tdisabled={disableButton}\n\t\t\t\t\t\t\ttooltipPlacement=\"right\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row> );\n\t\t\t}\n\t\t}\n\t\tconst len = breakpoints.length;\n\t\tinputs.push( <Row key={`div-${len}`}>\n\t\t\t<Col md={7}>\n\t\t\t\t<TeX raw=\"x \\ge\" />\n\t\t\t\t<NumberInput\n\t\t\t\t\tinline\n\t\t\t\t\tonChange={changeFactory( len-1 )}\n\t\t\t\t\tdefaultValue={breakpoints[ len-1 ]}\n\t\t\t\t\tstep=\"any\"\n\t\t\t\t/>\n\t\t\t</Col>\n\t\t\t<Col md={4}>\n\t\t\t\t<TextInput\n\t\t\t\t\tlegend={`Label ${len+1}`}\n\t\t\t\t\tdefaultValue={state.categories[ len ]}\n\t\t\t\t\tonChange={categoryChangeFactory( len )}\n\t\t\t\t\tkey={len}\n\t\t\t\t\tstyle={{ width: 200 }}\n\t\t\t\t/>\n\t\t\t</Col>\n\t\t\t<Col md={1}>\n\t\t\t\t<ClearButton\n\t\t\t\t\tonClick={deleteBreakpoint( len - 1 )}\n\t\t\t\t\tstyle={{ marginTop: '5px' }}\n\t\t\t\t\tdisabled={disableButton}\n\t\t\t\t/>\n\t\t\t</Col>\n\t\t</Row> );\n\t\treturn inputs;\n\t};\n\tconst onChangeHistLine = ( data ) => {\n\t\tconst keyUpdate = keys( data );\n\t\tconst matches = RE_SHAPE.exec( keyUpdate[ 0 ] );\n\t\tif ( matches ) {\n\t\t\tconst ind = matches[ 1 ];\n\t\t\tconst newBreakpoints = state.breakpoints.slice();\n\t\t\tnewBreakpoints[ ind ] = roundn( data[ keyUpdate[0] ], -snapDigits );\n\t\t\tnewBreakpoints.sort( ascending );\n\t\t\tconst configHist = copy( state.configHist );\n\t\t\tconfigHist.layout.shapes = makeShapes( newBreakpoints );\n\t\t\tsetState({\n\t\t\t\t...state,\n\t\t\t\tconfigHist,\n\t\t\t\tbreakpoints: newBreakpoints,\n\t\t\t\tcategories: createCategoryNames( newBreakpoints, state.customNames )\n\t\t\t});\n\t\t}\n\t};\n\tconst handleVariableChange = ( value ) => {\n\t\tdebug( 'Change variable to bin...' );\n\t\tconst histConfigSettings = {\n\t\t\tdata: props.data,\n\t\t\tvariable: value,\n\t\t\t...HISTOGRAM_SETTINGS\n\t\t};\n\t\tconst configHist = generateHistogramConfig( histConfigSettings );\n\t\tconfigHist.layout.yaxis = {\n\t\t\trange: [\n\t\t\t\tmin( configHist.data[ 1 ].y ),\n\t\t\t\tmax( configHist.data[ 1 ].y )\n\t\t\t],\n\t\t\tfixedrange: true\n\t\t};\n\t\tconfigHist.layout.xaxis = {\n\t\t\tfixedrange: true\n\t\t};\n\t\tlet values = props.data[ value ];\n\t\tvalues = values.filter( x => isNumber( x ) && !isnan( x ) );\n\t\tconst breakpoints = [ roundn( mean( values ), -snapDigits ) ];\n\t\tconfigHist.layout.shapes = makeShapes( breakpoints );\n\t\tconst customNames = [ false, false ];\n\t\tsetState({\n\t\t\tvariable: value,\n\t\t\tconfigHist,\n\t\t\tbreakpoints,\n\t\t\tcustomNames,\n\t\t\tcategories: createCategoryNames( breakpoints, customNames )\n\t\t});\n\t};\n\tconst addBreakpoint = () => {\n\t\tconst newBreakpoints = state.breakpoints.slice();\n\t\tlet values = props.data[ state.variable ];\n\t\tvalues = values.filter( x => isNumber( x ) && !isnan( x ) );\n\t\tconst avg = runif( 0.8, 1.2 ) * mean( values );\n\t\tnewBreakpoints.push( roundn( avg, -snapDigits ) );\n\t\tnewBreakpoints.sort( ascending );\n\n\t\tconst configHist = copy( state.configHist );\n\t\tconfigHist.layout.shapes = makeShapes( newBreakpoints );\n\n\t\tconst customNames = state.customNames;\n\t\tcustomNames.push( false );\n\n\t\tconst newState = {\n\t\t\t...state,\n\t\t\tbreakpoints: newBreakpoints,\n\t\t\tconfigHist,\n\t\t\tcategories: createCategoryNames( newBreakpoints, customNames )\n\t\t};\n\t\tsetState( newState );\n\t};\n\tconst renderBody = () => {\n\t\tconst configHist = state.configHist;\n\t\tconst select = <SelectInput\n\t\t\tlegend={props.t('variable-to-bin')}\n\t\t\tdefaultValue={state.variable}\n\t\t\toptions={props.quantitative}\n\t\t\tonChange={handleVariableChange}\n\t\t\tstyle={{ maxWidth: 400 }}\n\t\t/>;\n\t\tif ( !configHist ) {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{select}\n\t\t\t\t\t<Alert variant=\"info\">{props.t('select-variable-bin')}</Alert>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{select}\n\t\t\t\t<Button className=\"insert-line-button\" onClick={addBreakpoint}>\n\t\t\t\t\t{props.t('insert-break-line')}\n\t\t\t\t</Button>\n\t\t\t\t<p>\n\t\t\t\t\t{props.t('drag-red-bars')}\n\t\t\t\t\t(<NumberInput legend={props.t('digits-after-comma-snap')} min={0} max={9} inline defaultValue={snapDigits} onChange={setSnapDigits} />)\n\t\t\t\t</p>\n\t\t\t\t<div style={{ height: 250 }}>\n\t\t\t\t\t<Plotly\n\t\t\t\t\t\tdata={configHist.data}\n\t\t\t\t\t\tlayout={configHist.layout}\n\t\t\t\t\t\teditable\n\t\t\t\t\t\tfit\n\t\t\t\t\t\tremoveButtons\n\t\t\t\t\t\tlegendButtons={false}\n\t\t\t\t\t\tonRelayout={onChangeHistLine}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Card className=\"mb-2\" >\n\t\t\t\t\t\t<Card.Header>{props.t('choose-category-labels')}:</Card.Header>\n\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t{makeTextInputs()}\n\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t</Card>\n\t\t\t\t</div>\n\t\t\t\t<FormGroup style={{ width: 'fit-content' }} >\n\t\t\t\t\t<FormLabel>{props.t('name-new-variable')}:</FormLabel>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder={props.t('select-name')}\n\t\t\t\t\t\tonChange={handleNameChange}\n\t\t\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormText>\n\t\t\t\t\t\t{props.t('new-variable-appended')}\n\t\t\t\t\t</FormText>\n\t\t\t\t</FormGroup>\n\t\t\t</Fragment>\n\t\t);\n\t};\n\treturn (\n\t\t<Draggable cancel=\".card-body\" onDragStart={stopPropagation} style={{ zIndex: 1006 }} >\n\t\t\t<Panel\n\t\t\t\tonHide={props.onHide}\n\t\t\t\tshow={props.show}\n\t\t\t\theader={props.t('bin-transformer-header')}\n\t\t\t\tfooter={<Button onClick={makeNewVar} disabled={invalidName} >\n\t\t\t\t\t{props.t('create-new-variable')}\n\t\t\t\t</Button>}\n\t\t\t\tbodyStyle={{\n\t\t\t\t\tmaxHeight: 'calc(100vh - 200px)',\n\t\t\t\t\toverflowY: 'auto',\n\t\t\t\t\tposition: 'relative'\n\t\t\t\t}}\n\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t>\n\t\t\t\t{renderBody()}\n\t\t\t</Panel>\n\t\t</Draggable>\n\t);\n};\n\n\n// PROPERTIES //\n\nBinningTransformer.defaultProps = {\n\tlogAction() {},\n\tonGenerate() {}\n};\n\nBinningTransformer.propTypes = {\n\tshow: PropTypes.bool.isRequired,\n\tdata: PropTypes.object.isRequired,\n\tquantitative: PropTypes.array.isRequired,\n\tlogAction: PropTypes.func,\n\tonHide: PropTypes.func.isRequired,\n\tonGenerate: PropTypes.func\n};\n\n\n// EXPORTS //\n\nexport default BinningTransformer;\n","// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport isEmptyObject from '@stdlib/assert/is-empty-object';\nimport generateUID from '@isle-project/utils/uid';\n\n\n// VARIABLES //\n\nconst uid = generateUID( 'text-area' );\n\n\n// MAIN //\n\n/**\n* A text area component. Used as a stand-alone component, changes should be handled via the `onChange` attribute.\n*\n* @property {string} defaultValue - default value of the text area\n* @property {string} value - text value (for controlled component)\n* @property {boolean} disabled - controls whether the text area shall be disabled\n* @property {string} legend - legend text\n* @property {string} placeholder - placeholder text\n* @property {string} resizable - controls whether the text area shall be resizable (can be either `both`, `horizontal`, `vertical`, or `none`)\n* @property {number} rows - number of rows\n* @property {Object} style - CSS inline styles\n* @property {Function} onBlur - callback function invoked when the text area loses focus\n* @property {Function} onChange - callback function invoked with the new text when the area text changes\n*/\nclass TextArea extends Component {\n\t/**\n\t* Create a text area\n\t*\n\t* @param {Object} props - component properties (`onChange` callback and `text`)\n\t*/\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.id = props.id || uid( props );\n\n\t\t// Initialize state variables...\n\t\tthis.state = {\n\t\t\tvalue: props.value || props.defaultValue,\n\t\t\t...props\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tlet newState = {};\n\t\tif ( nextProps.defaultValue !== prevState.defaultValue ) {\n\t\t\tnewState.value = nextProps.defaultValue;\n\t\t}\n\t\tif ( !isEmptyObject( newState ) ) {\n\t\t\treturn newState;\n\t\t}\n\t\treturn null;\n\t}\n\n\t/*\n\t* Event handler invoked when text area value changes. Updates `text` and invokes\n\t* `onChange` callback with the new text as its first argument\n\t*/\n\thandleChange = ( event ) => {\n\t\tconst value = event.target.value;\n\t\tthis.setState({ value });\n\t\tthis.props.onChange( value );\n\t}\n\n\trenderLegend() {\n\t\tif ( this.props.legend ) {\n\t\t\treturn ( <FormLabel htmlFor={this.id} >\n\t\t\t\t{this.props.legend}\n\t\t\t</FormLabel> );\n\t\t}\n\t\treturn null;\n\t}\n\n\t/*\n\t* React component render method.\n\t*/\n\trender() {\n\t\tlet { value } = this.state;\n\t\tif ( this.props.value !== null ) {\n\t\t\tvalue = this.props.value;\n\t\t}\n\t\treturn (\n\t\t\t<FormGroup className=\"input\" id={`${this.id}-form`} >\n\t\t\t\t{this.renderLegend()}\n\t\t\t\t<FormControl\n\t\t\t\t\tid={this.id}\n\t\t\t\t\tas=\"textarea\"\n\t\t\t\t\tplaceholder={this.props.placeholder}\n\t\t\t\t\tref={div => { this.textarea = div; }}\n\t\t\t\t\tonBlur={this.props.onBlur}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tresize: this.props.resizable,\n\t\t\t\t\t\t...this.props.style\n\t\t\t\t\t}}\n\t\t\t\t\trows={this.props.rows}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\t/>\n\t\t\t</FormGroup>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nTextArea.defaultProps = {\n\tdefaultValue: '',\n\tvalue: null,\n\tdisabled: false,\n\tlegend: '',\n\tonBlur() {},\n\tonChange() {},\n\tplaceholder: 'Enter text',\n\tresizable: 'none',\n\trows: 5,\n\tstyle: {}\n};\n\nTextArea.propTypes = {\n\tdefaultValue: PropTypes.string,\n\tvalue: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\tlegend: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.node\n\t]),\n\tonBlur: PropTypes.func,\n\tonChange: PropTypes.func,\n\tplaceholder: PropTypes.string,\n\tresizable: PropTypes.string,\n\trows: PropTypes.number,\n\tstyle: PropTypes.object\n};\n\n\n// EXPORTS //\n\nexport default TextArea;\n","// MODULES //\n\nimport TextArea from './main.js';\n\n\n// EXPORTS //\n\nexport default TextArea;\n","// MODULES //\n\nimport React, { Component, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Trans } from 'react-i18next';\nimport Table from 'react-bootstrap/Table';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport FormText from 'react-bootstrap/FormText';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport Draggable from '@isle-project/components/draggable';\nimport Panel from '@isle-project/components/panel';\nimport Collapse from '@isle-project/components/collapse';\nimport TextArea from '@isle-project/components/input/text-area';\nimport Tooltip from '@isle-project/components/tooltip';\nimport incrspace from '@stdlib/math/utils/incrspace';\nimport contains from '@stdlib/assert/contains';\nimport replace from '@stdlib/string/replace';\nimport { DATA_EXPLORER_VARIABLE_TRANSFORMER } from '@isle-project/constants/actions.js';\nimport valuesFromFormula from './values_from_formula.js';\nimport FUNCTION_KEYS from './function_keys.json';\nimport './formula_transformer.css';\n\n\n// VARIABLES //\n\nconst DIGITS = incrspace( 0, 10, 1 );\nconst RE_LAST_EXPRESSION = /(?:^|\\n)([^\\n]*)$/;\nconst RE_DIGITS_START = /^[0-9]/;\n\n\n// FUNCTIONS //\n\nconst CustomMenu = React.forwardRef(\n\t({ children, style, className, 'aria-labelledby': labeledBy }, ref) => {\n\t\tconst [value, setValue] = useState( '' );\n\t\treturn (\n\t\t\t<div\n\t\t\t\tref={ref}\n\t\t\t\tstyle={style}\n\t\t\t\tclassName={className}\n\t\t\t\taria-labelledby={labeledBy}\n\t\t\t>\n\t\t\t<FormControl\n\t\t\t\tclassName=\"mx-3 my-2 w-auto\"\n\t\t\t\tplaceholder=\"Type to filter...\"\n\t\t\t\tonChange={e => setValue(e.target.value)}\n\t\t\t\tvalue={value}\n\t\t\t/>\n\t\t\t\t<ul className=\"list-unstyled\">\n\t\t\t\t\t{React.Children.toArray(children).filter(\n\t\t\t\t\t\tchild =>\n\t\t\t\t\t\t!value || child.props.children.toLowerCase().startsWith(value),\n\t\t\t\t\t)}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t},\n);\n\n\n// MAIN //\n\nclass FormulaTransformer extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tcode: props.defaultCode,\n\t\t\tselection: null,\n\t\t\tname: '',\n\t\t\tshowGuide: false\n\t\t};\n\t}\n\n\thandleGenerate = () => {\n\t\tlet { code, name } = this.state;\n\t\tif ( !contains( code, 'return ' ) ) {\n\t\t\tcode = replace( code, RE_LAST_EXPRESSION, '\\nreturn $1' );\n\t\t}\n\t\tlet values;\n\t\ttry {\n\t\t\tvalues = valuesFromFormula( code, this.props.data );\n\t\t\tthis.props.logAction( DATA_EXPLORER_VARIABLE_TRANSFORMER, {\n\t\t\t\tcode, name\n\t\t\t});\n\t\t\tthis.props.onGenerate( name, values );\n\t\t} catch ( err ) {\n\t\t\treturn this.props.session.addNotification({\n\t\t\t\ttitle: 'Errored',\n\t\t\t\tmessage: 'Encountered the following error: '+err.message,\n\t\t\t\tlevel: 'error',\n\t\t\t\tposition: 'tr'\n\t\t\t});\n\t\t}\n\t\tthis.props.onHide();\n\t}\n\n\thandleNameChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tname: event.target.value\n\t\t});\n\t}\n\n\thandleCodeChange = ( value ) => {\n\t\tthis.setState({\n\t\t\tcode: value\n\t\t});\n\t}\n\n\thandleKeyPress = ( event ) => {\n\t\tif ( event.charCode === 13 && this.state.name.length >= 2 ) {\n\t\t\tthis.handleGenerate();\n\t\t}\n\t}\n\n\tinsertVarFactory = ( name ) => {\n\t\treturn () => {\n\t\t\tlet newCode = this.state.code.substring( 0, this.state.selection );\n\t\t\tlet replacement = 'datum';\n\t\t\tconst literal =\n\t\t\t\t!contains( name, ' ' ) &&\n\t\t\t\t!contains( name, '.' ) &&\n\t\t\t\t!RE_DIGITS_START.test( name );\n\t\t\treplacement += literal ? `.${name}` : `['${name}']`;\n\t\t\tnewCode += replacement;\n\t\t\tnewCode += this.state.code.substring( this.state.selection );\n\t\t\tthis.setState({\n\t\t\t\tcode: newCode,\n\t\t\t\tselection: this.state.selection + replacement.length\n\t\t\t});\n\t\t};\n\t}\n\n\tinsertLiteralFactory = ( operator ) => {\n\t\treturn () => {\n\t\t\tlet newCode = this.state.code.substring( 0, this.state.selection );\n\t\t\tconst replacement = operator;\n\t\t\tnewCode += replacement;\n\t\t\tnewCode += this.state.code.substring( this.state.selection );\n\t\t\tthis.setState({\n\t\t\t\tcode: newCode,\n\t\t\t\tselection: this.state.selection + replacement.length\n\t\t\t});\n\t\t};\n\t}\n\n\tinsertFuncFactory = ( funcName ) => {\n\t\treturn () => {\n\t\t\tlet newCode = this.state.code.substring( 0, this.state.selection );\n\t\t\tconst replacement = ' '+funcName+'()';\n\t\t\tnewCode += replacement;\n\t\t\tnewCode += this.state.code.substring( this.state.selection );\n\t\t\tthis.setState({\n\t\t\t\tcode: newCode,\n\t\t\t\tselection: this.state.selection + replacement.length - 1\n\t\t\t});\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tconst continuousItems = this.props.quantitative.map( ( v, i ) => {\n\t\t\treturn <Dropdown.Item key={i} onClick={this.insertVarFactory( v )} eventKey={i}>{v}</Dropdown.Item>;\n\t\t});\n\t\treturn (\n\t\t\t<Draggable cancel=\".card-body\" onDragStart={( event ) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}} style={{ zIndex: 1006 }} >\n\t\t\t\t<Panel\n\t\t\t\t\tshow={this.props.show}\n\t\t\t\t\tonHide={this.props.onHide}\n\t\t\t\t\theader={this.props.t('formula-transformer-header')}\n\t\t\t\t\tfooter={<Button onClick={this.handleGenerate} disabled={this.state.name.length < 2} >{this.props.t('create-new-variable')}</Button>}\n\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\tbodyStyle={{\n\t\t\t\t\t\tmaxHeight: 'calc(100vh - 200px)',\n\t\t\t\t\t\toverflowY: 'auto',\n\t\t\t\t\t\tposition: 'relative'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"formula-transformer-body\">\n\t\t\t\t\t\t<Collapse headerClassName=\"title\" header={this.state.showGuide ? t('hide-example-guide') : t('show-example-guide')} visible={this.state.showGuide} onClick={() => this.setState({ showGuide: !this.state.showGuide })}>\n\t\t\t\t\t\t\t<p>{t('formula-transformer-example-intro')}</p>\n\t\t\t\t\t\t\t<Table condensed >\n\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th>{t('type')}</th>\n\t\t\t\t\t\t\t\t\t\t<th>{t('example')}</th>\n\t\t\t\t\t\t\t\t\t\t<th>{t('description')}</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>{t('interaction')}:</td>\n\t\t\t\t\t\t\t\t\t\t<td><code>datum.{this.props.quantitative[0]} * datum.{this.props.quantitative[1]}</code></td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<Trans i18nKey=\"example-description-multiply\" ns=\"DataExplorer\" >\n\t\t\t\t\t\t\t\t\t\t\t\tMultiply values of variables <code>{{ first: this.props.quantitative[0] }}</code> and <code>{{ second: this.props.quantitative[1] }}</code>\n\t\t\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>{t('transformation')}:</td>\n\t\t\t\t\t\t\t\t\t\t<td><code>exp( datum.{this.props.quantitative[0]} )</code></td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<Trans i18nKey=\"example-description-exponential\" ns=\"DataExplorer\" >\n\t\t\t\t\t\t\t\t\t\t\t\tNatural exponential function of variable <code>{{ variable: this.props.quantitative[0] }}</code>\n\t\t\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>{t('function')}:</td>\n\t\t\t\t\t\t\t\t\t\t<td><code>9/5 * {this.props.quantitative[0]} + 32</code></td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<Trans i18nKey=\"example-description-calculation\" ns=\"DataExplorer\" >\n\t\t\t\t\t\t\t\t\t\t\t\tMultiply values of <code>{{ variable: this.props.quantitative[0] }}</code> by <code>9/5</code> and add <code>32</code>\n\t\t\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t</Collapse>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<div className=\"mb-2\" >\n\t\t\t\t\t\t\t<ButtonToolbar style={{ marginBottom: 5 }} >\n\t\t\t\t\t\t\t\t<Dropdown className=\"mr-2\">\n\t\t\t\t\t\t\t\t\t<Dropdown.Toggle variant=\"light\" id=\"dropdown-custom-components\">\n\t\t\t\t\t\t\t\t\t\t{t('quantitative')}\n\t\t\t\t\t\t\t\t\t</Dropdown.Toggle>\n\t\t\t\t\t\t\t\t\t<Dropdown.Menu variant=\"light\" as={CustomMenu} id=\"bg-nested-dropdown\">\n\t\t\t\t\t\t\t\t\t\t{continuousItems}\n\t\t\t\t\t\t\t\t\t</Dropdown.Menu>\n\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t\t<Dropdown className=\"mr-2\">\n\t\t\t\t\t\t\t\t\t<Dropdown.Toggle variant=\"light\" id=\"dropdown-custom-components\">\n\t\t\t\t\t\t\t\t\t\t{t('categorical')}\n\t\t\t\t\t\t\t\t\t</Dropdown.Toggle>\n\t\t\t\t\t\t\t\t\t<Dropdown.Menu variant=\"light\" as={CustomMenu} id=\"bg-nested-dropdown\">\n\t\t\t\t\t\t\t\t\t\t{this.props.categorical.map( ( v, i ) => {\n\t\t\t\t\t\t\t\t\t\t\treturn <Dropdown.Item key={i} onClick={this.insertVarFactory( v )} eventKey={i}>{v}</Dropdown.Item>;\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</Dropdown.Menu>\n\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t</ButtonToolbar>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Card className=\"mb-2\" >\n\t\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t\t<ButtonToolbar style={{ marginBottom: 5 }} >\n\t\t\t\t\t\t\t\t\t<ButtonGroup size=\"sm\" className=\"mr-2\" >\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" onClick={this.insertLiteralFactory(' < ')} >{'<'}</Button>\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" onClick={this.insertLiteralFactory(' > ')} >{'>'}</Button>\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" onClick={this.insertLiteralFactory(' <= ')} >{'<='}</Button>\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" onClick={this.insertLiteralFactory(' >= ')} >{'>='}</Button>\n\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t\t<ButtonGroup size=\"sm\" className=\"mr-2\" >\n\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('open-parenthesis')} ><Button variant=\"light\" onClick={this.insertLiteralFactory(' ( ')} >(</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('closing-parenthesis')} ><Button variant=\"light\" onClick={this.insertLiteralFactory(' ) ')} >)</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t\t<ButtonGroup size=\"sm\" className=\"mr-2\" >\n\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('addition')}><Button variant=\"light\" onClick={this.insertLiteralFactory(' + ')} >+</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('subtraction')}><Button variant=\"light\" onClick={this.insertLiteralFactory(' - ')} >-</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('multiplication')}><Button variant=\"light\" onClick={this.insertLiteralFactory(' * ')} >*</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('division')}><Button variant=\"light\" onClick={this.insertLiteralFactory(' / ')} >/</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t\t<ButtonGroup size=\"sm\" className=\"mr-2\" >\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" onClick={this.insertLiteralFactory(' && ')} >{t('and')}</Button>\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" onClick={this.insertLiteralFactory(' || ')} >{t('or')}</Button>\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" onClick={this.insertLiteralFactory(' !')} >{t('not')}</Button>\n\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t\t<ButtonGroup size=\"sm\" className=\"me-2\">\n\t\t\t\t\t\t\t\t\t\t{FUNCTION_KEYS.map( ( v, i ) => {\n\t\t\t\t\t\t\t\t\t\t\treturn <Button key={i} variant=\"light\" onClick={this.insertFuncFactory( v )} eventKey={i}>{v}</Button>;\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t</ButtonToolbar>\n\t\t\t\t\t\t\t\t<ButtonToolbar>\n\t\t\t\t\t\t\t\t\t<ButtonGroup size=\"sm\" className=\"mr-2\" >\n\t\t\t\t\t\t\t\t\t\t{DIGITS.map( ( d, i ) => {\n\t\t\t\t\t\t\t\t\t\t\treturn <Button key={i} variant=\"light\" onClick={this.insertLiteralFactory( `${d}`)} >{d}</Button>;\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" onClick={this.insertLiteralFactory('.')} >.</Button>\n\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t</ButtonToolbar>\n\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t<Card className=\"mb-2\" >\n\t\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t\t<TextArea\n\t\t\t\t\t\t\t\t\tref={div => { this.textarea = div; }}\n\t\t\t\t\t\t\t\t\tlegend=\"Expression:\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter formula...\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.code}\n\t\t\t\t\t\t\t\t\tonChange={this.handleCodeChange}\n\t\t\t\t\t\t\t\t\tonBlur={( event ) => {\n\t\t\t\t\t\t\t\t\t\tconst selectionStart = event.target.selectionStart;\n\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\tselection: selectionStart\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t<FormGroup style={{ margin: 8 }}>\n\t\t\t\t\t\t\t<FormLabel>{t('name-new-variable')}:</FormLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder={t('select-name')}\n\t\t\t\t\t\t\t\tonChange={this.handleNameChange}\n\t\t\t\t\t\t\t\tonKeyPress={this.handleKeyPress}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormText>\n\t\t\t\t\t\t\t\t{t('new-variable-appended')}\n\t\t\t\t\t\t\t</FormText>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</div>\n\t\t\t\t</Panel>\n\t\t\t</Draggable>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nFormulaTransformer.defaultProps = {\n\tlogAction() {},\n\tonGenerate() {},\n\tdefaultCode: '',\n\tsession: {}\n};\n\nFormulaTransformer.propTypes = {\n\tshow: PropTypes.bool.isRequired,\n\tcategorical: PropTypes.array.isRequired,\n\tquantitative: PropTypes.array.isRequired,\n\tdata: PropTypes.object.isRequired,\n\tdefaultCode: PropTypes.string,\n\tlogAction: PropTypes.func,\n\tonGenerate: PropTypes.func,\n\tonHide: PropTypes.func.isRequired,\n\tsession: PropTypes.object\n};\n\n\n// EXPORTS //\n\nexport default FormulaTransformer;\n","// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport Draggable from '@isle-project/components/draggable';\nimport Panel from '@isle-project/components/panel';\nimport Button from 'react-bootstrap/Button';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport FormText from 'react-bootstrap/FormText';\nimport Table from '@isle-project/components/table';\nimport objectKeys from '@stdlib/utils/keys';\nimport countBy from '@stdlib/utils/count-by';\nimport identity from '@stdlib/utils/identity-function';\nimport copy from '@stdlib/utils/copy';\nimport replace from '@stdlib/string/replace';\nimport isDigitString from '@stdlib/assert/is-digit-string';\nimport SelectInput from '@isle-project/components/input/select';\nimport CheckboxInput from '@isle-project/components/input/checkbox';\nimport Tooltip from '@isle-project/components/tooltip';\nimport { DATA_EXPLORER_CAT_TRANSFORMER } from '@isle-project/constants/actions.js';\nimport recodeCategorical from './recode_categorical';\nimport extractUsedCategories from '@isle-project/utils/extract-used-categories';\nimport './categorical_transformer.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:data-explorer:variable-transformer' );\n\n\n// FUNCTIONS //\n\nfunction escapeDots( str ) {\n\tif ( !str ) {\n\t\treturn str;\n\t}\n\treturn replace( str, '.', '[dot]' );\n}\n\nfunction checkNumericLabels( nameMappings ) {\n\tconst keys = objectKeys( nameMappings );\n\tlet allNumeric = true;\n\tfor ( let i = 0; i < keys.length; i++ ) {\n\t\tif ( !isDigitString( nameMappings[ keys[ i ] ] ) ) {\n\t\t\tallNumeric = false;\n\t\t}\n\t}\n\treturn allNumeric;\n}\n\n\n// MAIN //\n\nclass CategoricalTransformer extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst firstVar = props.categorical[ 0 ];\n\t\tconst firstValues = props.data[ firstVar ];\n\t\tconst firstFreqs = countBy( firstValues, identity );\n\t\tconst keys = extractUsedCategories( firstFreqs, firstVar );\n\t\tconst nameMappings = {};\n\t\tfor ( let i = 0; i < keys.length; i++ ) {\n\t\t\tnameMappings[ escapeDots( keys[ i ] ) ] = keys[ i ];\n\t\t}\n\t\tthis.state = {\n\t\t\tgeneratedName: '',\n\t\t\tfirstVar,\n\t\t\tfirstFreqs,\n\t\t\tnameMappings,\n\t\t\tsecondVar: null,\n\t\t\tsecondFreqs: null,\n\t\t\tcastNumeric: false,\n\t\t\tonlyNumbers: false\n\t\t};\n\t}\n\n\thandleFirstVariableChange = ( variable ) => {\n\t\tconst nameMappings = {};\n\t\tlet firstFreqs;\n\t\tif ( !this.state.secondVar ) {\n\t\t\tconst firstValues = this.props.data[ variable ];\n\t\t\tfirstFreqs = countBy( firstValues, identity );\n\t\t\tconst keys = extractUsedCategories( firstFreqs, variable );\n\t\t\tfor ( let i = 0; i < keys.length; i++ ) {\n\t\t\t\tnameMappings[ escapeDots( keys[ i ] ) ] = keys[ i ];\n\t\t\t}\n\t\t} else {\n\t\t\tconst firstVar = variable;\n\t\t\tconst secondVar = this.state.secondVar;\n\t\t\tconst firstValues = this.props.data[ firstVar ];\n\t\t\tfirstFreqs = countBy( firstValues, identity );\n\t\t\tconst firstKeys = extractUsedCategories( firstFreqs, firstVar );\n\t\t\tconst secondKeys = extractUsedCategories( this.state.secondFreqs, secondVar );\n\t\t\tfor ( let i = 0; i < firstKeys.length; i++ ) {\n\t\t\t\tfor ( let j = 0; j < secondKeys.length; j++ ) {\n\t\t\t\t\tconst label = firstKeys[ i ] + '-' + secondKeys[ j ];\n\t\t\t\t\tnameMappings[ escapeDots( label ) ] = label;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst onlyNumbers = checkNumericLabels( nameMappings );\n\t\tthis.setState({\n\t\t\tfirstVar: variable,\n\t\t\tfirstFreqs,\n\t\t\tnameMappings,\n\t\t\tonlyNumbers\n\t\t});\n\t}\n\n\thandleSecondVariableChange = ( secondVar ) => {\n\t\tif ( !secondVar ) {\n\t\t\t// Case: Resetting the second variable...\n\t\t\tconst firstVar = this.state.firstVar;\n\t\t\tconst keys = extractUsedCategories( this.state.firstFreqs, firstVar );\n\t\t\tconst nameMappings = {};\n\t\t\tfor ( let i = 0; i < keys.length; i++ ) {\n\t\t\t\tnameMappings[ escapeDots( keys[ i ] ) ] = keys[ i ];\n\t\t\t}\n\t\t\treturn this.setState({\n\t\t\t\tsecondVar,\n\t\t\t\tnameMappings\n\t\t\t});\n\t\t}\n\t\t// Case: Have both a second and first variable...\n\t\tconst nameMappings = {};\n\t\tconst firstVar = this.state.firstVar;\n\t\tconst secondValues = this.props.data[ secondVar ];\n\t\tconst secondFreqs = countBy( secondValues, identity );\n\t\tconst firstKeys = extractUsedCategories( this.state.firstFreqs, firstVar );\n\t\tconst secondKeys = extractUsedCategories( secondFreqs, secondVar );\n\t\tfor ( let i = 0; i < firstKeys.length; i++ ) {\n\t\t\tfor ( let j = 0; j < secondKeys.length; j++ ) {\n\t\t\t\tconst label = firstKeys[ i ] + '-' + secondKeys[ j ];\n\t\t\t\tnameMappings[ escapeDots( label ) ] = label;\n\t\t\t}\n\t\t}\n\t\tconst onlyNumbers = checkNumericLabels( nameMappings );\n\t\tthis.setState({\n\t\t\tsecondVar,\n\t\t\tsecondFreqs,\n\t\t\tnameMappings,\n\t\t\tonlyNumbers\n\t\t});\n\t}\n\n\thandleKeyPress = ( event ) => {\n\t\tif ( event.charCode === 13 && this.state.generatedName.length >= 2 ) {\n\t\t\tthis.makeNewVar();\n\t\t}\n\t}\n\n\trenderTable() {\n\t\tif ( this.state.firstVar && this.state.secondVar ) {\n\t\t\treturn this.renderContingencyTable();\n\t\t}\n\t\tif ( this.state.firstVar || this.state.secondVar ) {\n\t\t\treturn this.renderFrequencyTable();\n\t\t}\n\t\treturn null;\n\t}\n\n\tchangeFreqFactory = ( oldLabel ) => {\n\t\treturn ( event ) => {\n\t\t\tconst nameMappings = copy( this.state.nameMappings );\n\t\t\tnameMappings[ escapeDots( oldLabel ) ] = event.target.value;\n\t\t\tconst onlyNumbers = checkNumericLabels( nameMappings );\n\t\t\tthis.setState({\n\t\t\t\tnameMappings,\n\t\t\t\tonlyNumbers\n\t\t\t});\n\t\t};\n\t}\n\n\tchangeContigencyFactory = ( rowLabel, colLabel ) => {\n\t\treturn ( event ) => {\n\t\t\tconst nameMappings = copy( this.state.nameMappings );\n\t\t\tnameMappings[ escapeDots( colLabel ) + '-' + escapeDots( rowLabel ) ] = event.target.value;\n\t\t\tthis.setState({\n\t\t\t\tnameMappings\n\t\t\t});\n\t\t};\n\t}\n\n\thandleGeneratedNameChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tgeneratedName: event.target.value\n\t\t});\n\t}\n\n\tmakeNewVar = () => {\n\t\tdebug( 'Generating new categorical variable...' );\n\t\tconst { firstVar, secondVar, nameMappings, castNumeric } = this.state;\n\t\tconst newVar = recodeCategorical( firstVar, secondVar, nameMappings, this.props.data, castNumeric );\n\t\tthis.props.onGenerate( this.state.generatedName, newVar );\n\t\tthis.props.logAction( DATA_EXPLORER_CAT_TRANSFORMER, {\n\t\t\tname: this.state.generatedName,\n\t\t\tfirstVar: firstVar,\n\t\t\tsecondVar: secondVar,\n\t\t\tnameMappings: nameMappings,\n\t\t\tcastNumeric: castNumeric\n\t\t});\n\t\tthis.props.onHide();\n\t}\n\n\trenderFrequencyTable = () => {\n\t\tconst variable = this.state.firstVar;\n\t\tconst values = this.props.data[ variable ];\n\t\tconst varFreqs = countBy( values, identity );\n\t\tconst keys = extractUsedCategories( varFreqs, variable );\n\t\treturn (\n\t\t\t<Table bordered style={{ margin: 8 }} >\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>{this.props.t('old')}:</th>\n\t\t\t\t\t\t{keys.map( ( val, idx ) => {\n\t\t\t\t\t\t\treturn <th key={`${variable}-${idx}-old`}>{val}</th>;\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>{this.props.t('new')}:</th>\n\t\t\t\t\t\t{keys.map( ( val, idx ) => {\n\t\t\t\t\t\t\treturn ( <th key={`${variable}-${idx}-new`}>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName=\"transformer-table-input\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tdefaultValue={val}\n\t\t\t\t\t\t\t\t\tonChange={this.changeFreqFactory( val )}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</th> );\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr style={{ borderTop: '1px solid black' }}>\n\t\t\t\t\t\t<th>{this.props.t('frequencies')}:</th>\n\t\t\t\t\t\t{keys.map( ( label, idx ) => {\n\t\t\t\t\t\t\tconst freq = this.state.firstFreqs[ label ];\n\t\t\t\t\t\t\treturn <td key={`${variable}-${idx}-freq`}>{freq}</td>;\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</Table>\n\t\t);\n\t}\n\n\trenderContingencyTable = () => {\n\t\tconst rowVar = this.state.secondVar;\n\t\tconst colVar = this.state.firstVar;\n\t\tconst rowValues = this.props.data[ rowVar ];\n\t\tconst colValues = this.props.data[ colVar ];\n\t\tconst rowFreqs = countBy( rowValues, identity );\n\t\tconst colFreqs = countBy( colValues, identity );\n\t\tconst rowKeys = extractUsedCategories( rowFreqs, rowVar );\n\t\tconst colKeys = extractUsedCategories( colFreqs, colVar );\n\t\treturn (\n\t\t\t<Table bordered style={{ margin: 8 }}>\n\t\t\t\t<tr>\n\t\t\t\t\t<th></th>\n\t\t\t\t\t{colKeys.map( ( col, idx ) => {\n\t\t\t\t\t\treturn ( <th key={`${col}-${idx}`}>\n\t\t\t\t\t\t\t{col}\n\t\t\t\t\t\t</th> );\n\t\t\t\t\t})}\n\t\t\t\t</tr>\n\t\t\t\t{rowKeys.map( ( row, idx ) => {\n\t\t\t\t\treturn ( <tr key={`${row}-${idx}`}>\n\t\t\t\t\t\t<th>{row}</th>\n\t\t\t\t\t\t{colKeys.map( ( col, idx ) => {\n\t\t\t\t\t\t\treturn ( <td key={`${row}-${col}-${idx}`}>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName=\"transformer-table-input\"\n\t\t\t\t\t\t\t\t\ttype=\"text\" defaultValue={`${col}-${row}`}\n\t\t\t\t\t\t\t\t\tonChange={this.changeContigencyFactory( row, col )}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td> );\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr> );\n\t\t\t\t})}\n\t\t\t</Table>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Draggable cancel=\".card-body\" onDragStart={( event ) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}} style={{ zIndex: 1006 }} >\n\t\t\t\t<Panel\n\t\t\t\t\tonHide={this.props.onHide}\n\t\t\t\t\tshow={this.props.show}\n\t\t\t\t\theader={t('categorical-transformer-header')}\n\t\t\t\t\tfooter={<Button onClick={this.makeNewVar} disabled={this.state.generatedName.length < 2}>\n\t\t\t\t\t\t{t('create-new-variable')}\n\t\t\t\t\t</Button>}\n\t\t\t\t\tbodyStyle={{\n\t\t\t\t\t\tmaxHeight: 'calc(100vh - 200px)',\n\t\t\t\t\t\toverflowY: 'auto',\n\t\t\t\t\t\tposition: 'relative'\n\t\t\t\t\t}}\n\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col md={4}>\n\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\tlegend={t('first-variable')}\n\t\t\t\t\t\t\t\tdefaultValue={this.state.firstVar || ''}\n\t\t\t\t\t\t\t\toptions={this.props.categorical}\n\t\t\t\t\t\t\t\tonChange={this.handleFirstVariableChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col md={4}>\n\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\tclearable\n\t\t\t\t\t\t\t\tlegend={t('optional-second-variable')}\n\t\t\t\t\t\t\t\tdefaultValue={this.state.secondVar || ''}\n\t\t\t\t\t\t\t\toptions={this.props.categorical}\n\t\t\t\t\t\t\t\tonChange={this.handleSecondVariableChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row style={{ overflowX: 'auto', width: '100%' }}>\n\t\t\t\t\t\t{this.renderTable()}\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Tooltip tooltip={t('treat-labels-as-numbers-tooltip')}>\n\t\t\t\t\t\t\t<CheckboxInput\n\t\t\t\t\t\t\t\tlegend={t('treat-labels-as-numbers')}\n\t\t\t\t\t\t\t\tdefaultValue={false}\n\t\t\t\t\t\t\t\tdisabled={!this.state.onlyNumbers}\n\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tcastNumeric: !this.state.castNumeric\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<FormGroup style={{ margin: 8 }}>\n\t\t\t\t\t\t\t<FormLabel>{t('name-new-variable')}:</FormLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder={t('select-name')}\n\t\t\t\t\t\t\t\tonChange={this.handleGeneratedNameChange}\n\t\t\t\t\t\t\t\tonKeyPress={this.handleKeyPress}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormText>\n\t\t\t\t\t\t\t\t{t('new-variable-appended')}\n\t\t\t\t\t\t\t</FormText>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</Row>\n\t\t\t\t</Panel>\n\t\t\t</Draggable>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nCategoricalTransformer.defaultProps = {\n\tlogAction() {}\n};\n\nCategoricalTransformer.propTypes = {\n\tcategorical: PropTypes.array.isRequired,\n\tdata: PropTypes.object.isRequired,\n\tonGenerate: PropTypes.func.isRequired,\n\tlogAction: PropTypes.func,\n\tonHide: PropTypes.func.isRequired,\n\tshow: PropTypes.bool.isRequired\n};\n\n\n// EXPORTS //\n\nexport default CategoricalTransformer;\n","// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport Button from 'react-bootstrap/Button';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport FormText from 'react-bootstrap/FormText';\nimport sample from '@stdlib/random/sample';\nimport absdiff from '@stdlib/math/base/utils/absolute-difference';\nimport objectKeys from '@stdlib/utils/keys';\nimport TextInput from '@isle-project/components/input/text';\nimport NumberInput from '@isle-project/components/input/number';\nimport Draggable from '@isle-project/components/draggable';\nimport Panel from '@isle-project/components/panel';\nimport { DATA_EXPLORER_GROUP_TRANSFORMER } from '@isle-project/constants/actions.js';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:data-explorer:group-transformer' );\n\n\n// MAIN //\n\nclass GroupTransformer extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tgeneratedName: '',\n\t\t\tnGroups: 2,\n\t\t\tgroupProbs: [ 0.5, 0.5 ],\n\t\t\tlabels: [ 'Group 1', 'Group 2' ]\n\t\t};\n\t}\n\n\thandleGeneratedNameChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tgeneratedName: event.target.value\n\t\t});\n\t}\n\n\thandleGroupNumberChange = ( nGroups ) => {\n\t\tconst groupProbs = new Array( nGroups ).fill( 1/nGroups );\n\t\tconst labels = new Array( nGroups );\n\t\tfor ( let i = 0; i < labels.length; i++ ) {\n\t\t\tlabels[ i ] = `${this.props.t('group')} ${i+1}`;\n\t\t}\n\t\tthis.setState({\n\t\t\tgroupProbs,\n\t\t\tlabels,\n\t\t\tnGroups\n\t\t});\n\t}\n\n\thandleKeyPress = ( event ) => {\n\t\tif ( event.charCode === 13 ) {\n\t\t\tlet sum = 0.0;\n\t\t\tfor ( let i = 0; i < this.state.groupProbs.length; i++ ) {\n\t\t\t\tsum += this.state.groupProbs[ i ];\n\t\t\t}\n\t\t\tconst hasValidValues = this.state.generatedName.length > 2 && absdiff( sum, 1.0 ) <= 1.5e-8;\n\t\t\tif ( hasValidValues ) {\n\t\t\t\tthis.makeNewVar();\n\t\t\t}\n\t\t}\n\t}\n\n\tmakeNewVar = () => {\n\t\tdebug( 'Generating new categorical variable...' );\n\t\tconst keys = objectKeys( this.props.data );\n\t\tconst nobs = this.props.data[ keys[ 0 ] ].length;\n\n\t\tconst values = sample( this.state.labels, {\n\t\t\tsize: nobs,\n\t\t\tprobs: this.state.groupProbs,\n\t\t\treplace: true\n\t\t});\n\t\tthis.props.onGenerate( this.state.generatedName, values );\n\t\tthis.props.logAction( DATA_EXPLORER_GROUP_TRANSFORMER, {\n\t\t\tname: this.state.generatedName,\n\t\t\tlabels: this.state.labels,\n\t\t\tgroupProbs: this.state.groupProbs\n\t\t});\n\t\tthis.props.onHide();\n\t}\n\n\trenderTable() {\n\t\tconst elems = new Array( this.state.nGroups );\n\t\tfor ( let i = 0; i < elems.length; i++ ) {\n\t\t\telems[ i ] = <Row key={i} >\n\t\t\t\t<Col>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tlegend={`Label for Group ${i+1}`}\n\t\t\t\t\t\tdefaultValue={this.state.labels[ i ]}\n\t\t\t\t\t\tonChange={( val ) => {\n\t\t\t\t\t\t\tconst labels = this.state.labels.slice();\n\t\t\t\t\t\t\tlabels[ i ] = val;\n\t\t\t\t\t\t\tthis.setState({ labels });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Col>\n\t\t\t\t<Col>\n\t\t\t\t\t<NumberInput\n\t\t\t\t\t\tlegend=\"Group Proportion\"\n\t\t\t\t\t\tonChange={( val ) => {\n\t\t\t\t\t\t\tconst groupProbs = this.state.groupProbs.slice();\n\t\t\t\t\t\t\tgroupProbs[ i ] = val;\n\t\t\t\t\t\t\tthis.setState({ groupProbs });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdefaultValue={this.state.groupProbs[ i ]}\n\t\t\t\t\t\tstep={0.01}\n\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\tmax={1}\n\t\t\t\t\t\tnumbersOnly={false}\n\t\t\t\t\t/>\n\t\t\t\t</Col>\n\t\t\t</Row>;\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{elems}\n\t\t\t\t<p>{this.props.t('proportions-sum-one')}</p>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trender() {\n\t\tlet sum = 0.0;\n\t\tfor ( let i = 0; i < this.state.groupProbs.length; i++ ) {\n\t\t\tsum += this.state.groupProbs[ i ];\n\t\t}\n\t\tconst hasValidValues = this.state.generatedName.length > 2 && absdiff( sum, 1.0 ) <= 1.5e-8;\n\t\treturn (\n\t\t\t<Draggable cancel=\".card-body\" onDragStart={( event ) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}} style={{ zIndex: 1006 }} >\n\t\t\t\t<Panel\n\t\t\t\t\tonHide={this.props.onHide}\n\t\t\t\t\tshow={this.props.show}\n\t\t\t\t\theader={this.props.t('group-transformer-header')}\n\t\t\t\t\tfooter={<Button onClick={this.makeNewVar} disabled={!hasValidValues}>\n\t\t\t\t\t\t{this.props.t('create-new-variable')}\n\t\t\t\t\t</Button>}\n\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\tbodyStyle={{\n\t\t\t\t\t\tmaxHeight: 'calc(100vh - 200px)',\n\t\t\t\t\t\toverflowY: 'auto',\n\t\t\t\t\t\tposition: 'relative'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t<NumberInput\n\t\t\t\t\t\t\t\tlegend={this.props.t('number-of-groups')}\n\t\t\t\t\t\t\t\tonChange={this.handleGroupNumberChange}\n\t\t\t\t\t\t\t\tdefaultValue={this.state.nGroups}\n\t\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\t\tmax={99}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t{this.renderTable()}\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<FormGroup style={{ margin: 8 }}>\n\t\t\t\t\t\t\t<FormLabel>{this.props.t('name-new-variable')}:</FormLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder={this.props.t('select-name')}\n\t\t\t\t\t\t\t\tonChange={this.handleGeneratedNameChange}\n\t\t\t\t\t\t\t\tonKeyPress={this.handleKeyPress}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormText>\n\t\t\t\t\t\t\t\t{this.props.t('new-variable-appended')}\n\t\t\t\t\t\t\t</FormText>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</Row>\n\t\t\t\t</Panel>\n\t\t\t</Draggable>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nGroupTransformer.defaultProps = {\n\tlogAction() {}\n};\n\nGroupTransformer.propTypes = {\n\tdata: PropTypes.object.isRequired,\n\tonGenerate: PropTypes.func.isRequired,\n\tlogAction: PropTypes.func,\n\tonHide: PropTypes.func.isRequired,\n\tshow: PropTypes.bool.isRequired\n};\n\n\n// EXPORTS //\n\nexport default GroupTransformer;\n","// MODULES //\n\nimport React, { useState, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'react-bootstrap/Button';\nimport BinTransformer from './bin_transformer.js';\nimport FormulaTransformer from './formula_transformer.js';\nimport CategoricalModal from './categorical_transformer.js';\nimport GroupModal from './group_transformer.js';\n\n\n// MAIN //\n\nconst Transformer = ( props ) => {\n\tconst { data, categorical, quantitative, t, session, defaultCode, logAction, onGenerate } = props;\n\tconst [ active, setActive ] = useState( null );\n\n\tconst toggleFormulaModal = () => {\n\t\tconst newActive = active === 'formula' ? null : 'formula';\n\t\tsetActive( newActive );\n\t\tprops.onActive( newActive );\n\t};\n\tconst toggleBinModal = () => {\n\t\tconst newActive = active === 'bin' ? null : 'bin';\n\t\tsetActive( newActive );\n\t\tprops.onActive( newActive );\n\t};\n\tconst toggleCategoricalModal = () => {\n\t\tconst newActive = active === 'categorical' ? null : 'categorical';\n\t\tsetActive( newActive );\n\t\tprops.onActive( newActive );\n\t};\n\tconst toggleGroupModal = () => {\n\t\tconst newActive = active === 'group' ? null : 'group';\n\t\tsetActive( newActive );\n\t\tprops.onActive( newActive );\n\t};\n\tlet modal;\n\tif ( data ) {\n\t\tswitch ( active ) {\n\t\t\tcase 'bin':\n\t\t\t\tmodal = <BinTransformer\n\t\t\t\t\tshow={true}\n\t\t\t\t\tonHide={toggleBinModal}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tlogAction={logAction}\n\t\t\t\t\tonGenerate={onGenerate}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tt={t}\n\t\t\t\t/>;\n\t\t\tbreak;\n\t\t\tcase 'categorical':\n\t\t\t\tmodal = <CategoricalModal\n\t\t\t\t\tshow={true}\n\t\t\t\t\tonHide={toggleCategoricalModal}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tlogAction={logAction}\n\t\t\t\t\tonGenerate={onGenerate}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tt={t}\n\t\t\t\t/>;\n\t\t\tbreak;\n\t\t\tcase 'formula':\n\t\t\t\tmodal = <FormulaTransformer\n\t\t\t\t\tshow={true}\n\t\t\t\t\tonHide={toggleFormulaModal}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tdefaultCode={defaultCode}\n\t\t\t\t\tlogAction={logAction}\n\t\t\t\t\tonGenerate={onGenerate}\n\t\t\t\t\tsession={session}\n\t\t\t\t\tt={t}\n\t\t\t\t/>;\n\t\t\tbreak;\n\t\t\tcase 'group':\n\t\t\t\tmodal = <GroupModal\n\t\t\t\t\tshow={true}\n\t\t\t\t\tonHide={toggleGroupModal}\n\t\t\t\t\tlogAction={logAction}\n\t\t\t\t\tonGenerate={onGenerate}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tt={t}\n\t\t\t\t/>;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn (\n\t\t<Fragment>\n\t\t\t<div className=\"well\" style={{ padding: 15, margin: 15 }} >\n\t\t\t\t<div style={{ padding: 12 }} >\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={toggleFormulaModal}\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tblock\n\t\t\t\t\t\tstyle={{ fontSize: '1.2em' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('interactions-functions')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<div style={{ padding: 12 }} >\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={toggleBinModal}\n\t\t\t\t\t\tdisabled={quantitative.length === 0}\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tblock\n\t\t\t\t\t\tstyle={{ fontSize: '1.2em' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('bin-quantitative')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<div style={{ padding: 12 }} >\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={toggleCategoricalModal}\n\t\t\t\t\t\tdisabled={categorical.length === 0}\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tblock\n\t\t\t\t\t\tstyle={{ fontSize: '1.2em' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('rename-or-combine')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<div style={{ padding: 12 }} >\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={toggleGroupModal}\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tblock\n\t\t\t\t\t\tstyle={{ fontSize: '1.2em' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('create-groups')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{modal}\n\t\t</Fragment>\n\t);\n};\n\n\n// PROPERTIES //\n\nTransformer.defaultProps = {\n\tlogAction() {},\n\tonActive() {},\n\tonGenerate() {},\n\tdefaultCode: '',\n\tsession: {}\n};\n\nTransformer.propTypes = {\n\tcategorical: PropTypes.array.isRequired,\n\tquantitative: PropTypes.array.isRequired,\n\tdata: PropTypes.object.isRequired,\n\tdefaultCode: PropTypes.string,\n\tlogAction: PropTypes.func,\n\tonActive: PropTypes.func,\n\tonGenerate: PropTypes.func,\n\tsession: PropTypes.object\n};\n\n\n// EXPORTS //\n\nexport default Transformer;\n","// MODULES //\n\nimport PINF from '@stdlib/constants/math/float64-pinf';\nimport NINF from '@stdlib/constants/math/float64-ninf';\n\n\n// MAIN //\n\nfunction createTooltip( props ) {\n\tlet tooltip = `Enter a${ props.step === 1 ? 'n integer' : ' number'} `;\n\tif ( props.max !== PINF && props.min !== NINF ) {\n\t\ttooltip += `between ${props.min} and ${props.max}`;\n\t} else if ( props.min !== NINF ) {\n\t\ttooltip += `larger or equal to ${props.min}`;\n\t} else if ( props.max !== PINF ) {\n\t\ttooltip += `smaller or equal to ${props.max}`;\n\t}\n\treturn tooltip;\n}\n\n\n// EXPORTS //\n\nexport default createTooltip;\n","// MODULES //\n\nimport CheckboxInput from './main.js';\n\n\n// EXPORTS //\n\nexport default CheckboxInput;\n","// MODULES //\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport isEmptyObject from '@stdlib/assert/is-empty-object';\nimport noop from '@stdlib/utils/noop';\nimport Input from '@isle-project/components/input/base';\nimport Tooltip from '@isle-project/components/tooltip';\nimport SessionContext from '@isle-project/session/context.js';\nimport './checkbox.css';\n\n\n// MAIN //\n\n/**\n* A checkbox input component. Can be used as part of an ISLE dashboard or standalone. In the latter case, you want to handle changes via the `onChange` attribute or bind the value to a global variable via the `bind` attribute.\n*\n* @property {string} bind - name of global variable for the checkbox value to be assigned to\n* @property {boolean} defaultValue - boolean value indicating the default value of the checkbox\n* @property {boolean} value - checkbox value (for controlled component)\n* @property {boolean} disabled - indicates whether the input is active or not\n* @property {boolean} inline - indicates whether the checkbox is displayed inline\n* @property {string} legend - text displayed next to the checkbox\n* @property {string} tooltip - text displayed when hovering over checkbox\n* @property {string} tooltipPlacement - position of button tooltip\n* @property {Object} style - CSS inline styles\n* @property {Function} onChange - callback function to be invoked when checkbox is clicked. The function is called with the current checkbox value\n*/\nclass CheckboxInput extends Input {\n\tconstructor( props, context ) {\n\t\tsuper( props );\n\n\t\tconst session = context;\n\t\tthis.state = {\n\t\t\tvalue: props.bind && session.state ?\n\t\t\t\tsession.state[ props.bind ]:\n\t\t\t\tprops.defaultValue,\n\t\t\tbind: props.bind,\n\t\t\tdefaultValue: props.defaultValue\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tlet newState = {};\n\t\tif ( nextProps.defaultValue !== prevState.defaultValue ) {\n\t\t\tnewState.value = nextProps.defaultValue;\n\t\t\tnewState.defaultValue = nextProps.defaultValue;\n\t\t}\n\t\telse if ( nextProps.bind !== prevState.bind ) {\n\t\t\tnewState.value = global.lesson.state[ nextProps.bind ];\n\t\t\tnewState.bind = nextProps.bind;\n\t\t}\n\t\tif ( !isEmptyObject( newState ) ) {\n\t\t\treturn newState;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif ( this.props.bind ) {\n\t\t\tlet globalVal = global.lesson.state[ this.props.bind ];\n\t\t\tif ( globalVal !== this.state.value ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tvalue: globalVal\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateValue = ( newValue ) => {\n\t\tthis.setState({\n\t\t\tvalue: newValue\n\t\t}, () => {\n\t\t\tif ( this.props.bind ) {\n\t\t\t\tglobal.lesson.setState({\n\t\t\t\t\t[ this.props.bind ]: newValue\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\thandleChange = ( event ) => {\n\t\tconst newValue = event.target.checked;\n\t\tthis.props.onChange( newValue );\n\t\tthis.updateValue( newValue );\n\t}\n\n\thandleSpanChange = ( event ) => {\n\t\tconst newValue = this.props.value !== null ? !this.props.value : !this.state.value;\n\t\tthis.props.onChange( newValue );\n\t\tthis.updateValue( newValue );\n\t}\n\n\trender() {\n\t\tlet { value } = this.state;\n\t\tif ( this.props.value !== null ) {\n\t\t\tvalue = this.props.value;\n\t\t}\n\t\tconst input = <input\n\t\t\tclassName=\"checkbox-input\"\n\t\t\ttype=\"checkbox\"\n\t\t\tchecked={value}\n\t\t\tvalue=\"checkbox\"\n\t\t\tonChange={this.handleChange}\n\t\t\tdisabled={this.props.disabled}\n\t\t\taria-label={this.props.tooltip}\n\t\t></input>;\n\t\tif ( this.props.inline === true ) {\n\t\t\treturn (\n\t\t\t\t<Tooltip tooltip={this.props.tooltip} placement={this.props.tooltipPlacement} >\n\t\t\t\t\t<span style={{ marginLeft: '8px', ...this.props.style }}>\n\t\t\t\t\t\t{input}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\t\tclassName=\"checkbox-legend\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: this.props.disabled ? 'darkgray' : null\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={this.handleSpanChange} onKeyPress={this.handleSpanChange}\n\t\t\t\t\t\t>{this.props.legend}</span>\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\t\t\t);\n\t\t}\n\t\tconst onSpanChange = this.props.disabled ? noop : this.handleSpanChange;\n\t\treturn (\n\t\t\t<Tooltip tooltip={this.props.tooltip} placement={this.props.tooltipPlacement} >\n\t\t\t\t<div className=\"input checkbox-input-div\" style={this.props.style}>\n\t\t\t\t\t{input}\n\t\t\t\t\t<span\n\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\tclassName=\"checkbox-legend\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: this.props.disabled ? 'darkgray' : null\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClick={onSpanChange} onKeyPress={onSpanChange}\n\t\t\t\t\t>{this.props.legend}</span>\n\t\t\t\t</div>\n\t\t\t</Tooltip>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nCheckboxInput.defaultProps = {\n\tbind: '',\n\tonChange() {},\n\tdefaultValue: false,\n\tvalue: null,\n\tdisabled: false,\n\tinline: false,\n\tlegend: '',\n\ttooltip: '',\n\ttooltipPlacement: 'right',\n\tstyle: {}\n};\n\nCheckboxInput.propTypes = {\n\tbind: PropTypes.string,\n\tdefaultValue: PropTypes.bool,\n\tvalue: PropTypes.bool,\n\tdisabled: PropTypes.bool,\n\tinline: PropTypes.bool,\n\tonChange: PropTypes.func,\n\tlegend: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.node\n\t]),\n\ttooltip: PropTypes.string,\n\ttooltipPlacement: PropTypes.oneOf([ 'left', 'top', 'right', 'bottom' ]),\n\tstyle: PropTypes.object\n};\n\nCheckboxInput.contextType = SessionContext;\n\n\n// EXPORTS //\n\nexport default CheckboxInput;\n","// MODULES //\n\nimport NumberInput from './main';\nimport CreateTooltip from './create_tooltip.js';\n\n\n// EXPORTS //\n\nexport const createTooltip = CreateTooltip;\nexport default NumberInput;\n","// MODULES //\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport Input from '@isle-project/components/input/base';\nimport contains from '@stdlib/assert/contains';\nimport isnan from '@stdlib/math/base/assert/is-nan';\nimport { isPrimitive as isString } from '@stdlib/assert/is-string';\nimport { isPrimitive as isNumber } from '@stdlib/assert/is-number';\nimport isEmptyObject from '@stdlib/assert/is-empty-object';\nimport PINF from '@stdlib/constants/math/float64-pinf';\nimport NINF from '@stdlib/constants/math/float64-ninf';\nimport Tooltip from '@isle-project/components/tooltip';\nimport SessionContext from '@isle-project/session/context.js';\nimport generateUID from '@isle-project/utils/uid';\nimport createTooltip from './create_tooltip.js';\nimport './number.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:number-input' );\nconst uid = generateUID( 'number-input' );\n\n\n// MAIN //\n\n/**\n* A number input component. Can be used as part of an ISLE dashboard or standalone. In the latter case, you want to handle changes via the `onChange` attribute or bind the value to a global variable via the `bind` attribute.\n*\n* @property {string} bind - name of global variable for the number to be assigned to\n* @property {number} value - number value (for controlled component)\n* @property {number} defaultValue - value indicating the default value of the input at startup\n* @property {boolean} disabled - boolean indicating whether the input is active or not\n* @property {number} min - number indicating the smallest possible value that may be inserted\n* @property {number} max - number indicating the maximum value that may be inserted\n* @property {(number|string)} step - number indicating the incremental changes when using the increment arrows\n* @property {boolean} inline - indicates whether the input is displayed inline\n* @property {string} legend - string indicating the text displayed next to the number input\n* @property {boolean} numbersOnly - controls whether only numbers are accepted\n* @property {string} tooltip - tooltip string (if not set, the tooltip is automatically generated)\n* @property {string} tooltipPlacement - direction of the tooltip\n* @property {Object} style - CSS inline styles\n* @property {Object} inputStyle - CSS inline styles for input element\n* @property {Function} onBlur - callback function to be invoked when using a blur method\n* @property {Function} onChange - callback function to be invoked when number input is changed\n* @property {Function} onKeyPress - callback function to be invoked when any key is entered\n* @property {Function} onKeyDown - callback function to be invoked when any key is pressed down\n* @property {Function} onKeyUp - callback function to be invoked when key is released\n*/\nclass NumberInput extends Input {\n\tconstructor( props, context ) {\n\t\tsuper( props );\n\n\t\tconst session = context;\n\t\tthis.id = props.id || uid( props );\n\t\tthis.state = {\n\t\t\tvalue: props.value || (props.bind && session.state ?\n\t\t\t\tsession.state[ props.bind ]:\n\t\t\t\tprops.defaultValue),\n\t\t\ttooltip: props.tooltip || createTooltip( props ),\n\t\t\tprevProps: props\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tlet newState = {};\n\t\tconst { prevProps } = prevState;\n\t\tif ( nextProps.defaultValue !== prevProps.defaultValue ) {\n\t\t\tnewState.value = nextProps.defaultValue;\n\t\t}\n\t\telse if ( nextProps.bind !== prevProps.bind ) {\n\t\t\tnewState.value = global.lesson.state[ nextProps.bind ];\n\t\t}\n\t\tif ( nextProps.min !== prevProps.min || nextProps.max !== prevProps.max ) {\n\t\t\tnewState.tooltip = nextProps.tooltip || createTooltip( nextProps );\n\t\t}\n\t\telse if ( nextProps.tooltip && nextProps.tooltip !== prevState.tooltip ) {\n\t\t\tnewState.tooltip = nextProps.tooltip;\n\t\t}\n\t\tif ( !isEmptyObject( newState ) ) {\n\t\t\tdebug( 'Created new state from props...' );\n\t\t\tnewState.prevProps = nextProps;\n\t\t\treturn newState;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcomponentDidUpdate() {\n\t\tdebug( 'Component did update...' );\n\t\tif ( this.props.bind ) {\n\t\t\tconst globalVal = global.lesson.state[ this.props.bind ];\n\t\t\tif ( globalVal !== this.state.value && isNumber( this.state.value ) ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tvalue: globalVal\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\thandleChange = ( event ) => {\n\t\tdebug( 'Handle change of input field...' );\n\t\tlet valid = event.target.validity.valid;\n\t\tlet value = event.target.value;\n\t\tthis.setState({\n\t\t\tvalue\n\t\t}, () => {\n\t\t\tif ( this.props.value ||\n\t\t\t\t(valid && value !== '' &&\n\t\t\t\tvalue !== '-' && value !== '.' && value !== '-.' )\n\t\t\t) {\n\t\t\t\tvalue = parseFloat( value );\n\t\t\t\tif ( isnan( value ) ) {\n\t\t\t\t\tvalue = '';\n\t\t\t\t}\n\t\t\t\tthis.props.onChange( value );\n\t\t\t\tif ( this.props.bind ) {\n\t\t\t\t\tglobal.lesson.setState({\n\t\t\t\t\t\t[ this.props.bind ]: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if ( this.props.bind ) {\n\t\t\t\tglobal.lesson.setState({\n\t\t\t\t\t[ this.props.bind ]: value\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tfinishChange = ( event ) => {\n\t\tconst { max, min, step } = this.props;\n\t\tdebug( 'Finished change...' );\n\t\tlet value = event.target.value;\n\t\tif ( contains( value, '/' ) ) {\n\t\t\tdebug( 'Encountered a fraction...' );\n\t\t\tlet vals = value.split( '/' );\n\t\t\tif ( vals[ 0 ] !== '' && vals[ 1 ] !== '' ) {\n\t\t\t\tvalue = parseFloat( vals[ 0 ]) / parseFloat( vals[ 1 ]);\n\t\t\t}\n\t\t}\n\t\tif ( isnan( value ) ) {\n\t\t\tvalue = '';\n\t\t}\n\t\telse if (\n\t\t\tvalue !== '' && value !== '-' &&\n\t\t\tvalue !== '.' && value !== '-.'\n\t\t) {\n\t\t\tvalue = parseFloat( value );\n\t\t}\n\t\tif ( value > max ) {\n\t\t\tvalue = max;\n\t\t}\n\t\telse if ( value < min ) {\n\t\t\tvalue = min;\n\t\t}\n\t\telse if (\n\t\t\tstep === 1.0 && value !== '' &&\n\t\t\tvalue !== '-' && value !== '.' && value !== '-.'\n\t\t) {\n\t\t\tvalue = value - value % this.props.step;\n\t\t}\n\t\tthis.props.onChange( value );\n\t\tthis.props.onBlur( value );\n\t\tif ( value !== this.state.value ) {\n\t\t\tthis.setState({\n\t\t\t\tvalue\n\t\t\t}, () => {\n\t\t\t\tif ( this.props.bind ) {\n\t\t\t\t\tglobal.lesson.setState({\n\t\t\t\t\t\t[ this.props.bind ]: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\tlet { value } = this.state;\n\t\tif ( this.props.value !== null ) {\n\t\t\tvalue = this.props.value;\n\t\t}\n\t\tif ( this.props.inline === true ) {\n\t\t\tconst input =\n\t\t\t\t<span className=\"input\" style={{ padding: '5px', ...this.props.style }}>\n\t\t\t\t\t{ this.props.legend ? <label htmlFor={this.id} > {this.props.legend} =  </label> : null }\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={this.id}\n\t\t\t\t\t\ttype={this.props.numbersOnly ? 'number' : 'text'}\n\t\t\t\t\t\tname=\"input\"\n\t\t\t\t\t\tclassName=\"number-number-input\"\n\t\t\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tstep={this.props.step}\n\t\t\t\t\t\tmin={this.props.min}\n\t\t\t\t\t\tmax={this.props.max}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '80px',\n\t\t\t\t\t\t\tpaddingLeft: '6px',\n\t\t\t\t\t\t\tmarginLeft: '3px',\n\t\t\t\t\t\t\t...this.props.inputStyle\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\tonBlur={this.finishChange}\n\t\t\t\t\t\tonKeyPress={this.props.onKeyPress}\n\t\t\t\t\t\tonKeyDown={this.props.onKeyDown}\n\t\t\t\t\t\tonKeyUp={this.props.onKeyUp}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t/>\n\t\t\t\t\t{ this.props.description ?\n\t\t\t\t\t\t<span>({this.props.description})</span> :\n\t\t\t\t\t\t<span />\n\t\t\t\t\t}\n\t\t\t\t</span>;\n\t\t\treturn this.props.disabled ?\n\t\t\t\tinput:\n\t\t\t\t<Tooltip id=\"number-input-tooltip-inline\" placement=\"top\" tooltip={this.state.tooltip} >\n\t\t\t\t\t{input}\n\t\t\t\t</Tooltip>;\n\t\t}\n\t\tlet input = <input\n\t\t\tid={this.id}\n\t\t\ttype={this.props.numbersOnly ? 'number' : 'text'}\n\t\t\tname=\"input\"\n\t\t\tclassName=\"number-number-input\"\n\t\t\tdisabled={this.props.disabled}\n\t\t\tvalue={value}\n\t\t\tstep={this.props.step}\n\t\t\tmin={this.props.min}\n\t\t\tmax={this.props.max}\n\t\t\tstyle={{\n\t\t\t\twidth: '80px',\n\t\t\t\tmarginLeft: '24px',\n\t\t\t\t...this.props.inputStyle\n\t\t\t}}\n\t\t\tonChange={this.handleChange}\n\t\t\tonBlur={this.finishChange}\n\t\t\tonKeyPress={this.props.onKeyPress}\n\t\t\tonKeyDown={this.props.onKeyDown}\n\t\t\tonKeyUp={this.props.onKeyUp}\n\t\t\tautoComplete=\"off\"\n\t\t/>;\n\t\treturn ( <div className=\"input\" style={{\n\t\t\tmarginBottom: '4px',\n\t\t\tmarginTop: '4px',\n\t\t\t...this.props.style\n\t\t}}>\n\t\t\t{ this.props.legend ?\n\t\t\t\t<span>\n\t\t\t\t\t<label htmlFor={this.id} >\n\t\t\t\t\t\t{isString( this.props.legend ) ?\n\t\t\t\t\t\t\tthis.props.legend+':' :\n\t\t\t\t\t\t\tthis.props.legend\n\t\t\t\t\t\t}\n\t\t\t\t\t</label>\n\t\t\t\t\t{ this.props.description ?\n\t\t\t\t\t\t<span> {this.props.description}</span> :\n\t\t\t\t\t\tnull\n\t\t\t\t\t}\n\t\t\t\t</span> : null\n\t\t\t}\n\t\t\t<Tooltip\n\t\t\t\tid=\"number-input-tooltip\" placement={this.props.tooltipPlacement}\n\t\t\t\ttooltip={this.state.tooltip}\n\t\t\t><span className=\"number-input-span\" >{input}</span></Tooltip>\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nNumberInput.defaultProps = {\n\tbind: '',\n\tdisabled: false,\n\tlegend: null,\n\tmin: NINF,\n\tmax: PINF,\n\tstep: 1,\n\tdefaultValue: 0,\n\tonBlur() {},\n\tonChange() {},\n\tonKeyDown() {},\n\tonKeyPress() {},\n\tonKeyUp() {},\n\tinline: false,\n\tnumbersOnly: true,\n\tstyle: {},\n\tinputStyle: {},\n\tvalue: null,\n\ttooltip: null,\n\ttooltipPlacement: 'left'\n};\n\nNumberInput.propTypes = {\n\tbind: PropTypes.string,\n\tdefaultValue: PropTypes.number,\n\tdisabled: PropTypes.bool,\n\tinline: PropTypes.bool,\n\tlegend: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.node\n\t]),\n\tmax: PropTypes.number,\n\tmin: PropTypes.number,\n\tnumbersOnly: PropTypes.bool,\n\tonBlur: PropTypes.func,\n\tonChange: PropTypes.func,\n\tonKeyDown: PropTypes.func,\n\tonKeyPress: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tstep: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.string\n\t]),\n\tstyle: PropTypes.object,\n\tinputStyle: PropTypes.object,\n\tvalue: PropTypes.number,\n\ttooltip: PropTypes.string,\n\ttooltipPlacement: PropTypes.oneOf([ 'top', 'right', 'bottom', 'left' ])\n};\n\nNumberInput.contextType = SessionContext;\n\n\n// EXPORTS //\n\nexport default NumberInput;\n"],"sourceRoot":""}