{"version":3,"sources":["components/shibboleth/index.js","containers/visible-shibboleth/index.js"],"names":["Shibboleth","props","hash","window","location","substring","params","queryString","parse","a","this","shibboleth","res","data","message","token","id","fetchCredentials","user","getEnrollableCohorts","t","className","Card","Header","Title","as","style","textAlign","Footer","background","to","Component","withTranslation","VisibleShibboleth","connect","dispatch","shibbolethInjector","fetchCredentialsInjector","getEnrollableCohortsInjector"],"mappings":"sOA8BMA,G,2DACL,WAAaC,GAAS,IAAD,sBACpB,cAAOA,GAEP,IAAMC,EAAOC,OAAOC,SAASF,KAAKG,UAAW,IAHzB,OAIpB,EAAKC,OAASC,IAAYC,MAAON,GAJb,E,8EAOrB,sCAAAO,EAAA,sEACmBC,KAAKT,MAAMU,WAAYD,KAAKJ,QAD/C,YACOM,EADP,UAEaA,EAAIC,KAFjB,sBAGiCD,EAAIC,KAA3BC,EAHV,EAGUA,QAASC,EAHnB,EAGmBA,MAAOC,EAH1B,EAG0BA,GACP,OAAZF,EAJP,iCAKsBJ,KAAKT,MAAMgB,iBAAiB,CAAEF,QAAOC,OAL3D,QAKSE,EALT,SAOIR,KAAKT,MAAMkB,qBAAsBD,GAPrC,iD,iEAaA,WAAU,IACDE,EAAMV,KAAKT,MAAXmB,EACR,OACC,yBAAKC,UAAU,SACd,kBAACC,EAAA,EAAD,CAAMD,UAAU,eACf,kBAACC,EAAA,EAAKC,OAAN,KACC,kBAACD,EAAA,EAAKE,MAAN,CAAYC,GAAG,KAAKC,MAAO,CAAEC,UAAW,WAAxC,QACM,8CAGP,kBAACL,EAAA,EAAKM,OAAN,CAAaF,MAAO,CAAEG,WAAY,wBAAyBF,UAAW,UACrE,kBAAC,IAAD,CAAMG,GAAG,UAAUV,EAAE,iBACrB,qCACA,kBAAC,IAAD,CAAMU,GAAG,WAAWV,EAAE,2B,GAlCHW,cAsDVC,cAAiB,CAAE,UAAnBA,CAAiChC,G,gBCxChD,IAAMiC,EAAoBC,aAf1B,WACC,MAAO,MAGR,SAA6BC,GAC5B,MAAO,CACNxB,WAAYyB,YAAoBD,GAChClB,iBAAkBoB,YAA0BF,GAC5ChB,qBAAsBmB,YAA8BH,MAO5BD,CAAgDlC,GAK3DiC,a","file":"static/js/160.5815144e.chunk.js","sourcesContent":["/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Card from 'react-bootstrap/Card';\nimport { Link } from 'react-router-dom';\nimport queryString from 'query-string';\nimport 'css/login.css';\n\n\n// MAIN //\n\nclass Shibboleth extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst hash = window.location.hash.substring( 12 );\n\t\tthis.params = queryString.parse( hash );\n\t}\n\n\tasync componentDidMount() {\n\t\tconst res = await this.props.shibboleth( this.params );\n\t\tif ( res && res.data ) {\n\t\t\tconst { message, token, id } = res.data;\n\t\t\tif ( message === 'ok' ) {\n\t\t\t\tconst user = await this.props.fetchCredentials({ token, id });\n\t\t\t\tif ( user ) {\n\t\t\t\t\tthis.props.getEnrollableCohorts( user );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<div className=\"login\">\n\t\t\t\t<Card className=\"login-panel\">\n\t\t\t\t\t<Card.Header>\n\t\t\t\t\t\t<Card.Title as=\"h1\" style={{ textAlign: 'center' }} >\n\t\t\t\t\t\t\tISLE <small>Dashboard</small>\n\t\t\t\t\t\t</Card.Title>\n\t\t\t\t\t</Card.Header>\n\t\t\t\t\t<Card.Footer style={{ background: 'rgba(255,255,255,0.6)', textAlign: 'right' }}>\n\t\t\t\t\t\t<Link to=\"/login\">{t('common:login')}</Link>\n\t\t\t\t\t\t<span> | </span>\n\t\t\t\t\t\t<Link to=\"/signup\">{t('common:register')}</Link>\n\t\t\t\t\t</Card.Footer>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nShibboleth.propTypes = {\n\tfetchCredentials: PropTypes.func.isRequired,\n\tgetEnrollableCohorts: PropTypes.func.isRequired,\n\tshibboleth: PropTypes.func.isRequired\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'common' ] )( Shibboleth );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Shibboleth from 'components/shibboleth';\nimport { shibbolethInjector } from 'actions/authentication';\nimport { fetchCredentialsInjector } from 'actions/authentication';\nimport { getEnrollableCohortsInjector } from 'actions/cohort';\n\n\n// FUNCTIONS //\n\nfunction mapStateToProps() {\n\treturn {};\n}\n\nfunction mapDispatchToProps( dispatch ) {\n\treturn {\n\t\tshibboleth: shibbolethInjector( dispatch ),\n\t\tfetchCredentials: fetchCredentialsInjector( dispatch ),\n\t\tgetEnrollableCohorts: getEnrollableCohortsInjector( dispatch )\n\t};\n}\n\n\n// MAIN //\n\nconst VisibleShibboleth = connect( mapStateToProps, mapDispatchToProps )( Shibboleth );\n\n\n// EXPORTS //\n\nexport default VisibleShibboleth;\n"],"sourceRoot":""}