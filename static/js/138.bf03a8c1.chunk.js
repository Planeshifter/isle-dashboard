(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{1036:function(t,e,r){"use strict";function a(t,e){var r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}r.d(e,"a",(function(){return a}))},1331:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var a=r(670),s=r(700),n=r(775),o=r(891),i=r(1036),u=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(a.a)(this,t),(e=o.a.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");var s,u=e.rows,c=e.columns,f=r.computeLeftSingularVectors,h=void 0===f||f,l=r.computeRightSingularVectors,g=void 0===l||l,v=r.autoTranspose,m=void 0!==v&&v,b=Boolean(h),d=Boolean(g),p=!1;if(u<c)if(m){u=(s=e.transpose()).rows,c=s.columns,p=!0;var M=b;b=d,d=M}else s=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=e.clone();for(var y=Math.min(u,c),w=Math.min(u+1,c),x=new Float64Array(w),k=new n.b(u,y),S=new n.b(c,c),O=new Float64Array(c),E=new Float64Array(u),j=new Float64Array(w),V=0;V<w;V++)j[V]=V;for(var C=Math.min(u-1,c),A=Math.max(0,Math.min(c-2,u)),N=Math.max(C,A),U=0;U<N;U++){if(U<C){x[U]=0;for(var F=U;F<u;F++)x[U]=Object(i.a)(x[U],s.get(F,U));if(0!==x[U]){s.get(U,U)<0&&(x[U]=-x[U]);for(var R=U;R<u;R++)s.set(R,U,s.get(R,U)/x[U]);s.set(U,U,s.get(U,U)+1)}x[U]=-x[U]}for(var I=U+1;I<c;I++){if(U<C&&0!==x[U]){for(var q=0,L=U;L<u;L++)q+=s.get(L,U)*s.get(L,I);q=-q/s.get(U,U);for(var P=U;P<u;P++)s.set(P,I,s.get(P,I)+q*s.get(P,U))}O[I]=s.get(U,I)}if(b&&U<C)for(var _=U;_<u;_++)k.set(_,U,s.get(_,U));if(U<A){O[U]=0;for(var D=U+1;D<c;D++)O[U]=Object(i.a)(O[U],O[D]);if(0!==O[U]){O[U+1]<0&&(O[U]=0-O[U]);for(var T=U+1;T<c;T++)O[T]/=O[U];O[U+1]+=1}if(O[U]=-O[U],U+1<u&&0!==O[U]){for(var z=U+1;z<u;z++)E[z]=0;for(var J=U+1;J<u;J++)for(var B=U+1;B<c;B++)E[J]+=O[B]*s.get(J,B);for(var W=U+1;W<c;W++)for(var X=-O[W]/O[U+1],Y=U+1;Y<u;Y++)s.set(Y,W,s.get(Y,W)+X*E[Y])}if(d)for(var Z=U+1;Z<c;Z++)S.set(Z,U,O[Z])}}var $=Math.min(c,u+1);if(C<c&&(x[C]=s.get(C,C)),u<$&&(x[$-1]=0),A+1<$&&(O[A]=s.get(A,$-1)),O[$-1]=0,b){for(var G=C;G<y;G++){for(var H=0;H<u;H++)k.set(H,G,0);k.set(G,G,1)}for(var K=C-1;K>=0;K--)if(0!==x[K]){for(var Q=K+1;Q<y;Q++){for(var tt=0,et=K;et<u;et++)tt+=k.get(et,K)*k.get(et,Q);tt=-tt/k.get(K,K);for(var rt=K;rt<u;rt++)k.set(rt,Q,k.get(rt,Q)+tt*k.get(rt,K))}for(var at=K;at<u;at++)k.set(at,K,-k.get(at,K));k.set(K,K,1+k.get(K,K));for(var st=0;st<K-1;st++)k.set(st,K,0)}else{for(var nt=0;nt<u;nt++)k.set(nt,K,0);k.set(K,K,1)}}if(d)for(var ot=c-1;ot>=0;ot--){if(ot<A&&0!==O[ot])for(var it=ot+1;it<c;it++){for(var ut=0,ct=ot+1;ct<c;ct++)ut+=S.get(ct,ot)*S.get(ct,it);ut=-ut/S.get(ot+1,ot);for(var ft=ot+1;ft<c;ft++)S.set(ft,it,S.get(ft,it)+ut*S.get(ft,ot))}for(var ht=0;ht<c;ht++)S.set(ht,ot,0);S.set(ot,ot,1)}for(var lt=$-1,gt=Number.EPSILON;$>0;){var vt=void 0,mt=void 0;for(vt=$-2;vt>=-1&&-1!==vt;vt--){var bt=Number.MIN_VALUE+gt*Math.abs(x[vt]+Math.abs(x[vt+1]));if(Math.abs(O[vt])<=bt||Number.isNaN(O[vt])){O[vt]=0;break}}if(vt===$-2)mt=4;else{var dt=void 0;for(dt=$-1;dt>=vt&&dt!==vt;dt--){var pt=(dt!==$?Math.abs(O[dt]):0)+(dt!==vt+1?Math.abs(O[dt-1]):0);if(Math.abs(x[dt])<=gt*pt){x[dt]=0;break}}dt===vt?mt=3:dt===$-1?mt=1:(mt=2,vt=dt)}switch(vt++,mt){case 1:var Mt=O[$-2];O[$-2]=0;for(var yt=$-2;yt>=vt;yt--){var wt=Object(i.a)(x[yt],Mt),xt=x[yt]/wt,kt=Mt/wt;if(x[yt]=wt,yt!==vt&&(Mt=-kt*O[yt-1],O[yt-1]=xt*O[yt-1]),d)for(var St=0;St<c;St++)wt=xt*S.get(St,yt)+kt*S.get(St,$-1),S.set(St,$-1,-kt*S.get(St,yt)+xt*S.get(St,$-1)),S.set(St,yt,wt)}break;case 2:var Ot=O[vt-1];O[vt-1]=0;for(var Et=vt;Et<$;Et++){var jt=Object(i.a)(x[Et],Ot),Vt=x[Et]/jt,Ct=Ot/jt;if(x[Et]=jt,Ot=-Ct*O[Et],O[Et]=Vt*O[Et],b)for(var At=0;At<u;At++)jt=Vt*k.get(At,Et)+Ct*k.get(At,vt-1),k.set(At,vt-1,-Ct*k.get(At,Et)+Vt*k.get(At,vt-1)),k.set(At,Et,jt)}break;case 3:var Nt=Math.max(Math.abs(x[$-1]),Math.abs(x[$-2]),Math.abs(O[$-2]),Math.abs(x[vt]),Math.abs(O[vt])),Ut=x[$-1]/Nt,Ft=x[$-2]/Nt,Rt=O[$-2]/Nt,It=x[vt]/Nt,qt=O[vt]/Nt,Lt=((Ft+Ut)*(Ft-Ut)+Rt*Rt)/2,Pt=Ut*Rt*(Ut*Rt),_t=0;0===Lt&&0===Pt||(_t=Pt/(Lt+(_t=Lt<0?0-Math.sqrt(Lt*Lt+Pt):Math.sqrt(Lt*Lt+Pt))));for(var Dt=(It+Ut)*(It-Ut)+_t,Tt=It*qt,zt=vt;zt<$-1;zt++){var Jt=Object(i.a)(Dt,Tt);0===Jt&&(Jt=Number.MIN_VALUE);var Bt=Dt/Jt,Wt=Tt/Jt;if(zt!==vt&&(O[zt-1]=Jt),Dt=Bt*x[zt]+Wt*O[zt],O[zt]=Bt*O[zt]-Wt*x[zt],Tt=Wt*x[zt+1],x[zt+1]=Bt*x[zt+1],d)for(var Xt=0;Xt<c;Xt++)Jt=Bt*S.get(Xt,zt)+Wt*S.get(Xt,zt+1),S.set(Xt,zt+1,-Wt*S.get(Xt,zt)+Bt*S.get(Xt,zt+1)),S.set(Xt,zt,Jt);if(0===(Jt=Object(i.a)(Dt,Tt))&&(Jt=Number.MIN_VALUE),Bt=Dt/Jt,Wt=Tt/Jt,x[zt]=Jt,Dt=Bt*O[zt]+Wt*x[zt+1],x[zt+1]=-Wt*O[zt]+Bt*x[zt+1],Tt=Wt*O[zt+1],O[zt+1]=Bt*O[zt+1],b&&zt<u-1)for(var Yt=0;Yt<u;Yt++)Jt=Bt*k.get(Yt,zt)+Wt*k.get(Yt,zt+1),k.set(Yt,zt+1,-Wt*k.get(Yt,zt)+Bt*k.get(Yt,zt+1)),k.set(Yt,zt,Jt)}O[$-2]=Dt,1;break;case 4:if(x[vt]<=0&&(x[vt]=x[vt]<0?-x[vt]:0,d))for(var Zt=0;Zt<=lt;Zt++)S.set(Zt,vt,-S.get(Zt,vt));for(;vt<lt&&!(x[vt]>=x[vt+1]);){var $t=x[vt];if(x[vt]=x[vt+1],x[vt+1]=$t,d&&vt<c-1)for(var Gt=0;Gt<c;Gt++)$t=S.get(Gt,vt+1),S.set(Gt,vt+1,S.get(Gt,vt)),S.set(Gt,vt,$t);if(b&&vt<u-1)for(var Ht=0;Ht<u;Ht++)$t=k.get(Ht,vt+1),k.set(Ht,vt+1,k.get(Ht,vt)),k.set(Ht,vt,$t);vt++}0,$--}}if(p){var Kt=S;S=k,k=Kt}this.m=u,this.n=c,this.s=x,this.U=k,this.V=S}return Object(s.a)(t,[{key:"solve",value:function(t){for(var e=t,r=this.threshold,a=this.s.length,s=n.b.zeros(a,a),o=0;o<a;o++)Math.abs(this.s[o])<=r?s.set(o,o,0):s.set(o,o,1/this.s[o]);for(var i=this.U,u=this.rightSingularVectors,c=u.mmul(s),f=u.rows,h=i.rows,l=n.b.zeros(f,h),g=0;g<f;g++)for(var v=0;v<h;v++){for(var m=0,b=0;b<a;b++)m+=c.get(g,b)*i.get(v,b);l.set(g,v,m)}return l.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(n.b.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,r=t.rows,a=t.columns,s=new n.b(r,this.s.length),o=0;o<r;o++)for(var i=0;i<a;i++)Math.abs(this.s[i])>e&&s.set(o,i,t.get(o,i)/this.s[i]);for(var u=this.U,c=u.rows,f=u.columns,h=new n.b(r,c),l=0;l<r;l++)for(var g=0;g<c;g++){for(var v=0,m=0;m<f;m++)v+=s.get(l,m)*u.get(g,m);h.set(l,g,v)}return h}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s,a=0,s=r.length;a<s;a++)r[a]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return n.b.diag(this.s)}}]),t}()},1626:function(t,e,r){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function s(t,e){if(t){if("string"===typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}r.d(e,"a",(function(){return s}))},3951:function(t,e,r){"use strict";r.r(e);var a=r(16),s=r(12),n=r(13),o=r(20),i=r(39),u=r(485),c=r.n(u),f=r(665),h=r(1626);function l(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Object(h.a)(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s,n=!0,o=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){o=!0,s=t},f:function(){try{n||null==a.return||a.return()}finally{if(o)throw s}}}}var g=r(670),v=r(700),m=r(775),b=r(1090),d=r(1089),p=function(t){Object(b.a)(r,t);var e=Object(d.a)(r);function r(t){return Object(g.a)(this,r),e.call(this,t,t.columns,t.rows)}return Object(v.a)(r,[{key:"set",value:function(t,e,r){return this.matrix.set(e,t,r),this}},{key:"get",value:function(t,e){return this.matrix.get(e,t)}}]),r}(function(t){Object(b.a)(r,t);var e=Object(d.a)(r);function r(t,a,s){var n;return Object(g.a)(this,r),(n=e.call(this)).matrix=t,n.rows=a,n.columns=s,n}return r}(m.a)),M=r(1331),y=r(891),w=r(1036),x=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,t);var a=r.assumeSymmetric,s=void 0!==a&&a;if(!(e=y.a.checkMatrix(e)).isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");var n,o,i=e.columns,u=new m.b(i,i),c=new Float64Array(i),f=new Float64Array(i),h=e;if(!!s||e.isSymmetric()){for(n=0;n<i;n++)for(o=0;o<i;o++)u.set(n,o,h.get(n,o));k(i,f,c,u),S(i,f,c,u)}else{var l=new m.b(i,i),v=new Float64Array(i);for(o=0;o<i;o++)for(n=0;n<i;n++)l.set(n,o,h.get(n,o));O(i,l,v,u),E(i,f,c,u,l)}this.n=i,this.e=f,this.d=c,this.V=u}return Object(v.a)(t,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var t,e,r=this.n,a=this.e,s=this.d,n=new m.b(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)n.set(t,e,0);n.set(t,t,s[t]),a[t]>0?n.set(t,t+1,a[t]):a[t]<0&&n.set(t,t-1,a[t])}return n}}]),t}();function k(t,e,r,a){var s,n,o,i,u,c,f,h;for(u=0;u<t;u++)r[u]=a.get(t-1,u);for(i=t-1;i>0;i--){for(h=0,o=0,c=0;c<i;c++)h+=Math.abs(r[c]);if(0===h)for(e[i]=r[i-1],u=0;u<i;u++)r[u]=a.get(i-1,u),a.set(i,u,0),a.set(u,i,0);else{for(c=0;c<i;c++)r[c]/=h,o+=r[c]*r[c];for(s=r[i-1],n=Math.sqrt(o),s>0&&(n=-n),e[i]=h*n,o-=s*n,r[i-1]=s-n,u=0;u<i;u++)e[u]=0;for(u=0;u<i;u++){for(s=r[u],a.set(u,i,s),n=e[u]+a.get(u,u)*s,c=u+1;c<=i-1;c++)n+=a.get(c,u)*r[c],e[c]+=a.get(c,u)*s;e[u]=n}for(s=0,u=0;u<i;u++)e[u]/=o,s+=e[u]*r[u];for(f=s/(o+o),u=0;u<i;u++)e[u]-=f*r[u];for(u=0;u<i;u++){for(s=r[u],n=e[u],c=u;c<=i-1;c++)a.set(c,u,a.get(c,u)-(s*e[c]+n*r[c]));r[u]=a.get(i-1,u),a.set(i,u,0)}}r[i]=o}for(i=0;i<t-1;i++){if(a.set(t-1,i,a.get(i,i)),a.set(i,i,1),0!==(o=r[i+1])){for(c=0;c<=i;c++)r[c]=a.get(c,i+1)/o;for(u=0;u<=i;u++){for(n=0,c=0;c<=i;c++)n+=a.get(c,i+1)*a.get(c,u);for(c=0;c<=i;c++)a.set(c,u,a.get(c,u)-n*r[c])}}for(c=0;c<=i;c++)a.set(c,i+1,0)}for(u=0;u<t;u++)r[u]=a.get(t-1,u),a.set(t-1,u,0);a.set(t-1,t-1,1),e[0]=0}function S(t,e,r,a){var s,n,o,i,u,c,f,h,l,g,v,m,b,d,p,M;for(o=1;o<t;o++)e[o-1]=e[o];e[t-1]=0;var y=0,x=0,k=Number.EPSILON;for(c=0;c<t;c++){for(x=Math.max(x,Math.abs(r[c])+Math.abs(e[c])),f=c;f<t&&!(Math.abs(e[f])<=k*x);)f++;if(f>c){0;do{for(1,s=r[c],h=(r[c+1]-s)/(2*e[c]),l=Object(w.a)(h,1),h<0&&(l=-l),r[c]=e[c]/(h+l),r[c+1]=e[c]*(h+l),g=r[c+1],n=s-r[c],o=c+2;o<t;o++)r[o]-=n;for(y+=n,h=r[f],m=v=1,b=v,d=e[c+1],p=0,M=0,o=f-1;o>=c;o--)for(b=m,m=v,M=p,s=v*e[o],n=v*h,l=Object(w.a)(h,e[o]),e[o+1]=p*l,p=e[o]/l,h=(v=h/l)*r[o]-p*s,r[o+1]=n+p*(v*s+p*r[o]),u=0;u<t;u++)n=a.get(u,o+1),a.set(u,o+1,p*a.get(u,o)+v*n),a.set(u,o,v*a.get(u,o)-p*n);h=-p*M*b*d*e[c]/g,e[c]=p*h,r[c]=v*h}while(Math.abs(e[c])>k*x)}r[c]=r[c]+y,e[c]=0}for(o=0;o<t-1;o++){for(u=o,h=r[o],i=o+1;i<t;i++)r[i]<h&&(u=i,h=r[i]);if(u!==o)for(r[u]=r[o],r[o]=h,i=0;i<t;i++)h=a.get(i,o),a.set(i,o,a.get(i,u)),a.set(i,u,h)}}function O(t,e,r,a){var s,n,o,i,u,c,f,h=t-1;for(c=1;c<=h-1;c++){for(f=0,i=c;i<=h;i++)f+=Math.abs(e.get(i,c-1));if(0!==f){for(o=0,i=h;i>=c;i--)r[i]=e.get(i,c-1)/f,o+=r[i]*r[i];for(n=Math.sqrt(o),r[c]>0&&(n=-n),o-=r[c]*n,r[c]=r[c]-n,u=c;u<t;u++){for(s=0,i=h;i>=c;i--)s+=r[i]*e.get(i,u);for(s/=o,i=c;i<=h;i++)e.set(i,u,e.get(i,u)-s*r[i])}for(i=0;i<=h;i++){for(s=0,u=h;u>=c;u--)s+=r[u]*e.get(i,u);for(s/=o,u=c;u<=h;u++)e.set(i,u,e.get(i,u)-s*r[u])}r[c]=f*r[c],e.set(c,c-1,f*n)}}for(i=0;i<t;i++)for(u=0;u<t;u++)a.set(i,u,i===u?1:0);for(c=h-1;c>=1;c--)if(0!==e.get(c,c-1)){for(i=c+1;i<=h;i++)r[i]=e.get(i,c-1);for(u=c;u<=h;u++){for(n=0,i=c;i<=h;i++)n+=r[i]*a.get(i,u);for(n=n/r[c]/e.get(c,c-1),i=c;i<=h;i++)a.set(i,u,a.get(i,u)+n*r[i])}}}function E(t,e,r,a,s){var n,o,i,u,c,f,h,l,g,v,m,b,d,p,M,y=t-1,w=t-1,x=Number.EPSILON,k=0,S=0,O=0,E=0,V=0,C=0,A=0,N=0;for(n=0;n<t;n++)for((n<0||n>w)&&(r[n]=s.get(n,n),e[n]=0),o=Math.max(n-1,0);o<t;o++)S+=Math.abs(s.get(n,o));for(;y>=0;){for(u=y;u>0&&(0===(C=Math.abs(s.get(u-1,u-1))+Math.abs(s.get(u,u)))&&(C=S),!(Math.abs(s.get(u,u-1))<x*C));)u--;if(u===y)s.set(y,y,s.get(y,y)+k),r[y]=s.get(y,y),e[y]=0,y--,N=0;else if(u===y-1){if(h=s.get(y,y-1)*s.get(y-1,y),E=(O=(s.get(y-1,y-1)-s.get(y,y))/2)*O+h,A=Math.sqrt(Math.abs(E)),s.set(y,y,s.get(y,y)+k),s.set(y-1,y-1,s.get(y-1,y-1)+k),l=s.get(y,y),E>=0){for(A=O>=0?O+A:O-A,r[y-1]=l+A,r[y]=r[y-1],0!==A&&(r[y]=l-h/A),e[y-1]=0,e[y]=0,O=(l=s.get(y,y-1))/(C=Math.abs(l)+Math.abs(A)),E=A/C,O/=V=Math.sqrt(O*O+E*E),E/=V,o=y-1;o<t;o++)A=s.get(y-1,o),s.set(y-1,o,E*A+O*s.get(y,o)),s.set(y,o,E*s.get(y,o)-O*A);for(n=0;n<=y;n++)A=s.get(n,y-1),s.set(n,y-1,E*A+O*s.get(n,y)),s.set(n,y,E*s.get(n,y)-O*A);for(n=0;n<=w;n++)A=a.get(n,y-1),a.set(n,y-1,E*A+O*a.get(n,y)),a.set(n,y,E*a.get(n,y)-O*A)}else r[y-1]=l+O,r[y]=l+O,e[y-1]=A,e[y]=-A;y-=2,N=0}else{if(l=s.get(y,y),g=0,h=0,u<y&&(g=s.get(y-1,y-1),h=s.get(y,y-1)*s.get(y-1,y)),10===N){for(k+=l,n=0;n<=y;n++)s.set(n,n,s.get(n,n)-l);l=g=.75*(C=Math.abs(s.get(y,y-1))+Math.abs(s.get(y-1,y-2))),h=-.4375*C*C}if(30===N&&(C=(C=(g-l)/2)*C+h)>0){for(C=Math.sqrt(C),g<l&&(C=-C),C=l-h/((g-l)/2+C),n=0;n<=y;n++)s.set(n,n,s.get(n,n)-C);k+=C,l=g=h=.964}for(N+=1,c=y-2;c>=u&&(O=((V=l-(A=s.get(c,c)))*(C=g-A)-h)/s.get(c+1,c)+s.get(c,c+1),E=s.get(c+1,c+1)-A-V-C,V=s.get(c+2,c+1),O/=C=Math.abs(O)+Math.abs(E)+Math.abs(V),E/=C,V/=C,c!==u)&&!(Math.abs(s.get(c,c-1))*(Math.abs(E)+Math.abs(V))<x*(Math.abs(O)*(Math.abs(s.get(c-1,c-1))+Math.abs(A)+Math.abs(s.get(c+1,c+1)))));)c--;for(n=c+2;n<=y;n++)s.set(n,n-2,0),n>c+2&&s.set(n,n-3,0);for(i=c;i<=y-1&&(p=i!==y-1,i!==c&&(O=s.get(i,i-1),E=s.get(i+1,i-1),V=p?s.get(i+2,i-1):0,0!==(l=Math.abs(O)+Math.abs(E)+Math.abs(V))&&(O/=l,E/=l,V/=l)),0!==l);i++)if(C=Math.sqrt(O*O+E*E+V*V),O<0&&(C=-C),0!==C){for(i!==c?s.set(i,i-1,-C*l):u!==c&&s.set(i,i-1,-s.get(i,i-1)),l=(O+=C)/C,g=E/C,A=V/C,E/=O,V/=O,o=i;o<t;o++)O=s.get(i,o)+E*s.get(i+1,o),p&&(O+=V*s.get(i+2,o),s.set(i+2,o,s.get(i+2,o)-O*A)),s.set(i,o,s.get(i,o)-O*l),s.set(i+1,o,s.get(i+1,o)-O*g);for(n=0;n<=Math.min(y,i+3);n++)O=l*s.get(n,i)+g*s.get(n,i+1),p&&(O+=A*s.get(n,i+2),s.set(n,i+2,s.get(n,i+2)-O*V)),s.set(n,i,s.get(n,i)-O),s.set(n,i+1,s.get(n,i+1)-O*E);for(n=0;n<=w;n++)O=l*a.get(n,i)+g*a.get(n,i+1),p&&(O+=A*a.get(n,i+2),a.set(n,i+2,a.get(n,i+2)-O*V)),a.set(n,i,a.get(n,i)-O),a.set(n,i+1,a.get(n,i+1)-O*E)}}}if(0!==S){for(y=t-1;y>=0;y--)if(O=r[y],0===(E=e[y]))for(u=y,s.set(y,y,1),n=y-1;n>=0;n--){for(h=s.get(n,n)-O,V=0,o=u;o<=y;o++)V+=s.get(n,o)*s.get(o,y);if(e[n]<0)A=h,C=V;else if(u=n,0===e[n]?s.set(n,y,0!==h?-V/h:-V/(x*S)):(l=s.get(n,n+1),g=s.get(n+1,n),f=(l*C-A*V)/(E=(r[n]-O)*(r[n]-O)+e[n]*e[n]),s.set(n,y,f),s.set(n+1,y,Math.abs(l)>Math.abs(A)?(-V-h*f)/l:(-C-g*f)/A)),x*(f=Math.abs(s.get(n,y)))*f>1)for(o=n;o<=y;o++)s.set(o,y,s.get(o,y)/f)}else if(E<0)for(u=y-1,Math.abs(s.get(y,y-1))>Math.abs(s.get(y-1,y))?(s.set(y-1,y-1,E/s.get(y,y-1)),s.set(y-1,y,-(s.get(y,y)-O)/s.get(y,y-1))):(M=j(0,-s.get(y-1,y),s.get(y-1,y-1)-O,E),s.set(y-1,y-1,M[0]),s.set(y-1,y,M[1])),s.set(y,y-1,0),s.set(y,y,1),n=y-2;n>=0;n--){for(v=0,m=0,o=u;o<=y;o++)v+=s.get(n,o)*s.get(o,y-1),m+=s.get(n,o)*s.get(o,y);if(h=s.get(n,n)-O,e[n]<0)A=h,V=v,C=m;else if(u=n,0===e[n]?(M=j(-v,-m,h,E),s.set(n,y-1,M[0]),s.set(n,y,M[1])):(l=s.get(n,n+1),g=s.get(n+1,n),b=(r[n]-O)*(r[n]-O)+e[n]*e[n]-E*E,d=2*(r[n]-O)*E,0===b&&0===d&&(b=x*S*(Math.abs(h)+Math.abs(E)+Math.abs(l)+Math.abs(g)+Math.abs(A))),M=j(l*V-A*v+E*m,l*C-A*m-E*v,b,d),s.set(n,y-1,M[0]),s.set(n,y,M[1]),Math.abs(l)>Math.abs(A)+Math.abs(E)?(s.set(n+1,y-1,(-v-h*s.get(n,y-1)+E*s.get(n,y))/l),s.set(n+1,y,(-m-h*s.get(n,y)-E*s.get(n,y-1))/l)):(M=j(-V-g*s.get(n,y-1),-C-g*s.get(n,y),A,E),s.set(n+1,y-1,M[0]),s.set(n+1,y,M[1]))),x*(f=Math.max(Math.abs(s.get(n,y-1)),Math.abs(s.get(n,y))))*f>1)for(o=n;o<=y;o++)s.set(o,y-1,s.get(o,y-1)/f),s.set(o,y,s.get(o,y)/f)}for(n=0;n<t;n++)if(n<0||n>w)for(o=n;o<t;o++)a.set(n,o,s.get(n,o));for(o=t-1;o>=0;o--)for(n=0;n<=w;n++){for(A=0,i=0;i<=Math.min(o,w);i++)A+=a.get(n,i)*s.get(i,o);a.set(n,o,A)}}}function j(t,e,r,a){var s,n;return Math.abs(r)>Math.abs(a)?[(t+(s=a/r)*e)/(n=r+s*a),(e-s*t)/n]:[((s=r/a)*t+e)/(n=a+s*r),(s*e-t)/n]}var V=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,t),e=y.a.checkMatrix(e);var a,s=r.Y,n=r.scaleScores,o=void 0!==n&&n,i=r.maxIterations,u=void 0===i?1e3:i,c=r.terminationCriteria,f=void 0===c?1e-10:c;if(s){if(!(s=Array.isArray(s)&&"number"===typeof s[0]?m.b.columnVector(s):y.a.checkMatrix(s)).isColumnVector()||s.rows!==e.rows)throw new Error("Y must be a column vector of length X.rows");a=s}else a=e.getColumnVector(0);for(var h,l,v,b,d=1,p=0;p<u&&d>f;p++)v=(v=e.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0))).div(v.norm()),h=e.mmul(v).div(v.transpose().mmul(v).get(0,0)),p>0&&(d=h.clone().sub(b).pow(2).sum()),b=h.clone(),s?(l=(l=s.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0))).div(l.norm()),a=s.mmul(l).div(l.transpose().mmul(l).get(0,0))):a=h;if(s){var M=e.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0));M=M.div(M.norm());var w=e.clone().sub(h.clone().mmul(M.transpose())),x=a.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),k=s.clone().sub(h.clone().mulS(x.get(0,0)).mmul(l.transpose()));this.t=h,this.p=M.transpose(),this.w=v.transpose(),this.q=l,this.u=a,this.s=h.transpose().mmul(h),this.xResidual=w,this.yResidual=k,this.betas=x}else this.w=v.transpose(),this.s=h.transpose().mmul(h).sqrt(),this.t=o?h.clone().div(this.s.get(0,0)):h,this.xResidual=e.sub(h.mmul(v.transpose()))},C=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(g.a)(this,t),!0===e){var a=r;return this.center=a.center,this.scale=a.scale,this.means=a.means,this.stdevs=a.stdevs,this.U=m.b.checkMatrix(a.U),this.S=a.S,this.R=a.R,void(this.excludedFeatures=a.excludedFeatures||[])}e=new m.b(e);var s=r.isCovarianceMatrix,n=void 0!==s&&s,o=r.method,i=void 0===o?"SVD":o,u=r.nCompNIPALS,c=void 0===u?2:u,f=r.center,h=void 0===f||f,v=r.scale,b=void 0!==v&&v,d=r.ignoreZeroVariance,y=void 0!==d&&d;if(this.center=h,this.scale=b,this.means=null,this.stdevs=null,this.excludedFeatures=[],n)this._computeFromCovarianceMatrix(e);else switch(this._adjust(e,y),i){case"covarianceMatrix":var w=new p(e).mmul(e).div(e.rows-1);this._computeFromCovarianceMatrix(w);break;case"NIPALS":this._computeWithNIPALS(e,c);break;case"SVD":var x=new M.a(e,{computeLeftSingularVectors:!1,computeRightSingularVectors:!0,autoTranspose:!0});this.U=x.rightSingularVectors;var k,S=x.diagonal,O=[],E=l(S);try{for(E.s();!(k=E.n()).done;){var j=k.value;O.push(j*j/(e.rows-1))}}catch(V){E.e(V)}finally{E.f()}this.S=O;break;default:throw new Error("unknown method: ".concat(i))}}return Object(v.a)(t,[{key:"predict",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.nComponents,a=void 0===r?this.U.columns:r;if(t=new m.b(t),this.center&&(t.subRowVector(this.means),this.scale)){var s,n=l(this.excludedFeatures);try{for(n.s();!(s=n.n()).done;){var o=s.value;t.removeColumn(o)}}catch(u){n.e(u)}finally{n.f()}t.divRowVector(this.stdevs)}var i=t.mmul(this.U);return i.subMatrix(0,i.rows-1,0,a-1)}},{key:"invert",value:function(t){var e=(t=m.b.checkMatrix(t)).mmul(this.U.transpose());return this.center&&(this.scale&&e.mulRowVector(this.stdevs),e.addRowVector(this.means)),e}},{key:"getExplainedVariance",value:function(){var t,e=0,r=l(this.S);try{for(r.s();!(t=r.n()).done;){var a=t.value;e+=a}}catch(s){r.e(s)}finally{r.f()}return this.S.map((function(t){return t/e}))}},{key:"getCumulativeVariance",value:function(){for(var t=this.getExplainedVariance(),e=1;e<t.length;e++)t[e]+=t[e-1];return t}},{key:"getEigenvectors",value:function(){return this.U}},{key:"getEigenvalues",value:function(){return this.S}},{key:"getStandardDeviations",value:function(){return this.S.map((function(t){return Math.sqrt(t)}))}},{key:"getLoadings",value:function(){return this.U.transpose()}},{key:"toJSON",value:function(){return{name:"PCA",center:this.center,scale:this.scale,means:this.means,stdevs:this.stdevs,U:this.U,S:this.S,excludedFeatures:this.excludedFeatures}}},{key:"_adjust",value:function(t,e){if(this.center){var r=t.mean("column"),a=this.scale?t.standardDeviation("column",{mean:r}):null;if(this.means=r,t.subRowVector(r),this.scale){for(var s=0;s<a.length;s++)if(0===a[s]){if(!e)throw new RangeError("Cannot scale the dataset (standard deviation is zero at index ".concat(s));t.removeColumn(s),a.splice(s,1),this.excludedFeatures.push(s),s--}this.stdevs=a,t.divRowVector(a)}}}},{key:"_computeFromCovarianceMatrix",value:function(t){var e=new x(t,{assumeSymmetric:!0});this.U=e.eigenvectorMatrix,this.U.flipRows(),this.S=e.realEigenvalues,this.S.reverse()}},{key:"_computeWithNIPALS",value:function(t,e){this.U=new m.b(e,t.columns),this.S=[];for(var r=t,a=0;a<e;a++){var s=new V(r);this.U.setRow(a,s.w.transpose()),this.S.push(Math.pow(s.s.get(0,0),2)),r=s.xResidual}this.U=this.U.transpose()}}],[{key:"load",value:function(e){if("string"!==typeof e.name)throw new TypeError("model must have a name property");if("PCA"!==e.name)throw new RangeError("invalid model: ".concat(e.name));return new t(!0,e)}}]),t}(),A=r(1048),N=r(786),U=r(970),F=r.n(U),R=r(53),I=r(64),q=r.n(I),L=r(650),P=r(521);Object(P.a)("StatisticalModels");var _=function(t){var e,r=t.data,a=t.variables,s=t.scale,n=t.center,o=t.noComponents;try{for(var i=[],u=r[a[0]].length,c=0;c<u;c++){for(var f=[],h=!1,l=0;l<a.length;l++){var g=r[a[l]][c];if(e=g,!Object(R.isPrimitive)(e)||q()(e)){h=!0;break}f.push(g)}h||i.push(f)}var v=new C(i,{center:n,scale:s}),m=v.predict(i,{noComponents:o});return{pca:v,components:m}}catch(b){return{}}},D=function(t){Object(o.a)(r,t);var e=Object(i.a)(r);function r(t){var n;Object(s.a)(this,r),n=e.call(this,t);var o=t.data,i=t.variables,u=t.scale,c=t.center,f=t.noComponents,h=_({data:o,variables:i,scale:u,center:c,noComponents:f}),l=h.pca,g=h.components;return n.state=Object(a.a)({pca:l,components:g},t),l&&t.onResult(n.state.pca,n.state.components),n}return Object(n.a)(r,[{key:"render",value:function(){var t=this.state.pca,e=this.props.t;if(!t)return c.a.createElement(f.a,{variant:"danger"},e("missing-attributes"));var r=t.getStandardDeviations(),a=t.getExplainedVariance(),s=t.getCumulativeVariance(),n={x:F()(0,a.length,1),y:a,type:"scatter",name:e("proportion-of-variance")};return c.a.createElement("div",{style:{overflowX:"auto",width:"100%"}},c.a.createElement("span",{className:"title"},e("pca-summary")),function(t,e,r,a){return c.a.createElement(N.a,{bordered:!0,size:"sm"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null),c.a.createElement("th",null,a("standard-deviation")),c.a.createElement("th",null,a("proportion-of-variance")),c.a.createElement("th",null,a("cumulative-variance")))),c.a.createElement("tbody",null,t.map((function(t,a){return c.a.createElement("tr",{key:a},c.a.createElement("th",null," ","PC".concat(a+1)," "),c.a.createElement("td",null," ",t.toFixed(3)," "),c.a.createElement("td",null," ",e[a].toFixed(3)," "),c.a.createElement("td",null," ",r[a].toFixed(3)," "))}))))}(r,a,s,e),c.a.createElement(L.a,{editable:!0,data:[n],layout:{xaxis:{title:e("principal-component")},yaxis:{title:e("explained-proportion")}}}))}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.data!==e.data||t.variables!==e.variables){var r=t.data,s=t.variables,n=t.scale,o=t.center,i=t.noComponents,u=Object(a.a)(Object(a.a)({},_({data:r,variables:s,scale:n,center:o,noComponents:i})),t);return u.pca&&t.onResult(u.pca,u.components),u}return null}}]),r}(u.Component);D.defaultProps={center:!0,scale:!1,noComponents:0,onResult:function(){}};e.default=Object(A.a)("StatisticalModels")(D)},891:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var a=r(670),s=r(700),n=r(1090),o=r(1089),i=function(t){Object(n.a)(r,t);var e=Object(o.a)(r);function r(t){var s;return Object(a.a)(this,r),(s=e.call(this)).data=t,s.rows=t.length,s.columns=t[0].length,s}return Object(s.a)(r,[{key:"set",value:function(t,e,r){return this.data[t][e]=r,this}},{key:"get",value:function(t,e){return this.data[t][e]}}]),r}(r(775).a)}}]);
//# sourceMappingURL=138.bf03a8c1.chunk.js.map