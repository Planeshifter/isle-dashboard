{"version":3,"sources":["actions/file.js","actions/ticket.js"],"names":["getFilesRequest","dispatch","namespaceName","owner","url","server","qs","axios","res","files","data","receivedNamespaceFiles","addErrorNotification","receivedLicense","license","type","RECEIVED_LICENSE","payload","removedLicense","REMOVED_LICENSE","RECEIVED_NAMESPACE_FILES","getUserFiles","RECEIVED_FILES","getUserFilesInjector","deleteFile","_id","DELETED_FILE","id","addNotification","title","i18next","message","level","deleteFileInjector","uploadFile","formData","user","query","get","jwt","token","msg","position","autoDismiss","children","style","marginBottom","placement","overlay","size","variant","float","marginRight","onClick","copyToClipboard","filename","className","href","target","rel","uploadFileInjector","getFilesInjector","getOwnerFilesInjector","getAllFiles","GET_ALL_FILES","getAllFilesInjector","uploadLicense","uploadLicenseInjector","getLicense","getLicenseInjector","removeLicense","includes","removeLicenseInjector","uploadLogo","UPDATED_SETTINGS","uploadLogoInjector","getAllTickets","GET_ALL_TICKETS","tickets","getAllTicketsInjector","getCourseTickets","namespaceID","GET_COURSE_TICKETS","getCourseTicketsInjector","getUserTickets","GET_USER_TICKETS","getUserTicketsInjector","deleteTicket","DELETED_TICKET","deleteTicketInjector","createTicket","description","platform","namespace","length","attachments","FormData","i","append","JSON","stringify","CREATED_TICKET","createTicketInjector","sendTicketMessage","ticketID","body","msgObj","author","name","email","picture","createdAt","Date","getTime","TICKET_MESSAGE_ADDED","sendTicketMessageInjector","closeTicket","TICKET_CLOSED","closeTicketInjector","updatePriority","priority","TICKET_PRIORITY_UPDATED","updatePriorityInjector","openTicket","TICKET_OPENED","openTicketInjector"],"mappings":"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","file":"static/js/4025.86f0b876.chunk.js","sourcesContent":["/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport axios from 'axios';\nimport qs from 'querystring';\nimport i18next from 'i18next';\nimport server from 'constants/server';\nimport copyToClipboard from 'clipboard-copy';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Button from 'react-bootstrap/Button';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { DELETED_FILE, GET_ALL_FILES, RECEIVED_FILES, RECEIVED_LICENSE, RECEIVED_NAMESPACE_FILES, REMOVED_LICENSE, UPDATED_SETTINGS } from 'constants/action_types.js';\n\n\n// FUNCTIONS //\n\nasync function getFilesRequest( dispatch, { namespaceName, owner = false }) {\n\ttry {\n\t\tconst url = `${server}/get_files?${qs.stringify({\n\t\t\tnamespaceName,\n\t\t\towner\n\t\t})}`;\n\t\tconst res = await axios.get( url );\n\t\tconst files = res.data.files;\n\t\tdispatch( receivedNamespaceFiles({ files, owner }) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n}\n\n\n// EXPORTS //\n\n\nexport function receivedFiles( files ) {\n\treturn {\n\t\ttype: RECEIVED_FILES,\n\t\tpayload: {\n\t\t\tfiles\n\t\t}\n\t};\n}\n\nexport function receivedLicense( license ) {\n\treturn {\n\t\ttype: RECEIVED_LICENSE,\n\t\tpayload: {\n\t\t\tlicense\n\t\t}\n\t};\n}\n\nexport function removedLicense() {\n\treturn {\n\t\ttype: REMOVED_LICENSE\n\t};\n}\n\nexport function receivedNamespaceFiles({ files, owner }) {\n\treturn {\n\t\ttype: RECEIVED_NAMESPACE_FILES,\n\t\tpayload: {\n\t\t\tfiles,\n\t\t\towner\n\t\t}\n\t};\n}\n\nexport const getUserFiles = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_user_files' );\n\t\tdispatch( receivedFiles( res.data.files ) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getUserFilesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getUserFiles( dispatch );\n\t};\n};\n\nexport const deleteFile = async ( dispatch, _id, namespaceName, owner ) => {\n\ttry {\n\t\tconst res = await axios.post( `${server}/delete_file`, { _id });\n\t\tif ( namespaceName ) {\n\t\t\tgetFilesRequest( dispatch, { namespaceName, owner });\n\t\t} else {\n\t\t\tdispatch({\n\t\t\t\ttype: DELETED_FILE,\n\t\t\t\tpayload: {\n\t\t\t\t\tid: _id\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\taddNotification( dispatch, {\n\t\t\ttitle: i18next.t('common:delete-file-title'),\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const deleteFileInjector = ( dispatch ) => {\n\treturn async ( _id, namespaceName, owner ) => {\n\t\tawait deleteFile( dispatch, _id, namespaceName, owner );\n\t};\n};\n\nexport const uploadFile = async ( dispatch, { formData, user }) => {\n\ttry {\n\t\tconst query = qs.stringify({\n\t\t\tnamespaceName: formData.get( 'namespaceName' ),\n\t\t\towner: formData.get( 'owner' ),\n\t\t\tjwt: user.token\n\t\t});\n\t\tconst res = await axios.post( server+'/upload_file?'+ query, formData );\n\t\tgetFilesRequest( dispatch, {\n\t\t\tnamespaceName: formData.get( 'namespaceName' ),\n\t\t\towner: formData.get( 'owner' )\n\t\t});\n\t\tconst msg = {\n\t\t\ttitle: i18next.t('common:file-upload-title'),\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success',\n\t\t\tposition: 'tl',\n\t\t\tautoDismiss: 10\n\t\t};\n\t\tmsg.children = <div style={{ marginBottom: 30 }}>\n\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"ownerTooltip\">\n\t\t\t\t{i18next.t('common:copy-link')}\n\t\t\t</Tooltip>}>\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tvariant=\"outline-secondary\"\n\t\t\t\t\tstyle={{ float: 'right', marginRight: '10px' }}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tcopyToClipboard( server+'/'+res.data.filename );\n\t\t\t\t\t\taddNotification( dispatch, {\n\t\t\t\t\t\t\ttitle: i18next.t('common:copied-title'),\n\t\t\t\t\t\t\tmessage: i18next.t('common:link-copied'),\n\t\t\t\t\t\t\tlevel: 'success',\n\t\t\t\t\t\t\tposition: 'tl'\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<i className=\"fa fa-clipboard\"></i>\n\t\t\t\t</Button>\n\t\t\t</OverlayTrigger>\n\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"ownerTooltip\">\n\t\t\t\t{i18next.t('common:open-uploaded-file')}\n\t\t\t</Tooltip>}>\n\t\t\t\t<a\n\t\t\t\t\thref={server+'/'+res.data.filename}\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\tstyle={{ float: 'right', marginRight: '10px' }}\n\t\t\t\t>\n\t\t\t\t\t<Button size=\"sm\" variant=\"outline-secondary\">\n\t\t\t\t\t\t<i className=\"fa fa-external-link-alt\"></i>\n\t\t\t\t\t</Button>\n\t\t\t\t</a>\n\t\t\t</OverlayTrigger>\n\t\t</div>;\n\t\treturn addNotification( dispatch, msg );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\nexport const uploadFileInjector = ( dispatch ) => {\n\treturn async ({ formData, user }) => {\n\t\tawait uploadFile( dispatch, { formData, user } );\n\t};\n};\n\nexport const getFilesInjector = ( dispatch ) => {\n\treturn async ({ namespaceName }) => {\n\t\tawait getFilesRequest( dispatch, { namespaceName });\n\t};\n};\n\nexport const getOwnerFilesInjector = ( dispatch ) => {\n\treturn async ({ namespaceName }) => {\n\t\tawait getFilesRequest( dispatch, { namespaceName, owner: true });\n\t};\n};\n\nexport const getAllFiles = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_all_files' );\n\t\tdispatch({\n\t\t\ttype: GET_ALL_FILES,\n\t\t\tpayload: {\n\t\t\t\tfiles: res.data.files\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getAllFilesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getAllFiles( dispatch );\n\t};\n};\n\nexport const uploadLicense = async ( dispatch, { formData, user }) => {\n\ttry {\n\t\tconst query = qs.stringify({\n\t\t\tjwt: user.token\n\t\t});\n\t\tconst res = await axios.post( server+'/upload_license?'+ query, formData );\n\t\taddNotification( dispatch, {\n\t\t\ttitle: i18next.t('common:uploaded'),\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success',\n\t\t\tposition: 'tl',\n\t\t\tautoDismiss: 5\n\t\t});\n\t\tdispatch( receivedLicense( res.data.license ) );\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const uploadLicenseInjector = ( dispatch ) => {\n\treturn async ({ formData, user }) => {\n\t\tawait uploadLicense( dispatch, { formData, user } );\n\t};\n};\n\nexport const getLicense = async ( dispatch, user ) => {\n\ttry {\n\t\tconst query = qs.stringify({\n\t\t\tjwt: user.token\n\t\t});\n\t\tconst res = await axios.get( server+'/get_license?'+ query );\n\t\tdispatch( receivedLicense( res.data.license ) );\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getLicenseInjector = ( dispatch ) => {\n\treturn async ( user ) => {\n\t\tawait getLicense( dispatch, user );\n\t};\n};\n\nexport const removeLicense = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/remove_license' );\n\t\tif ( res.data.message === 'ok' ) {\n\t\t\tdispatch( removedLicense() );\n\t\t}\n\t} catch ( err ) {\n\t\tif ( err.message.includes( '404' ) ) {\n\t\t\t// Case: License file has already been removed\n\t\t\tdispatch( removedLicense() );\n\t\t}\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const removeLicenseInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait removeLicense( dispatch );\n\t};\n};\n\nexport const uploadLogo = async ( dispatch, { formData, user }) => {\n\ttry {\n\t\tconst query = qs.stringify({\n\t\t\tjwt: user.token\n\t\t});\n\t\tconst res = await axios.post( server+'/upload_logo?'+ query, formData );\n\t\taddNotification( dispatch, {\n\t\t\ttitle: i18next.t('common:uploaded'),\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success',\n\t\t\tposition: 'tl',\n\t\t\tautoDismiss: 5\n\t\t});\n\t\tdispatch({\n\t\t\ttype: UPDATED_SETTINGS,\n\t\t\tpayload: res.data\n\t\t});\n\t\treturn res.data;\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t\treturn err;\n\t}\n};\n\nexport const uploadLogoInjector = ( dispatch ) => {\n\treturn async ({ formData, user }) => {\n\t\tconst res = await uploadLogo( dispatch, { formData, user } );\n\t\treturn res;\n\t};\n};\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport axios from 'axios';\nimport qs from 'querystring';\nimport server from 'constants/server';\nimport i18next from 'i18next';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { CREATED_TICKET, DELETED_TICKET, GET_ALL_TICKETS,\n\tGET_COURSE_TICKETS, GET_USER_TICKETS, TICKET_CLOSED,\n\tTICKET_OPENED, TICKET_MESSAGE_ADDED, TICKET_PRIORITY_UPDATED } from 'constants/action_types.js';\n\n\n// EXPORTS //\n\nexport const getAllTickets = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_all_tickets' );\n\t\tdispatch({\n\t\t\ttype: GET_ALL_TICKETS,\n\t\t\tpayload: {\n\t\t\t\ttickets: res.data.tickets\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getAllTicketsInjector = dispatch => {\n\treturn async () => {\n\t\tawait getAllTickets( dispatch );\n\t};\n};\n\nexport const getCourseTickets = async ( dispatch, namespaceID ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_course_tickets?'+qs.stringify({ namespaceID }) );\n\t\tdispatch({\n\t\t\ttype: GET_COURSE_TICKETS,\n\t\t\tpayload: {\n\t\t\t\ttickets: res.data.tickets\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getCourseTicketsInjector = dispatch => {\n\treturn async ( id ) => {\n\t\tawait getCourseTickets( dispatch, id );\n\t};\n};\n\nexport const getUserTickets = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_user_tickets' );\n\t\tdispatch({\n\t\t\ttype: GET_USER_TICKETS,\n\t\t\tpayload: {\n\t\t\t\ttickets: res.data.tickets\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const getUserTicketsInjector = dispatch => {\n\treturn async () => {\n\t\tawait getUserTickets( dispatch );\n\t};\n};\n\nexport const deleteTicket = async ( dispatch, id ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/delete_ticket', {\n\t\t\tid\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\ttitle: i18next.t('common:deleted'),\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch({\n\t\t\ttype: DELETED_TICKET,\n\t\t\tpayload: {\n\t\t\t\tid\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const deleteTicketInjector = dispatch => {\n\treturn async ( id ) => {\n\t\tawait deleteTicket( dispatch, id );\n\t};\n};\n\nexport const createTicket = async ( dispatch, {\n\ttitle,\n\tdescription,\n\tplatform,\n\tnamespace,\n\tfiles\n}) => {\n\ttry {\n\t\tlet res;\n\t\tlet attachments;\n\t\tif ( !files || files.length === 0 ) {\n\t\t\tres = await axios.post( server + '/create_ticket', {\n\t\t\t\ttitle,\n\t\t\t\tdescription,\n\t\t\t\tplatform,\n\t\t\t\tnamespaceID: namespace._id\n\t\t\t});\n\t\t\tattachments = [];\n\t\t} else {\n\t\t\tconst formData = new FormData();\n\t\t\tfor ( let i = 0; i < files.length; i++ ) {\n\t\t\t\tformData.append( 'attachment', files[ i ] );\n\t\t\t}\n\t\t\tformData.append( 'title', title );\n\t\t\tformData.append( 'description', description );\n\t\t\tformData.append( 'platform', JSON.stringify( platform ) );\n\t\t\tformData.append( 'namespaceID', namespace._id );\n\t\t\tres = await axios.post( server + '/create_ticket', formData );\n\t\t\tattachments = res.data.attachments;\n\t\t}\n\t\taddNotification( dispatch, {\n\t\t\ttitle: i18next.t('common:created'),\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch({\n\t\t\ttype: CREATED_TICKET,\n\t\t\tpayload: {\n\t\t\t\ttitle,\n\t\t\t\tdescription,\n\t\t\t\tplatform,\n\t\t\t\tnamespace,\n\t\t\t\tattachments\n\t\t\t}\n\t\t});\n\t\treturn res;\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const createTicketInjector = dispatch => {\n\treturn async ({\n\t\ttitle,\n\t\tdescription,\n\t\tplatform,\n\t\tnamespace,\n\t\tfiles\n\t}) => {\n\t\tawait createTicket( dispatch, {\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\tplatform,\n\t\t\tnamespace,\n\t\t\tfiles\n\t\t});\n\t};\n};\n\nexport const sendTicketMessage = async ( dispatch, { message, ticketID, user } ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/add_ticket_message', {\n\t\t\tbody: message,\n\t\t\tticketID\n\t\t});\n\t\tconst msgObj = {\n\t\t\tbody: message,\n\t\t\tauthor: user.name,\n\t\t\temail: user.email,\n\t\t\tpicture: user.picture,\n\t\t\tcreatedAt: new Date().getTime()\n\t\t};\n\t\tdispatch({\n\t\t\ttype: TICKET_MESSAGE_ADDED,\n\t\t\tpayload: {\n\t\t\t\tid: ticketID,\n\t\t\t\tmessage: msgObj\n\t\t\t}\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\ttitle: i18next.t('common:added'),\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const sendTicketMessageInjector = dispatch => {\n\treturn async ({ message, ticketID, user }) => {\n\t\tawait sendTicketMessage( dispatch, { message, ticketID, user } );\n\t};\n};\n\nexport const closeTicket = async ( dispatch, id ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/close_ticket', {\n\t\t\tticketID: id\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\ttitle: i18next.t('common:closed'),\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch({\n\t\t\ttype: TICKET_CLOSED,\n\t\t\tpayload: {\n\t\t\t\tid\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const closeTicketInjector = dispatch => {\n\treturn async ( id ) => {\n\t\tawait closeTicket( dispatch, id );\n\t};\n};\n\nexport const updatePriority = async ( dispatch, id, priority ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/update_ticket_priority', {\n\t\t\tticketID: id,\n\t\t\tpriority\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\ttitle: i18next.t('common:updated'),\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch({\n\t\t\ttype: TICKET_PRIORITY_UPDATED,\n\t\t\tpayload: {\n\t\t\t\tid,\n\t\t\t\tpriority\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const updatePriorityInjector = dispatch => {\n\treturn async ( id, priority ) => {\n\t\tawait updatePriority( dispatch, id, priority );\n\t};\n};\n\nexport const openTicket = async ( dispatch, id ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/open_ticket', {\n\t\t\tticketID: id\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\ttitle: i18next.t('common:opened'),\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch({\n\t\t\ttype: TICKET_OPENED,\n\t\t\tpayload: {\n\t\t\t\tid\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\nexport const openTicketInjector = dispatch => {\n\treturn async ( id ) => {\n\t\tawait openTicket( dispatch, id );\n\t};\n};\n"],"sourceRoot":""}