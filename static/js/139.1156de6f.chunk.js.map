{"version":3,"sources":["../node_modules/react-bootstrap/esm/Table.js","components/admin-settings/backups.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/math/base/special/round/lib/index.js","components/confirm-modal/index.js","../node_modules/@stdlib/stdlib/lib/node_modules/@stdlib/math/base/special/round/lib/round.js"],"names":["Table","forwardRef","_ref","ref","bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive","props","decoratedBsPrefix","classes","table","createElement","responsiveClass","BackupsPage","createBackup","backup","setState","showDeleteModal","state","selectedBackup","a","deleteBackup","_id","this","getBackups","admin","backups","t","map","x","idx","round","key","filename","createdAt","href","server","target","rel","placement","overlay","id","style","marginRight","onClick","askToDeleteSelectedBackupFactory","renderBackupList","handleBackupCreation","title","message","color","close","toggleDeleteModal","show","onConfirm","deleteSelectedBackup","Component","withTranslation","module","exports","ConfirmModal","onHide","Header","Title","as","Body","Footer","defaultProps","Math"],"mappings":"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","file":"static/js/139.1156de6f.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport round from '@stdlib/math/base/special/round';\nimport ConfirmModal from 'components/confirm-modal';\nimport server from 'constants/server';\n\n\n// MAIN //\n\nclass BackupsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tselectedBackup: null,\n\t\t\tshowDeleteModal: false\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.getBackups();\n\t}\n\n\thandleBackupCreation = () => {\n\t\tthis.props.createBackup();\n\t}\n\n\taskToDeleteSelectedBackupFactory = ( backup ) => {\n\t\treturn () => {\n\t\t\tthis.setState({\n\t\t\t\tshowDeleteModal: !this.state.showDeleteModal,\n\t\t\t\tselectedBackup: backup\n\t\t\t});\n\t\t};\n\t}\n\n\tdeleteSelectedBackup= () => {\n\t\tthis.setState({\n\t\t\tshowDeleteModal: false\n\t\t}, async () => {\n\t\t\tawait this.props.deleteBackup( this.state.selectedBackup._id );\n\t\t});\n\t}\n\n\ttoggleDeleteModal = () => {\n\t\tthis.setState({\n\t\t\tshowDeleteModal: !this.state.showDeleteModal\n\t\t});\n\t}\n\n\trenderBackupList() {\n\t\tif ( !this.props.admin.backups ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Table striped bordered hover>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>{t('common:filename')}</th>\n\t\t\t\t\t\t<th>{t('common:size')}</th>\n\t\t\t\t\t\t<th>{t('common:date')}</th>\n\t\t\t\t\t\t<th>{t('common:actions')}</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{this.props.admin.backups.map( ( x, idx ) => {\n\t\t\t\t\tif ( !x ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tconst size = round( x.size / ( 1024 * 1024 ) );\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr key={idx} >\n\t\t\t\t\t\t\t<td>{x.filename}</td>\n\t\t\t\t\t\t\t<td>{`${size} MB`}</td>\n\t\t\t\t\t\t\t<td>{x.createdAt}</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<a href={`${server}/${x.filename}`} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"download-backup-tooltip\">{t('download-backup')}</Tooltip>}>\n\t\t\t\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" style={{ marginRight: 8 }} >\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-cloud-download-alt\" ></i>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"delete-backup-tooltip\">{t('delete-backup')}</Tooltip>}>\n\t\t\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"danger\" onClick={this.askToDeleteSelectedBackupFactory( x )} >\n\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-trash-alt\" ></i>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</tbody>\n\t\t\t</Table>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"admin-settings-outer-container\" >\n\t\t\t\t\t<h1>{t('created-backups')}</h1>\n\t\t\t\t\t{this.renderBackupList()}\n\t\t\t\t\t<Button size=\"lg\" onClick={this.handleBackupCreation} >\n\t\t\t\t\t\t<i className=\"fas fa-cloud-upload-alt\" style={{ marginRight: 12 }}></i>\n\t\t\t\t\t\t{t('create-backup')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t{ this.state.showDeleteModal ? <ConfirmModal\n\t\t\t\t\ttitle={t('delete-backup')}\n\t\t\t\t\tmessage={<div>\n\t\t\t\t\t\t<p>{t('delete-backup-confirm')}</p>\n\t\t\t\t\t\t<span style={{ color: 'red' }}>{this.state.selectedBackup.filename}</span>\n\t\t\t\t\t</div>}\n\t\t\t\t\tclose={this.toggleDeleteModal}\n\t\t\t\t\tshow={this.state.showDeleteModal}\n\t\t\t\t\tonConfirm={this.deleteSelectedBackup}\n\t\t\t\t/> : null }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nBackupsPage.propTypes = {\n\tadmin: PropTypes.object.isRequired,\n\tcreateBackup: PropTypes.func.isRequired,\n\tdeleteBackup: PropTypes.func.isRequired,\n\tgetBackups: PropTypes.func.isRequired\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'admin_settings', 'common' ] )( BackupsPage );\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // TODO: implementation\n\n/**\n* Round a numeric value to the nearest integer.\n*\n* @module @stdlib/math/base/special/round\n*\n* @example\n* var round = require( '@stdlib/math/base/special/round' );\n*\n* var v = round( -4.2 );\n* // returns -4.0\n*\n* v = round( -4.5 );\n* // returns -4.0\n*\n* v = round( -4.6 );\n* // returns -5.0\n*\n* v = round( 9.99999 );\n* // returns 10.0\n*\n* v = round( 9.5 );\n* // returns 10.0\n*\n* v = round( 9.2 );\n* // returns 9.0\n*\n* v = round( 0.0 );\n* // returns 0.0\n*\n* v = round( -0.0 );\n* // returns -0.0\n*\n* v = round( Infinity );\n* // returns Infinity\n*\n* v = round( -Infinity );\n* // returns -Infinity\n*\n* v = round( NaN );\n* // returns NaN\n*/\n// MODULES //\n\nvar round = require('./round.js'); // EXPORTS //\n\n\nmodule.exports = round;","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\n\n\n// MAIN //\n\nconst ConfirmModal = ( props ) => (\n\t<Modal show={props.show} onHide={props.close}>\n\t\t<Modal.Header>\n\t\t\t<Modal.Title as=\"h3\">{props.title}</Modal.Title>\n\t\t</Modal.Header>\n\t\t<Modal.Body>\n\t\t\t{props.message}\n\t\t</Modal.Body>\n\t\t<Modal.Footer>\n\t\t\t<Button onClick={props.close}>{props.t('cancel')}</Button>\n\t\t\t<Button variant=\"danger\" onClick={props.onConfirm}>{props.t('confirm')}</Button>\n\t\t</Modal.Footer>\n\t</Modal>\n);\n\n\n// PROPERTIES //\n\nConfirmModal.propTypes = {\n\tclose: PropTypes.func,\n\tmessage: PropTypes.node,\n\tonConfirm: PropTypes.func,\n\tshow: PropTypes.bool,\n\ttitle: PropTypes.string\n};\n\nConfirmModal.defaultProps = {\n\tclose() {},\n\tmessage: '',\n\tonConfirm() {},\n\tshow: false,\n\ttitle: ''\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'common' ] )( ConfirmModal );\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // TODO: implementation\n\n/**\n* Rounds a numeric value to the nearest integer.\n*\n* @param {number} x - input value\n* @returns {number} function value\n*\n* @example\n* var v = round( -4.2 );\n* // returns -4.0\n*\n* @example\n* var v = round( -4.5 );\n* // returns -4.0\n*\n* @example\n* var v = round( -4.6 );\n* // returns -5.0\n*\n* @example\n* var v = round( 9.99999 );\n* // returns 10.0\n*\n* @example\n* var v = round( 9.5 );\n* // returns 10.0\n*\n* @example\n* var v = round( 9.2 );\n* // returns 9.0\n*\n* @example\n* var v = round( 0.0 );\n* // returns 0.0\n*\n* @example\n* var v = round( -0.0 );\n* // returns -0.0\n*\n* @example\n* var v = round( Infinity );\n* // returns Infinity\n*\n* @example\n* var v = round( -Infinity );\n* // returns -Infinity\n*\n* @example\n* var v = round( NaN );\n* // returns NaN\n*/\n\nvar round = Math.round; // eslint-disable-line stdlib/no-builtin-math\n// EXPORTS //\n\nmodule.exports = round;"],"sourceRoot":""}