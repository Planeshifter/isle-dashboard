(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{4832:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(28),l=a(0),o=a.n(l),i=a(3),c=a(12),m=a(13),p=a(27),u=a(20),d=a(39),g=a(50),h=a(1048),f=a(490),E=a(540),b=a(522),v=a(581),w=a(516),y=a(502),I=a(511),O=a(567),k=a(727),j=a(595),C=a(481),x=(a(705),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),n=t.call(this,e),Object(g.a)(Object(p.a)(n),"handleSubmit",function(){var e=Object(i.a)(o.a.mark((function e(t){var a,r,s,l,i,c,m,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==(a={password:n.state.password,email:n.state.email}).email){e.next=6;break}n.setState({showInputOverlay:!0,overlayTarget:n.emailInput,invalidInputMessage:"Enter your email address."}),e.next=31;break;case 6:if(""!==a.password){e.next=10;break}n.setState({showInputOverlay:!0,overlayTarget:n.passwordInput,invalidInputMessage:"Enter your password."}),e.next=31;break;case 10:return e.prev=10,e.next=13,n.props.handleLogin(a);case 13:if(r=e.sent,"finish-login-via-tfa"!==(s=r.data.message)){e.next=19;break}n.props.history.push("/login-tfa"),e.next=25;break;case 19:if("ok"!==s){e.next=25;break}return l=r.data,i=l.token,c=l.id,e.next=23,n.props.fetchCredentials({token:i,id:c});case 23:(m=e.sent)&&n.props.getEnrollableCohorts(m);case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(10),p=e.t0.response?e.t0.response.data:e.t0.message,n.setState({showInputOverlay:!0,overlayTarget:"Password is not correct."===p?n.passwordInput:n.emailInput,invalidInputMessage:p},(function(){setTimeout((function(){n.setState({showInputOverlay:!1})}),4e3)}));case 31:case"end":return e.stop()}}),e,null,[[10,27]])})));return function(t){return e.apply(this,arguments)}}()),Object(g.a)(Object(p.a)(n),"handleInputChange",(function(e){var t=e.target,a=t.value,r=t.name;n.setState({[r]:a})})),n.state={email:"",password:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.user;e&&e.loggedIn&&(this.props.restoreLogin(e),this.props.getEnrollableCohorts(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.t,s=t.settings;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"login"},r.a.createElement(E.a,{className:"login-panel"},r.a.createElement(E.a.Header,null,r.a.createElement(E.a.Title,{as:"h1",style:{textAlign:"center"}},"ISLE ",r.a.createElement("small",null,s.siteTitle))),r.a.createElement(E.a.Body,null,r.a.createElement(O.a,null,r.a.createElement(I.a,{controlId:"form-email"},r.a.createElement(v.a,null,r.a.createElement(b.a,{sm:3},r.a.createElement(w.a,null,a("common:email"))),r.a.createElement(b.a,{sm:9},r.a.createElement(y.a,{name:"email",type:"email",autoComplete:"isle-email",placeholder:a("common:email"),onChange:this.handleInputChange,ref:function(t){e.emailInput=t}})))),r.a.createElement(I.a,{controlId:"form-password"},r.a.createElement(v.a,null,r.a.createElement(b.a,{sm:3},r.a.createElement(w.a,null,a("common:password"))),r.a.createElement(b.a,{sm:9},r.a.createElement(y.a,{name:"password",type:"password",autoComplete:"isle-password",placeholder:a("common:password"),onChange:this.handleInputChange,ref:function(t){e.passwordInput=t}})))),r.a.createElement(I.a,null,r.a.createElement(f.a,{className:"centered",variant:"primary",onClick:this.handleSubmit,type:"submit"},a("common:login"))))),r.a.createElement(E.a.Footer,{style:{background:"rgba(255,255,255,0.6)",textAlign:"right"}},r.a.createElement(C.a,{to:"/forgot-password"},a("common:forgot-password")),s.allowUserRegistrations?r.a.createElement(n.Fragment,null,r.a.createElement("span",null," | "),r.a.createElement(C.a,{to:"/signup"},a("common:register"))):null))),r.a.createElement(k.a,{show:this.state.showInputOverlay,target:this.state.overlayTarget,placement:"right",containerPadding:20},r.a.createElement(j.a,{id:"popover-contained",title:"Not valid"},this.state.invalidInputMessage)))}}]),a}(n.Component)),S=Object(h.a)(["login","common"])(x),T=a(58),L=a(57),M=a(70);var N=Object(s.c)((function(e){return{user:e.user,settings:e.settings}}),(function(e){return{handleLogin:Object(M.h)(e),restoreLogin:Object(M.o)(e),fetchCredentials:Object(T.b)(e),getEnrollableCohorts:Object(L.g)(e)}}))(S);t.default=N},705:function(e,t,a){}}]);
//# sourceMappingURL=159.a25c177b.chunk.js.map