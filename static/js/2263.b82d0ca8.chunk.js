/*! For license information please see 2263.b82d0ca8.chunk.js.LICENSE.txt */
(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[2263],{96128:function(e,t,n){"use strict";n.d(t,{fH:function(){return g},Zl:function(){return b}});var a=n(87757),r=n.n(a),s=n(92137),o=n(41488),l=n(86072),i=n.n(l),c=n(66438),m=n(33837),u=n.n(m),p=n(4135),d=n(41985),h=n(33357);function f(e){return{type:h.eu,payload:{badges:e}}}var v=function(){var e=(0,s.Z)(r().mark((function e(t){var n,a,s,l,m,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i().get(p.ZP+"/get_user_badges");case 3:if(n=e.sent,a=n.data,s=a.badges,l=a.addedBadges,t(f(s)),l.length>0)for(m=0;m<s.length;m++)h=s[m],u()(l,h.name)&&(0,d.wN)(t,(v=void 0,g=void 0,E=void 0,b=void 0,v=(r=h).name,g=r.description,E=r.picture,b=p.ZP+"/badges/"+E,{children:o.createElement("div",null,o.createElement("h3",null,c.Z.t("common:received-badge"),v),o.createElement("div",null,o.createElement("div",null,o.createElement("div",{className:"received-badge-before"}),o.createElement("img",{className:"received-badge",src:b,alt:"Received Badge"})),o.createElement("p",{style:{marginTop:15}},c.Z.t("common:received-badge-for"),o.createElement("b",null,g)))),level:"info",position:"tc",dismissible:"button",autoDismiss:0}));e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,d.EG)(t,e.t0);case 12:case"end":return e.stop()}var r,v,g,E,b}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(e){return(0,s.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:case"end":return t.stop()}}),t)})))},E=function(){var e=(0,s.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i().get(p.ZP+"/get_available_badges");case 3:n=e.sent,t((a=n.data,{type:h.Z9,payload:{badges:a}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,d.EG)(t,e.t0);case 10:case"end":return e.stop()}var a}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){return(0,s.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:case"end":return t.stop()}}),t)})))}},905:function(e,t,n){"use strict";n.d(t,{Ib:function(){return v},Ll:function(){return y},kC:function(){return k},J3:function(){return x},qw:function(){return C},Tm:function(){return _},hA:function(){return M},Vw:function(){return A}});var a=n(87757),r=n.n(a),s=n(92137),o=n(86072),l=n.n(o),i=n(67403),c=n(66438),m=n(83531),u=n(4135),p=n(41985),d=n(58713),h=n(33357);function f(e){return{type:h.$8,payload:{namespace:e}}}function v(e){var t=e.title,n=e.owners,a=e.announcements,r=void 0===a?[]:a,s=e.cohorts,o=void 0===s?[]:s,l=e.description,i=e.enableTicketing,c=e._id;return{type:h.WF,payload:{title:t,announcements:r,cohorts:o,description:l,enableTicketing:i,owners:n,_id:c}}}function g(e){return{type:h.ke,payload:{id:e}}}function E(e){var t=e.email,n=e.lessonID,a=e.progress,r=e.cohort;return{type:h.LX,payload:{email:t,lessonID:n,progress:a,cohort:r}}}var b=function(){var e=(0,s.Z)(r().mark((function e(t,n){var a,s,o,i,c,m;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.title,s=n.description,o=n.owners,i=n.props,e.prev=1,e.next=4,l().post(u.ZP+"/create_namespace",{title:a,description:s,owners:o});case 4:if((c=e.sent).data.successful){e.next=7;break}return e.abrupt("return",(0,p.EG)(t,new Error(c.data.message)));case 7:m=c.data.namespace,i.onNamespace(m),t(f(m)),i.history.replace("/lessons"),(0,p.wN)(t,{message:c.data.message,level:c.data.successful?"success":"error"}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),(0,p.EG)(t,e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}(),y=function(e){return function(){var t=(0,s.Z)(r().mark((function t(n){var a,s,o,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.title,s=n.description,o=n.owners,l=n.props,t.next=3,b(e,{title:a,description:s,owners:o,props:l});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Z=function(){var e=(0,s.Z)(r().mark((function e(t,n,a){var s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().post(u.ZP+"/delete_namespace",{id:n});case 3:s=e.sent,a&&a.replace("/lessons"),t(g(n)),(0,p.wN)(t,{message:s.data.message,level:"success"}),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",(0,p.EG)(t,e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),k=function(e){return function(){var t=(0,s.Z)(r().mark((function t(n,a){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(e,n,a);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},w=function(){var e=(0,s.Z)(r().mark((function e(t,n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().post(u.ZP+"/update_namespace",{ns:n});case 3:a=e.sent,t(v(a.data.namespace)),t((r=a.data.namespace,s=void 0,o=void 0,i=void 0,c=void 0,m=void 0,s=r.title,o=r.owners,i=r.description,c=r.enableTicketing,m=r._id,{type:h.Rg,payload:{title:s,description:i,owners:o,enableTicketing:c,_id:m}})),(0,p.wN)(t,{message:a.data.message,level:"success"}),(0,d.k$)(t,{namespaceID:n._id}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,p.EG)(t,e.t0);case 13:case"end":return e.stop()}var r,s,o,i,c,m}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),x=function(e){return function(){var t=(0,s.Z)(r().mark((function t(n,a){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,n,a);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},N=function(){var e=(0,s.Z)(r().mark((function e(t,n){var a,s,o,c,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.namespaceID,s=n.namespaceTitle,e.prev=1,e.next=4,l().get(u.ZP+"/get_namespace_actions?"+i.stringify({namespaceID:a}));case 4:o=e.sent,c=new Blob([o.data],{type:"application/json"}),d="actions_".concat(s,".json"),(0,m.Z)(c,d),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,p.EG)(t,e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(e){return function(){var t=(0,s.Z)(r().mark((function t(n){var a,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.namespaceID,s=n.namespaceTitle,t.next=3,N(e,{namespaceID:a,namespaceTitle:s});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(){var e=(0,s.Z)(r().mark((function e(t,n){var a,s,o,i,m,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.email,s=n.lessonID,o=n.namespaceID,i=n.progress,m=n.cohort,e.next=3,l().post(u.ZP+"/user_adjust_progress",{email:a,lessonID:s,namespaceID:o,progress:i});case 3:d=e.sent,(0,p.wN)(t,{title:c.Z.t("common:updated"),message:d.data.message,level:"success"}),t(E({email:a,lessonID:s,progress:i,cohort:m}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(e){return function(){var t=(0,s.Z)(r().mark((function t(n){var a,s,o,l,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.email,s=n.lessonID,o=n.namespaceID,l=n.progress,i=n.cohort,t.next=3,S(e,{email:a,lessonID:s,namespaceID:o,progress:l,cohort:i});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=function(){var e=(0,s.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().get(u.ZP+"/get_all_namespaces");case 3:n=e.sent,t({type:h.XM,payload:{namespaces:n.data.namespaces}}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,p.EG)(t,e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),M=function(e){return(0,s.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D(e);case 2:case"end":return t.stop()}}),t)})))},P=function(){var e=(0,s.Z)(r().mark((function e(t,n){var a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.lessons,s=n.id,e.prev=1,e.next=4,l().post(u.ZP+"/set_lesson_order",{lessons:a,id:s});case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",(0,p.EG)(t,e.t0));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),A=function(e){return function(){var t=(0,s.Z)(r().mark((function t(n){var a,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.lessons,s=n.id,t.next=3,P(e,{lessons:a,id:s});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},1249:function(e,t,n){"use strict";var a=n(41488);t.Z=function(e){var t=e.Header,n=e.Cell,r=e.accessor,s=e.labels,o=e.maxWidth;return{Header:t,accessor:r,style:undefined,Cell:n,filterMethod:function(e,t){if("all"===e.value)return!0;var n=e.pivotId||e.id;return void 0===t[n]||String(t[n])===e.value},Filter:function(e){var t,n=e.filter,r=e.onChange,o=function(e){var t=e.target.value;r(t)};return t=n?n.value:"all",a.createElement("select",{onBlur:o,onChange:o,style:{width:"100%",backgroundColor:"ghostwhite"},value:t},a.createElement("option",{value:"all"},"Show All"),s.map((function(e,t){return a.createElement("option",{value:e,key:t},e)})))},maxWidth:void 0===o?150:o}}},70384:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var a=n(6610),r=n(5991),s=n(63349),o=n(10379),l=n(60446),i=n(96156),c=n(41488),m=n(25472),u=n(70048),p=n(66734),d=n(47701),h=n(85840),f=n(54012),v=n(75018),g=n(73230),E=n(4135),b=function(e){(0,o.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,a.Z)(this,n),r=t.call(this,e),(0,i.Z)((0,s.Z)(r),"handleResponseChange",(function(e){r.setState({response:e.target.value})})),(0,i.Z)((0,s.Z)(r),"handleResponseSubmit",(function(){r.props.submitTicketMessage({message:r.state.response,ticketID:r.props.ticket._id}),r.setState({response:""})})),(0,i.Z)((0,s.Z)(r),"toggleCompletion",(function(){r.props.ticket.done?r.props.openTicket(r.props.ticket._id):r.props.closeTicket(r.props.ticket._id)})),(0,i.Z)((0,s.Z)(r),"renderMessage",(function(e,t){var n=r.props.t,a=new Date(e.createdAt);return c.createElement("div",{className:"message-container",key:t},c.createElement("div",{className:"message-data"},c.createElement("div",{className:"message-profile-pic"},c.createElement("img",{src:"".concat(E.ZP,"/thumbnail/").concat(e.picture),alt:"User Profile Pic"})),c.createElement("div",{className:"message-author-line"},c.createElement("span",{className:"message-author"},e.author),"\xa0",n("common:wrote-on",{date:"".concat(a.toLocaleTimeString()," ").concat(a.toLocaleDateString())}))),c.createElement("div",{className:"message-body"},e.body))})),r.state={response:""},r}return(0,r.Z)(n,[{key:"render",value:function(){var e,t=this.props.t,n=this.props.ticket;return c.createElement(c.Fragment,null,c.createElement(h.Z,{show:this.props.show,onHide:this.props.onHide,dialogClassName:"modal-60w"},c.createElement(h.Z.Header,null,c.createElement(h.Z.Title,{as:"h3",style:{width:"100%"}},t("common:title"),": ",n.title,c.createElement(p.Z,{placement:"right",overlay:(e=t("close-ticket-modal"),c.createElement(d.Z,{id:"tooltip"},e))},c.createElement(u.Z,{onClick:this.props.onHide,style:{float:"right"},variant:"outline-secondary","aria-label":t("close-ticket-modal"),className:"modal-close"},c.createElement("span",{"aria-hidden":"true"},"x"))))),c.createElement(h.Z.Body,{style:{height:"60vh",overflowY:"auto"}},c.createElement("span",{className:"title"},t("common:description"),":"),c.createElement("p",{style:{whiteSpace:"pre-wrap"}},n.description),c.createElement("hr",null),n.namespace.title?c.createElement(c.Fragment,null,c.createElement("span",{className:"title"},"".concat(t("common:course"),": ")),c.createElement("span",null,n.namespace.title)," | "):null,n.lesson?c.createElement(c.Fragment,null,c.createElement("span",{className:"title"},"".concat(t("common:lesson"),": ")),c.createElement("span",null,n.lesson.title)," | "):null,n.component?c.createElement(c.Fragment,null,c.createElement("span",{className:"title"},"".concat(t("common:component"),": ")),c.createElement("span",null,n.component)):null,n.attachments.length>0?c.createElement(c.Fragment,null,c.createElement("br",null),c.createElement("span",{className:"title"},"".concat(t("common:attachments"),": ")),n.attachments.map((function(e,t){return c.createElement("a",{href:"".concat(E.ZP,"/attachments/").concat(e.filename),key:t,style:{marginLeft:6},target:"_blank",rel:"noopener noreferrer"},c.createElement("i",{className:"fas fa-link",style:{marginRight:2}}),e.title)}))):null,c.createElement("br",null),c.createElement("hr",null),c.createElement("span",{className:"title"},t("common:messages"),":"),n.messages.map(this.renderMessage),c.createElement("hr",null)),c.createElement(h.Z.Footer,{style:{background:"ghostwhite"}},c.createElement(g.Z,{controlId:"form-text",style:{width:"calc(100% - 200px)"}},c.createElement(f.Z,null,t("enter-response")),c.createElement(v.Z,{name:"body",type:"text",as:"textarea",rows:"5",value:this.state.response,placeholder:n.done?t("require-open-ticket"):t("response-comes-here"),onChange:this.handleResponseChange,disabled:n.done})),c.createElement("div",{style:{float:"right",width:"180px"}},c.createElement(u.Z,{block:!0,onClick:this.handleResponseSubmit,disabled:!this.state.response||n.done},t("submit-response")),c.createElement(u.Z,{block:!0,onClick:this.toggleCompletion},n.done?t("common:open-ticket"):t("common:close-ticket")),c.createElement(u.Z,{block:!0,onClick:this.props.onHide},t("common:hide"))))))}}]),n}(c.Component);b.defaultProps={};var y=(0,m.Z)(["ticket_modal","common"])(b)},72159:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Rt}});var a=n(41488),r=n(9251),s=n(59486),o=n(6610),l=n(5991),i=n(63349),c=n(10379),m=n(60446),u=n(96156),p=n(10077),d=n.n(p),h=n(25472),f=n(26881),v=n(90013),g=n(62410),E=n.n(g),b=n(4846),y=n.n(b),Z=n(87095),k=n(70048),w=n(54012),x=n(73230),N=n(66734),C=n(47701),S=n(52785),_=n(33606),D=n.n(_),M=n(72488),P=n.n(M),A=n(80213),T=n.n(A),I=n(35683),F=n.n(I),L=n(33837),O=n.n(L),z=n(12699),H=n.n(z),R=n(6233),B=n.n(R),U=n(52428),j=n(98032),W=n(47355),V=n(42263),K=n(4135),G=n(83531),J=(n(87815),["name","email","lesson","title","filename","type","createdAt","updatedAt"]),q=d()("isle:files-page"),Y=function(e){for(var t=0;t<e.length;t++){var n=F()(e[t],J);n.lesson=n.lesson.title,n.filename=K.ZP+"/"+n.filename,e[t]=n}return e},$=function(e){(0,c.Z)(n,e);var t=(0,m.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,u.Z)((0,i.Z)(r),"handleDelete",(function(){r.props.handleFileDeletion(r.state.deletionID,r.props.ownerFiles),r.toggleDeleteModal()})),(0,u.Z)((0,i.Z)(r),"toggleDeleteModal",(function(){r.setState({showDeleteModal:!r.state.showDeleteModal})})),(0,u.Z)((0,i.Z)(r),"createColumns",(function(){var e=r.props.t;return[{Header:e("common:filename"),accessor:"title",minWidth:250,filterMethod:function(e,t){return O()(H()(t[e.id]),H()(e.value))}},{Header:e("common:open"),accessor:"filename",Cell:function(t){return a.createElement(N.Z,{placement:"left",overlay:a.createElement(C.Z,{id:"external-link-tooltip"},e("open-file"))},a.createElement("a",{href:K.ZP+"/"+t.value,target:"_blank",rel:"noopener noreferrer"},a.createElement(k.Z,{size:"sm",variant:"outline-secondary"},a.createElement("i",{className:"fa fa-external-link-alt"}))))},resizable:!1,filterable:!1,sortable:!1,width:45},{Header:e("common:copy"),id:"copy-path",accessor:"filename",Cell:function(t){return a.createElement(N.Z,{placement:"right",overlay:a.createElement(C.Z,{id:"copy-clipboard-tooltip"},e("common:copy-link"))},a.createElement(k.Z,{variant:"outline-secondary",size:"sm",onClick:function(){D()(K.ZP+"/"+t.value),r.props.addNotification({title:"Copied",message:"Link copied to clipboard",level:"success",position:"tl"})}},a.createElement("i",{className:"fa fa-clipboard"})))},resizable:!1,filterable:!1,sortable:!1,width:45},{Header:e("common:lesson"),accessor:"lesson",maxWidth:160,Cell:function(t){return t.row.lesson?a.createElement(N.Z,{placement:"right",overlay:a.createElement(C.Z,{id:"open-lesson-tooltip"},e("open-lesson-new-tab"))},a.createElement("div",{style:{width:"100%",height:"100%"}},a.createElement("a",{href:t.row.lesson.url,target:"_blank",rel:"noopener noreferrer"},t.row.lesson.title))):a.createElement("span",null,e("no-lesson"))},filterMethod:function(e,t){return t[e.id].title.startsWith(e.value)}},{Header:e("first-name"),id:"first_name",accessor:function(e){var t=B()(e.name).split(" ");return t.length>1?(t.pop(),t.join(" ")):t[0]},maxWidth:75,style:{color:"darkslategrey"},filterMethod:function(e,t){return O()(H()(t[e.id]),H()(e.value))}},{Header:e("last-name"),id:"last_name",accessor:function(e){var t=B()(e.name).split(" ");return t.length>1?t[t.length-1]:""},maxWidth:75,style:{color:"darkslategrey"},filterMethod:function(e,t){return O()(H()(t[e.id]),H()(e.value))}},{Header:e("common:email"),accessor:"email",maxWidth:160,filterMethod:function(e,t){return O()(H()(t[e.id]),H()(e.value))}},{Header:e("type"),accessor:"type",filterMethod:function(e,t){return O()(t[e.id],e.value)}},{Header:e("common:size"),accessor:"size",Cell:function(e){return e.value?"".concat(P()(e.value,-3),"mb"):"NA"},filterMethod:function(e,t){var n=t[e.pivotId||e.id];return n>=e.value.min&&n<=e.value.max},Filter:function(e){var t=e.filter,n=e.onChange,s=T()(r.state.fileMaxSize)||1,o={max:s,min:0};return a.createElement("div",{style:{paddingLeft:"4px",paddingRight:"4px",paddingTop:"8px"}},a.createElement(y(),{allowSameValues:!0,maxValue:s,minValue:0,step:.1,value:t?t.value:o,onChange:function(e){n(e)},formatLabel:function(e){return P()(e,-2)}}))}},{Header:e("common:date"),accessor:"updatedAt",Cell:function(e){return e.value&&e.value.toLocaleDateString?e.value.toLocaleDateString("en-US"):""},maxWidth:120},{Header:"Del",accessor:"_id",Cell:function(t){return a.createElement(N.Z,{placement:"left",overlay:a.createElement(C.Z,{id:"delete-file-tooltip"},e("delete-file-tooltip"))},a.createElement(k.Z,{size:"sm",variant:"outline-secondary",onClick:function(){r.setState({deletionID:t.value,showDeleteModal:!0})}},a.createElement("div",{className:"fa fa-trash-alt"})))},resizable:!1,filterable:!1,sortable:!1,width:45}]})),(0,u.Z)((0,i.Z)(r),"saveJSON",(function(){var e=r.dashboardTable.table.getResolvedState().sortedData,t=Y(e),n=new Blob([JSON.stringify(t)],{type:"application/json"}),a="files_".concat(r.props.namespace.title,".json");(0,G.Z)(n,a)})),(0,u.Z)((0,i.Z)(r),"saveCSV",(function(){var e=r.dashboardTable.table.getResolvedState().sortedData,t=Y(e);E()(t,{header:!0},(function(e,t){if(e)return r.props.addNotification({title:"Error encountered",message:"Encountered an error while creating CSV: "+e.message,level:"error",position:"tl"});var n=new Blob([t],{type:"text/plain"}),a="files_".concat(r.props.namespace.title,".csv");(0,G.Z)(n,a)}))})),(0,u.Z)((0,i.Z)(r),"toggleExplorer",(function(){r.setState({showExplorer:!r.state.showExplorer})})),r.columns=r.createColumns(),r.state={showDeleteModal:!1,deletionID:null,fileMaxSize:0,fileInputKey:0,showExplorer:!1},r}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){q("Component did mount..."),this.props.getFiles({namespaceName:this.props.namespace.title})}},{key:"componentDidUpdate",value:function(e){if(e.files!==this.props.files){for(var t=this.props.files,n=0,a=0;a<t.length;a++){var r=t[a].size;r&&r>n&&(n=r)}this.setState({fileMaxSize:n,fileInputKey:this.state.fileInputKey+1})}}},{key:"render",value:function(){var e=this,t=this.props.t;if(this.state.showExplorer){for(var n=this.props.files,r=[],s=0;s<n.length;s++){var o=n[s],l={};l.title=o.title,l.type=o.type,l.lesson=o.lesson?o.lesson.title:null,l.size=o.size?o.size:null,l.email=o.email,l.createdAt=o.createdAt,l.updatedAt=o.updatedAt,r.push(l)}r=(0,j.Z)(r);return a.createElement(U.Z,{title:t("explorer-files-title"),data:r,categorical:["title","type","lesson","email","createdAt","updatedAt"],quantitative:["size"],close:this.toggleExplorer})}return a.createElement("div",{className:"namespace-data-page"},a.createElement("div",{className:"namespace-data-buttons"},a.createElement(Z.Z,{className:"files-export-button-group"},a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"csvTooltip"},t("save-as-csv"))},a.createElement(k.Z,{size:"sm",variant:"secondary",onClick:this.saveCSV},a.createElement("i",{className:"fas fa-download"})," CSV")),a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"jsonTooltip"},t("save-as-json"))},a.createElement(k.Z,{size:"sm",variant:"secondary",onClick:this.saveJSON},a.createElement("i",{className:"fas fa-download"})," JSON"))),this.props.ownerFiles?a.createElement(x.Z,{className:"file-upload-button"},a.createElement(w.Z,{htmlFor:"fileUpload",style:{cursor:"pointer"}},a.createElement("h3",null,a.createElement(S.Z,{variant:"success"},t("upload-file"))),a.createElement("input",{id:"fileUpload",key:this.state.fileInputKey,type:"file",accept:".pdf,.html,.md,image/*,video/*,audio/*,.json,.csv",onChange:this.props.handleUpload,style:{display:"none"}}))):null),a.createElement(W.Z,{data:this.props.files,columns:this.columns,t:t,ref:function(t){e.dashboardTable=t},onButtonClick:this.toggleExplorer}),a.createElement(V.Z,{show:this.state.showDeleteModal,close:this.toggleDeleteModal,message:t("delete-file"),title:"".concat(t("common:delete"),"?"),onConfirm:this.handleDelete}))}}]),n}(a.Component);$.defaultProps={ownerFiles:!1};var X=(0,h.Z)(["namespace_data","common"])($),Q=n(29530),ee=n(75018),te=n(52787),ne=(n(62173),function(e){(0,c.Z)(n,e);var t=(0,m.Z)(n);function n(e){var a;return(0,o.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,i.Z)(a),"deleteSelectedMessage",(function(){var e=a.state.editItem,t=a.props.namespace.announcements[e];a.props.deleteAnnouncement(t.createdAt,e),a.clear(),a.closeDeleteModal()})),(0,u.Z)((0,i.Z)(a),"createMessage",(function(){var e=(new Date).getTime(),t={title:a.state.title,body:a.state.body,author:a.props.user.name,email:a.props.user.email,picture:a.props.user.picture};if(null===a.state.editItem)t.createdAt=e,a.props.addAnnouncement(t);else{var n=a.props.namespace.announcements[a.state.editItem];t.createdAt=n.createdAt,a.props.editAnnouncement(t)}a.clear()})),(0,u.Z)((0,i.Z)(a),"handleInputChange",(function(e){var t=e.target,n=t.name,r=t.value;a.setState((0,u.Z)({},n,r))})),(0,u.Z)((0,i.Z)(a),"clear",(function(){a.setState({title:"",body:"",mode:"new-announcement",editItem:null})})),(0,u.Z)((0,i.Z)(a),"closeDeleteModal",(function(){a.setState({editItem:null,showDeleteModal:!1})})),a.state={title:"",body:"",mode:"new-announcement",editItem:null,showDeleteModal:!1},a}return(0,l.Z)(n,[{key:"renderModals",value:function(){return null}},{key:"editMessage",value:function(e){var t=this.props.namespace.announcements[e];this.setState({mode:"edit-announcement",editItem:e,title:t.title,body:t.body})}},{key:"renderMessages",value:function(){var e=this,t=this.props.t;return a.createElement("div",null,this.props.namespace.announcements.map((function(n,r){var s=new Date(n.createdAt),o=s.toLocaleDateString()+"  -  "+s.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});return a.createElement("div",{key:r},a.createElement("div",{className:"message-container"},a.createElement("div",{className:"message-data"},a.createElement("div",{className:"message-profile-pic"},a.createElement("img",{src:n.picture,alt:"User Profile Pic"})),a.createElement("div",{className:"message-author-line"},a.createElement("span",{className:"message-author"},n.author),"\xa0",t("common:wrote-on",{date:o}))),a.createElement("div",{className:"message-title"},n.title),a.createElement("div",{className:"message-body"},n.body)),a.createElement("div",{className:"message-manip"},a.createElement("button",{onClick:function(){e.setState({editItem:r,showDeleteModal:!0})},className:"message-delete"},t("common:delete")),a.createElement("button",{onClick:function(){e.editMessage(r)},className:"message-edit"},t("common:edit"))))})))}},{key:"render",value:function(){var e=this.props.t,t=this.state.title.length<3||this.state.body.length<3,n=0===this.state.title.length&&0===this.state.body.length;return a.createElement("div",{className:"namespace-data-page"},a.createElement("div",{className:"messages"},this.renderMessages()),a.createElement("div",{className:"new_message"},a.createElement(Q.Z,null,a.createElement(Q.Z.Header,null,a.createElement(Q.Z.Title,{as:"h3"},e(this.state.mode))),a.createElement(Q.Z.Body,null,a.createElement(te.Z,{style:{padding:"20px"}},a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"titleTooltip"},e("announcement-title"))},a.createElement(x.Z,{controlId:"form-title"},a.createElement(w.Z,null,e("common:title")),a.createElement(ee.Z,{name:"title",type:"text",value:this.state.title,onChange:this.handleInputChange}))),a.createElement(x.Z,{controlId:"form-text"},a.createElement(w.Z,null,e("announcement-text")),a.createElement(ee.Z,{name:"body",type:"text",as:"textarea",rows:"10",value:this.state.body,onChange:this.handleInputChange}))),a.createElement(Z.Z,null,a.createElement(k.Z,{type:"submit",disabled:t,onClick:this.createMessage},"new-announcement"===this.state.mode?e("common:create"):e("common:update")),a.createElement(k.Z,{onClick:this.clear,disabled:n,variant:"danger"},e("common:clear")))))),a.createElement(V.Z,{show:this.state.showDeleteModal,close:this.closeDeleteModal,message:e("delete-announcement"),title:"".concat(e("common:delete"),"?"),onConfirm:this.deleteSelectedMessage}))}}]),n}(a.Component));ne.defaultProps={};var ae=(0,h.Z)(["namespace_data","common"])(ne),re=n(92855),se=n(36394),oe=n(7131),le=n.n(oe),ie=n(74321),ce=n.n(ie),me=n(70954),ue=n.n(me),pe=n(96967),de=n.n(pe),he=n(66310),fe=n(79693),ve=n.n(fe),ge=function(e){(0,c.Z)(n,e);var t=(0,m.Z)(n);function n(e){var a;return(0,o.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,i.Z)(a),"toggleEditing",(function(){a.setState({isEditing:!a.state.isEditing,newProgress:a.props.progress})})),(0,u.Z)((0,i.Z)(a),"handleChange",(function(e){a.setState({newProgress:ve()(e.target.value,0,100),hasChanged:!0})})),(0,u.Z)((0,i.Z)(a),"handleSubmit",(function(){a.setState({isEditing:!1,hasChanged:!1}),a.props.onSubmit(a.state.newProgress)})),a.state={isEditing:!1,hasChanged:!1,newProgress:e.progress,originalProgress:e.progress},a}return(0,l.Z)(n,[{key:"render",value:function(){return this.state.isEditing?a.createElement(a.Fragment,null,a.createElement("input",{type:"number",value:this.state.newProgress,min:0,max:100,onChange:this.handleChange,className:"editable-progress-input"}),a.createElement("i",{role:"button",tabIndex:0,onClick:this.toggleEditing,onKeyPress:this.toggleEditing,className:"fas fa-window-close editable-progress-close"}),a.createElement("span",{className:"editable-progress-submit",style:{display:this.state.hasChanged?"inline":"none"}},a.createElement("i",{role:"button",tabIndex:0,onClick:this.handleSubmit,onKeyPress:this.handleSubmit,className:"fas fa-check-square"}))):a.createElement(he.Z,{style:{fontSize:"10px",height:"12px"},now:this.state.newProgress,label:"".concat(this.state.newProgress,"%"),onClick:this.toggleEditing})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.progress!==t.originalProgress?{newProgress:e.progress,originalProgress:e.progress}:null}}]),n}(a.Component),Ee=n(75033),be=d()("isle:progress-page");function ye(e,t){return function(n,a){var r=a[n.id][e[t]._id];if(de()(r))return 0===n.value.min;var s=ce()(le()(100*r.progress),100);return s>=n.value.min&&s<=n.value.max}}function Ze(e,t){return function(n,a){return n=n[e[t]._id],a=a[e[t]._id],n||a?n&&!a?1:!n&&a?-1:n.progress>a.progress?1:n.progress<a.progress?-1:0:0}}function ke(e,t){if("all"===e.value)return!0;var n=e.pivotId||e.id;return void 0===t[n]||(ue()(e.value)?O()(e.value,String(t[n])):String(t[n])===e.value)}var we=function(e){(0,c.Z)(n,e);var t=(0,m.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,u.Z)((0,i.Z)(r),"accessorFactory",(function(e,t){var n=r.props.t;return function(s){var o=s.original.lessonData,l=e[t]._id;if(o=o[l]){var i=ce()(le()(100*o.progress),100);return a.createElement("span",{style:{fontSize:"12px",fontWeight:800}},a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"durationTooltip"},n("hours-minutes-seconds"))},a.createElement("span",null,n("duration"),": ",(0,Ee.Z)(o.spentTime))),a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"startTooltip"},n("first-accessed"))},a.createElement("span",null," | ",new Date(o.createdAt).toLocaleString())),a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"startTooltip"},n("last-accessed"))},a.createElement("span",null," - ",new Date(o.updatedAt).toLocaleString())),a.createElement("br",null),a.createElement(ge,{progress:i,email:s.original.email,lessonID:l,onSubmit:function(e){r.props.adjustProgress({email:s.original.email,lessonID:l,namespaceID:r.props.namespace._id,cohort:s.original.cohort,progress:e})}}))}return a.createElement("span",null)}})),(0,u.Z)((0,i.Z)(r),"saveJSON",(function(){var e=r.assembleData(),t=new Blob([JSON.stringify(e)],{type:"application/json"}),n="completion_".concat(r.props.namespace.title,".json");(0,G.Z)(t,n)})),(0,u.Z)((0,i.Z)(r),"saveCSV",(function(){var e=r.assembleData();E()(e,{header:!0},(function(e,t){if(e)return r.props.addNotification({title:"Error encountered",message:"Encountered an error while creating CSV: "+e.message,level:"error",position:"tl"});var n=new Blob([t],{type:"text/plain"}),a="completion_".concat(r.props.namespace.title,".csv");(0,G.Z)(n,a)}))})),(0,u.Z)((0,i.Z)(r),"toggleExplorer",(function(){r.setState({showExplorer:!r.state.showExplorer})})),r.columns=r.createColumns(e.lessons,e.cohorts),r.state={displayedMembers:[],lessonSortDirection:"ascending",lessonOrder:"createdAt",showExplorer:!1},r}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){this.createDisplayedMembers()}},{key:"componentDidUpdate",value:function(e){this.props.cohorts===e.cohorts&&this.props.lessons===e.lessons||(this.createDisplayedMembers(),this.columns=this.createColumns(this.props.lessons,this.props.cohorts))}},{key:"createDisplayedMembers",value:function(){for(var e=[],t=0;t<this.props.cohorts.length;t++){for(var n=this.props.cohorts[t].members,a=0;a<n.length;a++)n[a].cohort=this.props.cohorts[t].title,n[a].lessonData||(n[a].lessonData={});e=e.concat(this.props.cohorts[t].members)}for(var r=0;r<e.length;r++){var s=e[r],o=B()(s.name).split(" ");o.length>1?(s.lastName=o.pop(),s.firstName=o.join(" ")):(s.firstName=o[0],s.lastName="")}this.setState({displayedMembers:e})}},{key:"createColumns",value:function(e,t){for(var n=this.props.t,r=[{Header:"Pic",accessor:"picture",Cell:function(e){return a.createElement("img",{className:"table-pic",src:"".concat(K.ZP,"/thumbnail/").concat(e.original.picture),alt:"Profile Pic"})},maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1,style:{color:"darkslategrey"}},{Header:n("first-name"),id:"first_name",accessor:"firstName",maxWidth:75,style:{marginTop:"8px",color:"darkslategrey"},filterMethod:function(e,t){return O()(H()(t[e.id]),H()(e.value))}},{Header:n("last-name"),id:"last_name",accessor:"lastName",maxWidth:75,style:{marginTop:"8px",color:"darkslategrey"},filterMethod:function(e,t){return O()(H()(t[e.id]),H()(e.value))}},{Header:n("common:email"),accessor:"email",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"},filterMethod:function(e,t){return O()(H()(t[e.id]),H()(e.value))}},{Header:n("common:cohort"),accessor:"cohort",style:{marginTop:"8px",color:"darkslategrey"},filterMethod:ke,Filter:function(e){var n,r=e.filter,s=e.onChange,o=function(e){var t=e.target.value;s(t)};return n=r?ue()(r.value)?r.value.join(", "):r.value:"all",a.createElement("select",{onBlur:o,onChange:o,style:{width:"100%",backgroundColor:"ghostwhite"},value:n},a.createElement("option",{value:"all"},"Show All"),t.map((function(e,t){return a.createElement("option",{key:t,value:"".concat(e.title)},e.title)})))}}],s=0;s<e.length;s++)r.push({id:"lesson_"+s,Header:e[s].title,_lesson:e[s],Cell:this.accessorFactory(e,s),accessor:"lessonData",sortMethod:Ze(e,s),filterMethod:ye(e,s),Filter:function(e){var t=e.filter,n=e.onChange;return a.createElement("div",{style:{paddingLeft:"4px",paddingRight:"4px",paddingTop:"8px"}},a.createElement(y(),{allowSameValues:!0,maxValue:100,minValue:0,value:t?t.value:{max:100,min:0},onChange:function(e){n(e)}}))}});return r}},{key:"assembleData",value:function(){for(var e=this.dashboardTable.table.getResolvedState().sortedData,t=e.length,n=new Array(t),a=this.props.lessons,r=0;r<t;r++){var s=e[r]._original;n[r]={name:s.name,firstName:s.firstName,lastName:s.lastName,email:s.email,cohort:s.cohort};for(var o=this.props.user.availableCustomFields,l=0;l<o.length;l++){var i=o[l].name;s.customFields?n[r][i]=s.customFields[i]:n[r][i]=null}for(var c=0;c<a.length;c++){var m=a[c]._id,u=s.lessonData;u&&u[m]?(u=u[m],n[r][a[c].title+"_question_progress"]=ce()(le()(100*u.progress),100),n[r][a[c].title+"_time"]=le()(u.spentTime/6e4),n[r][a[c].title+"_first_accessed"]=new Date(u.createdAt).toLocaleString(),n[r][a[c].title+"_last_accessed"]=new Date(u.updatedAt).toLocaleString()):(n[r][a[c].title+"_question_progress"]=0,n[r][a[c].title+"_time"]=0,n[r][a[c].title+"_first_accessed"]="",n[r][a[c].title+"_last_accessed"]="")}}return n}},{key:"reorderColumns",value:function(e,t){return be("Sort columns by "+e+" in "+t+" order"),"ascending"===t?this.columns.slice().sort((function(t,n){return t._lesson&&n._lesson?"title"===e?t._lesson.title.localeCompare(n._lesson.title):t._lesson[e]>n._lesson[e]?1:-1:1})):this.columns.slice().sort((function(t,n){return t._lesson&&n._lesson?"title"===e?n._lesson.title.localeCompare(t._lesson.title):t._lesson[e]<n._lesson[e]?1:-1:1}))}},{key:"renderSortButton",value:function(){var e,t=this,n=this.props.t;switch(this.state.lessonOrder){case"title":e=n("common:sort-alphabetically");break;case"createdAt":e=n("common:sort-create-date");break;case"updatedAt":e=n("common:sort-update-date")}return a.createElement(Z.Z,{className:"sort-button-group"},a.createElement(re.Z,{size:"sm",variant:"secondary",onSelect:function(e){t.columns=t.reorderColumns(e,t.state.lessonSortDirection),t.setState({lessonOrder:e})},id:"dropdown",title:a.createElement("small",null,e)},a.createElement(se.Z.Item,{eventKey:"title"},a.createElement("small",null,n("common:sort-alphabetically"))),a.createElement(se.Z.Item,{eventKey:"createdAt"},a.createElement("small",null,n("common:sort-create-date"))),a.createElement(se.Z.Item,{eventKey:"updatedAt"},a.createElement("small",null,n("common:sort-update-date")))),a.createElement(k.Z,{size:"sm",variant:"secondary",style:{marginLeft:2},onClick:function(){"ascending"===t.state.lessonSortDirection?(t.columns=t.reorderColumns(t.state.lessonOrder,"descending"),t.setState({lessonSortDirection:"descending"})):(t.columns=t.reorderColumns(t.state.lessonOrder,"ascending"),t.setState({lessonSortDirection:"ascending"}))},"aria-label":"ascending"===this.state.lessonSortDirection?n("common:sort-descending"):n("common:sort-ascending")},"ascending"===this.state.lessonSortDirection?a.createElement("i",{className:"fas fa-arrow-right"}):a.createElement("i",{className:"fas fa-arrow-left"})))}},{key:"render",value:function(){var e=this,t=this.props.t;if(this.state.showExplorer){var n=this.assembleData();n=(0,j.Z)(n);for(var r=[],s=["name","email","cohort"],o=0;o<this.props.lessons.length;o++){var l=this.props.lessons[o].title;r.push("".concat(l,"_question_progress")),r.push("".concat(l,"_time")),s.push("".concat(l,"_first_accessed")),s.push("".concat(l,"_last_accessed"))}for(var i=this.props.user.availableCustomFields,c=0;c<i.length;c++)s.push(i[c].name);return a.createElement(U.Z,{title:t("explorer-progress-title"),data:n,categorical:s,quantitative:r,close:this.toggleExplorer})}return a.createElement(a.Fragment,null,a.createElement("div",{className:"namespace-data-buttons"},this.renderSortButton(),a.createElement(Z.Z,{className:"progress-button-group"},a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"csvTooltip"},t("save-as-csv"))},a.createElement(k.Z,{size:"sm",variant:"secondary",onClick:this.saveCSV},a.createElement("i",{className:"fas fa-download"})," CSV")),a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"jsonTooltip"},t("save-as-json"))},a.createElement(k.Z,{size:"sm",variant:"secondary",onClick:this.saveJSON},a.createElement("i",{className:"fas fa-download"})," JSON")))),a.createElement("div",{className:"namespace-data-page"},a.createElement(W.Z,{className:"progress-table",data:this.state.displayedMembers,columns:this.columns,t:t,ref:function(t){e.dashboardTable=t},onButtonClick:this.toggleExplorer})))}}]),n}(a.Component);we.defaultProps={};var xe=(0,h.Z)(["namespace_data","common"])(we),Ne=n(89308),Ce=function(e){(0,c.Z)(n,e);var t=(0,m.Z)(n);function n(e){var a;(0,o.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,i.Z)(a),"handleCohortChange",(function(e){var t=[];if(e)for(var n=0;n<e.length;n++)t=t.concat(e[n].data.members);a.setState({selectedCohorts:e,displayedMembers:t})})),(0,u.Z)((0,i.Z)(a),"showUser",(function(e){a.setState({actualMember:e})})),(0,u.Z)((0,i.Z)(a),"closeActualMember",(function(){a.setState({actualMember:null})}));for(var r=e.cohorts.map((function(e){return{label:e.title,value:e.title,data:e}})),s=[],l=0;l<e.cohorts.length;l++)s=s.concat(e.cohorts[l].members);return a.state={cohortOptions:r,selectedCohorts:r,displayedMembers:s,actualMember:null},a}return(0,l.Z)(n,[{key:"componentDidUpdate",value:function(e){if(this.props.cohorts!==e.cohorts){for(var t=this.props.cohorts.map((function(e){return{label:e.title,value:e.title,data:e}})),n=[],a=0;a<this.props.cohorts.length;a++)n=n.concat(this.props.cohorts[a].members);this.setState({cohortOptions:t,selectedCohorts:t,displayedMembers:n,actualMember:null})}}},{key:"renderMember",value:function(e,t){var n=this,r="scale-up "+(.3+.05*t)+"s";return a.createElement(a.Fragment,{key:t},a.createElement("div",{className:"cohort-member",role:"button",onClick:function(){return n.showUser(e)},onKeyPress:function(){return n.showUser(e)},style:{animation:r},tabIndex:0},a.createElement("div",{className:"cohort-member-name"},e.name),a.createElement("img",{src:K.ZP+"/thumbnail/"+e.picture,alt:"Member Profile Pic"}),a.createElement("div",{className:"cohort-member-email"},a.createElement("a",{href:"mailto:"+e.email},e.email))))}},{key:"renderCohort",value:function(){for(var e=this.state.displayedMembers,t=[],n=0;n<e.length;n++)t.push(this.renderMember(e[n],n));return t}},{key:"renderMemberLessons",value:function(e){for(var t=this.props.lessons,n=[],r=0,s=0,o=0,l=0;l<t.length;l++){var i=t[l]._id;if(e.lessonData&&e.lessonData[i]){var c=e.lessonData[i];r=ce()(le()(100*c.progress),100),s=(0,Ee.Z)(c.spentTime),o+=c.spentTime}else r=0,s=(0,Ee.Z)(0);n.push(a.createElement("div",{key:l},a.createElement("div",{className:"cohort-actual-member-lesson-title"},t[l].title),a.createElement(he.Z,{className:"cohort-actual-member-lesson-progress",style:{float:"left",fontSize:"10px",height:"12px"},now:r,label:"".concat(r,"%")}),a.createElement("span",{className:"cohort-actual-member-lesson-time"},s)))}return o=(0,Ee.Z)(o),a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement("div",{className:"cohort-actual-member-lesson-header"},"COURSE INFO"),a.createElement("div",{className:"cohort-actual-member-lesson-total"},"COURSE TOTAL TIME: ",o),a.createElement("div",{className:"lessons-area"},n))}},{key:"renderMemberBadges",value:function(e){for(var t=this.props.badges,n=(0,Ee.Z)(e.spentTime),r=[],s=0;s<t.length;s++)O()(e.badges,t[s].name)&&r.push(a.createElement(a.Fragment,null,a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"isleTime"},t[s].description)},a.createElement("div",{className:"cohort-user-badge"},a.createElement("img",{src:K.ZP+"/badges/"+t[s].picture,alt:"User Badge"})))));return a.createElement(a.Fragment,null,a.createElement("div",null,"General User Info"),a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"isleTime"},"the time the user spent with ISLE")},a.createElement("span",{className:"user-info-time"},"ISLE TIME: ",n)),a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"isleTime"},"user score")},a.createElement("span",{className:"user-info-score"},"SCORE: ",e.score)),a.createElement("div",null),a.createElement("div",{className:"user-info-badges"},a.createElement("div",{className:"user-info-separator"},"Badges"),r))}},{key:"renderActualMember",value:function(){var e=this.state.actualMember,t=null;return e.createdAt&&(t=new Date(e.createdAt).toLocaleDateString()),a.createElement("div",{className:"cohort-actual-member"},a.createElement("button",{onClick:this.closeActualMember,className:"cohort-actual-member-exit empty-button"},"\u2715"),a.createElement("img",{className:"cohort-actual-member-portrait",src:K.ZP+"/avatar/"+e.picture,alt:"User Profile Pic"}),a.createElement("div",{className:"cohort-actual-member-portrait-shadow"}),t?a.createElement("div",{className:"cohort-actual-member-registered"},"registered since ",t):null,a.createElement("div",{className:"cohort-actual-member-name"},a.createElement("h3",null,e.name),a.createElement("div",null,e.email)),a.createElement("div",{className:"cohort-actual-member-info"},this.renderMemberLessons(e)),a.createElement("div",{className:"cohort-actual-member-badges"},this.renderMemberBadges(e)))}},{key:"render",value:function(){return a.createElement("div",{className:"namespace-data-page"},a.createElement("div",{style:{width:"100%",height:"40px"}},a.createElement(Ne.ZP,{value:this.state.selectedCohorts,isMulti:!0,name:"cohorts","aria-label":"Select cohorts",placeholder:"Select cohorts to display",options:this.state.cohortOptions,onChange:this.handleCohortChange})),a.createElement("div",{className:"cohort-page"},this.renderCohort()),this.state.actualMember?this.renderActualMember():null)}}]),n}(a.Component);Ce.defaultProps={};var Se=Ce,_e=n(12087),De=n.n(_e),Me=d()("isle:progress-page");function Pe(e,t){return function(n,a){var r=a[n.id][e[t]._id];if(de()(r))return 0===n.value.min;var s=r._sumPoints;return s>=n.value.min&&s<=n.value.max}}function Ae(e,t){if("all"===e.value)return!0;var n=e.pivotId||e.id;return void 0===t[n]||(ue()(e.value)?O()(e.value,String(t[n])):String(t[n])===e.value)}function Te(e,t){return function(n,a){return n=n[e[t]._id],a=a[e[t]._id],n||a?n&&!a?1:!n&&a?-1:n._sumPoints>a._sumPoints?1:n._sumPoints<a._sumPoints?-1:0:0}}var Ie=function(e){(0,c.Z)(n,e);var t=(0,m.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,u.Z)((0,i.Z)(r),"accessorFactory",(function(e,t){return function(n){var r=n.original.lessonGrades||{},s=e[t],o=s._id,l="";if(s.metadata&&s.metadata.grades&&(l+=" / ".concat(e[t].metadata.grades.maxPoints)),r=r[o]){var i=[];for(var c in r)De()(r,c)&&"_sumPoints"!==c&&i.push(a.createElement("p",{style:{margin:0},key:c},c,": ",a.createElement("b",{style:{float:"right",marginLeft:12}},r[c])));return a.createElement(N.Z,{placement:"top",overlay:a.createElement(Q.Z,{className:"tickets-description-overlay",body:!0,id:"description-tooltip"},i)},a.createElement("p",null,r._sumPoints,l))}return a.createElement("span",null)}})),(0,u.Z)((0,i.Z)(r),"saveJSON",(function(){var e=r.assembleData(),t=new Blob([JSON.stringify(e)],{type:"application/json"}),n="grades_".concat(r.props.namespace.title,".json");(0,G.Z)(t,n)})),(0,u.Z)((0,i.Z)(r),"saveCSV",(function(){var e=r.assembleData();E()(e,{header:!0},(function(e,t){if(e)return r.props.addNotification({title:"Error encountered",message:"Encountered an error while creating CSV: "+e.message,level:"error",position:"tl"});var n=new Blob([t],{type:"text/plain"}),a="grades_".concat(r.props.namespace.title,".csv");(0,G.Z)(n,a)}))})),(0,u.Z)((0,i.Z)(r),"toggleExplorer",(function(){r.setState({showExplorer:!r.state.showExplorer})})),r.columns=r.createColumns(e.lessons,e.cohorts),r.state={displayedMembers:[],lessonSortDirection:"ascending",lessonOrder:"createdAt",showExplorer:!1},r}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){this.createDisplayedMembers()}},{key:"componentDidUpdate",value:function(e){this.props.cohorts===e.cohorts&&this.props.lessons===e.lessons||(this.createDisplayedMembers(),this.columns=this.createColumns(this.props.lessons,this.props.cohorts))}},{key:"createDisplayedMembers",value:function(){for(var e=[],t=0;t<this.props.cohorts.length;t++){for(var n=this.props.cohorts[t].members,a=0;a<n.length;a++)n[a].cohort=this.props.cohorts[t].title,n[a].lessonGrades||(n[a].lessonGrades={});e=e.concat(this.props.cohorts[t].members)}for(var r=0;r<e.length;r++){var s=e[r],o=B()(s.name).split(" ");o.length>1?(s.lastName=o.pop(),s.firstName=o.join(" ")):(s.firstName=o[0],s.lastName="")}this.setState({displayedMembers:e})}},{key:"createColumns",value:function(e,t){for(var n=this,r=this.props.t,s=[{Header:"Pic",accessor:"picture",Cell:function(e){return a.createElement("img",{className:"table-pic",src:"".concat(K.ZP,"/thumbnail/").concat(e.original.picture),alt:"Profile Pic"})},maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1,style:{color:"darkslategrey"}},{Header:r("first-name"),id:"first_name",accessor:"firstName",maxWidth:75,style:{marginTop:"8px",color:"darkslategrey"},filterMethod:function(e,t){return O()(H()(t[e.id]),H()(e.value))}},{Header:r("last-name"),id:"last_name",accessor:"lastName",maxWidth:75,style:{marginTop:"8px",color:"darkslategrey"},filterMethod:function(e,t){return O()(H()(t[e.id]),H()(e.value))}},{Header:r("common:email"),accessor:"email",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"},filterMethod:function(e,t){return O()(H()(t[e.id]),H()(e.value))}},{Header:r("common:cohort"),accessor:"cohort",style:{marginTop:"8px",color:"darkslategrey"},filterMethod:Ae,Filter:function(e){var n,r=e.filter,s=e.onChange,o=function(e){var t=e.target.value;s(t)};return n=r?ue()(r.value)?r.value.join(", "):r.value:"all",a.createElement("select",{onBlur:o,onChange:o,style:{width:"100%",backgroundColor:"ghostwhite"},value:n},a.createElement("option",{value:"all"},"Show All"),t.map((function(e,t){return a.createElement("option",{key:t,value:"".concat(e.title)},e.title)})))}}],o=function(t){s.push({id:"lesson_"+t,Header:e[t].title,_lesson:e[t],Cell:n.accessorFactory(e,t),sortMethod:Te(e,t),filterMethod:Pe(e,t),Filter:function(n){var r=n.filter,s=n.onChange,o=0;e[t].metadata&&e[t].metadata.grades&&(o=e[t].metadata.grades.maxPoints);var l={max:o,min:0};return a.createElement("div",{style:{paddingLeft:"4px",paddingRight:"4px",paddingTop:"8px"}},a.createElement(y(),{allowSameValues:!0,maxValue:o,minValue:0,value:r?r.value:l,onChange:function(e){s(e)}}))},accessor:"lessonGrades"})},l=0;l<e.length;l++)o(l);return s}},{key:"reorderColumns",value:function(e,t){return Me("Sort columns by "+e+" in "+t+" order"),"ascending"===t?this.columns.slice().sort((function(t,n){return t._lesson&&n._lesson?"title"===e?t._lesson.title.localeCompare(n._lesson.title):t._lesson[e]>n._lesson[e]?1:-1:1})):this.columns.slice().sort((function(t,n){return t._lesson&&n._lesson?"title"===e?n._lesson.title.localeCompare(t._lesson.title):t._lesson[e]<n._lesson[e]?1:-1:1}))}},{key:"assembleData",value:function(){for(var e=this.dashboardTable.table.getResolvedState().sortedData,t=e.length,n=new Array(t),a=this.props.lessons,r=0;r<t;r++){var s=e[r]._original;n[r]={name:s.name,firstName:s.firstName,lastName:s.lastName,email:s.email,cohort:s.cohort};for(var o=this.props.user.availableCustomFields,l=0;l<o.length;l++){var i=o[l].name;s.customFields?n[r][i]=s.customFields[i]:n[r][i]=null}for(var c=0;c<a.length;c++){var m=a[c]._id,u=s.lessonGrades;u&&u[m]?(u=u[m],n[r][a[c].title]=u._sumPoints):n[r][a[c].title]=""}}return n}},{key:"renderSortButton",value:function(){var e,t=this,n=this.props.t;switch(this.state.lessonOrder){case"title":e=n("common:sort-alphabetically");break;case"createdAt":e=n("common:sort-create-date");break;case"updatedAt":e=n("common:sort-update-date")}return a.createElement(Z.Z,{className:"sort-button-group"},a.createElement(re.Z,{size:"sm",variant:"secondary",onSelect:function(e){t.columns=t.reorderColumns(e,t.state.lessonSortDirection),t.setState({lessonOrder:e})},id:"dropdown",title:a.createElement("small",null,e)},a.createElement(se.Z.Item,{eventKey:"title"},a.createElement("small",null,n("common:sort-alphabetically"))),a.createElement(se.Z.Item,{eventKey:"createdAt"},a.createElement("small",null,n("common:sort-create-date"))),a.createElement(se.Z.Item,{eventKey:"updatedAt"},a.createElement("small",null,n("common:sort-update-date")))),a.createElement(k.Z,{size:"sm",variant:"secondary",style:{marginLeft:2},onClick:function(){"ascending"===t.state.lessonSortDirection?(t.columns=t.reorderColumns(t.state.lessonOrder,"descending"),t.setState({lessonSortDirection:"descending"})):(t.columns=t.reorderColumns(t.state.lessonOrder,"ascending"),t.setState({lessonSortDirection:"ascending"}))},"aria-label":"ascending"===this.state.lessonSortDirection?n("common:sort-descending"):n("common:sort-ascending")},"ascending"===this.state.lessonSortDirection?a.createElement("i",{className:"fas fa-arrow-right"}):a.createElement("i",{className:"fas fa-arrow-left"})))}},{key:"render",value:function(){var e=this,t=this.props.t;if(this.state.showExplorer){var n=this.assembleData();n=(0,j.Z)(n);for(var r=[],s=["name","email","cohort"],o=0;o<this.props.lessons.length;o++)r.push(this.props.lessons[o].title);for(var l=this.props.user.availableCustomFields,i=0;i<l.length;i++)s.push(l[i].name);return a.createElement(U.Z,{title:t("explorer-grades-title"),data:n,categorical:s,quantitative:r,close:this.toggleExplorer})}return a.createElement(a.Fragment,null,a.createElement("div",{className:"namespace-data-buttons"},this.renderSortButton(),a.createElement(Z.Z,{className:"progress-button-group"},a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"csvTooltip"},t("save-as-csv"))},a.createElement(k.Z,{size:"sm",variant:"secondary",onClick:this.saveCSV},a.createElement("i",{className:"fas fa-download"})," CSV")),a.createElement(N.Z,{placement:"bottom",overlay:a.createElement(C.Z,{id:"jsonTooltip"},t("save-as-json"))},a.createElement(k.Z,{size:"sm",variant:"secondary",onClick:this.saveJSON},a.createElement("i",{className:"fas fa-download"})," JSON")))),a.createElement("div",{className:"namespace-data-page"},a.createElement(W.Z,{className:"grades-table",data:this.state.displayedMembers,columns:this.columns,t:t,ref:function(t){e.dashboardTable=t},onButtonClick:this.toggleExplorer})))}}]),n}(a.Component);Ie.defaultProps={};var Fe=(0,h.Z)(["namespace_data","common"])(Ie),Le=n(22122),Oe=n(19756),ze=n(47617),He=n.n(ze),Re=n(41309),Be=n(42559),Ue=n(28785),je=n(78265),We=n.n(je),Ve=["children","name","className","checked","type","onChange","value","disabled","inputRef"],Ke=function(){},Ge=a.forwardRef((function(e,t){var n=e.children,r=e.name,s=e.className,o=e.checked,l=e.type,i=e.onChange,c=e.value,m=e.disabled,u=e.inputRef,p=(0,Oe.Z)(e,Ve),d=(0,a.useState)(!1),h=d[0],f=d[1],v=(0,a.useCallback)((function(e){"INPUT"===e.target.tagName&&f(!0)}),[]),g=(0,a.useCallback)((function(e){"INPUT"===e.target.tagName&&f(!1)}),[]);return a.createElement(k.Z,(0,Le.Z)({},p,{ref:t,className:We()(s,h&&"focus",m&&"disabled"),type:void 0,active:!!o,as:"label"}),a.createElement("input",{name:r,type:l,value:c,ref:u,autoComplete:"off",checked:!!o,disabled:!!m,onFocus:v,onBlur:g,onChange:i||Ke}),n)}));Ge.displayName="ToggleButton";var Je=Ge,qe=["children","type","name","value","onChange"],Ye=a.forwardRef((function(e,t){var n=(0,Re.Ch)(e,{value:"onChange"}),r=n.children,s=n.type,o=n.name,l=n.value,i=n.onChange,c=(0,Oe.Z)(n,qe),m=function(){return null==l?[]:[].concat(l)};return"radio"!==s||o||He()(!1),a.createElement(Z.Z,(0,Le.Z)({},c,{ref:t,toggle:!0}),(0,Ue.U)(r,(function(e){var t=m(),n=e.props,r=n.value,l=n.onChange;return a.cloneElement(e,{type:s,name:e.name||o,checked:-1!==t.indexOf(r),onChange:(0,Be.Z)(l,(function(e){return function(e,t){if(i){var n=m(),a=-1!==n.indexOf(e);"radio"!==s?i(a?n.filter((function(t){return t!==e})):[].concat(n,[e]),t):!a&&i&&i(e,t)}}(r,e)}))})})))}));Ye.defaultProps={type:"radio",vertical:!1},Ye.Button=Je;var $e=Ye,Xe=d()("isle-dashboard:namespace-data:actions-page"),Qe=function(e){(0,c.Z)(n,e);var t=(0,m.Z)(n);function n(e){var a;(0,o.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,i.Z)(a),"retrieveActions",(function(){a.props.getNamespaceActions({namespaceID:a.props.namespace._id,namespaceTitle:a.props.namespace.title})})),(0,u.Z)((0,i.Z)(a),"handleRadioChange",(function(e){a.setState({anonymized:!a.state.anonymized})})),(0,u.Z)((0,i.Z)(a),"handleCohortChange",(function(e){for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n].value.members);a.setState({selectedCohorts:e,displayedMembers:t},(function(){Xe("New number of displayed members: "+a.state.displayedMembers.length)}))})),(0,u.Z)((0,i.Z)(a),"hideLessonActions",(function(){a.setState({lessonActionsPage:!1})})),(0,u.Z)((0,i.Z)(a),"showLessonActions",(function(e){a.setState({lessonActionsPage:!0,actualLesson:e})}));for(var r=e.cohorts.map((function(e){return{label:e.title,value:e}})),s=[],l=0;l<e.cohorts.length;l++)s=s.concat(e.cohorts[l].members);return a.state={cohortOptions:r,selectedCohorts:r,displayedMembers:s,lessonActionsPage:!1,actualLesson:null,anonymized:!0},a}return(0,l.Z)(n,[{key:"renderCohorts",value:function(){return a.createElement(a.Fragment,null,a.createElement("div",{className:"actions-page-cohorts"},a.createElement("div",{style:{width:"400px",height:"40px"}},a.createElement(Ne.ZP,{value:this.state.selectedCohorts,isMulti:!0,name:"cohorts",options:this.state.cohortOptions,onChange:this.handleCohortChange}))))}},{key:"renderLessonActionsPage",value:function(){return a.createElement("div",{className:"actions-page-lesson-action-page"},a.createElement("div",{className:"lesson-action-page-resize"}," \ud83d\uddd6"),a.createElement("button",{onClick:this.hideLessonActions,className:"lesson-action-page-exit empty-button"},"\u2715"),a.createElement("div",{className:"lesson-action-page-title"},this.state.actualLesson.title),a.createElement("div",{className:"lesson-action-page-filter"},this.renderCohorts()))}},{key:"renderLessons",value:function(){for(var e=this,t=this.props.namespace.lessons,n=[],r=function(r){n.push(a.createElement("button",{key:r,onClick:function(){return e.showLessonActions(t[r])},className:"actions-page-lesson"},a.createElement("div",{className:"actions-page-lesson-title"},t[r].title)))},s=0;s<t.length;s++)r(s);return a.createElement("div",{className:"actions-page"},a.createElement("div",{className:"actions-page-export"},this.renderExportSection()),a.createElement("div",{className:"actions-page-lessons"},n))}},{key:"renderExportSection",value:function(){return a.createElement(a.Fragment,null,a.createElement("div",{className:"actions-page-export-title"},"Export Actions"),a.createElement($e,{name:"options",onChange:this.handleRadioChange,type:"radio",size:"small",value:this.state.anonymized},a.createElement(Je,{size:"sm",variant:"light",value:!1,style:{fontSize:"12px",color:this.state.anonymized?"#A9A9A9":"black"}},"Original"),a.createElement(Je,{size:"sm",variant:"light",value:!0,style:{fontSize:"12px",color:this.state.anonymized?"black":"#A9A9A9"}},"Anonymized")),a.createElement(k.Z,{onClick:this.retrieveActions},"Save all namespace actions"))}},{key:"render",value:function(){return a.createElement("div",{className:"namespace-data-page"},this.renderLessons(),this.state.lessonActionsPage?this.renderLessonActionsPage():null)}}]),n}(a.Component);Qe.defaultProps={};var et=Qe,tt=n(87757),nt=n.n(tt),at=n(92137),rt=n(51527),st=n.n(rt),ot=n(14444),lt=n.n(ot),it=n(91499),ct=n.n(it),mt=n(92637),ut=n(1249),pt=n(2388),dt=n(38409),ht=n(80062),ft=n(70384),vt=d()("isle:files-page"),gt=/ticket=([^&]*)/,Et=function(e){(0,c.Z)(r,e);var t,n=(0,m.Z)(r);function r(e){var t;return(0,o.Z)(this,r),t=n.call(this,e),(0,u.Z)((0,i.Z)(t),"toggleTicketModal",(function(){t.setState({showTicketModal:!t.state.showTicketModal})})),(0,u.Z)((0,i.Z)(t),"createColumns",(function(){for(var e=t.props.t,n=t.props.tickets||[],r=lt(),s=0,o=0;o<n.length;o++)n[o].createdAt>s&&(s=n[o].createdAt),n[o].updatedAt>s&&(s=n[o].updatedAt),n[o].createdAt<r&&(r=n[o].createdAt),n[o].updatedAt<r&&(r=n[o].updatedAt);return s=st()(s),r=st()(r),[{Header:"Pic",accessor:"user.picture",Cell:function(e){return a.createElement("img",{className:"table-pic",src:"".concat(K.ZP,"/thumbnail/").concat(e.value),alt:"Profile Pic"})},style:{marginTop:"8px",color:"darkslategrey"},maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1},(0,dt.Z)({Header:e("common:name"),accessor:"user.name",style:{marginTop:"8px",color:"darkslategrey"}}),(0,dt.Z)({Header:e("common:email"),accessor:"user.email",style:{marginTop:"8px",color:"darkslategrey"}}),(0,dt.Z)({Header:e("common:title"),accessor:"title",minWidth:200}),{Header:e("common:description"),accessor:"description",Cell:function(e){return a.createElement(N.Z,{placement:"top",overlay:a.createElement(Q.Z,{className:"tickets-description-overlay",body:!0,id:"description-tooltip"},e.value)},a.createElement("p",{className:"tickets-description"},e.value))},style:{marginTop:"8px",color:"darkslategrey"},minWidth:300},(0,dt.Z)({Header:e("common:component"),accessor:"component"}),{Header:"Reply",accessor:"_id",Cell:function(n){return a.createElement(N.Z,{placement:"left",overlay:a.createElement(C.Z,{id:"open-ticket-tooltip"},e("common:open-ticket-tooltip"))},a.createElement(k.Z,{size:"sm",variant:"outline-secondary",onClick:function(){t.setState({selectedTicket:n.original},t.toggleTicketModal)}},a.createElement("i",{className:"fas fa-reply"})))},resizable:!1,filterable:!1,sortable:!1,width:45},(0,ut.Z)({Header:e("common:priority"),accessor:"priority",labels:["Low","Middle","High"],maxWidth:200,Cell:function(e){if(!e.value)return null;var n,r,s;switch(e.value){case"Low":n="secondary",r="Middle";break;case"Middle":n="warning",r="High",s="Low";break;case"High":n="danger",s="Middle"}return a.createElement("div",null,a.createElement(S.Z,{variant:n,style:{marginRight:6,fontSize:"1em"}},e.value),a.createElement(k.Z,{size:"sm",variant:"outline-secondary",onClick:function(){t.props.updatePriority(e.original._id,r)},disabled:!r},a.createElement("i",{className:"fas fa-arrow-up"})),a.createElement(k.Z,{size:"sm",variant:"outline-secondary",onClick:function(){t.props.updatePriority(e.original._id,s)},disabled:!s},a.createElement("i",{className:"fas fa-arrow-down"})))}}),(0,dt.Z)({Header:e("common:lesson"),accessor:"lesson.title",maxWidth:140,Cell:function(n){if(!n.value)return null;var r="".concat(K.ZP,"/").concat(t.props.namespace.title,"/").concat(n.value);return a.createElement(N.Z,{placement:"right",overlay:a.createElement(C.Z,{id:"open-lesson-tooltip"},e("namespace_data:open-lesson-new-tab"))},a.createElement(S.Z,{variant:"light",style:{fontSize:"1em"}},a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer"},n.value)))}}),(0,pt.Z)({Header:e("common:done"),accessor:"done",trueLabel:e("common:done"),falseLabel:e("common:not-done")}),{Header:e("common:platform"),accessor:"platform",style:{marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center",cursor:"pointer"},Cell:function(e){if(e.value){var t=a.createElement(mt.Z,{id:"popover-data",style:{maxWidth:500,maxHeight:"80vh",overflowY:"auto"},arrowProps:{display:"none"}},a.createElement(mt.Z.Title,{as:"h3"},e.row._original.title),a.createElement(mt.Z.Content,{style:{backgroundColor:"lightblue"}},a.createElement("pre",null,JSON.stringify(ct()(e.value,["description"]),null,2))));return a.createElement(N.Z,{trigger:"click",placement:"left",overlay:t},a.createElement("i",{className:"data-icon fas fa-tablet-alt"}))}return null},maxWidth:75,resizable:!1,filterable:!1,sortable:!1},(0,ht.Z)({Header:e("created-at"),accessor:"createdAt",startDate:r,endDate:s})]})),(0,u.Z)((0,i.Z)(t),"toggleExplorer",(function(){t.setState({showExplorer:!t.state.showExplorer})})),(0,u.Z)((0,i.Z)(t),"assembleExplorerData",(function(){for(var e=t.props.tickets,n=[],a=0;a<e.length;a++){var r=e[a],s={};s.component=r.component,s.title=r.title,s.description=r.description,s.lesson=r.lesson?r.lesson.title:null,s.messages=r.messages.length,s.attachments=r.attachments.length,s.user=r.user.email,s.done=r.done,s.priority=r.priority,s.browser="".concat(r.platform.name," ").concat(r.platform.version);var o=r.platform.os;s.os="".concat(o.family," ").concat(o.version?o.version:""," ").concat(o.architecture,"bit"),s.createdAt=r.createdAt,s.updatedAt=r.updatedAt,n.push(s)}return n=(0,j.Z)(n)})),t.state={showTicketModal:!1,selectedTicket:null,showExplorer:!1},t.columns=t.createColumns(),t}return(0,l.Z)(r,[{key:"componentDidMount",value:(t=(0,at.Z)(nt().mark((function e(){var t,n,a,r;return nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vt("Component did mount..."),e.next=3,this.props.getCourseTickets(this.props.namespace._id);case 3:if(!this.props.history.location.search){e.next=16;break}if(!(t=gt.exec(this.props.history.location.search))||!t[1]){e.next=16;break}n=this.props.tickets,a=0;case 8:if(!(a<n.length)){e.next=16;break}if((r=n[a])._id!==t[1]){e.next=13;break}return this.setState({selectedTicket:r,showTicketModal:!0}),e.abrupt("break",16);case 13:a++,e.next=8;break;case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.t;return this.state.showExplorer?a.createElement(U.Z,{title:e("explorer-tickets-title"),data:this.assembleExplorerData(),categorical:["component","lesson","done","createdAt","updatedAt","priority","browser","os"],quantitative:["messages","attachments"],close:this.toggleExplorer}):a.createElement("div",{className:"namespace-data-page"},a.createElement(W.Z,{data:this.props.tickets,columns:this.columns,t:e,onButtonClick:this.toggleExplorer}),this.state.showTicketModal?a.createElement(ft.Z,{show:this.state.showTicketModal,onHide:this.toggleTicketModal,ticket:this.state.selectedTicket,submitTicketMessage:this.props.submitTicketMessage,openTicket:this.props.openTicket,closeTicket:this.props.closeTicket}):null)}}]),r}(a.Component);Et.defaultProps={tickets:[]};var bt=(0,h.Z)(["namespace_data","common"])(Et),yt=d()("isle-dashboard:namespace-data"),Zt=function(e){(0,c.Z)(n,e);var t=(0,m.Z)(n);function n(e){var a,r;switch((0,o.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,i.Z)(a),"handleUpload",(function(e){yt("Uploading file...");var t=e.target.files[0],n=new FormData;n.append("file",t,t.name),n.append("namespaceName",a.props.namespace.title),n.append("owner","true"),a.props.uploadFile({formData:n,user:a.props.user})})),(0,u.Z)((0,i.Z)(a),"handleAnnouncementDeletion",(function(e,t){a.props.deleteAnnouncement({namespaceName:a.props.namespace.title,index:t,createdAt:e})})),(0,u.Z)((0,i.Z)(a),"handleAnnouncementEdit",(function(e){a.props.editAnnouncement({namespaceName:a.props.namespace.title,announcement:e})})),(0,u.Z)((0,i.Z)(a),"handleAnnouncementCreation",(function(e){a.props.addAnnouncement({namespaceName:a.props.namespace.title,announcement:e})})),(0,u.Z)((0,i.Z)(a),"handleFileDeletion",(function(e,t){a.props.deleteFile(e,a.props.namespace.title,t)})),(0,u.Z)((0,i.Z)(a),"submitTicketMessage",(function(e){var t=e.message,n=e.ticketID;a.props.sendTicketMessage({message:t,ticketID:n,user:a.props.user})})),(0,u.Z)((0,i.Z)(a),"handleSelect",(function(e){e=Number(e);var t=a.props.namespace.title;switch(e){case 1:a.props.history.replace("/namespace-data/".concat(t,"/announcements"));break;case 2:a.props.history.replace("/namespace-data/".concat(t,"/progress"));break;case 3:a.props.history.replace("/namespace-data/".concat(t,"/grades"));break;case 4:a.props.history.replace("/namespace-data/".concat(t,"/cohorts"));break;case 5:a.props.history.replace("/namespace-data/".concat(t,"/owner-files"));break;case 6:a.props.history.replace("/namespace-data/".concat(t,"/student-files"));break;case 7:a.props.history.replace("/namespace-data/".concat(t,"/tickets"));break;case 8:a.props.history.replace("/namespace-data/".concat(t,"/actions"))}a.setState({activePage:e})})),e.match.params.subpage){default:case"announcements":r=1;break;case"progress":r=2;break;case"grades":r=3;break;case"cohorts":r=4;break;case"owner-files":r=5;break;case"student-files":r=6;break;case"tickets":r=7;break;case"actions":r=8}return a.state={activePage:r},a}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){this.props.getBadges()}},{key:"renderPage",value:function(){switch(this.state.activePage){case 1:return a.createElement(ae,{namespace:this.props.namespace,editAnnouncement:this.handleAnnouncementEdit,deleteAnnouncement:this.handleAnnouncementDeletion,addAnnouncement:this.handleAnnouncementCreation,user:this.props.user});case 2:return a.createElement(xe,{adjustProgress:this.props.adjustProgress,addNotification:this.props.addNotification,namespace:this.props.namespace,cohorts:this.props.namespace.cohorts,lessons:this.props.namespace.lessons,user:this.props.user});case 3:return a.createElement(Fe,{addNotification:this.props.addNotification,namespace:this.props.namespace,cohorts:this.props.namespace.cohorts,lessons:this.props.namespace.lessons,user:this.props.user});case 4:return a.createElement(Se,{badges:this.props.badges,cohorts:this.props.namespace.cohorts,lessons:this.props.namespace.lessons});case 5:return a.createElement(X,{ownerFiles:!0,files:this.props.namespace.ownerFiles,namespace:this.props.namespace,handleUpload:this.handleUpload,handleFileDeletion:this.handleFileDeletion,addNotification:this.props.addNotification,getFiles:this.props.getOwnerFiles});case 6:return a.createElement(X,{files:this.props.namespace.files,namespace:this.props.namespace,handleUpload:this.handleUpload,handleFileDeletion:this.handleFileDeletion,addNotification:this.props.addNotification,getFiles:this.props.getFiles});case 7:return a.createElement(bt,{tickets:this.props.namespace.tickets,namespace:this.props.namespace,getCourseTickets:this.props.getCourseTickets,submitTicketMessage:this.submitTicketMessage,openTicket:this.props.openTicket,closeTicket:this.props.closeTicket,updatePriority:this.props.updatePriority,history:this.props.history});case 8:return a.createElement(et,{namespace:this.props.namespace,getNamespaceActions:this.props.getNamespaceActions,user:this.props.user,cohorts:this.props.namespace.cohorts})}}},{key:"render",value:function(){var e=this.props.t;if(!this.props.namespace._id)return a.createElement("div",{className:"namespace-data-div"},a.createElement(f.Z,{variant:"danger"},e("common:no-course-selected")));var t=this.renderPage();return a.createElement("div",{className:"namespace-data-div"},a.createElement("div",{className:"namespace-data-navbar"},a.createElement(v.Z,{variant:"pills",className:"namespace-data-navbar-pills",activeKey:this.state.activePage,onSelect:this.handleSelect},a.createElement(v.Z.Item,null,a.createElement(v.Z.Link,{eventKey:"1",title:"Announcements"},e("common:announcements"))),a.createElement(v.Z.Item,null,a.createElement(v.Z.Link,{eventKey:"2",title:"Progress"},e("common:progress"))),a.createElement(v.Z.Item,null,a.createElement(v.Z.Link,{eventKey:"3",title:"Grades"},e("grades"))),a.createElement(v.Z.Item,null,a.createElement(v.Z.Link,{eventKey:"4",title:"Cohorts"},e("common:cohorts"))),a.createElement(v.Z.Item,null,a.createElement(v.Z.Link,{eventKey:"5",title:"Owner Files"},e("owner-files"))),a.createElement(v.Z.Item,null,a.createElement(v.Z.Link,{eventKey:"6",title:"Student Files"},e("student-files"))),a.createElement(v.Z.Item,null,a.createElement(v.Z.Link,{eventKey:"7",title:"Tickets",disabled:!this.props.namespace.enableTicketing},e("common:tickets"))),a.createElement(v.Z.Item,null,a.createElement(v.Z.Link,{eventKey:"8",title:"Actions",disabled:!0},e("common:actions"))))),a.createElement("div",{className:"namespace-data-page-container",style:{overflowY:"auto"}},t))}}]),n}(a.Component);Zt.defaultProps={badges:null};var kt=(0,h.Z)(["namespace_data","common"])(Zt),wt=n(33357),xt=n(41985),Nt=n(605);function Ct(e,t){return{type:wt.wx,payload:{announcement:e,namespaceName:t}}}function St(e,t){return{type:wt.H0,payload:{announcement:e,namespaceName:t}}}function _t(e,t){return{type:wt.wd,payload:{index:e,namespaceName:t}}}var Dt=function(){var e=(0,at.Z)(nt().mark((function e(t,n){var a,r,s;return nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.namespaceName,r=n.announcement,e.prev=1,e.next=4,Nt.eC.post(K.ZP+"/new_announcement",{namespaceName:a,announcement:r});case 4:s=e.sent,(0,xt.wN)(t,{message:s.data.message,level:"success"}),t(St(r,a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,xt.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Mt=function(e){return function(){var t=(0,at.Z)(nt().mark((function t(n){var a,r;return nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.namespaceName,r=n.announcement,t.next=3,Dt(e,{namespaceName:a,announcement:r});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Pt=function(){var e=(0,at.Z)(nt().mark((function e(t,n){var a,r,s,o;return nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.namespaceName,r=n.createdAt,s=n.index,e.prev=1,e.next=4,Nt.eC.post(K.ZP+"/delete_announcement",{namespaceName:a,createdAt:r});case 4:o=e.sent,(0,xt.wN)(t,{message:o.data.message,level:"success"}),t(_t(s,a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,xt.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),At=function(e){return function(){var t=(0,at.Z)(nt().mark((function t(n){var a,r,s;return nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.namespaceName,r=n.createdAt,s=n.index,t.next=3,Pt(e,{namespaceName:a,createdAt:r,index:s});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Tt=function(){var e=(0,at.Z)(nt().mark((function e(t,n){var a,r,s;return nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.namespaceName,r=n.announcement,e.prev=1,e.next=4,Nt.eC.post(K.ZP+"/edit_announcement",{namespaceName:a,announcement:r});case 4:s=e.sent,(0,xt.wN)(t,{message:s.data.message,level:"success"}),t(Ct(r,a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,xt.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),It=function(e){return function(){var t=(0,at.Z)(nt().mark((function t(n){var a,r;return nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.namespaceName,r=n.announcement,t.next=3,Tt(e,{namespaceName:a,announcement:r});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ft=n(96128),Lt=n(1725),Ot=n(905),zt=n(82406);var Ht=(0,r.$j)((function(e){return{badges:e.badges,user:e.user,namespace:e.namespace}}),(function(e){return{adjustProgress:(0,Ot.Tm)(e),getBadges:(0,Ft.Zl)(e),getCourseTickets:(0,zt.P3)(e),getFiles:(0,Lt.TK)(e),getOwnerFiles:(0,Lt.Ru)(e),getNamespaceActions:(0,Ot.qw)(e),addNotification:(0,xt.pP)(e),deleteFile:(0,Lt.ns)(e),deleteAnnouncement:At(e),editAnnouncement:It(e),addAnnouncement:Mt(e),sendTicketMessage:(0,zt.fG)(e),closeTicket:(0,zt.xG)(e),openTicket:(0,zt.mJ)(e),uploadFile:(0,Lt.E8)(e),updatePriority:(0,zt.Cq)(e)}}))(kt),Rt=(0,s.EN)(Ht)},83531:function(e,t){"use strict";var n=/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i;function a(e){setImmediate((function(){throw e}),0)}function r(e){return n.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}var s=function(e){if(!("undefined"===typeof e||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in t,s=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),l=e.setImmediate||e.setTimeout,i=u.prototype;return"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=r(e)),navigator.msSaveOrOpenBlob(e,t)}:(i.abort=function(){},i.readyState=i.INIT=0,i.WRITING=1,i.DONE=2,i.error=null,i.onwritestart=null,i.onprogress=null,i.onwrite=null,i.onabort=null,i.onerror=null,i.onwriteend=null,function(e,t,n){return new u(e,t||e.name||"download",n)})}function c(){return e.URL||e.webkitURL||e}function m(e){setTimeout((function(){"string"===typeof e?c().revokeObjectURL(e):e.remove()}),4e4)}function u(i,u,p){p||(i=r(i));var d,h=this,f="application/octet-stream"===i.type;function v(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var s=e["on"+t[r]];if("function"===typeof s)try{s.call(e,n||e)}catch(o){a(o)}}}(h,"writestart progress write writeend".split(" "))}if(h.readyState=h.INIT,n)return d=c().createObjectURL(i),void l((function(){var e,n;t.href=d,t.download=u,e=t,n=new MouseEvent("click"),e.dispatchEvent(n),v(),m(d),h.readyState=h.DONE}),0);!function(){if((o||f&&s)&&e.FileReader){var t=new FileReader;return t.onloadend=function(){var n=o?t.result:t.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(n,"_blank")||(e.location.href=n),n=void 0,h.readyState=h.DONE,v()},t.readAsDataURL(i),void(h.readyState=h.INIT)}d||(d=c().createObjectURL(i)),f?e.location.href=d:e.open(d,"_blank")||(e.location.href=d),h.readyState=h.DONE,v(),m(d)}()}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||(void 0).content);t.Z=s},75033:function(e,t,n){"use strict";var a=n(42339),r=n.n(a);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{hours:!0,minutes:!0,seconds:!0};e/=1e3;var n=r()(e/3600);e%=3600;var a=r()(e/60);a<10&&(a="0"+a),e%=60;var s=r()(e);s<10&&(s="0"+s);var o="";return t.hours&&(o+=n),t.minutes&&(o&&(o+=":"),o+=a),t.seconds&&(o&&(o+=":"),o+=s),o}},96967:function(e,t,n){"use strict";var a=n(64949);e.exports=a},64949:function(e){"use strict";e.exports=function(e){return void 0===e||null===e}},63989:function(e){"use strict";e.exports=9007199254740991},19758:function(e,t,n){"use strict";var a=n(43022);e.exports=a},43022:function(e,t,n){"use strict";var a=n(14444),r=n(27394);e.exports=function(e){return e===a||e===r}},96551:function(e,t,n){"use strict";var a=n(96671);e.exports=a},96671:function(e,t,n){"use strict";var a=n(27394);e.exports=function(e){return 0===e&&1/e===a}},28135:function(e,t,n){"use strict";var a=n(16943);e.exports=a},16943:function(e){"use strict";e.exports=function(e){return Math.abs(e)}},80213:function(e,t,n){"use strict";var a=n(46501);e.exports=a},46501:function(e){"use strict";var t=Math.ceil;e.exports=t},79693:function(e,t,n){"use strict";var a=n(63388);e.exports=a},63388:function(e,t,n){"use strict";var a=n(62423),r=n(96551);e.exports=function(e,t,n){return a(e)||a(t)||a(n)?NaN:e<t?t:e>n?n:0===t&&r(e)?t:0===e&&r(n)?n:e}},74321:function(e,t,n){"use strict";var a=n(52118);e.exports=a},52118:function(e,t,n){"use strict";var a=n(96551),r=n(62423),s=n(27394),o=n(14444);e.exports=function(e,t){var n,l,i,c;if(2===(n=arguments.length))return r(e)||r(t)?NaN:e===s||t===s?s:e===t&&0===e?a(e)?e:t:e<t?e:t;for(l=o,c=0;c<n;c++){if(r(i=arguments[c])||i===s)return i;(i<l||i===l&&0===i&&a(i))&&(l=i)}return l}},91499:function(e,t,n){"use strict";var a=n(50296);e.exports=a},50296:function(e,t,n){"use strict";var a=n(67583),r=n(20842).isPrimitive,s=n(34867).primitives,o=n(64868);e.exports=function(e,t){var n,l,i,c;if("object"!==typeof e||null===e)throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(n=a(e),l={},r(t)){for(c=0;c<n.length;c++)(i=n[c])!==t&&(l[i]=e[i]);return l}if(s(t)){for(c=0;c<n.length;c++)i=n[c],-1===o(t,i)&&(l[i]=e[i]);return l}throw new TypeError("invalid argument. Second argument must be either a string primitive or an array of string primitives. Value: `"+t+"`.")}},26881:function(e,t,n){"use strict";var a=n(22122),r=n(19756),s=n(78265),o=n.n(s),l=n(41488),i=n(41309),c=n(71605),m=n(38674),u=n(61350),p=n(77096),d=n(90855),h=n(60665),f=n(88843),v=["bsPrefix","show","closeLabel","className","children","variant","onClose","dismissible","transition"],g=(0,d.Z)("h4");g.displayName="DivStyledAsH4";var E=(0,h.Z)("alert-heading",{Component:g}),b=(0,h.Z)("alert-link",{Component:f.Z}),y={show:!0,transition:u.Z,closeLabel:"Close alert"},Z=l.forwardRef((function(e,t){var n=(0,i.Ch)(e,{show:"onClose"}),s=n.bsPrefix,d=n.show,h=n.closeLabel,f=n.className,g=n.children,E=n.variant,b=n.onClose,y=n.dismissible,Z=n.transition,k=(0,r.Z)(n,v),w=(0,m.vE)(s,"alert"),x=(0,c.Z)((function(e){b&&b(!1,e)})),N=!0===Z?u.Z:Z,C=l.createElement("div",(0,a.Z)({role:"alert"},N?void 0:k,{ref:t,className:o()(f,w,E&&w+"-"+E,y&&w+"-dismissible")}),y&&l.createElement(p.Z,{onClick:x,label:h}),g);return N?l.createElement(N,(0,a.Z)({unmountOnExit:!0},k,{ref:void 0,in:d}),C):d?C:null}));Z.displayName="Alert",Z.defaultProps=y,Z.Link=b,Z.Heading=E,t.Z=Z},92855:function(e,t,n){"use strict";var a=n(22122),r=n(19756),s=n(41488),o=n(83603),l=n.n(o),i=n(36394),c=n(79429),m=n(71668),u=["title","children","bsPrefix","rootCloseEvent","variant","size","menuAlign","menuRole","renderMenuOnMount","disabled","href","id"],p={id:l().any,href:l().string,onClick:l().func,title:l().node.isRequired,disabled:l().bool,menuAlign:m.r,menuRole:l().string,renderMenuOnMount:l().bool,rootCloseEvent:l().string,bsPrefix:l().string,variant:l().string,size:l().string},d=s.forwardRef((function(e,t){var n=e.title,o=e.children,l=e.bsPrefix,p=e.rootCloseEvent,d=e.variant,h=e.size,f=e.menuAlign,v=e.menuRole,g=e.renderMenuOnMount,E=e.disabled,b=e.href,y=e.id,Z=(0,r.Z)(e,u);return s.createElement(i.Z,(0,a.Z)({ref:t},Z),s.createElement(c.Z,{id:y,href:b,size:h,variant:d,disabled:E,childBsPrefix:l},n),s.createElement(m.Z,{align:f,role:v,renderOnMount:g,rootCloseEvent:p},o))}));d.displayName="DropdownButton",d.propTypes=p,t.Z=d},28785:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var a=n(41488);function r(e,t){var n=0;return a.Children.map(e,(function(e){return a.isValidElement(e)?t(e,n++):e}))}},66310:function(e,t,n){"use strict";var a=n(22122),r=n(19756),s=n(78265),o=n.n(s),l=n(41488),i=n(38674),c=n(28785),m=["min","now","max","label","srOnly","striped","animated","className","style","variant","bsPrefix"],u=["isChild"],p=["min","now","max","label","srOnly","striped","animated","bsPrefix","variant","className","children"];function d(e,t,n){var a=(e-t)/(n-t)*100;return Math.round(1e3*a)/1e3}function h(e,t){var n,s=e.min,i=e.now,c=e.max,u=e.label,p=e.srOnly,h=e.striped,f=e.animated,v=e.className,g=e.style,E=e.variant,b=e.bsPrefix,y=(0,r.Z)(e,m);return l.createElement("div",(0,a.Z)({ref:t},y,{role:"progressbar",className:o()(v,b+"-bar",(n={},n["bg-"+E]=E,n[b+"-bar-animated"]=f,n[b+"-bar-striped"]=f||h,n)),style:(0,a.Z)({width:d(i,s,c)+"%"},g),"aria-valuenow":i,"aria-valuemin":s,"aria-valuemax":c}),p?l.createElement("span",{className:"sr-only"},u):u)}var f=l.forwardRef((function(e,t){var n=e.isChild,s=(0,r.Z)(e,u);if(s.bsPrefix=(0,i.vE)(s.bsPrefix,"progress"),n)return h(s,t);var m=s.min,d=s.now,f=s.max,v=s.label,g=s.srOnly,E=s.striped,b=s.animated,y=s.bsPrefix,Z=s.variant,k=s.className,w=s.children,x=(0,r.Z)(s,p);return l.createElement("div",(0,a.Z)({ref:t},x,{className:o()(k,y)}),w?(0,c.U)(w,(function(e){return(0,l.cloneElement)(e,{isChild:!0})})):h({min:m,now:d,max:f,label:v,srOnly:g,striped:E,animated:b,bsPrefix:y,variant:Z},t))}));f.displayName="ProgressBar",f.defaultProps={min:0,max:100,animated:!1,isChild:!1,srOnly:!1,striped:!1},t.Z=f},62173:function(){},87815:function(){}}]);
//# sourceMappingURL=2263.b82d0ca8.chunk.js.map